/*! For license information please see main.7827309b.js.LICENSE.txt */
(()=>{var e={356:(e,t,n)=>{e.exports=n(9645).last},579:(e,t,n)=>{"use strict";e.exports=n(1153)},870:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObject=function(e){return null!==e&&("object"===typeof e||"function"===typeof e)}},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},1203:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(8420);t.isArrayLike=function(e){return null!=e&&"function"!==typeof e&&r.isLength(e.length)}},1293:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(4830);t.debounce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"!==typeof n&&(n={});const{leading:i=!1,trailing:a=!0,maxWait:s}=n,o=Array(2);let l;i&&(o[0]="leading"),a&&(o[1]="trailing");let c=null;const u=r.debounce(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];l=e.apply(this,n),c=null},t,{edges:o}),d=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return null!=s&&(null===c&&(c=Date.now()),Date.now()-c>=s)?(l=e.apply(this,n),c=Date.now(),u.cancel(),u.schedule(),l):(u.apply(this,n),l)};return d.cancel=u.cancel,d.flush=()=>(u.flush(),l),d}},1444:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toPath=function(e){const t=[],n=e.length;if(0===n)return t;let r=0,i="",a="",s=!1;for(46===e.charCodeAt(0)&&(t.push(""),r++);r<n;){const o=e[r];a?"\\"===o&&r+1<n?(r++,i+=e[r]):o===a?a="":i+=o:s?'"'===o||"'"===o?a=o:"]"===o?(s=!1,t.push(i),i=""):i+=o:"["===o?(s=!0,i&&(t.push(i),i="")):"."===o?i&&(t.push(i),i=""):i+=o,r++}return i&&t.push(i),t}},2086:(e,t,n)=>{"use strict";e.exports=n(5082)},2104:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(1203),i=n(9921);t.isArrayLikeObject=function(e){return i.isObjectLike(e)&&r.isArrayLike(e)}},2132:(e,t,n)=>{"use strict";var r=n(2897).default;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(8268),a=n(870),s=n(4803),o=n(9972);function l(e,t,n,i){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,n,r){if(null==t)return!0;if(Array.isArray(t))return c(e,t,n,r);if(t instanceof Map)return function(e,t,n,r){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[i,a]of t.entries()){if(!1===n(e.get(i),a,i,e,t,r))return!1}return!0}(e,t,n,r);if(t instanceof Set)return u(e,t,n,r);const i=Object.keys(t);if(null==e)return 0===i.length;if(0===i.length)return!0;if(r&&r.has(t))return r.get(t)===e;r&&r.set(t,e);try{for(let a=0;a<i.length;a++){const o=i[a];if(!s.isPrimitive(e)&&!(o in e))return!1;if(void 0===t[o]&&void 0!==e[o])return!1;if(null===t[o]&&null!==e[o])return!1;if(!n(e[o],t[o],o,e,t,r))return!1}return!0}finally{r&&r.delete(t)}}(e,t,n,i);case"function":return Object.keys(t).length>0?l(e,r({},t),n,i):o.eq(e,t);default:return a.isObject(e)?"string"!==typeof t||""===t:o.eq(e,t)}}function c(e,t,n,r){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const i=new Set;for(let a=0;a<t.length;a++){const s=t[a];let o=!1;for(let l=0;l<e.length;l++){if(i.has(l))continue;let c=!1;if(n(e[l],s,a,e,t,r)&&(c=!0),c){i.add(l),o=!0;break}}if(!o)return!1}return!0}function u(e,t,n,r){return 0===t.size||e instanceof Set&&c([...e],[...t],n,r)}t.isMatchWith=function(e,t,n){return"function"!==typeof n?i.isMatch(e,t):l(e,t,function e(t,r,i,a,s,o){const c=n(t,r,i,a,s,o);return void 0!==c?Boolean(c):l(t,r,e,o)},new Map)},t.isSetMatch=u},2204:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(5316),i=n(7312),a=n(3799);t.sortBy=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const o=n.length;return o>1&&a.isIterateeCall(e,n[0],n[1])?n=[]:o>2&&a.isIterateeCall(n[0],n[1],n[2])&&(n=[n[0]]),r.orderBy(e,i.flatten(n),["asc"])}},2330:(e,t,n)=>{"use strict";var r=n(5043);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,s=r.useEffect,o=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return o(function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})},[e,n,t]),s(function(){return c(i)&&u({inst:i}),e(function(){c(i)&&u({inst:i})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},2489:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}},2682:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPlainObject=function(e){if("object"!==typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){var t;const n=e[Symbol.toStringTag];if(null==n)return!1;return!!(null!==(t=Object.getOwnPropertyDescriptor(e,Symbol.toStringTag))&&void 0!==t&&t.writable)&&e.toString()==="[object ".concat(n,"]")}let n=e;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}},2715:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(9599),i=n(7330),a=n(3808),s=n(8845);t.iteratee=function(e){if(null==e)return r.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?s.matchesProperty(e[0],e[1]):a.matches(e);case"string":case"symbol":case"number":return i.property(e)}}},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function f(e,t,n,r,i,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function x(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(m,e)||!d.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),E=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var R,L=Object.assign;function z(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var F=!1;function U(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function V(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case w:return"Portal";case C:return"Profiler";case k:return"StrictMode";case _:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function $(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ne=null,ke=null;function Ce(e){if(e=xi(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=ji(t),we(e.stateNode,e.type,t))}}function Se(e){Ne?ke?ke.push(e):ke=[e]:Ne=e}function Ee(){if(Ne){var e=Ne,t=ke;if(ke=Ne=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Te(e,t){return e(t)}function _e(){}var Ae=!1;function Ie(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Te(e,t,n)}finally{Ae=!1,(null!==Ne||null!==ke)&&(_e(),Ee())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=ji(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Oe=!1}function Me(e,t,n,r,i,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Re=!1,Le=null,ze=!1,Fe=null,Ue={onError:function(e){Re=!0,Le=e}};function Ve(e,t,n,r,i,a,s,o,l){Re=!1,Le=null,Me.apply(Ue,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return He(i),e;if(s===r)return He(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=dt(o):0!==(a&=s)&&(r=dt(a))}else 0!==(s=n&~i)?r=dt(s):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,wt,Nt,kt,Ct,St=!1,Et=[],Tt=null,_t=null,At=null,It=new Map,Pt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Rt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=xi(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Ct(e.priority,function(){Nt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){zt(e)&&n.delete(t)}function Ut(){St=!1,null!==Tt&&zt(Tt)&&(Tt=null),null!==_t&&zt(_t)&&(_t=null),null!==At&&zt(At)&&(At=null),It.forEach(Ft),Pt.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return Vt(t,e)}if(0<Et.length){Vt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Vt(Tt,e),null!==_t&&Vt(_t,e),null!==At&&Vt(At,e),It.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Lt(n),null===n.blockedOn&&Ot.shift()}var qt=b.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=xt,a=qt.transition;qt.transition=null;try{xt=1,Gt(e,t,n,r)}finally{xt=i,qt.transition=a}}function Kt(e,t,n,r){var i=xt,a=qt.transition;qt.transition=null;try{xt=4,Gt(e,t,n,r)}finally{xt=i,qt.transition=a}}function Gt(e,t,n,r){if(Ht){var i=Qt(e,t,n,r);if(null===i)Hr(e,t,r,Yt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Rt(Tt,e,t,n,r,i),!0;case"dragenter":return _t=Rt(_t,e,t,n,r,i),!0;case"mouseover":return At=Rt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return It.set(a,Rt(It.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Rt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=xi(i);if(null!==a&&jt(a),null===(a=Qt(e,t,n,r))&&Hr(e,t,r,Yt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Yt=null;function Qt(e,t,n,r){if(Yt=null,null!==(e=yi(e=je(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=L({},cn,{view:0,detail:0}),hn=an(dn),pn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=an(pn),fn=an(L({},pn,{dataTransfer:0})),gn=an(L({},dn,{relatedTarget:0})),vn=an(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=an(yn),bn=an(L({},cn,{data:0})),jn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function Cn(){return kn}var Sn=L({},dn,{key:function(e){if(e.key){var t=jn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Sn),Tn=an(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=an(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),An=an(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(In),On=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Rn=u&&"TextEvent"in window&&!Mn,Ln=u&&(!Dn||Mn&&8<Mn&&11>=Mn),zn=String.fromCharCode(32),Fn=!1;function Un(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Se(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Yn(e){zr(e,0)}function Qn(e){if(G(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];Wn(t,Gn,e,je(e)),Ie(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function ar(e,t){if("click"===e)return Qn(t)}function sr(e,t){if("input"===e||"change"===e)return Qn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=ur(n,a);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,xr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function jr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:jr("Animation","AnimationEnd"),animationiteration:jr("Animation","AnimationIteration"),animationstart:jr("Animation","AnimationStart"),transitionend:jr("Transition","TransitionEnd")},Nr={},kr={};function Cr(e){if(Nr[e])return Nr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Nr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Sr=Cr("animationend"),Er=Cr("animationiteration"),Tr=Cr("animationstart"),_r=Cr("transitionend"),Ar=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),l(t,[e])}for(var Or=0;Or<Ir.length;Or++){var Dr=Ir[Or];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(Sr,"onAnimationEnd"),Pr(Er,"onAnimationIteration"),Pr(Tr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(_r,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,o,l,c){if(Ve.apply(this,arguments),Re){if(!Re)throw Error(a(198));var u=Le;Re=!1,Le=null,ze||(ze=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;Lr(i,o,c),a=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;Lr(i,o,c),a=l}}}if(ze)throw e=Fe,ze=!1,Fe=null,e}function Fr(e,t){var n=t[fi];void 0===n&&(n=t[fi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Vr]){e[Vr]=!0,s.forEach(function(t){"selectionchange"!==t&&(Rr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Ur("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==o;){if(null===(s=yi(o)))return;if(5===(l=s.tag)||6===l){r=a=s;continue e}o=o.parentNode}}r=r.return}Ie(function(){var r=a,i=je(n),s=[];e:{var o=Ar.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=_n;break;case Sr:case Er:case Tr:l=vn;break;case _r:l=An;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var p,m=r;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=Pe(m,h))&&u.push(Wr(m,f,p)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,n,i),s.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[mi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,f="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?o:bi(l),p=null==c?o:bi(c),(o=new u(f,m+"leave",l,n,i)).target=d,o.relatedTarget=p,f=null,yi(i)===r&&((u=new u(h,m+"enter",c,n,i)).target=p,u.relatedTarget=d,f=u),d=f,l&&c)e:{for(h=c,m=0,p=u=l;p;p=Gr(p))m++;for(p=0,f=h;f;f=Gr(f))p++;for(;0<m-p;)u=Gr(u),m--;for(;0<p-m;)h=Gr(h),p--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Yr(s,o,l,u,!1),null!==c&&null!==d&&Yr(s,d,c,u,!0)}if("select"===(l=(o=r?bi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(Hn(o))if(Jn)g=sr;else{g=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ar);switch(g&&(g=g(e,r))?Wn(s,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?bi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,br(s,n,i);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":br(s,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Bn?Un(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Ln&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Bn&&(y=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(v=Kr(r,x)).length&&(x=new bn(x,e,null,n,i),s.push({event:x,listeners:v}),y?x.data=y:null!==(y=Vn(n))&&(x.data=y))),(y=Rn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,zn);case"textInput":return(e=t.data)===zn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Un(e,t)?(e=en(),Zt=$t=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}zr(s,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var a=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Pe(n,a))&&s.unshift(Wr(n,l,o)):i||null!=(l=Pe(n,a))&&s.push(Wr(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Qr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,mi="__reactContainer$"+di,fi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function xi(e){return!(e=e[hi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ji(e){return e[pi]||null}var wi=[],Ni=-1;function ki(e){return{current:e}}function Ci(e){0>Ni||(e.current=wi[Ni],wi[Ni]=null,Ni--)}function Si(e,t){Ni++,wi[Ni]=e.current,e.current=t}var Ei={},Ti=ki(Ei),_i=ki(!1),Ai=Ei;function Ii(e,t){var n=e.type.contextTypes;if(!n)return Ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ci(_i),Ci(Ti)}function Di(e,t,n){if(Ti.current!==Ei)throw Error(a(168));Si(Ti,t),Si(_i,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return L({},n,r)}function Ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Ai=Ti.current,Si(Ti,e),Si(_i,_i.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Mi(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ci(_i),Ci(Ti),Si(Ti,e)):Ci(_i),Si(_i,n)}var zi=null,Fi=!1,Ui=!1;function Vi(e){null===zi?zi=[e]:zi.push(e)}function Bi(){if(!Ui&&null!==zi){Ui=!0;var e=0,t=xt;try{var n=zi;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}zi=null,Fi=!1}catch(i){throw null!==zi&&(zi=zi.slice(e+1)),Ge(Ze,Bi),i}finally{xt=t,Ui=!1}}return null}var qi=[],Hi=0,Wi=null,Ki=0,Gi=[],Yi=0,Qi=null,Xi=1,Ji="";function $i(e,t){qi[Hi++]=Ki,qi[Hi++]=Wi,Wi=e,Ki=t}function Zi(e,t,n){Gi[Yi++]=Xi,Gi[Yi++]=Ji,Gi[Yi++]=Qi,Qi=e;var r=Xi;e=Ji;var i=32-st(r)-1;r&=~(1<<i),n+=1;var a=32-st(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Xi=1<<32-st(t)+i|n<<i|r,Ji=a+e}else Xi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ta(e){for(;e===Wi;)Wi=qi[--Hi],qi[Hi]=null,Ki=qi[--Hi],qi[Hi]=null;for(;e===Qi;)Qi=Gi[--Yi],Gi[Yi]=null,Ji=Gi[--Yi],Gi[Yi]=null,Xi=Gi[--Yi],Gi[Yi]=null}var na=null,ra=null,ia=!1,aa=null;function sa(e,t){var n=Ic(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ic(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&oa(e,t)?sa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ia)return ua(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw ha(),Error(a(418));for(;t;)sa(e,t),t=ci(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function pa(){ra=na=null,ia=!1}function ma(e){null===aa?aa=[e]:aa.push(e)}var fa=b.ReactCurrentBatchConfig;function ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ya(e){return(0,e._init)(e._payload)}function xa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===N?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&ya(a)===t.type)?((r=i(t,n.props)).ref=ga(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=ga(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=ga(e,null,t),n.return=e,n;case w:return(t=zc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Mc(t,e.mode,n,null)).return=e,t;va(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case j:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?u(e,t,n,r):null;case P:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:d(e,t,n,r,null);va(e,n)}return null}function m(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case j:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return m(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return d(t,e=e.get(n)||null,r,i,null);va(t,r)}return null}function f(i,a,o,l){for(var c=null,u=null,d=a,f=a=0,g=null;null!==d&&f<o.length;f++){d.index>f?(g=d,d=null):g=d.sibling;var v=p(i,d,o[f],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),a=s(v,a,f),null===u?c=v:u.sibling=v,u=v,d=g}if(f===o.length)return n(i,d),ia&&$i(i,f),c;if(null===d){for(;f<o.length;f++)null!==(d=h(i,o[f],l))&&(a=s(d,a,f),null===u?c=d:u.sibling=d,u=d);return ia&&$i(i,f),c}for(d=r(i,d);f<o.length;f++)null!==(g=m(d,i,f,o[f],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?f:g.key),a=s(g,a,f),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),ia&&$i(i,f),c}function g(i,o,l,c){var u=M(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var d=u=null,f=o,g=o=0,v=null,y=l.next();null!==f&&!y.done;g++,y=l.next()){f.index>g?(v=f,f=null):v=f.sibling;var x=p(i,f,y.value,c);if(null===x){null===f&&(f=v);break}e&&f&&null===x.alternate&&t(i,f),o=s(x,o,g),null===d?u=x:d.sibling=x,d=x,f=v}if(y.done)return n(i,f),ia&&$i(i,g),u;if(null===f){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(o=s(y,o,g),null===d?u=y:d.sibling=y,d=y);return ia&&$i(i,g),u}for(f=r(i,f);!y.done;g++,y=l.next())null!==(y=m(f,i,g,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?g:y.key),o=s(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&f.forEach(function(e){return t(i,e)}),ia&&$i(i,g),u}return function e(r,a,s,l){if("object"===typeof s&&null!==s&&s.type===N&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case j:e:{for(var c=s.key,u=a;null!==u;){if(u.key===c){if((c=s.type)===N){if(7===u.tag){n(r,u.sibling),(a=i(u,s.props.children)).return=r,r=a;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&ya(c)===u.type){n(r,u.sibling),(a=i(u,s.props)).ref=ga(r,u,s),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===N?((a=Mc(s.props.children,r.mode,l,s.key)).return=r,r=a):((l=Dc(s.type,s.key,s.props,null,r.mode,l)).ref=ga(r,a,s),l.return=r,r=l)}return o(r);case w:e:{for(u=s.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(r,a.sibling),(a=i(a,s.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=zc(s,r.mode,l)).return=r,r=a}return o(r);case P:return e(r,a,(u=s._init)(s._payload),l)}if(te(s))return f(r,a,s,l);if(M(s))return g(r,a,s,l);va(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,s)).return=r,r=a):(n(r,a),(a=Lc(s,r.mode,l)).return=r,r=a),o(r)):n(r,a)}}var ba=xa(!0),ja=xa(!1),wa=ki(null),Na=null,ka=null,Ca=null;function Sa(){Ca=ka=Na=null}function Ea(e){var t=wa.current;Ci(wa),e._currentValue=t}function Ta(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _a(e,t){Na=e,Ca=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Aa(e){var t=e._currentValue;if(Ca!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===Na)throw Error(a(308));ka=e,Na.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ia=null;function Pa(e){null===Ia?Ia=[e]:Ia.push(e)}function Oa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Pa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Da(e,r)}function Da(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ma=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function La(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function za(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Da(e,n)}return null===(i=r.interleaved)?(t.next=t,Pa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Da(e,n)}function Ua(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Va(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ba(e,t,n,r){var i=e.updateQueue;Ma=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(s=0,u=c=l=null,o=a;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,f=o;switch(h=t,p=n,f.tag){case 1:if("function"===typeof(m=f.payload)){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=f.payload)?m.call(p,d,h):m)||void 0===h)break e;d=L({},d,h);break e;case 2:Ma=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Rl|=s,e.lanes=s,e.memoizedState=d}}function qa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ha={},Wa=ki(Ha),Ka=ki(Ha),Ga=ki(Ha);function Ya(e){if(e===Ha)throw Error(a(174));return e}function Qa(e,t){switch(Si(Ga,t),Si(Ka,e),Si(Wa,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(Wa),Si(Wa,t)}function Xa(){Ci(Wa),Ci(Ka),Ci(Ga)}function Ja(e){Ya(Ga.current);var t=Ya(Wa.current),n=le(t,e.type);t!==n&&(Si(Ka,e),Si(Wa,n))}function $a(e){Ka.current===e&&(Ci(Wa),Ci(Ka))}var Za=ki(0);function es(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ts=[];function ns(){for(var e=0;e<ts.length;e++)ts[e]._workInProgressVersionPrimary=null;ts.length=0}var rs=b.ReactCurrentDispatcher,is=b.ReactCurrentBatchConfig,as=0,ss=null,os=null,ls=null,cs=!1,us=!1,ds=0,hs=0;function ps(){throw Error(a(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function fs(e,t,n,r,i,s){if(as=s,ss=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rs.current=null===e||null===e.memoizedState?$s:Zs,e=n(r,i),us){s=0;do{if(us=!1,ds=0,25<=s)throw Error(a(301));s+=1,ls=os=null,t.updateQueue=null,rs.current=eo,e=n(r,i)}while(us)}if(rs.current=Js,t=null!==os&&null!==os.next,as=0,ls=os=ss=null,cs=!1,t)throw Error(a(300));return e}function gs(){var e=0!==ds;return ds=0,e}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ls?ss.memoizedState=ls=e:ls=ls.next=e,ls}function ys(){if(null===os){var e=ss.alternate;e=null!==e?e.memoizedState:null}else e=os.next;var t=null===ls?ss.memoizedState:ls.next;if(null!==t)ls=t,os=e;else{if(null===e)throw Error(a(310));e={memoizedState:(os=e).memoizedState,baseState:os.baseState,baseQueue:os.baseQueue,queue:os.queue,next:null},null===ls?ss.memoizedState=ls=e:ls=ls.next=e}return ls}function xs(e,t){return"function"===typeof t?t(e):t}function bs(e){var t=ys(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=os,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((as&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ss.lanes|=d,Rl|=d}u=u.next}while(null!==u&&u!==s);null===c?o=r:c.next=l,or(r,t.memoizedState)||(xo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ss.lanes|=s,Rl|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function js(e){var t=ys(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);or(s,t.memoizedState)||(xo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ws(){}function Ns(e,t){var n=ss,r=ys(),i=t(),s=!or(r.memoizedState,i);if(s&&(r.memoizedState=i,xo=!0),r=r.queue,Ms(Ss.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ls&&1&ls.memoizedState.tag){if(n.flags|=2048,As(9,Cs.bind(null,n,r,i,t),void 0,null),null===_l)throw Error(a(349));0!==(30&as)||ks(n,t,i)}return i}function ks(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Cs(e,t,n,r){t.value=n,t.getSnapshot=r,Es(t)&&Ts(e)}function Ss(e,t,n){return n(function(){Es(t)&&Ts(e)})}function Es(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ts(e){var t=Da(e,1);null!==t&&nc(t,e,1,-1)}function _s(e){var t=vs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:e},t.queue=e,e=e.dispatch=Gs.bind(null,ss,e),[t.memoizedState,e]}function As(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Is(){return ys().memoizedState}function Ps(e,t,n,r){var i=vs();ss.flags|=e,i.memoizedState=As(1|t,n,void 0,void 0===r?null:r)}function Os(e,t,n,r){var i=ys();r=void 0===r?null:r;var a=void 0;if(null!==os){var s=os.memoizedState;if(a=s.destroy,null!==r&&ms(r,s.deps))return void(i.memoizedState=As(t,n,a,r))}ss.flags|=e,i.memoizedState=As(1|t,n,a,r)}function Ds(e,t){return Ps(8390656,8,e,t)}function Ms(e,t){return Os(2048,8,e,t)}function Rs(e,t){return Os(4,2,e,t)}function Ls(e,t){return Os(4,4,e,t)}function zs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Os(4,4,zs.bind(null,t,e),n)}function Us(){}function Vs(e,t){var n=ys();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Bs(e,t){var n=ys();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qs(e,t,n){return 0===(21&as)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(or(n,t)||(n=ft(),ss.lanes|=n,Rl|=n,e.baseState=!0),t)}function Hs(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=is.transition;is.transition={};try{e(!1),t()}finally{xt=n,is.transition=r}}function Ws(){return ys().memoizedState}function Ks(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ys(e))Qs(t,n);else if(null!==(n=Oa(e,t,n,r))){nc(n,e,r,ec()),Xs(n,t,r)}}function Gs(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ys(e))Qs(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,s)){var l=t.interleaved;return null===l?(i.next=i,Pa(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Oa(e,t,i,r))&&(nc(n,e,r,i=ec()),Xs(n,t,r))}}function Ys(e){var t=e.alternate;return e===ss||null!==t&&t===ss}function Qs(e,t){us=cs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xs(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Js={readContext:Aa,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},$s={readContext:Aa,useCallback:function(e,t){return vs().memoizedState=[e,void 0===t?null:t],e},useContext:Aa,useEffect:Ds,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ps(4194308,4,zs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ps(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ps(4,2,e,t)},useMemo:function(e,t){var n=vs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ks.bind(null,ss,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vs().memoizedState=e},useState:_s,useDebugValue:Us,useDeferredValue:function(e){return vs().memoizedState=e},useTransition:function(){var e=_s(!1),t=e[0];return e=Hs.bind(null,e[1]),vs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ss,i=vs();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===_l)throw Error(a(349));0!==(30&as)||ks(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ds(Ss.bind(null,r,s,e),[e]),r.flags|=2048,As(9,Cs.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=vs(),t=_l.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-st(Xi)-1)).toString(32)+n),0<(n=ds++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zs={readContext:Aa,useCallback:Vs,useContext:Aa,useEffect:Ms,useImperativeHandle:Fs,useInsertionEffect:Rs,useLayoutEffect:Ls,useMemo:Bs,useReducer:bs,useRef:Is,useState:function(){return bs(xs)},useDebugValue:Us,useDeferredValue:function(e){return qs(ys(),os.memoizedState,e)},useTransition:function(){return[bs(xs)[0],ys().memoizedState]},useMutableSource:ws,useSyncExternalStore:Ns,useId:Ws,unstable_isNewReconciler:!1},eo={readContext:Aa,useCallback:Vs,useContext:Aa,useEffect:Ms,useImperativeHandle:Fs,useInsertionEffect:Rs,useLayoutEffect:Ls,useMemo:Bs,useReducer:js,useRef:Is,useState:function(){return js(xs)},useDebugValue:Us,useDeferredValue:function(e){var t=ys();return null===os?t.memoizedState=e:qs(t,os.memoizedState,e)},useTransition:function(){return[js(xs)[0],ys().memoizedState]},useMutableSource:ws,useSyncExternalStore:Ns,useId:Ws,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=za(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Fa(e,a,i))&&(nc(t,e,i,r),Ua(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=za(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Fa(e,a,i))&&(nc(t,e,i,r),Ua(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=za(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Fa(e,i,r))&&(nc(t,e,r,n),Ua(t,e,r))}};function io(e,t,n,r,i,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function ao(e,t,n){var r=!1,i=Ei,a=t.contextType;return"object"===typeof a&&null!==a?a=Aa(a):(i=Pi(t)?Ai:Ti.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ii(e,i):Ei),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function so(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Aa(a):(a=Pi(t)?Ai:Ti.current,i.context=Ii(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(no(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),Ba(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=za(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=r),uo(0,t)},n}function mo(e,t,n){(n=za(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=za(-1,1)).tag=2,Fa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=b.ReactCurrentOwner,xo=!1;function bo(e,t,n,r){t.child=null===e?ja(t,null,n,r):ba(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var a=t.ref;return _a(t,i),r=fs(e,t,n,r,a,i),n=gs(),null===e||xo?(ia&&n&&ea(t),t.flags|=1,bo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function wo(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,No(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(xo=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ho(e,t,i);0!==(131072&e.flags)&&(xo=!0)}}return So(e,t,n,r,i)}function ko(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ol,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Ol,Pl),Pl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Ol,Pl),Pl|=r;return bo(e,t,i,n),t.child}function Co(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,n,r,i){var a=Pi(n)?Ai:Ti.current;return a=Ii(t,a),_a(t,i),n=fs(e,t,n,r,a,i),r=gs(),null===e||xo?(ia&&r&&ea(t),t.flags|=1,bo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function Eo(e,t,n,r,i){if(Pi(n)){var a=!0;Ri(t)}else a=!1;if(_a(t,i),null===t.stateNode)qo(e,t),ao(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Aa(c):c=Ii(t,c=Pi(n)?Ai:Ti.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||l!==c)&&so(t,s,r,c),Ma=!1;var h=t.memoizedState;s.state=h,Ba(t,r,s,i),l=t.memoizedState,o!==r||h!==l||_i.current||Ma?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Ma||io(t,n,o,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,La(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Aa(l):l=Ii(t,l=Pi(n)?Ai:Ti.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&so(t,s,r,l),Ma=!1,h=t.memoizedState,s.state=h,Ba(t,r,s,i);var m=t.memoizedState;o!==d||h!==m||_i.current||Ma?("function"===typeof p&&(no(t,n,p,r),m=t.memoizedState),(c=Ma||io(t,n,c,r,h,m,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,m,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),s.props=r,s.state=m,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return To(e,t,n,r,a,i)}function To(e,t,n,r,i,a){Co(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Li(t,n,!1),Ho(e,t,a);r=t.stateNode,yo.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=ba(t,e.child,null,a),t.child=ba(t,null,o,a)):bo(e,t,o,a),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function _o(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Qa(e,t.containerInfo)}function Ao(e,t,n,r,i){return pa(),ma(i),t.flags|=256,bo(e,t,n,r),t.child}var Io,Po,Oo,Do,Mo={dehydrated:null,treeContext:null,retryLane:0};function Ro(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,n){var r,i=t.pendingProps,s=Za.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Si(Za,1&s),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Rc(l,i,0,null),e=Mc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ro(n),t.memoizedState=Mo,e):zo(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,r=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Rc({mode:"visible",children:r.children},i,0,null),(s=Mc(s,i,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&ba(t,e.child,null,o),t.child.memoizedState=Ro(o),t.memoizedState=Mo,s);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fo(e,t,o,r=co(s=Error(a(419)),r,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(r=_l)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Da(e,i),nc(r,e,i,-1))}return fc(),Fo(e,t,o,r=co(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Yi++]=Xi,Gi[Yi++]=Ji,Gi[Yi++]=Qi,Xi=e.id,Ji=e.overflow,Qi=t),t=zo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(o){o=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?o=Oc(r,o):(o=Mc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Ro(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Mo,i}return e=(o=e.child).sibling,i=Oc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function zo(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,r){return null!==r&&ma(r),ba(t,e.child,null,n),(e=zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ta(e.return,t,n)}function Vo(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bo(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=Za.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(Za,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===es(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vo(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===es(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vo(t,!0,n,null,a);break;case"together":Vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wo(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Pi(t.type)&&Oi(),Ko(t),null;case 3:return r=t.stateNode,Xa(),Ci(_i),Ci(Ti),ns(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Po(e,t),Ko(t),null;case 5:$a(t);var i=Ya(Ga.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ko(t),null}if(e=Ya(Wa.current),da(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[pi]=s,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)Fr(Mr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":X(r,s),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fr("invalid",r);break;case"textarea":ie(r,s),Fr("invalid",r)}for(var l in ye(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":K(r),Z(r,s,!0);break;case"textarea":K(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,Io(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)Fr(Mr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":X(e,r),i=Q(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(s in ye(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Fr("scroll",e):null!=u&&x(e,s,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ya(Ga.current),Ya(Wa.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ko(t),null;case 13:if(Ci(Za),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),pa(),t.flags|=98560,s=!1;else if(s=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[hi]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),s=!1}else null!==aa&&(sc(aa),aa=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Za.current)?0===Dl&&(Dl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Xa(),Po(e,t),null===e&&Br(t.stateNode.containerInfo),Ko(t),null;case 10:return Ea(t.type._context),Ko(t),null;case 19:if(Ci(Za),null===(s=t.memoizedState))return Ko(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Wo(s,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=es(e))){for(t.flags|=128,Wo(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(Za,1&Za.current|2),t.child}e=e.sibling}null!==s.tail&&Je()>Bl&&(t.flags|=128,r=!0,Wo(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=es(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wo(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ia)return Ko(t),null}else 2*Je()-s.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Wo(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,n=Za.current,Si(Za,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yo(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xa(),Ci(_i),Ci(Ti),ns(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $a(t),null;case 13:if(Ci(Za),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(Za),null;case 4:return Xa(),null;case 10:return Ea(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Io=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},Oo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ya(Wa.current);var a,s=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),s=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qo=!1,Xo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,$o=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){kc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&el(t,n,a)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[fi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Xo||Zo(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,void 0!==s&&(0!==(2&a)||0!==(4&a))&&el(n,t,s),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Xo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){kc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Xo=(r=Xo)||null!==n.memoizedState,hl(e,t,n),Xo=r):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach(function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(a(160));pl(s,o,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){kc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){kc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:fl(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(fl(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){kc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&J(i,s),xe(l,o);var u=xe(l,s);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):x(i,d,h,u)}switch(l){case"input":$(i,s);break;case"textarea":ae(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;null!=m?ne(i,!!s.multiple,m,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[pi]=s}catch(g){kc(e,e.return,g)}}break;case 6:if(fl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){kc(e,e.return,g)}}break;case 3:if(fl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:fl(t,e),vl(e);break;case 13:fl(t,e),vl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Je())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(u=Xo)||d,fl(t,e),Xo=u):fl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for($o=e,d=e.child;null!==d;){for(h=$o=d;null!==$o;){switch(m=(p=$o).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zo(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){r=p,n=p.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){kc(r,n,g)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){jl(h);continue}}null!==m?(m.return=p,$o=m):jl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ol(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,ol(e),s);break;default:throw Error(a(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){$o=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==$o;){var i=$o,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Qo;if(!s){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=Qo;var c=Xo;if(Qo=s,(Xo=l)&&!c)for($o=i;null!==$o;)l=(s=$o).child,22===s.tag&&null!==s.memoizedState?wl(i):null!==l?(l.return=s,$o=l):wl(i);for(;null!==a;)$o=a,xl(a,t,n),a=a.sibling;$o=i,Qo=o,Xo=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,$o=a):bl(e)}}function bl(e){for(;null!==$o;){var t=$o;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&qa(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qa(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Xo||512&t.flags&&il(t)}catch(p){kc(t,t.return,p)}}if(t===e){$o=null;break}if(null!==(n=t.sibling)){n.return=t.return,$o=n;break}$o=t.return}}function jl(e){for(;null!==$o;){var t=$o;if(t===e){$o=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$o=n;break}$o=t.return}}function wl(e){for(;null!==$o;){var t=$o;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){kc(t,i,l)}}var a=t.return;try{il(t)}catch(l){kc(t,a,l)}break;case 5:var s=t.return;try{il(t)}catch(l){kc(t,s,l)}}}catch(l){kc(t,t.return,l)}if(t===e){$o=null;break}var o=t.sibling;if(null!==o){o.return=t.return,$o=o;break}$o=t.return}}var Nl,kl=Math.ceil,Cl=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,El=b.ReactCurrentBatchConfig,Tl=0,_l=null,Al=null,Il=0,Pl=0,Ol=ki(0),Dl=0,Ml=null,Rl=0,Ll=0,zl=0,Fl=null,Ul=null,Vl=0,Bl=1/0,ql=null,Hl=!1,Wl=null,Kl=null,Gl=!1,Yl=null,Ql=0,Xl=0,Jl=null,$l=-1,Zl=0;function ec(){return 0!==(6&Tl)?Je():-1!==$l?$l:$l=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Il?Il&-Il:null!==fa.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(a(185));vt(e,n,r),0!==(2&Tl)&&e===_l||(e===_l&&(0===(2&Tl)&&(Ll|=n),4===Dl&&oc(e,Il)),rc(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(Bl=Je()+500,Fi&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-st(a),o=1<<s,l=i[s];-1===l?0!==(o&n)&&0===(o&r)||(i[s]=pt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=ht(e,e===_l?Il:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Fi=!0,Vi(e)}(lc.bind(null,e)):Vi(lc.bind(null,e)),si(function(){0===(6&Tl)&&Bi()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=_c(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if($l=-1,Zl=0,0!==(6&Tl))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ht(e,e===_l?Il:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Tl;Tl|=2;var s=mc();for(_l===e&&Il===t||(ql=null,Bl=Je()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}Sa(),Cl.current=s,Tl=i,null!==Al?t=0:(_l=null,Il=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=mt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ml,hc(e,0),oc(e,r),rc(e,Je()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!or(a(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(s=mt(e))&&(r=s,t=ac(e,s))),1===t))throw n=Ml,hc(e,0),oc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:jc(e,Ul,ql);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Vl+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(jc.bind(null,e,Ul,ql),t);break}jc(e,Ul,ql);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-st(r);s=1<<o,(o=t[o])>i&&(i=o),r&=~s}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ri(jc.bind(null,e,Ul,ql),r);break}jc(e,Ul,ql);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&sc(t)),e}function sc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~zl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Tl))throw Error(a(327));wc();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ml,hc(e,0),oc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,Ul,ql),rc(e,Je()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Bl=Je()+500,Fi&&Bi())}}function uc(e){null!==Yl&&0===Yl.tag&&0===(6&Tl)&&wc();var t=Tl;Tl|=1;var n=El.transition,r=xt;try{if(El.transition=null,xt=1,e)return e()}finally{xt=r,El.transition=n,0===(6&(Tl=t))&&Bi()}}function dc(){Pl=Ol.current,Ci(Ol)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:Xa(),Ci(_i),Ci(Ti),ns();break;case 5:$a(r);break;case 4:Xa();break;case 13:case 19:Ci(Za);break;case 10:Ea(r.type._context);break;case 22:case 23:dc()}n=n.return}if(_l=e,Al=e=Oc(e.current,null),Il=Pl=t,Dl=0,Ml=null,zl=Ll=Rl=0,Ul=Fl=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}Ia=null}return e}function pc(e,t){for(;;){var n=Al;try{if(Sa(),rs.current=Js,cs){for(var r=ss.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}cs=!1}if(as=0,ls=os=ss=null,us=!1,ds=0,Sl.current=null,null===n||null===n.return){Dl=1,Ml=t,Al=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=Il,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=go(o);if(null!==m){m.flags&=-257,vo(m,o,l,0,t),1&m.mode&&fo(s,u,t),c=u;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(s,u,t),fc();break e}c=Error(a(426))}else if(ia&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),ma(lo(c,l));break e}}s=c=lo(c,l),4!==Dl&&(Dl=2),null===Fl?Fl=[s]:Fl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Va(s,po(0,c,t));break e;case 1:l=c;var y=s.type,x=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Kl||!Kl.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t,Va(s,mo(s,l,t));break e}}s=s.return}while(null!==s)}bc(n)}catch(b){t=b,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function mc(){var e=Cl.current;return Cl.current=Js,null===e?Js:e}function fc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===_l||0===(268435455&Rl)&&0===(268435455&Ll)||oc(_l,Il)}function gc(e,t){var n=Tl;Tl|=2;var r=mc();for(_l===e&&Il===t||(ql=null,hc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(Sa(),Tl=n,Cl.current=r,null!==Al)throw Error(a(261));return _l=null,Il=0,Dl}function vc(){for(;null!==Al;)xc(Al)}function yc(){for(;null!==Al&&!Qe();)xc(Al)}function xc(e){var t=Nl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?bc(e):Al=t,Sl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Pl)))return void(Al=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Dl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Dl&&(Dl=5)}function jc(e,t,n){var r=xt,i=El.transition;try{El.transition=null,xt=1,function(e,t,n,r){do{wc()}while(null!==Yl);if(0!==(6&Tl))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,s),e===_l&&(Al=_l=null,Il=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,_c(tt,function(){return wc(),null})),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=El.transition,El.transition=null;var o=xt;xt=1;var l=Tl;Tl|=4,Sl.current=null,function(e,t){if(ei=Ht,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(j){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=o),p===s&&++d===r&&(c=o),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,$o=t;null!==$o;)if(e=(t=$o).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$o=e;else for(;null!==$o;){t=$o;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,v=f.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(j){kc(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,$o=e;break}$o=t.return}f=tl,tl=!1}(e,n),gl(n,e),mr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Xe(),Tl=l,xt=o,El.transition=s}else e.current=n;if(Gl&&(Gl=!1,Yl=e,Ql=i),s=e.pendingLanes,0===s&&(Kl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Ql)&&0!==e.tag&&wc(),s=e.pendingLanes,0!==(1&s)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Bi()}(e,t,n,r)}finally{El.transition=i,xt=r}return null}function wc(){if(null!==Yl){var e=bt(Ql),t=El.transition,n=xt;try{if(El.transition=null,xt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Ql=0,0!==(6&Tl))throw Error(a(331));var i=Tl;for(Tl|=4,$o=e.current;null!==$o;){var s=$o,o=s.child;if(0!==(16&$o.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($o=u;null!==$o;){var d=$o;switch(d.tag){case 0:case 11:case 15:nl(8,d,s)}var h=d.child;if(null!==h)h.return=d,$o=h;else for(;null!==$o;){var p=(d=$o).sibling,m=d.return;if(al(d),d===u){$o=null;break}if(null!==p){p.return=m,$o=p;break}$o=m}}}var f=s.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}$o=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,$o=o;else e:for(;null!==$o;){if(0!==(2048&(s=$o).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,$o=y;break e}$o=s.return}}var x=e.current;for($o=x;null!==$o;){var b=(o=$o).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,$o=b;else e:for(o=x;null!==$o;){if(0!==(2048&(l=$o).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){kc(l,l.return,w)}if(l===o){$o=null;break e}var j=l.sibling;if(null!==j){j.return=l.return,$o=j;break e}$o=l.return}}if(Tl=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{xt=n,El.transition=t}}return!1}function Nc(e,t,n){e=Fa(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function kc(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Fa(t,e=mo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,_l===e&&(Il&n)===n&&(4===Dl||3===Dl&&(130023424&Il)===Il&&500>Je()-Vl?hc(e,0):zl|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Da(e,t))&&(vt(e,t,n),rc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function _c(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ic(e,t,n,r){return new Ac(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Ic(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,s){var o=2;if(r=e,"function"===typeof e)Pc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Mc(n.children,i,s,t);case k:o=8,i|=8;break;case C:return(e=Ic(12,n,t,2|i)).elementType=C,e.lanes=s,e;case _:return(e=Ic(13,n,t,i)).elementType=_,e.lanes=s,e;case A:return(e=Ic(19,n,t,i)).elementType=A,e.lanes=s,e;case O:return Rc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case E:o=9;break e;case T:o=11;break e;case I:o=14;break e;case P:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ic(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Mc(e,t,n,r){return(e=Ic(7,e,r,t)).lanes=n,e}function Rc(e,t,n,r){return(e=Ic(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Ic(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Ic(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,a,s,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ic(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function Vc(e){if(!e)return Ei;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Mi(e,n,t)}return t}function Bc(e,t,n,r,i,a,s,o,l){return(e=Uc(n,r,!0,e,0,a,0,o,l)).context=Vc(null),n=e.current,(a=za(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Fa(n,a,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function qc(e,t,n,r){var i=t.current,a=ec(),s=tc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=za(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fa(i,t,s))&&(nc(e,i,s,a),Ua(e,i,s)),s}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||_i.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:_o(t),pa();break;case 5:Ja(t);break;case 1:Pi(t.type)&&Ri(t);break;case 4:Qa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(wa,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(Za,1&Za.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lo(e,t,n):(Si(Za,1&Za.current),null!==(e=Ho(e,t,n))?e.sibling:null);Si(Za,1&Za.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(Za,Za.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return Ho(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var i=Ii(t,Ti.current);_a(t,n),i=fs(null,t,r,e,i,n);var s=gs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(s=!0,Ri(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=To(null,t,r,!0,s,n)):(t.tag=0,ia&&s&&ea(t),bo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===I)return 14}return 2}(r),e=to(r,e),i){case 0:t=So(null,t,r,e,n);break e;case 1:t=Eo(null,t,r,e,n);break e;case 11:t=jo(null,t,r,e,n);break e;case 14:t=wo(null,t,r,to(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,So(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,Eo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(_o(t),null===e)throw Error(a(387));r=t.pendingProps,i=(s=t.memoizedState).element,La(e,t),Ba(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ao(e,t,r,n,i=lo(Error(a(423)),t));break e}if(r!==i){t=Ao(e,t,r,n,i=lo(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===i){t=Ho(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Ja(t),null===e&&ca(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==s&&ni(r,s)&&(t.flags|=32),Co(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Lo(e,t,n);case 4:return Qa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ba(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Si(wa,r._currentValue),r._currentValue=o,null!==s)if(or(s.value,o)){if(s.children===i.children&&!_i.current){t=Ho(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=za(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ta(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ta(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}bo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,_a(t,n),r=r(i=Aa(i)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),wo(e,t,r,i=to(r.type,i),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),qo(e,t),t.tag=1,Pi(r)?(e=!0,Ri(t)):e=!1,_a(t,n),ao(t,r,i),oo(t,r,i,n),To(null,t,r,!0,e,n);case 19:return Bo(e,t,n);case 22:return ko(e,t,n)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Zc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if("function"===typeof i){var o=i;i=function(){var e=Hc(s);o.call(e)}}qc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hc(s);a.call(e)}}var s=Bc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=s,e[mi]=s.current,Br(8===e.nodeType?e.parentNode:e),uc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[mi]=l.current,Br(8===e.nodeType?e.parentNode:e),uc(function(){qc(t,l,n,r)}),l}(n,t,e,i,r);return Hc(s)}Qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));qc(e,t,null,null)},Qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){qc(null,e,null,null)}),t[mi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Lt(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Je()),0===(6&Tl)&&(Bl=Je()+500,Bi()))}break;case 13:uc(function(){var t=Da(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Kc(e,1)}},wt=function(e){if(13===e.tag){var t=Da(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),n=Da(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},kt=function(){return xt},Ct=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},we=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ji(r);if(!i)throw Error(a(90));G(r),$(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,_e=uc;var eu={usingClientEntryPoint:!1,Events:[xi,bi,ji,Se,Ee,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),at=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[mi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,s,o),e[mi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[mi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},2777:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isSymbol=function(e){return"symbol"===typeof e||e instanceof Symbol}},2897:(e,t,n)=>{var r=n(3693);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},3272:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toKey=function(e){var t;return"string"===typeof e||"symbol"===typeof e?e:Object.is(null===e||void 0===e||null===(t=e.valueOf)||void 0===t?void 0:t.call(e),-0)?"-0":String(e)}},3693:(e,t,n)=>{var r=n(7736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3757:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}},3799:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(4704),i=n(1203),a=n(870),s=n(9972);t.isIterateeCall=function(e,t,n){return!!a.isObject(n)&&(!!("number"===typeof t&&i.isArrayLike(n)&&r.isIndex(t)&&t<n.length||"string"===typeof t&&t in n)&&s.eq(n[t],e))}},3808:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(8268),i=n(5261);t.matches=function(e){return e=i.cloneDeep(e),t=>r.isMatch(t,e)}},3821:(e,t,n)=>{e.exports=n(2204).sortBy},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function y(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=x.prototype=new y;b.constructor=x,f(b,v.prototype),b.isPureReactComponent=!0;var j=Array.isArray,w=Object.prototype.hasOwnProperty,N={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,a={},s=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)w.call(t,i)&&!k.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:o,props:a,_owner:N.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function _(e,t,i,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===a?"."+T(l,0):a,j(s)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),_(s,t,i,"",function(e){return e})):null!=s&&(S(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(E,"$&/")+"/")+e)),t.push(s)),1;if(l=0,a=""===a?".":a+":",j(e))for(var c=0;c<e.length;c++){var u=a+T(o=e[c],c);l+=_(o,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=_(o=o.value,t,i,u=a+T(o,c++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return _(e,r,"","",function(e){return t.call(n,e,i++)}),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:N};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=x,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=f({},e.props),a=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=N.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:s,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},4208:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.uniqBy=function(e,t){const n=new Map;for(let r=0;r<e.length;r++){const i=e[r],a=t(i);n.has(a)||n.set(a,i)}return Array.from(n.values())}},4250:(e,t,n)=>{e.exports=n(8182).isEqual},4332:(e,t,n)=>{e.exports=n(5053).uniqBy},4385:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPlainObject=function(e){if(!e||"object"!==typeof e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4704:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=/^(?:0|[1-9]\d*)$/;t.isIndex=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return n.test(e)}}},4737:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.noop=function(){}},4803:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPrimitive=function(e){return null==e||"object"!==typeof e&&"function"!==typeof e}},4830:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.debounce=function(e,t){let n,{signal:r,edges:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=null;const s=null!=i&&i.includes("leading"),o=null==i||i.includes("trailing"),l=()=>{null!==a&&(e.apply(n,a),n=void 0,a=null)};let c=null;const u=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,o&&l(),d()},t)},d=()=>{null!==c&&(clearTimeout(c),c=null),n=void 0,a=null},h=function(){if(null!==r&&void 0!==r&&r.aborted)return;n=this;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a=t;const o=null==c;u(),s&&o&&l()};return h.schedule=u,h.cancel=d,h.flush=()=>{l()},null===r||void 0===r||r.addEventListener("abort",d,{once:!0}),h}},4879:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6770);t.toFinite=function(e){if(!e)return 0===e?e:0;if((e=r.toNumber(e))===1/0||e===-1/0){return(e<0?-1:1)*Number.MAX_VALUE}return e===e?e:0}},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5053:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(4208),i=n(9599),a=n(2104),s=n(2715);t.uniqBy=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.identity;return a.isArrayLikeObject(e)?r.uniqBy(Array.from(e),s.iteratee(t)):[]}},5082:(e,t)=>{"use strict";var n=60103,r=60106,i=60107,a=60108,s=60114,o=60109,l=60110,c=60112,u=60113,d=60120,h=60115,p=60116,m=60121,f=60122,g=60117,v=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var x=Symbol.for;n=x("react.element"),r=x("react.portal"),i=x("react.fragment"),a=x("react.strict_mode"),s=x("react.profiler"),o=x("react.provider"),l=x("react.context"),c=x("react.forward_ref"),u=x("react.suspense"),d=x("react.suspense_list"),h=x("react.memo"),p=x("react.lazy"),m=x("react.block"),f=x("react.server.block"),g=x("react.fundamental"),v=x("react.debug_trace_mode"),y=x("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case s:case a:case u:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case h:case o:return e;default:return t}}case r:return t}}}t.isFragment=function(e){return b(e)===i}},5261:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6433);t.cloneDeep=function(e){return r.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}},5303:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2489),i=n(4704),a=n(6321),s=n(1444);t.has=function(e,t){let n;if(n=Array.isArray(t)?t:"string"===typeof t&&r.isDeepKey(t)&&null==(null===e||void 0===e?void 0:e[t])?s.toPath(t):[t],0===n.length)return!1;let o=e;for(let r=0;r<n.length;r++){const e=n[r];if(null==o||!Object.hasOwn(o,e)){if(!((Array.isArray(o)||a.isArguments(o))&&i.isIndex(e)&&e<o.length))return!1}o=o[e]}return!0}},5316:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(9709),i=n(7043),a=n(1444);t.orderBy=function(e,t,n,s){if(null==e)return[];n=s?void 0:n,Array.isArray(e)||(e=Object.values(e)),Array.isArray(t)||(t=null==t?[null]:[t]),0===t.length&&(t=[null]),Array.isArray(n)||(n=null==n?[]:[n]),n=n.map(e=>String(e));const o=(e,t)=>{let n=e;for(let r=0;r<t.length&&null!=n;++r)n=n[t[r]];return n},l=t.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"===typeof e||Array.isArray(e)||i.isKey(e)?e:{key:e,path:a.toPath(e)}));return e.map(e=>({original:e,criteria:l.map(t=>((e,t)=>null==t||null==e?t:"object"===typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:o(t,e.path):"function"===typeof e?e(t):Array.isArray(e)?o(t,e):"object"===typeof t?t[e]:t)(t,e))})).slice().sort((e,t)=>{for(let i=0;i<l.length;i++){const a=r.compareValues(e.criteria[i],t.criteria[i],n[i]);if(0!==a)return a}return 0}).map(e=>e.original)}},5414:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(1293);t.throttle=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{leading:i=!0,trailing:a=!0}=n;return r.debounce(e,t,{leading:i,maxWait:t,trailing:a})}},5508:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6433),i=n(7599);t.cloneDeepWith=function(e,t){return r.cloneDeepWith(e,(n,a,s,o)=>{const l=null===t||void 0===t?void 0:t(n,a,s,o);if(void 0!==l)return l;if("object"===typeof e)switch(Object.prototype.toString.call(e)){case i.numberTag:case i.stringTag:case i.booleanTag:{const t=new e.constructor(null===e||void 0===e?void 0:e.valueOf());return r.copyProperties(t,e),t}case i.argumentsTag:{const t={};return r.copyProperties(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}})}},5990:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}},6321:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(5990);t.isArguments=function(e){return null!==e&&"object"===typeof e&&"[object Arguments]"===r.getTag(e)}},6392:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.last=function(e){return e[e.length-1]}},6433:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6443),i=n(5990),a=n(7599),s=n(4803),o=n(3757);function l(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const d=null===u||void 0===u?void 0:u(e,t,n,r);if(void 0!==d)return d;if(s.isPrimitive(e))return e;if(r.has(e))return r.get(e);if(Array.isArray(e)){const t=new Array(e.length);r.set(e,t);for(let i=0;i<e.length;i++)t[i]=l(e[i],i,n,r,u);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;r.set(e,t);for(const[i,a]of e)t.set(i,l(a,i,n,r,u));return t}if(e instanceof Set){const t=new Set;r.set(e,t);for(const i of e)t.add(l(i,void 0,n,r,u));return t}if("undefined"!==typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(o.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);r.set(e,t);for(let i=0;i<e.length;i++)t[i]=l(e[i],i,n,r,u);return t}if(e instanceof ArrayBuffer||"undefined"!==typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return r.set(e,t),c(t,e,n,r,u),t}if("undefined"!==typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return r.set(e,t),c(t,e,n,r,u),t}if(e instanceof Blob){const t=new Blob([e],{type:e.type});return r.set(e,t),c(t,e,n,r,u),t}if(e instanceof Error){const t=new e.constructor;return r.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,c(t,e,n,r,u),t}if("object"===typeof e&&function(e){switch(i.getTag(e)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return r.set(e,t),c(t,e,n,r,u),t}return e}function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;const s=[...Object.keys(t),...r.getSymbols(t)];for(let r=0;r<s.length;r++){const o=s[r],c=Object.getOwnPropertyDescriptor(e,o);(null==c||c.writable)&&(e[o]=l(t[o],o,n,i,a))}}t.cloneDeepWith=function(e,t){return l(e,void 0,e,new Map,t)},t.cloneDeepWithImpl=l,t.copyProperties=c},6443:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}},6770:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2777);t.toNumber=function(e){return r.isSymbol(e)?NaN:Number(e)}},7043:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2777),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.isKey=function(e,t){return!Array.isArray(e)&&(!("number"!==typeof e&&"boolean"!==typeof e&&null!=e&&!r.isSymbol(e))||("string"===typeof e&&(a.test(e)||!i.test(e))||null!=t&&Object.hasOwn(t,e)))}},7231:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(3799),i=n(4879);t.range=function(e,t,n){n&&"number"!==typeof n&&r.isIterateeCall(e,t,n)&&(t=n=void 0),e=i.toFinite(e),void 0===t?(t=e,e=0):t=i.toFinite(t),n=void 0===n?e<t?1:-1:i.toFinite(n);const a=Math.max(Math.ceil((t-e)/(n||1)),0),s=new Array(a);for(let r=0;r<a;r++)s[r]=e,e+=n;return s}},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,m=!1,f=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function j(e){if(g=!1,b(e),!f)if(null!==r(c))f=!0,O(w);else{var t=r(u);null!==t&&D(j,t.startTime-e)}}function w(e,n){f=!1,g&&(g=!1,y(S),S=-1),m=!0;var a=p;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!_());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&D(j,d.startTime-n),l=!1}return l}finally{h=null,p=a,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,k=!1,C=null,S=-1,E=5,T=-1;function _(){return!(t.unstable_now()-T<E)}function A(){if(null!==C){var e=t.unstable_now();T=e;var n=!0;try{n=C(!0,e)}finally{n?N():(k=!1,C=null)}}else k=!1}if("function"===typeof x)N=function(){x(A)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,P=I.port2;I.port1.onmessage=A,N=function(){P.postMessage(null)}}else N=function(){v(A,0)};function O(e){C=e,k||(k=!0,N())}function D(e,n){S=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(y(S),S=-1):g=!0,D(j,a-s))):(e.sortIndex=o,n(c,e),f||m||(f=!0,O(w))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},7237:(e,t,n)=>{"use strict";n(8365)},7260:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isUnsafeProperty=function(e){return"__proto__"===e}},7312:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.flatten=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=[],r=Math.floor(t),i=(e,t)=>{for(let a=0;a<e.length;a++){const s=e[a];Array.isArray(s)&&t<r?i(s,t+1):n.push(s)}};return i(e,0),n}},7330:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(9323);t.property=function(e){return function(t){return r.get(t,e)}}},7599:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.argumentsTag="[object Arguments]",t.arrayBufferTag="[object ArrayBuffer]",t.arrayTag="[object Array]",t.bigInt64ArrayTag="[object BigInt64Array]",t.bigUint64ArrayTag="[object BigUint64Array]",t.booleanTag="[object Boolean]",t.dataViewTag="[object DataView]",t.dateTag="[object Date]",t.errorTag="[object Error]",t.float32ArrayTag="[object Float32Array]",t.float64ArrayTag="[object Float64Array]",t.functionTag="[object Function]",t.int16ArrayTag="[object Int16Array]",t.int32ArrayTag="[object Int32Array]",t.int8ArrayTag="[object Int8Array]",t.mapTag="[object Map]",t.numberTag="[object Number]",t.objectTag="[object Object]",t.regexpTag="[object RegExp]",t.setTag="[object Set]",t.stringTag="[object String]",t.symbolTag="[object Symbol]",t.uint16ArrayTag="[object Uint16Array]",t.uint32ArrayTag="[object Uint32Array]",t.uint8ArrayTag="[object Uint8Array]",t.uint8ClampedArrayTag="[object Uint8ClampedArray]"},7736:(e,t,n)=>{var r=n(3738).default,i=n(9045);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},7770:(e,t,n)=>{e.exports=n(9323).get},7820:(e,t,n)=>{e.exports=n(5414).throttle},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8182:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(9330),i=n(4737);t.isEqual=function(e,t){return r.isEqualWith(e,t,i.noop)}},8210:function(e,t,n){var r;!function(){"use strict";var i,a=1e9,s={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o=!0,l="[DecimalError] ",c=l+"Invalid argument: ",u=l+"Exponent out of range: ",d=Math.floor,h=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,m=1e7,f=9007199254740991,g=d(1286742750677284.5),v={};function y(e,t){var n,r,i,a,s,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),o?T(t,h):t;if(c=e.d,u=t.d,s=e.e,i=t.e,c=c.slice(),a=s-i){for(a<0?(r=c,a=-a,l=u.length):(r=u,i=s,l=c.length),a>(l=(s=Math.ceil(h/7))>l?s+1:l+1)&&(a=l,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for((l=c.length)-(a=u.length)<0&&(a=l,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/m|0,c[a]%=m;for(n&&(c.unshift(n),++i),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=i,o?T(t,h):t}function x(e,t,n){if(e!==~~e||e<t||e>n)throw Error(c+e)}function b(e){var t,n,r,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(a+=C(n)),a+=r;(n=7-(r=(s=e[t])+"").length)&&(a+=C(n))}else if(0===s)return"0";for(;s%10===0;)s/=10;return a+s}v.absoluteValue=v.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},v.comparedTo=v.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(t=0,n=(r=a.d.length)<(i=e.d.length)?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1},v.decimalPlaces=v.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},v.dividedBy=v.div=function(e){return j(this,new this.constructor(e))},v.dividedToIntegerBy=v.idiv=function(e){var t=this.constructor;return T(j(this,new t(e),0,1),t.precision)},v.equals=v.eq=function(e){return!this.cmp(e)},v.exponent=function(){return N(this)},v.greaterThan=v.gt=function(e){return this.cmp(e)>0},v.greaterThanOrEqualTo=v.gte=function(e){return this.cmp(e)>=0},v.isInteger=v.isint=function(){return this.e>this.d.length-2},v.isNegative=v.isneg=function(){return this.s<0},v.isPositive=v.ispos=function(){return this.s>0},v.isZero=function(){return 0===this.s},v.lessThan=v.lt=function(e){return this.cmp(e)<0},v.lessThanOrEqualTo=v.lte=function(e){return this.cmp(e)<1},v.logarithm=v.log=function(e){var t,n=this,r=n.constructor,a=r.precision,s=a+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(i))throw Error(l+"NaN");if(n.s<1)throw Error(l+(n.s?"NaN":"-Infinity"));return n.eq(i)?new r(0):(o=!1,t=j(S(n,s),S(e,s),s),o=!0,T(t,a))},v.minus=v.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?_(t,e):y(t,(e.s=-e.s,e))},v.modulo=v.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(!(e=new r(e)).s)throw Error(l+"NaN");return n.s?(o=!1,t=j(n,e,0,1).times(e),o=!0,n.minus(t)):T(new r(n),i)},v.naturalExponential=v.exp=function(){return w(this)},v.naturalLogarithm=v.ln=function(){return S(this)},v.negated=v.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},v.plus=v.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?y(t,e):_(t,(e.s=-e.s,e))},v.precision=v.sd=function(e){var t,n,r,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=N(i)+1,n=7*(r=i.d.length-1)+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},v.squareRoot=v.sqrt=function(){var e,t,n,r,i,a,s,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(l+"NaN")}for(e=N(c),o=!1,0==(i=Math.sqrt(+c))||i==1/0?(((t=b(c.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=d((e+1)/2)-(e<0||e%2),r=new u(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new u(i.toString()),i=s=(n=u.precision)+3;;)if(r=(a=r).plus(j(c,a,s+2)).times(.5),b(a.d).slice(0,s)===(t=b(r.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&"4999"==t){if(T(a,n+1,0),a.times(a).eq(c)){r=a;break}}else if("9999"!=t)break;s+=4}return o=!0,T(r,n)},v.times=v.mul=function(e){var t,n,r,i,a,s,l,c,u,d=this,h=d.constructor,p=d.d,f=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,(c=p.length)<(u=f.length)&&(a=p,p=f,f=a,s=c,c=u,u=s),a=[],r=s=c+u;r--;)a.push(0);for(r=u;--r>=0;){for(t=0,i=c+r;i>r;)l=a[i]+f[r]*p[i-r-1]+t,a[i--]=l%m|0,t=l/m|0;a[i]=(a[i]+t)%m|0}for(;!a[--s];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,o?T(e,h.precision):e},v.toDecimalPlaces=v.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(x(e,0,a),void 0===t?t=r.rounding:x(t,0,8),T(n,e+N(n)+1,t))},v.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=A(r,!0):(x(e,0,a),void 0===t?t=i.rounding:x(t,0,8),n=A(r=T(new i(r),e+1,t),!0,e+1)),n},v.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return void 0===e?A(i):(x(e,0,a),void 0===t?t=s.rounding:x(t,0,8),n=A((r=T(new s(i),e+N(i)+1,t)).abs(),!1,e+N(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)},v.toInteger=v.toint=function(){var e=this,t=e.constructor;return T(new t(e),N(e)+1,t.rounding)},v.toNumber=function(){return+this},v.toPower=v.pow=function(e){var t,n,r,a,s,c,u=this,h=u.constructor,p=+(e=new h(e));if(!e.s)return new h(i);if(!(u=new h(u)).s){if(e.s<1)throw Error(l+"Infinity");return u}if(u.eq(i))return u;if(r=h.precision,e.eq(i))return T(u,r);if(c=(t=e.e)>=(n=e.d.length-1),s=u.s,c){if((n=p<0?-p:p)<=f){for(a=new h(i),t=Math.ceil(r/7+4),o=!1;n%2&&I((a=a.times(u)).d,t),0!==(n=d(n/2));)I((u=u.times(u)).d,t);return o=!0,e.s<0?new h(i).div(a):T(a,r)}}else if(s<0)throw Error(l+"NaN");return s=s<0&&1&e.d[Math.max(t,n)]?-1:1,u.s=1,o=!1,a=e.times(S(u,r+12)),o=!0,(a=w(a)).s=s,a},v.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return void 0===e?r=A(i,(n=N(i))<=s.toExpNeg||n>=s.toExpPos):(x(e,1,a),void 0===t?t=s.rounding:x(t,0,8),r=A(i=T(new s(i),e,t),e<=(n=N(i))||n<=s.toExpNeg,e)),r},v.toSignificantDigits=v.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(x(e,1,a),void 0===t?t=n.rounding:x(t,0,8)),T(new n(this),e,t)},v.toString=v.valueOf=v.val=v.toJSON=function(){var e=this,t=N(e),n=e.constructor;return A(e,t<=n.toExpNeg||t>=n.toExpPos)};var j=function(){function e(e,t){var n,r=0,i=e.length;for(e=e.slice();i--;)n=e[i]*t+r,e[i]=n%m|0,r=n/m|0;return r&&e.unshift(r),e}function t(e,t,n,r){var i,a;if(n!=r)a=n>r?1:-1;else for(i=a=0;i<n;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}return a}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*m+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,a,s){var o,c,u,d,h,p,f,g,v,y,x,b,j,w,k,C,S,E,_=r.constructor,A=r.s==i.s?1:-1,I=r.d,P=i.d;if(!r.s)return new _(r);if(!i.s)throw Error(l+"Division by zero");for(c=r.e-i.e,S=P.length,k=I.length,g=(f=new _(A)).d=[],u=0;P[u]==(I[u]||0);)++u;if(P[u]>(I[u]||0)&&--c,(b=null==a?a=_.precision:s?a+(N(r)-N(i))+1:a)<0)return new _(0);if(b=b/7+2|0,u=0,1==S)for(d=0,P=P[0],b++;(u<k||d)&&b--;u++)j=d*m+(I[u]||0),g[u]=j/P|0,d=j%P|0;else{for((d=m/(P[0]+1)|0)>1&&(P=e(P,d),I=e(I,d),S=P.length,k=I.length),w=S,y=(v=I.slice(0,S)).length;y<S;)v[y++]=0;(E=P.slice()).unshift(0),C=P[0],P[1]>=m/2&&++C;do{d=0,(o=t(P,v,S,y))<0?(x=v[0],S!=y&&(x=x*m+(v[1]||0)),(d=x/C|0)>1?(d>=m&&(d=m-1),1==(o=t(h=e(P,d),v,p=h.length,y=v.length))&&(d--,n(h,S<p?E:P,p))):(0==d&&(o=d=1),h=P.slice()),(p=h.length)<y&&h.unshift(0),n(v,h,y),-1==o&&(o=t(P,v,S,y=v.length))<1&&(d++,n(v,S<y?E:P,y)),y=v.length):0===o&&(d++,v=[0]),g[u++]=d,o&&v[0]?v[y++]=I[w]||0:(v=[I[w]],y=1)}while((w++<k||void 0!==v[0])&&b--)}return g[0]||g.shift(),f.e=c,T(f,s?a+N(f)+1:a)}}();function w(e,t){var n,r,a,s,l,c=0,d=0,p=e.constructor,m=p.precision;if(N(e)>16)throw Error(u+N(e));if(!e.s)return new p(i);for(null==t?(o=!1,l=m):l=t,s=new p(.03125);e.abs().gte(.1);)e=e.times(s),d+=5;for(l+=Math.log(h(2,d))/Math.LN10*2+5|0,n=r=a=new p(i),p.precision=l;;){if(r=T(r.times(e),l),n=n.times(++c),b((s=a.plus(j(r,n,l))).d).slice(0,l)===b(a.d).slice(0,l)){for(;d--;)a=T(a.times(a),l);return p.precision=m,null==t?(o=!0,T(a,m)):a}a=s}}function N(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function k(e,t,n){if(t>e.LN10.sd())throw o=!0,n&&(e.precision=n),Error(l+"LN10 precision limit exceeded");return T(new e(e.LN10),t)}function C(e){for(var t="";e--;)t+="0";return t}function S(e,t){var n,r,a,s,c,u,d,h,p,m=1,f=e,g=f.d,v=f.constructor,y=v.precision;if(f.s<1)throw Error(l+(f.s?"NaN":"-Infinity"));if(f.eq(i))return new v(0);if(null==t?(o=!1,h=y):h=t,f.eq(10))return null==t&&(o=!0),k(v,h);if(h+=10,v.precision=h,r=(n=b(g)).charAt(0),s=N(f),!(Math.abs(s)<15e14))return d=k(v,h+2,y).times(s+""),f=S(new v(r+"."+n.slice(1)),h-10).plus(d),v.precision=y,null==t?(o=!0,T(f,y)):f;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=b((f=f.times(e)).d)).charAt(0),m++;for(s=N(f),r>1?(f=new v("0."+n),s++):f=new v(r+"."+n.slice(1)),u=c=f=j(f.minus(i),f.plus(i),h),p=T(f.times(f),h),a=3;;){if(c=T(c.times(p),h),b((d=u.plus(j(c,new v(a),h))).d).slice(0,h)===b(u.d).slice(0,h))return u=u.times(2),0!==s&&(u=u.plus(k(v,h+2,y).times(s+""))),u=j(u,new v(m),h),v.precision=y,null==t?(o=!0,T(u,y)):u;u=d,a+=2}}function E(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(r,i)){if(i-=r,n=n-r-1,e.e=d(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),o&&(e.e>g||e.e<-g))throw Error(u+n)}else e.s=0,e.e=0,e.d=[0];return e}function T(e,t,n){var r,i,a,s,l,c,p,f,v=e.d;for(s=1,a=v[0];a>=10;a/=10)s++;if((r=t-s)<0)r+=7,i=t,p=v[f=0];else{if((f=Math.ceil((r+1)/7))>=(a=v.length))return e;for(p=a=v[f],s=1;a>=10;a/=10)s++;i=(r%=7)-7+s}if(void 0!==n&&(l=p/(a=h(10,s-i-1))%10|0,c=t<0||void 0!==v[f+1]||p%a,c=n<4?(l||c)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||c||6==n&&(r>0?i>0?p/h(10,s-i):0:v[f-1])%10&1||n==(e.s<0?8:7))),t<1||!v[0])return c?(a=N(e),v.length=1,t=t-a-1,v[0]=h(10,(7-t%7)%7),e.e=d(-t/7)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(0==r?(v.length=f,a=1,f--):(v.length=f+1,a=h(10,7-r),v[f]=i>0?(p/h(10,s-i)%h(10,i)|0)*a:0),c)for(;;){if(0==f){(v[0]+=a)==m&&(v[0]=1,++e.e);break}if(v[f]+=a,v[f]!=m)break;v[f--]=0,a=1}for(r=v.length;0===v[--r];)v.pop();if(o&&(e.e>g||e.e<-g))throw Error(u+N(e));return e}function _(e,t){var n,r,i,a,s,l,c,u,d,h,p=e.constructor,f=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),o?T(t,f):t;if(c=e.d,h=t.d,r=t.e,u=e.e,c=c.slice(),s=u-r){for((d=s<0)?(n=c,s=-s,l=h.length):(n=h,r=u,l=c.length),s>(i=Math.max(Math.ceil(f/7),l)+2)&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for((d=(i=c.length)<(l=h.length))&&(l=i),i=0;i<l;i++)if(c[i]!=h[i]){d=c[i]<h[i];break}s=0}for(d&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,i=h.length-l;i>0;--i)c[l++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(a=i;a&&0===c[--a];)c[a]=m-1;--c[a],c[i]+=m}c[i]-=h[i]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,o?T(t,f):t):new p(0)}function A(e,t,n){var r,i=N(e),a=b(e.d),s=a.length;return t?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+C(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+C(-i-1)+a,n&&(r=n-s)>0&&(a+=C(r))):i>=s?(a+=C(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+C(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=C(r))),e.s<0?"-"+a:a}function I(e,t){if(e.length>t)return e.length=t,!0}function P(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,n,r,i=["precision",1,a,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(r=e[n=i[t]])){if(!(d(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(c+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(c+n+": "+r);this[n]=new this(r)}return this}s=function e(t){var n,r,i;function a(e){var t=this;if(!(t instanceof a))return new a(e);if(t.constructor=a,e instanceof a)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):E(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!p.test(e))throw Error(c+e);E(t,e)}if(a.prototype=v,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=e,a.config=a.set=P,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return a.config(t),a}(s),s.default=s.Decimal=s,i=new s(1),void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()},8268:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2132);t.isMatch=function(e,t){return r.isMatchWith(e,t,()=>{})}},8346:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}},8365:(e,t,n)=>{"use strict";var r=n(5043);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useSyncExternalStore,s=r.useRef,o=r.useEffect,l=r.useMemo,c=r.useDebugValue},8396:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(5508);t.cloneDeep=function(e){return r.cloneDeepWith(e)}},8420:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}},8443:(e,t,n)=>{"use strict";e.exports=n(9717)},8499:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var o=new i(r,a||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,s=new Array(a);i<a;i++)s[i]=r[i].fn;return s},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,i,a,s){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,a),!0;case 6:return u.fn.call(u.context,t,r,i,a,s),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||r&&o.context!==r||s(this,a);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||i&&!o[l].once||r&&o[l].context!==r)&&c.push(o[l]);c.length?this._events[a]=1===c.length?c[0]:c:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},8845:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(8268),i=n(3272),a=n(8396),s=n(9323),o=n(5303);t.matchesProperty=function(e,t){switch(typeof e){case"object":var n;Object.is(null===(n=e)||void 0===n?void 0:n.valueOf(),-0)&&(e="-0");break;case"number":e=i.toKey(e)}return t=a.cloneDeep(t),function(n){const i=s.get(n,e);return void 0===i?o.has(n,e):void 0===t?void 0===i:r.isMatch(i,t)}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},9045:(e,t,n)=>{var r=n(3738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9323:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(7260),i=n(2489),a=n(3272),s=n(1444);t.get=function e(t,n,o){if(null==t)return o;switch(typeof n){case"string":{if(r.isUnsafeProperty(n))return o;const a=t[n];return void 0===a?i.isDeepKey(n)?e(t,s.toPath(n),o):o:a}case"number":case"symbol":{"number"===typeof n&&(n=a.toKey(n));const e=t[n];return void 0===e?o:e}default:{var l;if(Array.isArray(n))return function(e,t,n){if(0===t.length)return n;let i=e;for(let a=0;a<t.length;a++){if(null==i)return n;if(r.isUnsafeProperty(t[a]))return n;i=i[t[a]]}if(void 0===i)return n;return i}(t,n,o);if(n=Object.is(null===(l=n)||void 0===l?void 0:l.valueOf(),-0)?"-0":String(n),r.isUnsafeProperty(n))return o;const e=t[n];return void 0===e?o:e}}}},9330:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(4385),i=n(6443),a=n(5990),s=n(7599),o=n(9972);function l(e,t,n,r,i,a,s){const o=s(e,t,n,r,i,a);if(void 0!==o)return o;if(typeof e===typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return e===t;case"number":return e===t||Object.is(e,t);case"object":return c(e,t,a,s)}return c(e,t,a,s)}function c(e,t,n,u){if(Object.is(e,t))return!0;let d=a.getTag(e),h=a.getTag(t);if(d===s.argumentsTag&&(d=s.objectTag),h===s.argumentsTag&&(h=s.objectTag),d!==h)return!1;switch(d){case s.stringTag:return e.toString()===t.toString();case s.numberTag:{const n=e.valueOf(),r=t.valueOf();return o.eq(n,r)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(e.valueOf(),t.valueOf());case s.regexpTag:return e.source===t.source&&e.flags===t.flags;case s.functionTag:return e===t}const p=(n=null!==n&&void 0!==n?n:new Map).get(e),m=n.get(t);if(null!=p&&null!=m)return p===t;n.set(e,t),n.set(t,e);try{switch(d){case s.mapTag:if(e.size!==t.size)return!1;for(const[r,i]of e.entries())if(!t.has(r)||!l(i,t.get(r),r,e,t,n,u))return!1;return!0;case s.setTag:{if(e.size!==t.size)return!1;const r=Array.from(e.values()),i=Array.from(t.values());for(let a=0;a<r.length;a++){const s=r[a],o=i.findIndex(r=>l(s,r,void 0,e,t,n,u));if(-1===o)return!1;i.splice(o,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:if("undefined"!==typeof Buffer&&Buffer.isBuffer(e)!==Buffer.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!l(e[r],t[r],r,e,t,n,u))return!1;return!0;case s.arrayBufferTag:return e.byteLength===t.byteLength&&c(new Uint8Array(e),new Uint8Array(t),n,u);case s.dataViewTag:return e.byteLength===t.byteLength&&e.byteOffset===t.byteOffset&&c(new Uint8Array(e),new Uint8Array(t),n,u);case s.errorTag:return e.name===t.name&&e.message===t.message;case s.objectTag:{if(!(c(e.constructor,t.constructor,n,u)||r.isPlainObject(e)&&r.isPlainObject(t)))return!1;const a=[...Object.keys(e),...i.getSymbols(e)],s=[...Object.keys(t),...i.getSymbols(t)];if(a.length!==s.length)return!1;for(let r=0;r<a.length;r++){const i=a[r],s=e[i];if(!Object.hasOwn(t,i))return!1;if(!l(s,t[i],i,e,t,n,u))return!1}return!0}default:return!1}}finally{n.delete(e),n.delete(t)}}t.isEqualWith=function(e,t,n){return l(e,t,void 0,void 0,void 0,void 0,n)}},9397:(e,t,n)=>{e.exports=n(2682).isPlainObject},9461:(e,t,n)=>{"use strict";e.exports=n(2330)},9599:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.identity=function(e){return e}},9645:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6392),i=n(8346),a=n(1203);t.last=function(e){if(a.isArrayLike(e))return r.last(i.toArray(e))}},9709:(e,t)=>{"use strict";function n(e){return"symbol"===typeof e?1:null===e?2:void 0===e?3:e!==e?4:0}Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.compareValues=(e,t,r)=>{if(e!==t){const i=n(e),a=n(t);if(i===a&&0===i){if(e<t)return"desc"===r?1:-1;if(e>t)return"desc"===r?-1:1}return"desc"===r?a-i:i-a}return 0}},9717:(e,t,n)=>{"use strict";var r=n(5043),i=n(9461);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=i.useSyncExternalStore,o=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=o(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c(function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return o=t}return o=e}if(t=o,a(s,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(s=e,t):(s=e,o=n)}var s,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,i]);var p=s(e,d[0],d[1]);return l(function(){h.hasValue=!0,h.value=p},[p]),u(p),p}},9859:(e,t,n)=>{e.exports=n(7231).range},9921:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObjectLike=function(e){return"object"===typeof e&&null!==e}},9972:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.eq=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>s[e]=()=>r[e]);return s.default=()=>r,n.d(a,s),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{scaleBand:()=>MC,scaleDiverging:()=>_A,scaleDivergingLog:()=>AA,scaleDivergingPow:()=>PA,scaleDivergingSqrt:()=>OA,scaleDivergingSymlog:()=>IA,scaleIdentity:()=>NE,scaleImplicit:()=>OC,scaleLinear:()=>wE,scaleLog:()=>PE,scaleOrdinal:()=>DC,scalePoint:()=>LC,scalePow:()=>VE,scaleQuantile:()=>ZE,scaleQuantize:()=>eT,scaleRadial:()=>HE,scaleSequential:()=>wA,scaleSequentialLog:()=>NA,scaleSequentialPow:()=>CA,scaleSequentialQuantile:()=>EA,scaleSequentialSqrt:()=>SA,scaleSequentialSymlog:()=>kA,scaleSqrt:()=>BE,scaleSymlog:()=>RE,scaleThreshold:()=>tT,scaleTime:()=>yA,scaleUtc:()=>xA,tickFormat:()=>bE});var t,r=n(5043),i=n.t(r,2),a=n(4391),s=n(7950),o=n.t(s,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?f(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,n,r,i){void 0===i&&(i={});let{window:a=document.defaultView,v5Compat:s=!1}=i,o=a.history,d=t.Pop,f=null,g=v();function v(){return(o.state||{idx:null}).idx}function y(){d=t.Pop;let e=v(),n=null==e?null:e-g;g=e,f&&f({action:d,location:b.location,delta:n})}function x(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,o.replaceState(l({},o.state,{idx:g}),""));let b={get action(){return d},get location(){return e(a,o)},listen(e){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(c,y),f=e,()=>{a.removeEventListener(c,y),f=null}},createHref:e=>n(a,e),createURL:x,encodeLocation(e){let t=x(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){d=t.Push;let i=p(b.location,e,n);r&&r(i,e),g=v()+1;let l=h(i,g),c=b.createHref(i);try{o.pushState(l,"",c)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;a.location.assign(c)}s&&f&&f({action:d,location:b.location,delta:1})},replace:function(e,n){d=t.Replace;let i=p(b.location,e,n);r&&r(i,e),g=v();let a=h(i,g),l=b.createHref(i);o.replaceState(a,"",l),s&&f&&f({action:d,location:b.location,delta:0})},go:e=>o.go(e)};return b}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){return void 0===n&&(n="/"),x(e,t,n,!1)}function x(e,t,n,r){let i=O(("string"===typeof t?f(t):t).pathname||"/",n);if(null==i)return null;let a=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let s=null;for(let o=0;null==s&&o<a.length;++o){let e=P(i);s=A(a[o],e,r)}return s}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,a)=>{let s={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(u(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let o=z([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),b(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:_(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of j(e.path))i(e,t,r);else i(e,t)}),t}function j(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return i?[a,""]:[a];let s=j(r.join("/")),o=[];return o.push(...s.map(e=>""===e?a:[a,e].join("/"))),i&&o.push(...s),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const w=/^:[\w-]+$/,N=3,k=2,C=1,S=10,E=-2,T=e=>"*"===e;function _(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=E),t&&(r+=k),n.filter(e=>!T(e)).reduce((e,t)=>e+(w.test(t)?N:""===t?C:S),r)}function A(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},a="/",s=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===a?t:t.slice(a.length)||"/",u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:z([a,u.pathname]),pathnameBase:F(z([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=z([a,u.pathnameBase]))}return s}function I(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:a,pathnameBase:s,pattern:e}}function P(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function O(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function R(e,t){let n=M(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=f(e):(i=l({},e),u(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let a,s=""===e||""===i.pathname,o=s?"/":i.pathname;if(null==o)a=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?f(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:U(r),hash:V(i)}}(i,a),d=o&&"/"!==o&&o.endsWith("/"),h=(s||"."===o)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}const z=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],H=(new Set(q),["get",...q]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const K=r.createContext(null);const G=r.createContext(null);const Y=r.createContext(null);const Q=r.createContext(null);const X=r.createContext({outlet:null,matches:[],isDataRoute:!1});const J=r.createContext(null);function $(){return null!=r.useContext(Q)}function Z(){return $()||u(!1),r.useContext(Q).location}function ee(e){r.useContext(Y).static||r.useLayoutEffect(e)}function te(){let{isDataRoute:e}=r.useContext(X);return e?function(){let{router:e}=he(ue.UseNavigateStable),t=me(de.UseNavigateStable),n=r.useRef(!1);ee(()=>{n.current=!0});let i=r.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},i)))},[e,t]);return i}():function(){$()||u(!1);let e=r.useContext(K),{basename:t,future:n,navigator:i}=r.useContext(Y),{matches:a}=r.useContext(X),{pathname:s}=Z(),o=JSON.stringify(R(a,n.v7_relativeSplatPath)),l=r.useRef(!1);ee(()=>{l.current=!0});let c=r.useCallback(function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let a=L(n,JSON.parse(o),s,"path"===r.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:z([t,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)},[t,i,o,s,e]);return c}()}function ne(){let{matches:e}=r.useContext(X),t=e[e.length-1];return t?t.params:{}}function re(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(Y),{matches:a}=r.useContext(X),{pathname:s}=Z(),o=JSON.stringify(R(a,i.v7_relativeSplatPath));return r.useMemo(()=>L(e,JSON.parse(o),s,"path"===n),[e,o,s,n])}function ie(e,n,i,a){$()||u(!1);let{navigator:s}=r.useContext(Y),{matches:o}=r.useContext(X),l=o[o.length-1],c=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,p=Z();if(n){var m;let e="string"===typeof n?f(n):n;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||u(!1),h=e}else h=p;let g=h.pathname||"/",v=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=y(e,{pathname:v});let b=ce(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:z([d,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:z([d,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,i,a);return n&&b?r.createElement(Q.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:t.Pop}},b):b}function ae(){let e=function(){var e;let t=r.useContext(J),n=pe(de.UseRouteError),i=me(de.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}const se=r.createElement(ae,null);class oe extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(X.Provider,{value:this.props.routeContext},r.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:n,children:i}=e,a=r.useContext(K);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(X.Provider,{value:t},i)}function ce(e,t,n,i){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var s;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(s=i)&&s.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(a=n)?void 0:a.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||u(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,d=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,i,a)=>{let s,u=!1,h=null,p=null;var m;n&&(s=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||se,c&&(d<0&&0===a?(m="route-fallback",!1||fe[m]||(fe[m]=!0),u=!0,p=null):d===a&&(u=!0,p=i.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,a+1)),g=()=>{let t;return t=s?h:u?p:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(le,{match:i,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?r.createElement(oe,{location:n.location,revalidation:n.revalidation,component:h,error:s,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function he(e){let t=r.useContext(K);return t||u(!1),t}function pe(e){let t=r.useContext(G);return t||u(!1),t}function me(e){let t=function(){let e=r.useContext(X);return e||u(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const fe={};function ge(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function ve(e){u(!1)}function ye(e){let{basename:n="/",children:i=null,location:a,navigationType:s=t.Pop,navigator:o,static:l=!1,future:c}=e;$()&&u(!1);let d=n.replace(/^\/*/,"/"),h=r.useMemo(()=>({basename:d,navigator:o,static:l,future:W({v7_relativeSplatPath:!1},c)}),[d,c,o,l]);"string"===typeof a&&(a=f(a));let{pathname:p="/",search:m="",hash:g="",state:v=null,key:y="default"}=a,x=r.useMemo(()=>{let e=O(p,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:v,key:y},navigationType:s}},[d,p,m,g,v,y,s]);return null==x?null:r.createElement(Y.Provider,{value:h},r.createElement(Q.Provider,{children:i,value:x}))}function xe(e){let{children:t,location:n}=e;return ie(be(t),n)}new Promise(()=>{});r.Component;function be(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,(e,i)=>{if(!r.isValidElement(e))return;let a=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,be(e.props.children,a));e.type!==ve&&u(!1),e.props.index&&e.props.children&&u(!1);let s={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=be(e.props.children,a)),n.push(s)}),n}function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},je.apply(this,arguments)}function we(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ne=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(OQ){}new Map;const ke=i.startTransition;o.flushSync,i.useId;function Ce(e){let{basename:t,children:n,future:i,window:a}=e,s=r.useRef();var o;null==s.current&&(s.current=(void 0===(o={window:a,v5Compat:!0})&&(o={}),g(function(e,t){let{pathname:n="/",search:r="",hash:i=""}=f(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),p("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:m(t))},function(e,t){d("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},o)));let l=s.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:h}=i||{},v=r.useCallback(e=>{h&&ke?ke(()=>u(e)):u(e)},[u,h]);return r.useLayoutEffect(()=>l.listen(v),[l,v]),r.useEffect(()=>ge(i),[i]),r.createElement(ye,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const Se="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Te=r.forwardRef(function(e,t){let n,{onClick:i,relative:a,reloadDocument:s,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:p}=e,f=we(e,Ne),{basename:g}=r.useContext(Y),v=!1;if("string"===typeof d&&Ee.test(d)&&(n=d,Se))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=O(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:v=!0}catch(OQ){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;$()||u(!1);let{basename:i,navigator:a}=r.useContext(Y),{hash:s,pathname:o,search:l}=re(e,{relative:n}),c=o;return"/"!==i&&(c="/"===o?i:z([i,o])),a.createHref({pathname:c,search:l,hash:s})}(d,{relative:a}),x=function(e,t){let{target:n,replace:i,state:a,preventScrollReset:s,relative:o,viewTransition:l}=void 0===t?{}:t,c=te(),u=Z(),d=re(e,{relative:o});return r.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:m(u)===m(d);c(e,{replace:n,state:a,preventScrollReset:s,relative:o,viewTransition:l})}},[u,c,d,i,a,n,e,s,o,l])}(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:a,viewTransition:p});return r.createElement("a",je({},f,{href:n||y,onClick:v||s?i:function(e){i&&i(e),e.defaultPrevented||x(e)},ref:t,target:c}))});var _e,Ae;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_e||(_e={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ae||(Ae={}));function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Pe(e){var t=function(e,t){if("object"!=Ie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ie(t)?t:t+""}function Oe(e,t,n){return(t=Pe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach(function(t){Oe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const Re=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],a=i+1<e.length,s=a?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;o||(h=64,a||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Re(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){const a=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==a||null==s||null==o)throw new ze;const l=t<<2|a>>4;if(r.push(l),64!==s){const e=a<<4&240|s>>2;if(r.push(e),64!==o){const e=s<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ze extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(e){return function(e){const t=Re(e);return Le.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ue=function(e){try{return Le.decodeString(e,!0)}catch(OQ){console.error("base64Decode failed: ",OQ)}return null};function Ve(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Be=()=>{try{return Ve().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(OQ){return}const t=e&&Ue(e[1]);return t&&JSON.parse(t)})()}catch(OQ){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(OQ))}},qe=e=>{var t;return null===(t=Be())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},He=e=>{const t=qe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},We=()=>{var e;return null===(e=Be())||void 0===e?void 0:e.config},Ke=e=>{var t;return null===(t=Be())||void 0===t?void 0:t["_".concat(e)]};class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Ye(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function Qe(e){return(await fetch(e,{credentials:"include"})).ok}function Xe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Me({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Fe(JSON.stringify({alg:"none",type:"JWT"})),Fe(JSON.stringify(a)),""].join(".")}const Je={};let $e=!1;function Ze(e,t){if("undefined"===typeof window||"undefined"===typeof document||!Ye(window.location.host)||Je[e]===t||Je[e]||$e)return;function n(e){return"__firebase__banner__".concat(e)}Je[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Je))Je[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function a(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{$e=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function s(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),s=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=a();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,s,l,n),document.body.appendChild(t)}i?(s.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',s.innerText="Preview backend running in this workspace."),s.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}function et(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function tt(){var e;const t=null===(e=Be())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(OQ){return!1}}function nt(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function rt(){return!tt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function it(){try{return"object"===typeof indexedDB}catch(OQ){return!1}}function at(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class st extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,st.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ot.prototype.create)}}class ot{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(lt,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new st(n,a,t)}}const lt=/\{\$([^}]+)}/g;function ct(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],a=t[i];if(ut(n)&&ut(a)){if(!ct(n,a))return!1}else if(n!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ut(e){return null!==e&&"object"===typeof e}function dt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ht(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function pt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class mt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ft),void 0===r.error&&(r.error=ft),void 0===r.complete&&(r.complete=ft);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(OQ){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(OQ){"undefined"!==typeof console&&console.error&&console.error(OQ)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ft(){}function gt(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function vt(e){return e&&e._delegate?e._delegate:e}class yt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const xt="[DEFAULT]";class bt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ge;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(OQ){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(OQ){if(r)return null;throw OQ}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:xt})}catch(OQ){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(OQ){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,a]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&a.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===xt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt;return this.component?this.component.multipleInstances?e:xt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class jt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const wt=[];var Nt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Nt||(Nt={}));const kt={debug:Nt.DEBUG,verbose:Nt.VERBOSE,info:Nt.INFO,warn:Nt.WARN,error:Nt.ERROR,silent:Nt.SILENT},Ct=Nt.INFO,St={[Nt.DEBUG]:"log",[Nt.VERBOSE]:"log",[Nt.INFO]:"info",[Nt.WARN]:"warn",[Nt.ERROR]:"error"},Et=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=St[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...a)};class Tt{constructor(e){this.name=e,this._logLevel=Ct,this._logHandler=Et,this._userLogHandler=null,wt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Nt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?kt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Nt.DEBUG,...t),this._logHandler(this,Nt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Nt.VERBOSE,...t),this._logHandler(this,Nt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Nt.INFO,...t),this._logHandler(this,Nt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Nt.WARN,...t),this._logHandler(this,Nt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Nt.ERROR,...t),this._logHandler(this,Nt.ERROR,...t)}}let _t,At;const It=new WeakMap,Pt=new WeakMap,Ot=new WeakMap,Dt=new WeakMap,Mt=new WeakMap;let Rt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Pt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ot.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ft(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Lt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(At||(At=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ut(this),n),Ft(It.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ft(e.apply(Ut(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const a=e.call(Ut(this),t,...r);return Ot.set(a,t.sort?t.sort():[t]),Ft(a)}}function zt(e){return"function"===typeof e?Lt(e):(e instanceof IDBTransaction&&function(e){if(Pt.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});Pt.set(e,t)}(e),((e,t)=>t.some(t=>e instanceof t))(e,_t||(_t=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Rt):e)}function Ft(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(Ft(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(t=>{t instanceof IDBCursor&&It.set(t,e)}).catch(()=>{}),Mt.set(t,e),t}(e);if(Dt.has(e))return Dt.get(e);const t=zt(e);return t!==e&&(Dt.set(e,t),Mt.set(t,e)),t}const Ut=e=>Mt.get(e);function Vt(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),o=Ft(s);return r&&s.addEventListener("upgradeneeded",e=>{r(Ft(s.result),e.oldVersion,e.newVersion,Ft(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{a&&e.addEventListener("close",()=>a()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}const Bt=["get","getKey","getAll","getAllKeys","count"],qt=["put","add","delete","clear"],Ht=new Map;function Wt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ht.get(t))return Ht.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=qt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Bt.includes(n))return;const a=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let a=t.store;for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return r&&(a=a.index(o.shift())),(await Promise.all([a[n](...o),i&&t.done]))[0]};return Ht.set(t,a),a}Rt=(e=>Me(Me({},e),{},{get:(t,n,r)=>Wt(t,n)||e.get(t,n,r),has:(t,n)=>!!Wt(t,n)||e.has(t,n)}))(Rt);class Kt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Gt="@firebase/app",Yt="0.14.1",Qt=new Tt("@firebase/app"),Xt="@firebase/app-compat",Jt="@firebase/analytics-compat",$t="@firebase/analytics",Zt="@firebase/app-check-compat",en="@firebase/app-check",tn="@firebase/auth",nn="@firebase/auth-compat",rn="@firebase/database",an="@firebase/data-connect",sn="@firebase/database-compat",on="@firebase/functions",ln="@firebase/functions-compat",cn="@firebase/installations",un="@firebase/installations-compat",dn="@firebase/messaging",hn="@firebase/messaging-compat",pn="@firebase/performance",mn="@firebase/performance-compat",fn="@firebase/remote-config",gn="@firebase/remote-config-compat",vn="@firebase/storage",yn="@firebase/storage-compat",xn="@firebase/firestore",bn="@firebase/ai",jn="@firebase/firestore-compat",wn="firebase",Nn="[DEFAULT]",kn={[Gt]:"fire-core",[Xt]:"fire-core-compat",[$t]:"fire-analytics",[Jt]:"fire-analytics-compat",[en]:"fire-app-check",[Zt]:"fire-app-check-compat",[tn]:"fire-auth",[nn]:"fire-auth-compat",[rn]:"fire-rtdb",[an]:"fire-data-connect",[sn]:"fire-rtdb-compat",[on]:"fire-fn",[ln]:"fire-fn-compat",[cn]:"fire-iid",[un]:"fire-iid-compat",[dn]:"fire-fcm",[hn]:"fire-fcm-compat",[pn]:"fire-perf",[mn]:"fire-perf-compat",[fn]:"fire-rc",[gn]:"fire-rc-compat",[vn]:"fire-gcs",[yn]:"fire-gcs-compat",[xn]:"fire-fst",[jn]:"fire-fst-compat",[bn]:"fire-vertex","fire-js":"fire-js",[wn]:"fire-js-all"},Cn=new Map,Sn=new Map,En=new Map;function Tn(e,t){try{e.container.addComponent(t)}catch(OQ){Qt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),OQ)}}function _n(e){const t=e.name;if(En.has(t))return Qt.debug("There were multiple attempts to register component ".concat(t,".")),!1;En.set(t,e);for(const n of Cn.values())Tn(n,e);for(const n of Sn.values())Tn(n,e);return!0}function An(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function In(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Pn=new ot("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class On{constructor(e,t,n){this._isDeleted=!1,this._options=Me({},e),this._config=Me({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new yt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pn.create("app-deleted",{appName:this._name})}}const Dn="12.1.0";function Mn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Me({name:Nn,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw Pn.create("bad-app-name",{appName:String(i)});if(n||(n=We()),!n)throw Pn.create("no-options");const a=Cn.get(i);if(a){if(ct(n,a.options)&&ct(r,a.config))return a;throw Pn.create("duplicate-app",{appName:i})}const s=new jt(i);for(const l of En.values())s.addComponent(l);const o=new On(n,r,s);return Cn.set(i,o),o}function Rn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn;const t=Cn.get(e);if(!t&&e===Nn&&We())return Mn();if(!t)throw Pn.create("no-app",{appName:e});return t}function Ln(e,t,n){var r;let i=null!==(r=kn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Qt.warn(e.join(" "))}_n(new yt("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const zn="firebase-heartbeat-store";let Fn=null;function Un(){return Fn||(Fn=Vt("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(zn)}catch(OQ){console.warn(OQ)}}}).catch(e=>{throw Pn.create("idb-open",{originalErrorMessage:e.message})})),Fn}async function Vn(e,t){try{const n=(await Un()).transaction(zn,"readwrite"),r=n.objectStore(zn);await r.put(t,Bn(e)),await n.done}catch(OQ){if(OQ instanceof st)Qt.warn(OQ.message);else{const t=Pn.create("idb-set",{originalErrorMessage:null===OQ||void 0===OQ?void 0:OQ.message});Qt.warn(t.message)}}}function Bn(e){return"".concat(e.name,"!").concat(e.options.appId)}class qn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Wn(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Hn();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(OQ){Qt.warn(OQ)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Hn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Kn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Kn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Fe(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(OQ){return Qt.warn(OQ),""}}}function Hn(){return(new Date).toISOString().substring(0,10)}class Wn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!it()&&at().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Un()).transaction(zn),n=await t.objectStore(zn).get(Bn(e));return await t.done,n}catch(OQ){if(OQ instanceof st)Qt.warn(OQ.message);else{const t=Pn.create("idb-get",{originalErrorMessage:null===OQ||void 0===OQ?void 0:OQ.message});Qt.warn(t.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Vn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Vn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Kn(e){return Fe(JSON.stringify({version:2,heartbeats:e})).length}var Gn;Gn="",_n(new yt("platform-logger",e=>new Kt(e),"PRIVATE")),_n(new yt("heartbeat",e=>new qn(e),"PRIVATE")),Ln(Gt,Yt,Gn),Ln(Gt,Yt,"esm2020"),Ln("fire-js","");var Yn,Qn,Xn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Jn={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],s=t+(a^n&(i^a))+r[0]+3614090360&4294967295;s=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(s<<7&4294967295|s>>>25))+((s=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((a=(t=n+((s=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=a+((s=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,a=this.h,s=0;s<t;){if(0==a)for(;s<=r;)n(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[a++]=e.charCodeAt(s++),a==this.blockSize){n(this,i),a=0;break}}else for(;s<t;)if(i[a++]=e[s++],a==this.blockSize){n(this,i),a=0;break}}this.h=a,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function a(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function s(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(s(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=a(0),l=a(1),c=a(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function p(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function f(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new f(o,o);if(d(e))return t=g(h(e),t),new f(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new f(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),a=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=a.add(r);0>=c.l(e)&&(i=i.add(n),a=c),r=y(r,1),n=y(n,1)}return t=p(e,i.j(t)),new f(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(a=s(n)).j(t);d(c)||0<c.l(e);)c=(a=s(n-=r)).j(t);u(a)&&(a=l),i=i.add(a),e=p(e,c)}return new f(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,a=[],s=0;s<i;s++)a[s]=0<t?e.i(s+n)>>>t|e.i(s+n+1)<<32-t:e.i(s+n);return new r(a,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=s(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,a=((0<(n=p(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=p(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,a=0;a<=t;a++){var s=i+(65535&this.i(a))+(65535&e.i(a)),o=(s>>>16)+(this.i(a)>>>16)+(e.i(a)>>>16);i=o>>>16,s&=65535,o&=65535,n[a]=o<<16|s}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return s(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var a=0;a<e.g.length;a++){var l=this.i(i)>>>16,p=65535&this.i(i),f=e.i(a)>>>16,g=65535&e.i(a);n[2*i+2*a]+=p*g,m(n,2*i+2*a),n[2*i+2*a+1]+=l*g,m(n,2*i+2*a+1),n[2*i+2*a+1]+=p*f,m(n,2*i+2*a+1),n[2*i+2*a+2]+=l*f,m(n,2*i+2*a+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Qn=Jn.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=s,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=s(Math.pow(n,8)),i=o,a=0;a<t.length;a+=8){var l=Math.min(8,t.length-a),c=parseInt(t.substring(a,a+l),n);8>l?(l=s(Math.pow(n,l)),i=i.j(l).add(s(c))):i=(i=i.j(r)).add(s(c))}return i},Yn=Jn.Integer=r}).apply("undefined"!==typeof Xn?Xn:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var $n,Zn,er,tr,nr,rr,ir,ar,sr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},or={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof sr&&sr];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var a=0;a<e.length-1;a++){var s=e[a];if(!(s in i))break e;i=i[s]}(r=r(a=i[e=e[e.length-1]]))!=a&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function a(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(a(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function f(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=f().indexOf("Gecko")&&!(-1!=f().toLowerCase().indexOf("webkit")&&-1==f().indexOf("Edge"))&&!(-1!=f().indexOf("Trident")||-1!=f().indexOf("MSIE"))&&-1==f().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function x(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function w(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function N(e){i.setTimeout(()=>{throw e},0)}function k(){var e=_;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var C=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new S,e=>e.reset());class S{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let E,T=!1,_=new class{constructor(){this.h=this.g=null}add(e,t){const n=C.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);E=()=>{e.then(I)}};var I=()=>{for(var e;e=k();){try{e.h.call(e.g)}catch(pB){N(pB)}var t=C;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}T=!1};function P(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(pB){}return e}();function M(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:R[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}d(M,O);var R={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),z=0;function F(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++z,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Array.prototype.indexOf.call(i,t,void 0);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}V.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var s=q(e,t,r,i);return-1<s?(t=e[s],n||(t.fa=!1)):((t=new F(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),W={};function K(e,t,n,r,i){if(r&&r.once)return Y(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)K(e,t[a],n,r,i);return null}return n=te(n),e&&e[L]?e.K(t,n,s(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=s(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new V(e)),(n=l.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Y(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Y(e,t[a],n,r,i);return null}return n=te(n),e&&e[L]?e.L(t,n,s(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Q(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=te(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(a=e.g[t],n,r,i))&&(U(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[H]=null)):U(e)}}}function J(e){return e in W?W[e]:W[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new V(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;j(t=new O(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var s=t.g=n[a];i=ie(s,r,!0,t)&&i}if(i=ie(s=t.g=e,r,!0,t)&&i,i=ie(s,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ie(s=t.g=n[a],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var s=t[a];if(s&&!s.da&&s.capture==n){var o=s.listener,l=s.ha||s.src;s.fa&&B(e.i,s),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function ae(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function se(e){e.g=ae(()=>{e.g=null,e.i&&(e.i=!1,se(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,P),ne.prototype[L]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}d(le,P);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&X(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,pe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function me(){}function fe(e){return e.h||(e.h=e.i())}function ge(){}me.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){O.call(this,"d")}function xe(){O.call(this,"c")}d(ye,O),d(xe,O);var be={},je=null;function we(){return je=je||new ne}function Ne(e){O.call(this,be.La,e)}function ke(e){const t=we();re(t,new Ne(t))}function Ce(e,t){O.call(this,be.STAT_EVENT,e),this.stat=t}function Se(e){const t=we();re(t,new Ce(t,e))}function Ee(e,t){O.call(this,be.Ma,e),this.size=t}function Te(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function _e(){this.g=!0}function Ae(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var s=1;s<i.length;s++)i[s]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}be.La="serverreachability",d(Ne,O),be.STAT_EVENT="statevent",d(Ce,O),be.Ma="timingevent",d(Ee,O),_e.prototype.xa=function(){this.g=!1},_e.prototype.info=function(){};var Ie,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Me(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Re}function Re(){this.i=null,this.g="",this.h=!1}d(De,me),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Ie=new De;var Le={},ze={};function Fe(e,t,n){e.L=1,e.v=dt(st(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),qe(e),e.A=st(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),kt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Re,e.g=hn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var a=0;a<i.length;a++){var s=K(n,i[a],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}t=e.H?x(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ke(),function(e,t,n,r,i,a){e.info(function(){if(e.g)if(a)for(var s="",o=a.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&"type"==d[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ze:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?ze:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function We(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||on(e.j,e)}function Ge(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ye(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;sn(n),Qt(n)}nn(n),Se(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&sn(n),!m(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var a=r.h;a.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(et(a,a.h),a.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var s=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),s.K){tt(r.h,s);var o=s,l=r.L;l&&(o.I=l),o.B&&(We(o),qe(o)),r.g=s}else tn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}ke()}catch(u){}}Me.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Me.prototype.Y=function(e){try{if(e==this.g)e:{const h=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=h||7==t||ke(),We(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=Wt(this.g);e="";var a=r.length,s=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<a;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(s&&t==a-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,a,s){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+s})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Se(12),Ge(this),Ke(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ye(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==ze){4==h&&(this.s=4,Se(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,Se(15),Ae(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Ye(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Se(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),rn(d),d.M=!0,Se(11))}}else Ae(this.i,this.l,o,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else Ae(this.i,this.l,o,null),Ye(this,o);4==h&&Ge(this),this.o&&!this.J&&(4==h?on(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=w(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const a=t[i]||[];t[i]=a,a.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),Ge(this),Ke(this)}}}catch(h){}},Me.prototype.cancel=function(){this.J=!0,Ge(this)},Me.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(ke(),Se(17)),Ge(this),this.s=2,Ke(this)):He(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(a(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(a(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(a(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function at(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof at){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new bt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new bt(null,this.h))}function st(e){return new at(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof bt?(e.i=t,function(e,t){t&&!e.j&&(jt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(wt(this,t),kt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=pt(t,yt)),e.i=new bt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,mt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}at.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pt(t,ft,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(pt(t,ft,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pt(n,"/"==n.charAt(0)?vt:gt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",pt(n,xt)),e.join("")};var ft=/[#\/\?@]/g,gt=/[#\?:]/g,vt=/[#\?]/g,yt=/[#\?@]/g,xt=/#/g;function bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function jt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function wt(e,t){jt(e),t=Ct(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Nt(e,t){return jt(e),t=Ct(e,t),e.g.has(t)}function kt(e,t,n){wt(e,t),0<n.length&&(e.i=null,e.g.set(Ct(e,t),h(n)),e.h+=n.length)}function Ct(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(a){}}function Et(){this.g=new pe}function Tt(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;s(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(OQ){throw t.push(r+"type="+encodeURIComponent("_badmap")),OQ}}function _t(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function It(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Pt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Dt(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Rt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=bt.prototype).add=function(e,t){jt(this),this.i=null,e=Ct(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){jt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){jt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){jt(this);let t=[];if("string"===typeof e)Nt(this,e)&&(t=t.concat(this.g.get(Ct(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return jt(this),this.i=null,Nt(this,e=Ct(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const a=encodeURIComponent(String(r)),s=this.V(r);for(r=0;r<s.length;r++){var i=a;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")},d(_t,me),_t.prototype.g=function(){return new At(this.l,this.j)},_t.prototype.i=function(e){return function(){return e}}({}),d(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;It(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pt(this):Ot(this),3==this.readyState&&It(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Pt(this))},e.Qa=function(e){this.g&&(this.response=e,Pt(this))},e.ga=function(){this.g&&Pt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Rt,ne);var Lt=/^https?$/i,zt=["POST","PUT"];function Ft(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ut(e),Bt(e)}function Ut(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Vt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))ae(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var a;if(a=0===r){var s=String(e.D).match(it)[1]||null;!s&&i.self&&i.self.location&&(s=i.self.location.protocol.slice(0,-1)),a=!Lt.test(s?s.toLowerCase():"")}n=a}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Ht(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Ut(e)}}finally{Bt(e)}}}function Bt(e,t){if(e.g){qt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(OQ){}}}function qt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new _e,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new Et,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if(Xt(e),3==e.G){var t=e.U++,n=st(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),Zt(e,n),(t=new Me(e,e.j,t)).L=2,t.v=dt(st(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=hn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}un(e)}function Qt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Xt(e){Qt(e),e.u&&(i.clearTimeout(e.u),e.u=null),sn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;E||A(),T||(E(),T=!0),_.add(t,e),e.B=0}}function $t(e,t){var n;n=t?t.l:e.U++;const r=st(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),Zt(e,r),e.m&&e.o&&Mt(r,e.m,e.o),n=new Me(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Fe(n,r,t)}function Zt(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const l=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Tt(l,e,"req"+n+"_")}catch(a){r&&r(l)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;E||A(),T||(E(),T=!0),_.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Me(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=st(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),Zt(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(st(t)),n.m=null,n.P=!0,Ue(n,e)}function sn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function on(e,t){var n=null;if(e.g==t){sn(e),rn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=we(),new Ee(r,n)),Jt(e)}else tn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Te(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new at(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new _e;if(i.Image){const r=new Image;r.onload=u(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(St,n,"TestLoadImage: error",!1,t,r),r.onabort=u(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(St,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new _e;const n=new AbortController,r=setTimeout(()=>{n.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(r),St(0,0,!1,t)})}(r.toString(),n)}else Se(2);e.G=0,e.l&&e.l.sa(t),un(e),Xt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof at?st(n):new at(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var a=i.location;r=a.protocol,t=t?t+"."+a.hostname:a.hostname,a=+a.port;var s=new at(null);r&&ot(s,r),t&&(s.g=t),a&&lt(s,a),n&&(s.l=n),r=s}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),Zt(e,r),r}function hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Rt(new _t({eb:n})):new Rt(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function fn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yn(this)}function gn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){xe.call(this),this.status=1}function yn(e){this.g=e}(e=Rt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ie.g(),this.v=this.o?fe(this.o):fe(Ie),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(s){return void Ft(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)n.set(a,r[a]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),a=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(zt,t,void 0))||r||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qt(this),this.u=!0,this.g.send(e),this.u=!1}catch(s){Ft(this,s)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Bt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bt(this,!0)),Rt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vt(this):this.bb())},e.bb=function(){Vt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(gB){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(gB){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Se(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Me(this,this.j,e);let a=this.o;if(this.S&&(a?(a=x(a),j(a,this.S)):a=this.S),null!==this.m||this.O||(i.H=a,a=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,i,t),ut(n=st(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),Zt(this,n),a&&(this.O?t="headers="+encodeURIComponent(String(Dt(a)))+"&"+t:this.m&&Mt(n,this.m,a)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Fe(i,n,null)):Fe(i,n,t),this.G=2}}else 3==this.G&&(e?$t(this,e):0==this.i.length||Je(this.h)||$t(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),Qt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Qt(this),nn(this),Se(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new fn(e,t)},d(fn,ne),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Yt(this.g)},fn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Jt(t)},fn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,fn.aa.N.call(this)},d(gn,ye),d(vn,xe),d(yn,pn),yn.prototype.ua=function(){re(this.g,"a")},yn.prototype.ta=function(e){re(this.g,new gn(e))},yn.prototype.sa=function(e){re(this.g,new vn)},yn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,ar=or.createWebChannelTransport=function(){return new mn},ir=or.getStatEventTarget=function(){return we()},rr=or.Event=be,nr=or.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,tr=or.ErrorCode=Pe,Oe.COMPLETE="complete",er=or.EventType=Oe,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Zn=or.WebChannel=ge,or.FetchXmlHttpFactory=_t,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,$n=or.XhrIo=Rt}).apply("undefined"!==typeof sr?sr:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const lr="@firebase/firestore",cr="4.9.0";class ur{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ur.UNAUTHENTICATED=new ur(null),ur.GOOGLE_CREDENTIALS=new ur("google-credentials-uid"),ur.FIRST_PARTY=new ur("first-party-uid"),ur.MOCK_USER=new ur("mock-user");let dr="12.0.0";const hr=new Tt("@firebase/firestore");function pr(){return hr.logLevel}function mr(e){if(hr.logLevel<=Nt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(vr);hr.debug("Firestore (".concat(dr,"): ").concat(e),...i)}}function fr(e){if(hr.logLevel<=Nt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(vr);hr.error("Firestore (".concat(dr,"): ").concat(e),...i)}}function gr(e){if(hr.logLevel<=Nt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(vr);hr.warn("Firestore (".concat(dr,"): ").concat(e),...i)}}function vr(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function yr(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,xr(e,r,n)}function xr(e,t,n){let r="FIRESTORE (".concat(dr,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw fr(r),new Error(r)}function br(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||xr(t,i,r)}function jr(e,t){return e}const wr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Nr extends st{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class kr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Cr{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Sr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ur.UNAUTHENTICATED))}shutdown(){}}class Er{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Tr{constructor(e){this.t=e,this.currentUser=ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){br(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new kr,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},s=e=>{mr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(e=>s(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(mr("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new kr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(mr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(br("string"==typeof t.accessToken,31837,{l:t}),new Cr(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return br(null===e||"string"==typeof e,2055,{h:e}),new ur(e)}}class _r{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=ur.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ar{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new _r(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ir{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Pr{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,In(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){br(void 0===this.o,3512);const n=e=>{null!=e.error&&mr("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,mr("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{mr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):mr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ir(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(br("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Ir(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Or(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Dr{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Or(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Mr(e,t){return e<t?-1:e>t?1:0}function Rr(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return Fr(n)===Fr(i)?Mr(n,i):Fr(n)?1:-1}return Mr(e.length,t.length)}const Lr=55296,zr=57343;function Fr(e){const t=e.charCodeAt(0);return t>=Lr&&t<=zr}function Ur(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Vr="__name__";class Br{constructor(e,t,n){void 0===t?t=0:t>e.length&&yr(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&yr(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Br.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Br?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Br.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Mr(e.length,t.length)}static compareSegments(e,t){const n=Br.isNumericId(e),r=Br.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Br.extractNumericId(e).compare(Br.extractNumericId(t)):Rr(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yn.fromString(e.substring(4,e.length-2))}}class qr extends Br{construct(e,t,n){return new qr(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Nr(wr.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new qr(e)}static emptyPath(){return new qr([])}}const Hr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wr extends Br{construct(e,t,n){return new Wr(e,t,n)}static isValidIdentifier(e){return Hr.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Vr}static keyField(){return new Wr([Vr])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Nr(wr.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let a=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Nr(wr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Nr(wr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(a=!a,r++):"."!==t||a?(n+=t,r++):(i(),r++)}if(i(),a)throw new Nr(wr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wr(t)}static emptyPath(){return new Wr([])}}class Kr{constructor(e){this.path=e}static fromPath(e){return new Kr(qr.fromString(e))}static fromName(e){return new Kr(qr.fromString(e).popFirst(5))}static empty(){return new Kr(qr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Kr(new qr(e.slice()))}}function Gr(e,t,n){if(!n)throw new Nr(wr.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Yr(e){if(!Kr.isDocumentKey(e))throw new Nr(wr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Qr(e){if(Kr.isDocumentKey(e))throw new Nr(wr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Xr(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Jr(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":yr(12329,{type:typeof e})}function $r(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Nr(wr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jr(e);throw new Nr(wr.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Zr(e,t){const n={typeString:e};return t&&(n.value=t),n}function ei(e,t){if(!Xr(e))throw new Nr(wr.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,a="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const s=e[r];if(i&&typeof s!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==a&&s!==a.value){n="Expected '".concat(r,"' field to equal '").concat(a.value,"'");break}}if(n)throw new Nr(wr.INVALID_ARGUMENT,n);return!0}const ti=-62135596800,ni=1e6;class ri{static now(){return ri.fromMillis(Date.now())}static fromDate(e){return ri.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*ni);return new ri(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Nr(wr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Nr(wr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ti)throw new Nr(wr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Nr(wr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ni}_compareTo(e){return this.seconds===e.seconds?Mr(this.nanoseconds,e.nanoseconds):Mr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ri._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ei(e,ri._jsonSchema))return new ri(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ti;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ri._jsonSchemaVersion="firestore/timestamp/1.0",ri._jsonSchema={type:Zr("string",ri._jsonSchemaVersion),seconds:Zr("number"),nanoseconds:Zr("number")};class ii{static fromTimestamp(e){return new ii(e)}static min(){return new ii(new ri(0,0))}static max(){return new ii(new ri(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ai=-1;class si{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}si.UNKNOWN_ID=-1;function oi(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ii.fromTimestamp(1e9===r?new ri(n+1,0):new ri(n,r));return new ci(i,Kr.empty(),t)}function li(e){return new ci(e.readTime,e.key,ai)}class ci{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ci(ii.min(),Kr.empty(),ai)}static max(){return new ci(ii.max(),Kr.empty(),ai)}}function ui(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Kr.comparator(e.documentKey,t.documentKey),0!==n?n:Mr(e.largestBatchId,t.largestBatchId))}const di="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hi{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function pi(e){if(e.code!==wr.FAILED_PRECONDITION||e.message!==di)throw e;mr("LocalStore","Unexpectedly lost primary lease")}class mi{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&yr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new mi((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof mi?t:mi.resolve(t)}catch(e){return mi.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):mi.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):mi.reject(t)}static resolve(e){return new mi((t,n)=>{t(e)})}static reject(e){return new mi((t,n)=>{n(e)})}static waitFor(e){return new mi((t,n)=>{let r=0,i=0,a=!1;e.forEach(e=>{++r,e.next(()=>{++i,a&&i===r&&t()},e=>n(e))}),a=!0,i===r&&t()})}static or(e){let t=mi.resolve(!1);for(const n of e)t=t.next(e=>e?mi.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new mi((n,r)=>{const i=e.length,a=new Array(i);let s=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{a[l]=e,++s,s===i&&n(a)},e=>r(e))}})}static doWhile(e,t){return new mi((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function fi(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function gi(e){return"IndexedDbTransactionError"===e.name}class vi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vi.ce=-1;const yi=-1;function xi(e){return null==e}function bi(e){return 0===e&&1/e==-1/0}function ji(e){return"number"==typeof e&&Number.isInteger(e)&&!bi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const wi="\x01";function Ni(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ci(t)),t=ki(e.get(n),t);return Ci(t)}function ki(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case wi:n+="\x01\x11";break;default:n+=t}}return n}function Ci(e){return e+wi+"\x01"}const Si="remoteDocuments",Ei="owner",Ti="mutationQueues",_i="mutations";const Ai="documentMutations",Ii="remoteDocumentsV14",Pi="remoteDocumentGlobal",Oi="targets",Di="targetDocuments",Mi="targetGlobal",Ri="collectionParents",Li="clientMetadata",zi="bundles",Fi="namedQueries",Ui="indexConfiguration",Vi="indexState",Bi="indexEntries",qi="documentOverlays",Hi="globals",Wi=[Ti,_i,Ai,Si,Oi,Ei,Mi,Di,Li,Pi,Ri,zi,Fi],Ki=[Ti,_i,Ai,Ii,Oi,Ei,Mi,Di,Li,Pi,Ri,zi,Fi,qi],Gi=Ki,Yi=[...Gi,Ui,Vi,Bi];function Qi(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Xi(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ji(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class $i{constructor(e,t){this.comparator=e,this.root=t||ea.EMPTY}insert(e,t){return new $i(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ea.BLACK,null,null))}remove(e){return new $i(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ea.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zi(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zi(this.root,e,this.comparator,!0)}}class Zi{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ea{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ea.RED,this.left=null!=r?r:ea.EMPTY,this.right=null!=i?i:ea.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ea(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ea.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ea.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ea.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ea.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yr(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw yr(27949);return e+(this.isRed()?0:1)}}ea.EMPTY=null,ea.RED=!0,ea.BLACK=!1,ea.EMPTY=new class{constructor(){this.size=0}get key(){throw yr(57766)}get value(){throw yr(16141)}get color(){throw yr(16727)}get left(){throw yr(29726)}get right(){throw yr(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new ea(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ta{constructor(e){this.comparator=e,this.data=new $i(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new na(this.data.getIterator())}getIteratorFrom(e){return new na(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof ta))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ta(this.comparator);return t.data=e,t}}class na{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ra{constructor(e){this.fields=e,e.sort(Wr.comparator)}static empty(){return new ra([])}unionWith(e){let t=new ta(Wr.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ra(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ur(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class ia extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class aa{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ia("Invalid base64 string: "+e):e}}(e);return new aa(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new aa(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}aa.EMPTY_BYTE_STRING=new aa("");const sa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oa(e){if(br(!!e,39018),"string"==typeof e){let t=0;const n=sa.exec(e);if(br(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:la(e.seconds),nanos:la(e.nanos)}}function la(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ca(e){return"string"==typeof e?aa.fromBase64String(e):aa.fromUint8Array(e)}const ua="server_timestamp",da="__type__",ha="__previous_value__",pa="__local_write_time__";function ma(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[da])||void 0===t?void 0:t.stringValue)===ua}function fa(e){const t=e.mapValue.fields[ha];return ma(t)?fa(t):t}function ga(e){const t=oa(e.mapValue.fields[pa].timestampValue);return new ri(t.seconds,t.nanos)}class va{constructor(e,t,n,r,i,a,s,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=s,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const ya="(default)";class xa{constructor(e,t){this.projectId=e,this.database=t||ya}static empty(){return new xa("","")}get isDefaultDatabase(){return this.database===ya}isEqual(e){return e instanceof xa&&e.projectId===this.projectId&&e.database===this.database}}const ba="__type__",ja="__max__",wa={mapValue:{fields:{__type__:{stringValue:ja}}}},Na="__vector__",ka="value";function Ca(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ma(e)?4:Ba(e)?9007199254740991:Ua(e)?10:11:yr(28295,{value:e})}function Sa(e,t){if(e===t)return!0;const n=Ca(e);if(n!==Ca(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ga(e).isEqual(ga(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=oa(e.timestampValue),r=oa(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ca(e.bytesValue).isEqual(ca(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return la(e.geoPointValue.latitude)===la(t.geoPointValue.latitude)&&la(e.geoPointValue.longitude)===la(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return la(e.integerValue)===la(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=la(e.doubleValue),r=la(t.doubleValue);return n===r?bi(n)===bi(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ur(e.arrayValue.values||[],t.arrayValue.values||[],Sa);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Qi(n)!==Qi(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Sa(n[i],r[i])))return!1;return!0}(e,t);default:return yr(52216,{left:e})}}function Ea(e,t){return void 0!==(e.values||[]).find(e=>Sa(e,t))}function Ta(e,t){if(e===t)return 0;const n=Ca(e),r=Ca(t);if(n!==r)return Mr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Mr(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=la(e.integerValue||e.doubleValue),r=la(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _a(e.timestampValue,t.timestampValue);case 4:return _a(ga(e),ga(t));case 5:return Rr(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ca(e),r=ca(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Mr(n[i],r[i]);if(0!==e)return e}return Mr(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Mr(la(e.latitude),la(t.latitude));return 0!==n?n:Mr(la(e.longitude),la(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Aa(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,a){const s=e.fields||{},o=t.fields||{},l=null===(n=s[ka])||void 0===n?void 0:n.arrayValue,c=null===(r=o[ka])||void 0===r?void 0:r.arrayValue,u=Mr((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(a=c.values)||void 0===a?void 0:a.length)||0);return 0!==u?u:Aa(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===wa.mapValue&&t===wa.mapValue)return 0;if(e===wa.mapValue)return 1;if(t===wa.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let s=0;s<r.length&&s<a.length;++s){const e=Rr(r[s],a[s]);if(0!==e)return e;const t=Ta(n[r[s]],i[a[s]]);if(0!==t)return t}return Mr(r.length,a.length)}(e.mapValue,t.mapValue);default:throw yr(23264,{he:n})}}function _a(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Mr(e,t);const n=oa(e),r=oa(t),i=Mr(n.seconds,r.seconds);return 0!==i?i:Mr(n.nanos,r.nanos)}function Aa(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ta(n[i],r[i]);if(e)return e}return Mr(n.length,r.length)}function Ia(e){return Pa(e)}function Pa(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=oa(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return ca(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Kr.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Pa(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Pa(e.fields[i]));return n+"}"}(e.mapValue):yr(61005,{value:e})}function Oa(e){switch(Ca(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=fa(e);return t?16+Oa(t):16;case 5:return 2*e.stringValue.length;case 6:return ca(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Oa(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Xi(e.fields,(e,n)=>{t+=e.length+Oa(n)}),t}(e.mapValue);default:throw yr(13486,{value:e})}}function Da(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ma(e){return!!e&&"integerValue"in e}function Ra(e){return!!e&&"arrayValue"in e}function La(e){return!!e&&"nullValue"in e}function za(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Fa(e){return!!e&&"mapValue"in e}function Ua(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ba])||void 0===t?void 0:t.stringValue)===Na}function Va(e){if(e.geoPointValue)return{geoPointValue:Me({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Me({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Xi(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Va(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Va(e.arrayValue.values[n]);return t}return Me({},e)}function Ba(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===ja}class qa{constructor(e){this.value=e}static empty(){return new qa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Fa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Va(t)}setAll(e){let t=Wr.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Va(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Fa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Fa(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Xi(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new qa(Va(this.value))}}function Ha(e){const t=[];return Xi(e.fields,(e,n)=>{const r=new Wr([e]);if(Fa(n)){const e=Ha(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new ra(t)}class Wa{constructor(e,t,n,r,i,a,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=s}static newInvalidDocument(e){return new Wa(e,0,ii.min(),ii.min(),ii.min(),qa.empty(),0)}static newFoundDocument(e,t,n,r){return new Wa(e,1,t,ii.min(),n,r,0)}static newNoDocument(e,t){return new Wa(e,2,t,ii.min(),ii.min(),qa.empty(),0)}static newUnknownDocument(e,t){return new Wa(e,3,t,ii.min(),ii.min(),qa.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ii.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ii.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Wa&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Ka{constructor(e,t){this.position=e,this.inclusive=t}}function Ga(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const a=t[i],s=e.position[i];if(r=a.field.isKeyField()?Kr.comparator(Kr.fromName(s.referenceValue),n.key):Ta(s,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Ya(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Sa(e.position[n],t.position[n]))return!1;return!0}class Qa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Xa(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ja{}class $a extends Ja{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ss(e,t,n):"array-contains"===t?new us(e,n):"in"===t?new ds(e,n):"not-in"===t?new hs(e,n):"array-contains-any"===t?new ps(e,n):new $a(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new os(e,n):new ls(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Ta(t,this.value)):null!==t&&Ca(this.value)===Ca(t)&&this.matchesComparison(Ta(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return yr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Za extends Ja{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Za(e,t)}matches(e){return es(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function es(e){return"and"===e.op}function ts(e){return ns(e)&&es(e)}function ns(e){for(const t of e.filters)if(t instanceof Za)return!1;return!0}function rs(e){if(e instanceof $a)return e.field.canonicalString()+e.op.toString()+Ia(e.value);if(ts(e))return e.filters.map(e=>rs(e)).join(",");{const t=e.filters.map(e=>rs(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function is(e,t){return e instanceof $a?function(e,t){return t instanceof $a&&e.op===t.op&&e.field.isEqual(t.field)&&Sa(e.value,t.value)}(e,t):e instanceof Za?function(e,t){return t instanceof Za&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&is(n,t.filters[r]),!0)}(e,t):void yr(19439)}function as(e){return e instanceof $a?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ia(e.value))}(e):e instanceof Za?function(e){return e.op.toString()+" {"+e.getFilters().map(as).join(" ,")+"}"}(e):"Filter"}class ss extends $a{constructor(e,t,n){super(e,t,n),this.key=Kr.fromName(n.referenceValue)}matches(e){const t=Kr.comparator(e.key,this.key);return this.matchesComparison(t)}}class os extends $a{constructor(e,t){super(e,"in",t),this.keys=cs("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ls extends $a{constructor(e,t){super(e,"not-in",t),this.keys=cs("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function cs(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Kr.fromName(e.referenceValue))}class us extends $a{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ra(t)&&Ea(t.arrayValue,this.value)}}class ds extends $a{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ea(this.value.arrayValue,t)}}class hs extends $a{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ea(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Ea(this.value.arrayValue,t)}}class ps extends $a{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ra(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ea(this.value.arrayValue,e))}}class ms{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=s,this.Te=null}}function fs(e){return new ms(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function gs(e){const t=jr(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>rs(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),xi(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Ia(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Ia(e)).join(",")),t.Te=e}return t.Te}function vs(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Xa(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!is(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ya(e.startAt,t.startAt)&&Ya(e.endAt,t.endAt)}function ys(e){return Kr.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class xs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=s,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function bs(e,t,n,r,i,a,s,o){return new xs(e,t,n,r,i,a,s,o)}function js(e){return new xs(e)}function ws(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ns(e){return null!==e.collectionGroup}function ks(e){const t=jr(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new ta(Wr.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Qa(r,n))}),e.has(Wr.keyField().canonicalString())||t.Ie.push(new Qa(Wr.keyField(),n))}return t.Ie}function Cs(e){const t=jr(e);return t.Ee||(t.Ee=Ss(t,ks(e))),t.Ee}function Ss(e,t){if("F"===e.limitType)return fs(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Qa(e.field,t)});const n=e.endAt?new Ka(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ka(e.startAt.position,e.startAt.inclusive):null;return fs(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Es(e,t){const n=e.filters.concat([t]);return new xs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ts(e,t,n){return new xs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function _s(e,t){return vs(Cs(e),Cs(t))&&e.limitType===t.limitType}function As(e){return"".concat(gs(Cs(e)),"|lt:").concat(e.limitType)}function Is(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>as(e)).join(", "),"]")),xi(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Ia(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Ia(e)).join(",")),"Target(".concat(t,")")}(Cs(e)),"; limitType=").concat(e.limitType,")")}function Ps(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Kr.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ks(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Ga(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ks(e),t))&&!(e.endAt&&!function(e,t,n){const r=Ga(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ks(e),t))}(e,t)}function Os(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ds(e){return(t,n)=>{let r=!1;for(const i of ks(e)){const e=Ms(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ms(e,t,n){const r=e.field.isKeyField()?Kr.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ta(r,i):yr(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return yr(19790,{direction:e.dir})}}class Rs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Xi(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Ji(this.inner)}size(){return this.innerSize}}const Ls=new $i(Kr.comparator);function zs(){return Ls}const Fs=new $i(Kr.comparator);function Us(){let e=Fs;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Vs(e){let t=Fs;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Bs(){return Hs()}function qs(){return Hs()}function Hs(){return new Rs(e=>e.toString(),(e,t)=>e.isEqual(t))}const Ws=new $i(Kr.comparator),Ks=new ta(Kr.comparator);function Gs(){let e=Ks;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Ys=new ta(Mr);function Qs(){return Ys}function Xs(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bi(t)?"-0":t}}function Js(e){return{integerValue:""+e}}function $s(e,t){return ji(t)?Js(t):Xs(e,t)}class Zs{constructor(){this._=void 0}}function eo(e,t,n){return e instanceof ro?function(e,t){const n={fields:{[da]:{stringValue:ua},[pa]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ma(t)&&(t=fa(t)),t&&(n.fields[ha]=t),{mapValue:n}}(n,t):e instanceof io?ao(e,t):e instanceof so?oo(e,t):function(e,t){const n=no(e,t),r=co(n)+co(e.Ae);return Ma(n)&&Ma(e.Ae)?Js(r):Xs(e.serializer,r)}(e,t)}function to(e,t,n){return e instanceof io?ao(e,t):e instanceof so?oo(e,t):n}function no(e,t){return e instanceof lo?function(e){return Ma(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ro extends Zs{}class io extends Zs{constructor(e){super(),this.elements=e}}function ao(e,t){const n=uo(t);for(const r of e.elements)n.some(e=>Sa(e,r))||n.push(r);return{arrayValue:{values:n}}}class so extends Zs{constructor(e){super(),this.elements=e}}function oo(e,t){let n=uo(t);for(const r of e.elements)n=n.filter(e=>!Sa(e,r));return{arrayValue:{values:n}}}class lo extends Zs{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function co(e){return la(e.integerValue||e.doubleValue)}function uo(e){return Ra(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class ho{constructor(e,t){this.field=e,this.transform=t}}class po{constructor(e,t){this.version=e,this.transformResults=t}}class mo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mo}static exists(e){return new mo(void 0,e)}static updateTime(e){return new mo(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fo(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class go{}function vo(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Eo(e.key,mo.none()):new wo(e.key,e.data,mo.none());{const n=e.data,r=qa.empty();let i=new ta(Wr.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new No(e.key,r,new ra(i.toArray()),mo.none())}}function yo(e,t,n){e instanceof wo?function(e,t,n){const r=e.value.clone(),i=Co(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof No?function(e,t,n){if(!fo(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Co(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ko(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function xo(e,t,n,r){return e instanceof wo?function(e,t,n,r){if(!fo(e.precondition,t))return n;const i=e.value.clone(),a=So(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof No?function(e,t,n,r){if(!fo(e.precondition,t))return n;const i=So(e.fieldTransforms,r,t),a=t.data;return a.setAll(ko(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return fo(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function bo(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=no(r.transform,e||null);null!=i&&(null===n&&(n=qa.empty()),n.set(r.field,i))}return n||null}function jo(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ur(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof io&&t instanceof io||e instanceof so&&t instanceof so?Ur(e.elements,t.elements,Sa):e instanceof lo&&t instanceof lo?Sa(e.Ae,t.Ae):e instanceof ro&&t instanceof ro}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class wo extends go{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class No extends go{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ko(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Co(e,t,n){const r=new Map;br(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const a=e[i],s=a.transform,o=t.data.field(a.field);r.set(a.field,to(s,o,n[i]))}return r}function So(e,t,n){const r=new Map;for(const i of e){const e=i.transform,a=n.data.field(i.field);r.set(i.field,eo(e,a,t))}return r}class Eo extends go{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class To extends go{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _o{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&yo(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=xo(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=xo(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=qs();return this.mutations.forEach(r=>{const i=e.get(r.key),a=i.overlayedDocument;let s=this.applyToLocalView(a,i.mutatedFields);s=t.has(r.key)?null:s;const o=vo(a,s);null!==o&&n.set(r.key,o),a.isValidDocument()||a.convertToNoDocument(ii.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gs())}isEqual(e){return this.batchId===e.batchId&&Ur(this.mutations,e.mutations,(e,t)=>jo(e,t))&&Ur(this.baseMutations,e.baseMutations,(e,t)=>jo(e,t))}}class Ao{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){br(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Ws;const i=e.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,n[a].version);return new Ao(e,t,n,r)}}class Io{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Po{constructor(e,t){this.count=e,this.unchangedNames=t}}var Oo,Do;function Mo(e){switch(e){case wr.OK:return yr(64938);case wr.CANCELLED:case wr.UNKNOWN:case wr.DEADLINE_EXCEEDED:case wr.RESOURCE_EXHAUSTED:case wr.INTERNAL:case wr.UNAVAILABLE:case wr.UNAUTHENTICATED:return!1;case wr.INVALID_ARGUMENT:case wr.NOT_FOUND:case wr.ALREADY_EXISTS:case wr.PERMISSION_DENIED:case wr.FAILED_PRECONDITION:case wr.ABORTED:case wr.OUT_OF_RANGE:case wr.UNIMPLEMENTED:case wr.DATA_LOSS:return!0;default:return yr(15467,{code:e})}}function Ro(e){if(void 0===e)return fr("GRPC error has no .code"),wr.UNKNOWN;switch(e){case Oo.OK:return wr.OK;case Oo.CANCELLED:return wr.CANCELLED;case Oo.UNKNOWN:return wr.UNKNOWN;case Oo.DEADLINE_EXCEEDED:return wr.DEADLINE_EXCEEDED;case Oo.RESOURCE_EXHAUSTED:return wr.RESOURCE_EXHAUSTED;case Oo.INTERNAL:return wr.INTERNAL;case Oo.UNAVAILABLE:return wr.UNAVAILABLE;case Oo.UNAUTHENTICATED:return wr.UNAUTHENTICATED;case Oo.INVALID_ARGUMENT:return wr.INVALID_ARGUMENT;case Oo.NOT_FOUND:return wr.NOT_FOUND;case Oo.ALREADY_EXISTS:return wr.ALREADY_EXISTS;case Oo.PERMISSION_DENIED:return wr.PERMISSION_DENIED;case Oo.FAILED_PRECONDITION:return wr.FAILED_PRECONDITION;case Oo.ABORTED:return wr.ABORTED;case Oo.OUT_OF_RANGE:return wr.OUT_OF_RANGE;case Oo.UNIMPLEMENTED:return wr.UNIMPLEMENTED;case Oo.DATA_LOSS:return wr.DATA_LOSS;default:return yr(39323,{code:e})}}(Do=Oo||(Oo={}))[Do.OK=0]="OK",Do[Do.CANCELLED=1]="CANCELLED",Do[Do.UNKNOWN=2]="UNKNOWN",Do[Do.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Do[Do.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Do[Do.NOT_FOUND=5]="NOT_FOUND",Do[Do.ALREADY_EXISTS=6]="ALREADY_EXISTS",Do[Do.PERMISSION_DENIED=7]="PERMISSION_DENIED",Do[Do.UNAUTHENTICATED=16]="UNAUTHENTICATED",Do[Do.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Do[Do.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Do[Do.ABORTED=10]="ABORTED",Do[Do.OUT_OF_RANGE=11]="OUT_OF_RANGE",Do[Do.UNIMPLEMENTED=12]="UNIMPLEMENTED",Do[Do.INTERNAL=13]="INTERNAL",Do[Do.UNAVAILABLE=14]="UNAVAILABLE",Do[Do.DATA_LOSS=15]="DATA_LOSS";let Lo=null;function zo(){return new TextEncoder}const Fo=new Yn([4294967295,4294967295],0);function Uo(e){const t=zo().encode(e),n=new Qn;return n.update(t),new Uint8Array(n.digest())}function Vo(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Yn([n,r],0),new Yn([i,a],0)]}class Bo{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new qo("Invalid padding: ".concat(t));if(n<0)throw new qo("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new qo("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new qo("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=Yn.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Yn.fromNumber(n)));return 1===r.compare(Fo)&&(r=new Yn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Uo(e),[n,r]=Vo(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Bo(i,r,t);return n.forEach(e=>a.insert(e)),a}insert(e){if(0===this.ge)return;const t=Uo(e),[n,r]=Vo(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class qo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ho{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Wo.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ho(ii.min(),r,new $i(Mr),zs(),Gs())}}class Wo{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Wo(n,t,Gs(),Gs(),Gs())}}class Ko{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Go{constructor(e,t){this.targetId=e,this.Ce=t}}class Yo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:aa.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Qo{constructor(){this.ve=0,this.Fe=$o(),this.Me=aa.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Gs(),t=Gs(),n=Gs();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:yr(38017,{changeType:i})}}),new Wo(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=$o()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,br(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Xo{constructor(e){this.Ge=e,this.ze=new Map,this.je=zs(),this.Je=Jo(),this.He=Jo(),this.Ye=new $i(Mr)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:yr(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(ys(a))if(0===n){const e=new Kr(a.path);this.et(t,e,Wa.newNoDocument(e,ii.min()))}else br(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),a=n?this.ct(n,e,r):1;if(0!==a){this.it(t);const e=2===a?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=Lo)||void 0===i||i.lt(function(e,t,n,r,i,a,s,o,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(a=null===d||void 0===d?void 0:d.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(s=null===d||void 0===d||null===(o=d.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==s?s:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,a))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let a,s;try{a=ca(n).toUint8Array()}catch(e){if(e instanceof ia)return gr("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new Bo(a,r,i)}catch(e){return gr(e instanceof qo?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.ge?null:s}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),a="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(a)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&ys(i.target)){const t=new Kr(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Wa.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=Gs();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Ho(e,t,this.Ye,this.je,n);return this.je=zs(),this.Je=Jo(),this.He=Jo(),this.Ye=new $i(Mr),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Qo,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ta(Mr),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ta(Mr),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||mr("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Qo),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Jo(){return new $i(Kr.comparator)}function $o(){return new $i(Kr.comparator)}const Zo={asc:"ASCENDING",desc:"DESCENDING"},el={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tl={and:"AND",or:"OR"};class nl{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rl(e,t){return e.useProto3Json||xi(t)?t:{value:t}}function il(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function al(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function sl(e,t){return il(e,t.toTimestamp())}function ol(e){return br(!!e,49232),ii.fromTimestamp(function(e){const t=oa(e);return new ri(t.seconds,t.nanos)}(e))}function ll(e,t){return cl(e,t).canonicalString()}function cl(e,t){const n=function(e){return new qr(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ul(e){const t=qr.fromString(e);return br(Al(t),10190,{key:t.toString()}),t}function dl(e,t){return ll(e.databaseId,t.path)}function hl(e,t){const n=ul(t);if(n.get(1)!==e.databaseId.projectId)throw new Nr(wr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Nr(wr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Kr(gl(n))}function pl(e,t){return ll(e.databaseId,t)}function ml(e){const t=ul(e);return 4===t.length?qr.emptyPath():gl(t)}function fl(e){return new qr(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function gl(e){return br(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function vl(e,t,n){return{name:dl(e,t),fields:n.value.mapValue.fields}}function yl(e,t){let n;if(t instanceof wo)n={update:vl(e,t.key,t.value)};else if(t instanceof Eo)n={delete:dl(e,t.key)};else if(t instanceof No)n={update:vl(e,t.key,t.data),updateMask:_l(t.fieldMask)};else{if(!(t instanceof To))return yr(16599,{Vt:t.type});n={verify:dl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof ro)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof io)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof so)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof lo)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw yr(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:sl(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:yr(27497)}(e,t.precondition)),n}function xl(e,t){return{documents:[pl(e,t.path)]}}function bl(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pl(e,i);const a=function(e){if(0!==e.length)return Tl(Za.create(e,"and"))}(t.filters);a&&(n.structuredQuery.where=a);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Sl(e.field),direction:Nl(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=rl(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function jl(e){let t=ml(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){br(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){const t=wl(e);return t instanceof Za&&ts(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map(e=>function(e){return new Qa(El(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,xi(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ka(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Ka(n,t)}(n.endAt)),bs(t,i,s,a,o,"F",l,c)}function wl(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=El(e.unaryFilter.field);return $a.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=El(e.unaryFilter.field);return $a.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=El(e.unaryFilter.field);return $a.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=El(e.unaryFilter.field);return $a.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yr(61313);default:return yr(60726)}}(e):void 0!==e.fieldFilter?function(e){return $a.create(El(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yr(58110);default:return yr(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Za.create(e.compositeFilter.filters.map(e=>wl(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return yr(1026)}}(e.compositeFilter.op))}(e):yr(30097,{filter:e})}function Nl(e){return Zo[e]}function kl(e){return el[e]}function Cl(e){return tl[e]}function Sl(e){return{fieldPath:e.canonicalString()}}function El(e){return Wr.fromServerFormat(e.fieldPath)}function Tl(e){return e instanceof $a?function(e){if("=="===e.op){if(za(e.value))return{unaryFilter:{field:Sl(e.field),op:"IS_NAN"}};if(La(e.value))return{unaryFilter:{field:Sl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(za(e.value))return{unaryFilter:{field:Sl(e.field),op:"IS_NOT_NAN"}};if(La(e.value))return{unaryFilter:{field:Sl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sl(e.field),op:kl(e.op),value:e.value}}}(e):e instanceof Za?function(e){const t=e.getFilters().map(e=>Tl(e));return 1===t.length?t[0]:{compositeFilter:{op:Cl(e.op),filters:t}}}(e):yr(54877,{filter:e})}function _l(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Al(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Il{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ii.min(),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ii.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:aa.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=s,this.expectedCount=o}withSequenceNumber(e){return new Il(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Il(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Pl{constructor(e){this.yt=e}}function Ol(e){const t=jl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ts(t,t.limit,"L"):t}class Dl{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(la(e.integerValue));else if("doubleValue"in e){const n=la(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),bi(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=oa(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ca(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Ba(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Ua(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):yr(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=ka,a=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(la(a)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Kr.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Dl.Kt=new Dl;class Ml{constructor(){this.Cn=new Rl}addToCollectionParentIndex(e,t){return this.Cn.add(t),mi.resolve()}getCollectionParents(e,t){return mi.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return mi.resolve()}deleteFieldIndex(e,t){return mi.resolve()}deleteAllFieldIndexes(e){return mi.resolve()}createTargetIndexes(e,t){return mi.resolve()}getDocumentsMatchingTarget(e,t){return mi.resolve(null)}getIndexType(e,t){return mi.resolve(0)}getFieldIndexes(e,t){return mi.resolve([])}getNextCollectionGroupToUpdate(e){return mi.resolve(null)}getMinOffset(e,t){return mi.resolve(ci.min())}getMinOffsetFromCollectionGroup(e,t){return mi.resolve(ci.min())}updateCollectionGroup(e,t,n){return mi.resolve()}updateIndexEntries(e,t){return mi.resolve()}}class Rl{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ta(qr.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ta(qr.comparator)).toArray()}}new Uint8Array(0);const Ll={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zl=41943040;class Fl{static withCacheSize(e){return new Fl(e,Fl.DEFAULT_COLLECTION_PERCENTILE,Fl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Fl.DEFAULT_COLLECTION_PERCENTILE=10,Fl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fl.DEFAULT=new Fl(zl,Fl.DEFAULT_COLLECTION_PERCENTILE,Fl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fl.DISABLED=new Fl(-1,0,0);class Ul{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ul(0)}static cr(){return new Ul(-1)}}const Vl="LruGarbageCollector",Bl=1048576;function ql(e,t){let[n,r]=e,[i,a]=t;const s=Mr(n,i);return 0===s?Mr(r,a):s}class Hl{constructor(e){this.Ir=e,this.buffer=new ta(ql),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ql(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Wl{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){mr(Vl,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){gi(e)?mr(Vl,"Ignoring IndexedDB error during garbage collection: ",e):await pi(e)}await this.Vr(3e5)})}}class Kl{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return mi.resolve(vi.ce);const n=new Hl(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(mr("LruGarbageCollector","Garbage collection skipped; disabled"),mi.resolve(Ll)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(mr("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Ll):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,a,s,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(mr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,s=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),pr()<=Nt.DEBUG&&mr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(o-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),mi.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Gl(e,t){return new Kl(e,t)}class Yl{constructor(){this.changes=new Rs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wa.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?mi.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ql{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Xl{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&xo(n.mutation,e,ra.empty(),ri.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Gs()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gs();const r=Bs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Us();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Bs();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Gs()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=zs();const a=Hs(),s=Hs();return t.forEach((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof No)?i=i.insert(t.key,t):void 0!==s?(a.set(t.key,s.mutation.getFieldMask()),xo(s.mutation,t,s.mutation.getFieldMask(),ri.now())):a.set(t.key,ra.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>a.set(e,t)),t.forEach((e,t)=>{var n;return s.set(e,new Ql(t,null!==(n=a.get(e))&&void 0!==n?n:null))}),s))}recalculateAndSaveOverlays(e,t){const n=Hs();let r=new $i((e,t)=>e-t),i=Gs();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const a=t.get(e);if(null===a)return;let s=n.get(e)||ra.empty();s=i.applyToLocalView(a,s),n.set(e,s);const o=(r.get(i.batchId)||Gs()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const a=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),o=r.key,l=r.value,c=qs();l.forEach(e=>{if(!i.has(e)){const r=vo(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),a.push(this.documentOverlayCache.saveOverlays(e,o,c))}return mi.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Kr.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ns(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):mi.resolve(Bs());let s=ai,o=i;return a.next(t=>mi.forEach(t,(t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?mi.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,Gs())).next(e=>({batchId:s,changes:Vs(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Kr(t)).next(e=>{let t=Us();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let a=Us();return this.indexManager.getCollectionParents(e,i).next(s=>mi.forEach(s,s=>{const o=function(e,t){return new xs(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{a=a.insert(e,t)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Wa.newInvalidDocument(r)))});let n=Us();return e.forEach((e,r)=>{const a=i.get(e);void 0!==a&&xo(a.mutation,r,ra.empty(),ri.now()),Ps(t,r)&&(n=n.insert(e,r))}),n})}}class Jl{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return mi.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ol(e.createTime)}}(t)),mi.resolve()}getNamedQuery(e,t){return mi.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Ol(e.bundledQuery),readTime:ol(e.readTime)}}(t)),mi.resolve()}}class $l{constructor(){this.overlays=new $i(Kr.comparator),this.qr=new Map}getOverlay(e,t){return mi.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Bs();return mi.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),mi.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),mi.resolve()}getOverlaysForCollection(e,t,n){const r=Bs(),i=t.length+1,a=new Kr(t.child("")),s=this.overlays.getIteratorFrom(a);for(;s.hasNext();){const e=s.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return mi.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new $i((e,t)=>e-t);const a=this.overlays.getIterator();for(;a.hasNext();){const e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Bs(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=Bs(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>s.set(e,t)),!(s.size()>=r)););return mi.resolve(s)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Io(t,n));let i=this.qr.get(t);void 0===i&&(i=Gs(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class Zl{constructor(){this.sessionToken=aa.EMPTY_BYTE_STRING}getSessionToken(e){return mi.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,mi.resolve()}}class ec{constructor(){this.Qr=new ta(tc.$r),this.Ur=new ta(tc.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new tc(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new tc(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new Kr(new qr([])),n=new tc(t,e),r=new tc(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Kr(new qr([])),n=new tc(t,e),r=new tc(t,e+1);let i=Gs();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new tc(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class tc{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Kr.comparator(e.key,t.key)||Mr(e.Yr,t.Yr)}static Kr(e,t){return Mr(e.Yr,t.Yr)||Kr.comparator(e.key,t.key)}}class nc{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ta(tc.$r)}checkEmpty(e){return mi.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new _o(i,t,n,r);this.mutationQueue.push(a);for(const s of r)this.Zr=this.Zr.add(new tc(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return mi.resolve(a)}lookupMutationBatch(e,t){return mi.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return mi.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return mi.resolve(0===this.mutationQueue.length?yi:this.tr-1)}getAllMutationBatches(e){return mi.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new tc(t,0),r=new tc(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),mi.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ta(Mr);return t.forEach(e=>{const t=new tc(e,0),r=new tc(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),mi.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Kr.isDocumentKey(i)||(i=i.child(""));const a=new tc(new Kr(i),0);let s=new ta(Mr);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.Yr)),!0)},a),mi.resolve(this.ti(s))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){br(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return mi.forEach(t.mutations,r=>{const i=new tc(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new tc(t,0),r=this.Zr.firstAfterOrEqual(n);return mi.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,mi.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class rc{constructor(e){this.ri=e,this.docs=new $i(Kr.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return mi.resolve(n?n.document.mutableCopy():Wa.newInvalidDocument(t))}getEntries(e,t){let n=zs();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Wa.newInvalidDocument(e))}),mi.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=zs();const a=t.path,s=new Kr(a.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:e,value:{document:s}}=o.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||ui(li(s),n)<=0||(r.has(s.key)||Ps(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return mi.resolve(i)}getAllFromCollectionGroup(e,t,n,r){yr(9500)}ii(e,t){return mi.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new ic(this)}getSize(e){return mi.resolve(this.size)}}class ic extends Yl{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),mi.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class ac{constructor(e){this.persistence=e,this.si=new Rs(e=>gs(e),vs),this.lastRemoteSnapshotVersion=ii.min(),this.highestTargetId=0,this.oi=0,this._i=new ec,this.targetCount=0,this.ai=Ul.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),mi.resolve()}getLastRemoteSnapshotVersion(e){return mi.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return mi.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),mi.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),mi.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ul(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,mi.resolve()}updateTargetData(e,t){return this.Pr(t),mi.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,mi.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((a,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)}),mi.waitFor(i).next(()=>r)}getTargetCount(e){return mi.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return mi.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),mi.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),mi.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),mi.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return mi.resolve(n)}containsKey(e,t){return mi.resolve(this._i.containsKey(t))}}class sc{constructor(e,t){this.ui={},this.overlays={},this.ci=new vi(0),this.li=!1,this.li=!0,this.hi=new Zl,this.referenceDelegate=e(this),this.Pi=new ac(this),this.indexManager=new Ml,this.remoteDocumentCache=function(e){return new rc(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Pl(t),this.Ii=new Jl(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $l,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new nc(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){mr("MemoryPersistence","Starting transaction:",e);const r=new oc(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return mi.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class oc extends hi{constructor(e){super(),this.currentSequenceNumber=e}}class lc{constructor(e){this.persistence=e,this.Ri=new ec,this.Vi=null}static mi(e){return new lc(e)}get fi(){if(this.Vi)return this.Vi;throw yr(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),mi.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),mi.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),mi.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mi.forEach(this.fi,n=>{const r=Kr.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,ii.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return mi.or([()=>mi.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class cc{constructor(e,t){this.persistence=e,this.pi=new Rs(e=>Ni(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Gl(this,t)}static mi(e,t){return new cc(e,t)}Ei(){}di(e){return mi.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return mi.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?mi.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,ii.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),mi.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),mi.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),mi.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),mi.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Oa(e.data.value)),t}br(e,t,n){return mi.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return mi.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class uc{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Gs(),r=Gs();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new uc(e,t.fromCache,n,r)}}class dc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class hc{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=rt()?8:fi(et())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new dc;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(pr()<=Nt.DEBUG&&mr("QueryEngine","SDK will not create cache indexes for query:",Is(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),mi.resolve()):(pr()<=Nt.DEBUG&&mr("QueryEngine","Query:",Is(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(pr()<=Nt.DEBUG&&mr("QueryEngine","The SDK decides to create cache indexes for query:",Is(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cs(t))):mi.resolve())}ys(e,t){if(ws(t))return mi.resolve(null);let n=Cs(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Ts(t,null,"F"),n=Cs(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Gs(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const a=this.Ds(t,r);return this.Cs(t,a,i,n.readTime)?this.ys(e,Ts(t,null,"F")):this.vs(e,a,t,n)}))})))}ws(e,t,n,r){return ws(t)||r.isEqual(ii.min())?mi.resolve(null):this.ps.getDocuments(e,n).next(i=>{const a=this.Ds(t,i);return this.Cs(t,a,n,r)?mi.resolve(null):(pr()<=Nt.DEBUG&&mr("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Is(t)),this.vs(e,a,t,oi(r,ai)).next(e=>e))})}Ds(e,t){let n=new ta(Ds(e));return t.forEach((t,r)=>{Ps(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return pr()<=Nt.DEBUG&&mr("QueryEngine","Using full collection scan to execute query:",Is(t)),this.ps.getDocumentsMatchingQuery(e,t,ci.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const pc="LocalStore";class mc{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new $i(Mr),this.xs=new Rs(e=>gs(e),vs),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xl(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function fc(e,t,n,r){return new mc(e,t,n,r)}async function gc(e,t){const n=jr(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],a=[];let s=Gs();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){a.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:a}))})})}function vc(e){const t=jr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function yc(e,t,n){let r=Gs(),i=Gs();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=zs();return n.forEach((n,a)=>{const s=e.get(n);a.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(ii.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):mr(pc,"Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)}),{ks:r,qs:i}})}function xc(e,t){const n=jr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=yi),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function bc(e,t){const n=jr(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,mi.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new Il(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function jc(e,t,n){const r=jr(e),i=r.Ms.get(t),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!gi(e))throw e;mr(pc,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function wc(e,t,n){const r=jr(e);let i=ii.min(),a=Gs();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=jr(e),i=r.xs.get(n);return void 0!==i?mi.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,Cs(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{a=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:ii.min(),n?a:Gs())).next(e=>(Nc(r,Os(t),e),{documents:e,Qs:a})))}function Nc(e,t,n){let r=e.Os.get(t)||ii.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class kc{constructor(){this.activeTargetIds=Qs()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Cc{constructor(){this.Mo=new kc,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new kc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Sc{Oo(e){}shutdown(){}}const Ec="ConnectivityMonitor";class Tc{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){mr(Ec,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){mr(Ec,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let _c=null;function Ac(){return null===_c?_c=268435456+Math.round(2147483648*Math.random()):_c++,"0x"+_c.toString(16)}const Ic="RestConnection",Pc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Oc{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===ya?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const a=Ac(),s=this.zo(e,t.toUriEncodedString());mr(Ic,"Sending RPC '".concat(e,"' ").concat(a,":"),s,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,i);const{host:l}=new URL(s),c=Ye(l);return this.Jo(e,s,o,n,c).then(t=>(mr(Ic,"Received RPC '".concat(e,"' ").concat(a,": "),t),t),t=>{throw gr(Ic,"RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",s,"request:",n),t})}Ho(e,t,n,r,i,a){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+dr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Pc[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Dc{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Mc="WebChannelConnection";class Rc extends Oc{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const a=Ac();return new Promise((i,s)=>{const o=new $n;o.setWithCredentials(!0),o.listenOnce(er.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case tr.NO_ERROR:const n=o.getResponseJson();mr(Mc,"XHR for RPC '".concat(e,"' ").concat(a," received:"),JSON.stringify(n)),i(n);break;case tr.TIMEOUT:mr(Mc,"RPC '".concat(e,"' ").concat(a," timed out")),s(new Nr(wr.DEADLINE_EXCEEDED,"Request time out"));break;case tr.HTTP_ERROR:const r=o.getStatus();if(mr(Mc,"RPC '".concat(e,"' ").concat(a," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(wr).indexOf(t)>=0?t:wr.UNKNOWN}(n.status);s(new Nr(e,n.message))}else s(new Nr(wr.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Nr(wr.UNAVAILABLE,"Connection failed."));break;default:yr(9055,{l_:e,streamId:a,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{mr(Mc,"RPC '".concat(e,"' ").concat(a," completed."))}});const l=JSON.stringify(r);mr(Mc,"RPC '".concat(e,"' ").concat(a," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Ac(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ar(),s=ir(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");mr(Mc,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=a.createWebChannel(c,o);this.I_(u);let d=!1,h=!1;const p=new Dc({Yo:t=>{h?mr(Mc,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(mr(Mc,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),mr(Mc,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,Zn.EventType.OPEN,()=>{h||(mr(Mc,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),p.o_())}),m(u,Zn.EventType.CLOSE,()=>{h||(h=!0,mr(Mc,"RPC '".concat(e,"' stream ").concat(r," transport closed")),p.a_(),this.E_(u))}),m(u,Zn.EventType.ERROR,t=>{h||(h=!0,gr(Mc,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),p.a_(new Nr(wr.UNAVAILABLE,"The operation could not be completed")))}),m(u,Zn.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];br(!!i,16349);const a=i,s=(null===a||void 0===a?void 0:a.error)||(null===(n=a[0])||void 0===n?void 0:n.error);if(s){mr(Mc,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=Oo[e];if(void 0!==t)return Ro(t)}(t),i=s.message;void 0===n&&(n=wr.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,p.a_(new Nr(n,i)),u.close()}else mr(Mc,"RPC '".concat(e,"' stream ").concat(r," received:"),i),p.u_(i)}}),m(s,rr.STAT_EVENT,t=>{t.stat===nr.PROXY?mr(Mc,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===nr.NOPROXY&&mr(Mc,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Lc(){return"undefined"!=typeof document?document:null}function zc(e){return new nl(e,!0)}class Fc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&mr("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Uc="PersistentStream";class Vc{constructor(e,t,n,r,i,a,s,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=s,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Fc(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===wr.RESOURCE_EXHAUSTED?(fr(t.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===wr.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Nr(wr.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return mr(Uc,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(mr(Uc,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Bc extends Vc{constructor(e,t,n,r,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:yr(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(br(void 0===t||"string"==typeof t,58123),aa.fromBase64String(t||"")):(br(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),aa.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,o=s&&function(e){const t=void 0===e.code?wr.UNKNOWN:Ro(e.code);return new Nr(t,e.message||"")}(s);n=new Yo(r,i,a,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=hl(e,r.document.name),a=ol(r.document.updateTime),s=r.document.createTime?ol(r.document.createTime):ii.min(),o=new qa({mapValue:{fields:r.document.fields}}),l=Wa.newFoundDocument(i,a,s,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ko(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=hl(e,r.document),a=r.readTime?ol(r.readTime):ii.min(),s=Wa.newNoDocument(i,a),o=r.removedTargetIds||[];n=new Ko([],o,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=hl(e,r.document),a=r.removedTargetIds||[];n=new Ko([],a,i,null)}else{if(!("filter"in t))return yr(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,a=new Po(r,i),s=e.targetId;n=new Go(s,a)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ii.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ii.min():t.readTime?ol(t.readTime):ii.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=fl(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=ys(r)?{documents:xl(e,r)}:{query:bl(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=al(e,t.resumeToken);const r=rl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ii.min())>0){n.readTime=il(e,t.snapshotVersion.toTimestamp());const r=rl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yr(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=fl(this.serializer),t.removeTarget=e,this.q_(t)}}class qc extends Vc{constructor(e,t,n,r,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return br(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,br(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){br(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(br(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?ol(e.updateTime):ol(t);return n.isEqual(ii.min())&&(n=ol(t)),new po(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=ol(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=fl(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>yl(this.serializer,e))};this.q_(t)}}class Hc{}class Wc extends Hc{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Nr(wr.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,s]=i;return this.connection.Go(e,cl(t,n),r,a,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===wr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Nr(wr.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(a=>{let[s,o]=a;return this.connection.Ho(e,cl(t,n),r,s,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===wr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Nr(wr.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Kc{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(fr(t),this.aa=!1):mr("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Gc="RemoteStore";class Yc{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{ru(this)&&(mr(Gc,"Restarting streams for network reachability change."),await async function(e){const t=jr(e);t.Ea.add(4),await Xc(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Qc(t)}(this))})}),this.Ra=new Kc(n,r)}}async function Qc(e){if(ru(e))for(const t of e.da)await t(!0)}async function Xc(e){for(const t of e.da)await t(!1)}function Jc(e,t){const n=jr(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),nu(n)?tu(n):wu(n).O_()&&Zc(n,t))}function $c(e,t){const n=jr(e),r=wu(n);n.Ia.delete(t),r.O_()&&eu(n,t),0===n.Ia.size&&(r.O_()?r.L_():ru(n)&&n.Ra.set("Unknown"))}function Zc(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ii.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}wu(e).Y_(t)}function eu(e,t){e.Va.Ue(t),wu(e).Z_(t)}function tu(e){e.Va=new Xo({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),wu(e).start(),e.Ra.ua()}function nu(e){return ru(e)&&!wu(e).x_()&&e.Ia.size>0}function ru(e){return 0===jr(e).Ea.size}function iu(e){e.Va=void 0}async function au(e){e.Ra.set("Online")}async function su(e){e.Ia.forEach((t,n)=>{Zc(e,t)})}async function ou(e,t){iu(e),nu(e)?(e.Ra.ha(t),tu(e)):e.Ra.set("Unknown")}async function lu(e,t,n){if(e.Ra.set("Online"),t instanceof Yo&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){mr(Gc,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await cu(e,n)}else if(t instanceof Ko?e.Va.Ze(t):t instanceof Go?e.Va.st(t):e.Va.tt(t),!n.isEqual(ii.min()))try{const t=await vc(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(aa.EMPTY_BYTE_STRING,r.snapshotVersion)),eu(e,t);const i=new Il(r.target,t,n,r.sequenceNumber);Zc(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){mr(Gc,"Failed to raise snapshot:",t),await cu(e,t)}}async function cu(e,t,n){if(!gi(t))throw t;e.Ea.add(1),await Xc(e),e.Ra.set("Offline"),n||(n=()=>vc(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{mr(Gc,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Qc(e)})}function uu(e,t){return t().catch(n=>cu(e,n,t))}async function du(e){const t=jr(e),n=Nu(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:yi;for(;hu(t);)try{const e=await xc(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,pu(t,e)}catch(e){await cu(t,e)}mu(t)&&fu(t)}function hu(e){return ru(e)&&e.Ta.length<10}function pu(e,t){e.Ta.push(t);const n=Nu(e);n.O_()&&n.X_&&n.ea(t.mutations)}function mu(e){return ru(e)&&!Nu(e).x_()&&e.Ta.length>0}function fu(e){Nu(e).start()}async function gu(e){Nu(e).ra()}async function vu(e){const t=Nu(e);for(const n of e.Ta)t.ea(n.mutations)}async function yu(e,t,n){const r=e.Ta.shift(),i=Ao.from(r,t,n);await uu(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await du(e)}async function xu(e,t){t&&Nu(e).X_&&await async function(e,t){if(function(e){return Mo(e)&&e!==wr.ABORTED}(t.code)){const n=e.Ta.shift();Nu(e).B_(),await uu(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await du(e)}}(e,t),mu(e)&&fu(e)}async function bu(e,t){const n=jr(e);n.asyncQueue.verifyOperationInProgress(),mr(Gc,"RemoteStore received new credentials");const r=ru(n);n.Ea.add(3),await Xc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Qc(n)}async function ju(e,t){const n=jr(e);t?(n.Ea.delete(2),await Qc(n)):t||(n.Ea.add(2),await Xc(n),n.Ra.set("Unknown"))}function wu(e){return e.ma||(e.ma=function(e,t,n){const r=jr(e);return r.sa(),new Bc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:au.bind(null,e),t_:su.bind(null,e),r_:ou.bind(null,e),H_:lu.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),nu(e)?tu(e):e.Ra.set("Unknown")):(await e.ma.stop(),iu(e))})),e.ma}function Nu(e){return e.fa||(e.fa=function(e,t,n){const r=jr(e);return r.sa(),new qc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:gu.bind(null,e),r_:xu.bind(null,e),ta:vu.bind(null,e),na:yu.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await du(e)):(await e.fa.stop(),e.Ta.length>0&&(mr(Gc,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class ku{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const a=Date.now()+n,s=new ku(e,t,a,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Nr(wr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cu(e,t){if(fr("AsyncQueue","".concat(t,": ").concat(e)),gi(e))return new Nr(wr.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Su{static emptySet(e){return new Su(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Kr.comparator(t.key,n.key):(e,t)=>Kr.comparator(e.key,t.key),this.keyedMap=Us(),this.sortedSet=new $i(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Su))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Su;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Eu{constructor(){this.ga=new $i(Kr.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):yr(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Tu{constructor(e,t,n,r,i,a,s,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=s,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const a=[];return t.forEach(e=>{a.push({type:0,doc:e})}),new Tu(e,t,Su.emptySet(t),a,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_s(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class _u{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Au{constructor(){this.queries=Iu(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=jr(e),r=n.queries;n.queries=Iu(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Nr(wr.ABORTED,"Firestore shutting down"))}}function Iu(){return new Rs(e=>As(e),_s)}async function Pu(e,t){const n=jr(e);let r=3;const i=t.query;let a=n.queries.get(i);a?!a.ba()&&t.Da()&&(r=2):(a=new _u,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Cu(e,"Initialization of query '".concat(Is(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,a),a.Sa.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&Ru(n)}async function Ou(e,t){const n=jr(e),r=t.query;let i=3;const a=n.queries.get(r);if(a){const e=a.Sa.indexOf(t);e>=0&&(a.Sa.splice(e,1),0===a.Sa.length?i=t.Da()?0:1:!a.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Du(e,t){const n=jr(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&Ru(n)}function Mu(e,t,n){const r=jr(e),i=r.queries.get(t);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(t)}function Ru(e){e.Ca.forEach(e=>{e.next()})}var Lu,zu;(zu=Lu||(Lu={})).Ma="default",zu.Cache="cache";class Fu{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Tu(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Tu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Lu.Cache}}class Uu{constructor(e){this.key=e}}class Vu{constructor(e){this.key=e}}class Bu{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Gs(),this.mutatedKeys=Gs(),this.eu=Ds(e),this.tu=new Su(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Eu,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,a=r,s=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Ps(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),p=!0):this.su(c,u)||(n.track({type:2,doc:u}),p=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(o||l)&&(s=!0)),p&&(u?(a=a.add(u),i=h?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;a.size>this.query.limit;){const e="F"===this.query.limitType?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Cs:s,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yr(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const s=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==a.length||l?{snapshot:new Tu(this.query,e.tu,i,a,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:s}:{au:s}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Eu,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Gs(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Vu(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Uu(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Gs();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Tu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const qu="SyncEngine";class Hu{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Wu{constructor(e){this.key=e,this.hu=!1}}class Ku{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Rs(e=>As(e),_s),this.Iu=new Map,this.Eu=new Set,this.du=new $i(Kr.comparator),this.Au=new Map,this.Ru=new ec,this.Vu={},this.mu=new Map,this.fu=Ul.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Gu(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=md(e);let i;const a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await Qu(r,t,n,!0),i}async function Yu(e,t){const n=md(e);await Qu(n,t,!0,!1)}async function Qu(e,t,n,r){const i=await bc(e.localStore,Cs(t)),a=i.targetId,s=e.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await Xu(e,t,a,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&Jc(e.remoteStore,i),o}async function Xu(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await wc(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const a=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,a,s);return ld(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const a=await wc(e.localStore,t,!0),s=new Bu(t,a.Qs),o=s.ru(a.documents),l=Wo.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(o,e.isPrimaryClient,l);ld(e,n,c.au);const u=new Hu(t,n,s);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function Ju(e,t,n){const r=jr(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter(e=>!_s(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await jc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&$c(r.remoteStore,i.targetId),sd(r,i.targetId)}).catch(pi)):(sd(r,i.targetId),await jc(r.localStore,i.targetId,!0))}async function $u(e,t){const n=jr(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),$c(n.remoteStore,r.targetId))}async function Zu(e,t){const n=jr(e);try{const e=await function(e,t){const n=jr(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const s=[];t.targetChanges.forEach((a,o)=>{const l=i.get(o);if(!l)return;s.push(n.Pi.removeMatchingKeys(e,a.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,a.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(aa.EMPTY_BYTE_STRING,ii.min()).withLastLimboFreeSnapshotVersion(ii.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,a)&&s.push(n.Pi.updateTargetData(e,c))});let o=zs(),l=Gs();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),s.push(yc(e,a,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(ii.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));s.push(t)}return mi.waitFor(s).next(()=>a.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(br(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?br(r.hu,14607):e.removedDocuments.size>0&&(br(r.hu,42227),r.hu=!1))}),await dd(n,e,t)}catch(e){await pi(e)}}function ed(e,t,n){const r=jr(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=jr(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&Ru(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function td(e,t,n){const r=jr(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),a=i&&i.key;if(a){let e=new $i(Kr.comparator);e=e.insert(a,Wa.newNoDocument(a,ii.min()));const n=Gs().add(a),i=new Ho(ii.min(),new Map,new $i(Mr),e,n);await Zu(r,i),r.du=r.du.remove(a),r.Au.delete(t),ud(r)}else await jc(r.localStore,t,!1).then(()=>sd(r,t,n)).catch(pi)}async function nd(e,t){const n=jr(e),r=t.batch.batchId;try{const e=await function(e,t){const n=jr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,a=i.keys();let s=mi.resolve();return a.forEach(e=>{s=s.next(()=>r.getEntry(t,e)).next(t=>{const a=n.docVersions.get(e);br(null!==a,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),s.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Gs();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);ad(n,r,null),id(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await dd(n,e)}catch(e){await pi(e)}}async function rd(e,t,n){const r=jr(e);try{const e=await function(e,t){const n=jr(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(br(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);ad(r,t,n),id(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await dd(r,e)}catch(n){await pi(n)}}function id(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function ad(e,t,n){const r=jr(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function sd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||od(e,t)})}function od(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&($c(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),ud(e))}function ld(e,t,n){for(const r of n)r instanceof Uu?(e.Ru.addReference(r.key,t),cd(e,r)):r instanceof Vu?(mr(qu,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||od(e,r.key)):yr(19791,{wu:r})}function cd(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(mr(qu,"New document in limbo: "+n),e.Eu.add(r),ud(e))}function ud(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Kr(qr.fromString(t)),r=e.fu.next();e.Au.set(r,new Wu(n)),e.du=e.du.insert(n,r),Jc(e.remoteStore,new Il(Cs(js(n.path)),r,"TargetPurposeLimboResolution",vi.ce))}}async function dd(e,t,n){const r=jr(e),i=[],a=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{s.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=uc.As(o.targetId,e);a.push(t)}}))}),await Promise.all(s),r.Pu.H_(i),await async function(e,t){const n=jr(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>mi.forEach(t,t=>mi.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>mi.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!gi(e))throw e;mr(pc,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,a))}async function hd(e,t){const n=jr(e);if(!n.currentUser.isEqual(t)){mr(qu,"User change. New user:",t.toKey());const e=await gc(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Nr(wr.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await dd(n,e.Ls)}}function pd(e,t){const n=jr(e),r=n.Au.get(t);if(r&&r.hu)return Gs().add(r.key);{let e=Gs();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function md(e){const t=jr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Zu.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=pd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=td.bind(null,t),t.Pu.H_=Du.bind(null,t.eventManager),t.Pu.yu=Mu.bind(null,t.eventManager),t}function fd(e){const t=jr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=nd.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=rd.bind(null,t),t}class gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return fc(this.persistence,new hc,e.initialUser,this.serializer)}Cu(e){return new sc(lc.mi,this.serializer)}Du(e){return new Cc}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gd.provider={build:()=>new gd};class vd extends gd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){br(this.persistence.referenceDelegate instanceof cc,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Wl(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Fl.withCacheSize(this.cacheSizeBytes):Fl.DEFAULT;return new sc(e=>cc.mi(e,t),this.serializer)}}class yd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ed(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=hd.bind(null,this.syncEngine),await ju(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Au}createDatastore(e){const t=zc(e.databaseInfo.databaseId),n=function(e){return new Rc(e)}(e.databaseInfo);return function(e,t,n,r){return new Wc(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Yc(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>ed(this.syncEngine,e,0),Tc.v()?new Tc:new Sc)}createSyncEngine(e,t){return function(e,t,n,r,i,a,s){const o=new Ku(e,t,n,r,i,a);return s&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=jr(e);mr(Gc,"RemoteStore shutting down."),t.Ea.add(5),await Xc(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}yd.provider={build:()=>new yd};class xd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const bd="FirestoreClient";class jd{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ur.UNAUTHENTICATED,this.clientId=Dr.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{mr(bd,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(mr(bd,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Cu(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function wd(e,t){e.asyncQueue.verifyOperationInProgress(),mr(bd,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await gc(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Nd(e,t){e.asyncQueue.verifyOperationInProgress();const n=await kd(e);mr(bd,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>bu(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>bu(t.remoteStore,n)),e._onlineComponents=t}async function kd(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){mr(bd,"Using user provided OfflineComponentProvider");try{await wd(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===wr.FAILED_PRECONDITION||e.code===wr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;gr("Error using user provided cache. Falling back to memory cache: "+n),await wd(e,new gd)}}else mr(bd,"Using default OfflineComponentProvider"),await wd(e,new vd(void 0));return e._offlineComponents}async function Cd(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(mr(bd,"Using user provided OnlineComponentProvider"),await Nd(e,e._uninitializedComponentsProvider._online)):(mr(bd,"Using default OnlineComponentProvider"),await Nd(e,new yd))),e._onlineComponents}function Sd(e){return Cd(e).then(e=>e.syncEngine)}async function Ed(e){const t=await Cd(e),n=t.eventManager;return n.onListen=Gu.bind(null,t.syncEngine),n.onUnlisten=Ju.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Yu.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=$u.bind(null,t.syncEngine),n}function Td(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new kr;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const a=new xd({next:o=>{a.Nu(),t.enqueueAndForget(()=>Ou(e,s));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new Nr(wr.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new Nr(wr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new Fu(js(n.path),a,{includeMetadataChanges:!0,qa:!0});return Pu(e,s)}(await Ed(e),e.asyncQueue,t,n,r)),r.promise}function _d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new kr;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const a=new xd({next:n=>{a.Nu(),t.enqueueAndForget(()=>Ou(e,s)),n.fromCache&&"server"===r.source?i.reject(new Nr(wr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new Fu(n,a,{includeMetadataChanges:!0,qa:!0});return Pu(e,s)}(await Ed(e),e.asyncQueue,t,n,r)),r.promise}function Ad(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Id=new Map,Pd="firestore.googleapis.com",Od=!0;class Dd{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Nr(wr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Pd,this.ssl=Od}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Od;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=zl;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Bl)throw new Nr(wr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Nr(wr.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ad(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Nr(wr.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Nr(wr.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Nr(wr.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Md{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Nr(wr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Nr(wr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dd(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Sr;switch(e.type){case"firstParty":return new Ar(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Nr(wr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Id.get(e);t&&(mr("ComponentProvider","Removing Datastore"),Id.delete(e),t.terminate())}(this),Promise.resolve()}}class Rd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Rd(this.firestore,e,this._query)}}class Ld{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ld(this.firestore,e,this._key)}toJSON(){return{type:Ld._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(ei(t,Ld._jsonSchema))return new Ld(e,n||null,new Kr(qr.fromString(t.referencePath)))}}Ld._jsonSchemaVersion="firestore/documentReference/1.0",Ld._jsonSchema={type:Zr("string",Ld._jsonSchemaVersion),referencePath:Zr("string")};class zd extends Rd{constructor(e,t,n){super(e,t,js(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ld(this.firestore,null,new Kr(e))}withConverter(e){return new zd(this.firestore,e,this._path)}}function Fd(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=vt(e),Gr("collection","path",t),e instanceof Md){const n=qr.fromString(t,...r);return Qr(n),new zd(e,null,n)}{if(!(e instanceof Ld||e instanceof zd))throw new Nr(wr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(qr.fromString(t,...r));return Qr(n),new zd(e.firestore,null,n)}}function Ud(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=vt(e),1===arguments.length&&(t=Dr.newId()),Gr("doc","path",t),e instanceof Md){const n=qr.fromString(t,...r);return Yr(n),new Ld(e,null,new Kr(n))}{if(!(e instanceof Ld||e instanceof zd))throw new Nr(wr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(qr.fromString(t,...r));return Yr(n),new Ld(e.firestore,e instanceof zd?e.converter:null,new Kr(n))}}const Vd="AsyncQueue";class Bd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Fc(this,"async_queue_retry"),this._c=()=>{const e=Lc();e&&mr(Vd,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Lc();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Lc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new kr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(OQ){if(!gi(OQ))throw OQ;mr(Vd,"Operation failed with retryable error: "+OQ)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,fr("INTERNAL UNHANDLED ERROR: ",qd(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=ku.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&yr(47125,{Pc:qd(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function qd(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Hd(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Wd extends Md{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Bd,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bd(e),this._firestoreClient=void 0,await e}}}function Kd(e){if(e._terminated)throw new Nr(wr.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Gd(e),e._firestoreClient}function Gd(e){var t,n,r;const i=e._freezeSettings(),a=function(e,t,n,r){return new va(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ad(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new jd(e._authCredentials,e._appCheckCredentials,e._queue,a,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Yd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yd(aa.fromBase64String(e))}catch(e){throw new Nr(wr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Yd(aa.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yd._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ei(e,Yd._jsonSchema))return Yd.fromBase64String(e.bytes)}}Yd._jsonSchemaVersion="firestore/bytes/1.0",Yd._jsonSchema={type:Zr("string",Yd._jsonSchemaVersion),bytes:Zr("string")};class Qd{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Nr(wr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wr(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xd{constructor(e){this._methodName=e}}class Jd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Nr(wr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Nr(wr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Mr(this._lat,e._lat)||Mr(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Jd._jsonSchemaVersion}}static fromJSON(e){if(ei(e,Jd._jsonSchema))return new Jd(e.latitude,e.longitude)}}Jd._jsonSchemaVersion="firestore/geoPoint/1.0",Jd._jsonSchema={type:Zr("string",Jd._jsonSchemaVersion),latitude:Zr("number"),longitude:Zr("number")};class $d{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:$d._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ei(e,$d._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new $d(e.vectorValues);throw new Nr(wr.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$d._jsonSchemaVersion="firestore/vectorValue/1.0",$d._jsonSchema={type:Zr("string",$d._jsonSchemaVersion),vectorValues:Zr("object")};const Zd=/^__.*__$/;class eh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new No(e,this.data,this.fieldMask,t,this.fieldTransforms):new wo(e,this.data,t,this.fieldTransforms)}}class th{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new No(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nh(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yr(40011,{Ac:e})}}class rh{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new rh(Me(Me({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return wh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(nh(this.Ac)&&Zd.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ih{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||zc(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new rh({Ac:e,methodName:t,Dc:n,path:Wr.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ah(e){const t=e._freezeSettings(),n=zc(e._databaseId);return new ih(e._databaseId,!!t.ignoreUndefinedProperties,n)}function sh(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Cc(a.merge||a.mergeFields?2:0,t,n,i);yh("Data must be an object, but it was:",s,r);const o=gh(r,s);let l,c;if(a.merge)l=new ra(s.fieldMask),c=s.fieldTransforms;else if(a.mergeFields){const e=[];for(const r of a.mergeFields){const i=xh(t,r,n);if(!s.contains(i))throw new Nr(wr.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Nh(e,i)||e.push(i)}l=new ra(e),c=s.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=s.fieldTransforms;return new eh(new qa(o),l,c)}class oh extends Xd{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof oh}}function lh(e,t,n){return new rh({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class ch extends Xd{_toFieldTransform(e){return new ho(e.path,new ro)}isEqual(e){return e instanceof ch}}class uh extends Xd{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=lh(this,e,!0),n=this.vc.map(e=>fh(e,t)),r=new io(n);return new ho(e.path,r)}isEqual(e){return e instanceof uh&&ct(this.vc,e.vc)}}class dh extends Xd{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=lh(this,e,!0),n=this.vc.map(e=>fh(e,t)),r=new so(n);return new ho(e.path,r)}isEqual(e){return e instanceof dh&&ct(this.vc,e.vc)}}function hh(e,t,n,r){const i=e.Cc(1,t,n);yh("Data must be an object, but it was:",i,r);const a=[],s=qa.empty();Xi(r,(e,r)=>{const o=jh(t,e,n);r=vt(r);const l=i.yc(o);if(r instanceof oh)a.push(o);else{const e=fh(r,l);null!=e&&(a.push(o),s.set(o,e))}});const o=new ra(a);return new th(s,o,i.fieldTransforms)}function ph(e,t,n,r,i,a){const s=e.Cc(1,t,n),o=[xh(t,r,n)],l=[i];if(a.length%2!=0)throw new Nr(wr.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<a.length;h+=2)o.push(xh(t,a[h])),l.push(a[h+1]);const c=[],u=qa.empty();for(let h=o.length-1;h>=0;--h)if(!Nh(c,o[h])){const e=o[h];let t=l[h];t=vt(t);const n=s.yc(e);if(t instanceof oh)c.push(e);else{const r=fh(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new ra(c);return new th(u,d,s.fieldTransforms)}function mh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return fh(n,e.Cc(r?4:3,t))}function fh(e,t){if(vh(e=vt(e)))return yh("Unsupported field value:",t,e),gh(e,t);if(e instanceof Xd)return function(e,t){if(!nh(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=fh(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=vt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return $s(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ri.fromDate(e);return{timestampValue:il(t.serializer,n)}}if(e instanceof ri){const n=new ri(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:il(t.serializer,n)}}if(e instanceof Jd)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Yd)return{bytesValue:al(t.serializer,e._byteString)};if(e instanceof Ld){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:ll(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof $d)return function(e,t){return{mapValue:{fields:{[ba]:{stringValue:Na},[ka]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Xs(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(Jr(e)))}(e,t)}function gh(e,t){const n={};return Ji(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xi(e,(e,r)=>{const i=fh(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function vh(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ri||e instanceof Jd||e instanceof Yd||e instanceof Ld||e instanceof Xd||e instanceof $d)}function yh(e,t,n){if(!vh(n)||!Xr(n)){const r=Jr(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function xh(e,t,n){if((t=vt(t))instanceof Qd)return t._internalPath;if("string"==typeof t)return jh(e,t);throw wh("Field path arguments must be of type string or ",e,!1,void 0,n)}const bh=new RegExp("[~\\*/\\[\\]]");function jh(e,t,n){if(t.search(bh)>=0)throw wh("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Qd(...t.split("."))._internalPath}catch(Jx){throw wh("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function wh(e,t,n,r,i){const a=r&&!r.isEmpty(),s=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||s)&&(l+=" (found",a&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new Nr(wr.INVALID_ARGUMENT,o+e+l)}function Nh(e,t){return e.some(e=>e.isEqual(t))}class kh{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ld(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ch(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Sh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ch extends kh{data(){return super.data()}}function Sh(e,t){return"string"==typeof t?jh(e,t):t instanceof Qd?t._internalPath:t._delegate._internalPath}function Eh(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Nr(wr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Th{}class _h extends Th{}function Ah(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Th&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Oh).length,n=e.filter(e=>e instanceof Ih).length;if(t>1||t>0&&n>0)throw new Nr(wr.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class Ih extends _h{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Ih(e,t,n)}_apply(e){const t=this._parse(e);return zh(e._query,t),new Rd(e.firestore,e.converter,Es(e._query,t))}_parse(e){const t=ah(e.firestore),n=function(e,t,n,r,i,a,s){let o;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Nr(wr.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Lh(s,a);const t=[];for(const n of s)t.push(Rh(r,e,n));o={arrayValue:{values:t}}}else o=Rh(r,e,s)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Lh(s,a),o=mh(n,t,s,"in"===a||"not-in"===a);return $a.create(i,a,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Ph(e,t,n){const r=t,i=Sh("where",e);return Ih._create(i,r,n)}class Oh extends Th{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Oh(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Za.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)zh(n,i),n=Es(n,i)}(e._query,t),new Rd(e.firestore,e.converter,Es(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Dh extends _h{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Dh(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Nr(wr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Nr(wr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qa(t,n)}(e._query,this._field,this._direction);return new Rd(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new xs(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Mh(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Sh("orderBy",e);return Dh._create(n,t)}function Rh(e,t,n){if("string"==typeof(n=vt(n))){if(""===n)throw new Nr(wr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ns(t)&&-1!==n.indexOf("/"))throw new Nr(wr.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(qr.fromString(n));if(!Kr.isDocumentKey(r))throw new Nr(wr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Da(e,new Kr(r))}if(n instanceof Ld)return Da(e,n._key);throw new Nr(wr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Jr(n),"."))}function Lh(e,t){if(!Array.isArray(e)||0===e.length)throw new Nr(wr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function zh(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Nr(wr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Nr(wr.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Fh{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ca(e)){case 0:return null;case 1:return e.booleanValue;case 2:return la(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ca(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw yr(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Xi(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[ka].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>la(e.doubleValue));return new $d(n)}convertGeoPoint(e){return new Jd(la(e.latitude),la(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=fa(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ga(e));default:return null}}convertTimestamp(e){const t=oa(e);return new ri(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=qr.fromString(e);br(Al(n),9688,{name:e});const r=new xa(n.get(1),n.get(3)),i=new Kr(n.popFirst(5));return r.isEqual(t)||fr("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Uh(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Vh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bh extends kh{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new qh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Sh("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Nr(wr.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Bh._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Bh._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bh._jsonSchema={type:Zr("string",Bh._jsonSchemaVersion),bundleSource:Zr("string","DocumentSnapshot"),bundleName:Zr("string"),bundle:Zr("string")};class qh extends Bh{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Hh{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Vh(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new qh(this._firestore,this._userDataWriter,n.key,n,new Vh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Nr(wr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new qh(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Vh(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new qh(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Vh(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,a=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:Wh(t.type),doc:r,oldIndex:i,newIndex:a}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Nr(wr.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Hh._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dr.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Wh(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yr(61501,{type:e})}}function Kh(e){e=$r(e,Ld);const t=$r(e.firestore,Wd);return Td(Kd(t),e._key).then(n=>tp(t,e,n))}Hh._jsonSchemaVersion="firestore/querySnapshot/1.0",Hh._jsonSchema={type:Zr("string",Hh._jsonSchemaVersion),bundleSource:Zr("string","QuerySnapshot"),bundleName:Zr("string"),bundle:Zr("string")};class Gh extends Fh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ld(this.firestore,null,t)}}function Yh(e){e=$r(e,Rd);const t=$r(e.firestore,Wd),n=Kd(t),r=new Gh(t);return Eh(e._query),_d(n,e._query).then(n=>new Hh(t,r,e,n))}function Qh(e,t,n){e=$r(e,Ld);const r=$r(e.firestore,Wd),i=Uh(e.converter,t,n);return ep(r,[sh(ah(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,mo.none())])}function Xh(e,t,n){e=$r(e,Ld);const r=$r(e.firestore,Wd),i=ah(r);let a;for(var s=arguments.length,o=new Array(s>3?s-3:0),l=3;l<s;l++)o[l-3]=arguments[l];return a="string"==typeof(t=vt(t))||t instanceof Qd?ph(i,"updateDoc",e._key,t,n,o):hh(i,"updateDoc",e._key,t),ep(r,[a.toMutation(e._key,mo.exists(!0))])}function Jh(e){return ep($r(e.firestore,Wd),[new Eo(e._key,mo.none())])}function $h(e,t){const n=$r(e.firestore,Wd),r=Ud(e),i=Uh(e.converter,t);return ep(n,[sh(ah(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,mo.exists(!1))]).then(()=>r)}function Zh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=vt(e);let i={includeMetadataChanges:!1,source:"default"},a=0;"object"!=typeof n[a]||Hd(n[a])||(i=n[a++]);const s={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Hd(n[a])){var o,l,c;const e=n[a];n[a]=null===(o=e.next)||void 0===o?void 0:o.bind(e),n[a+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[a+2]=null===(c=e.complete)||void 0===c?void 0:c.bind(e)}let u,d,h;if(e instanceof Ld)d=$r(e.firestore,Wd),h=js(e._key.path),u={next:t=>{n[a]&&n[a](tp(d,e,t))},error:n[a+1],complete:n[a+2]};else{const t=$r(e,Rd);d=$r(t.firestore,Wd),h=t._query;const r=new Gh(d);u={next:e=>{n[a]&&n[a](new Hh(d,r,t,e))},error:n[a+1],complete:n[a+2]},Eh(e._query)}return function(e,t,n,r){const i=new xd(r),a=new Fu(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Pu(await Ed(e),a)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>Ou(await Ed(e),a))}}(Kd(d),h,s,u)}function ep(e,t){return function(e,t){const n=new kr;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=fd(e);try{const e=await function(e,t){const n=jr(e),r=ri.now(),i=t.reduce((e,t)=>e.add(t.key),Gs());let a,s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=zs(),l=Gs();return n.Ns.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{a=i;const s=[];for(const e of t){const t=bo(e,a.get(e.key).overlayedDocument);null!=t&&s.push(new No(e.key,t,Ha(t.value.mapValue),mo.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)}).next(t=>{s=t;const r=t.applyToLocalDocumentSet(a,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:s.batchId,changes:Vs(a)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new $i(Mr)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await dd(r,e.changes),await du(r.remoteStore)}catch(e){const t=Cu(e,"Failed to persist write");n.reject(t)}}(await Sd(e),t,n)),n.promise}(Kd(e),t)}function tp(e,t,n){const r=n.docs.get(t._key),i=new Gh(e);return new Bh(e,i,t._key,r,new Vh(n.hasPendingWrites,n.fromCache),t.converter)}function np(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new uh("arrayUnion",t)}function rp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new dh("arrayRemove",t)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){dr=e}(Dn),_n(new yt("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const a=e.getProvider("app").getImmediate(),s=new Wd(new Tr(e.getProvider("auth-internal")),new Pr(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Nr(wr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xa(e.options.projectId,t)}(a,r),a);return i=Me({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),Ln(lr,cr,e),Ln(lr,cr,"esm2020")}();Ln("firebase","12.1.0","app");const ip="@firebase/installations",ap="0.6.19",sp=1e4,op="w:".concat(ap),lp="FIS_v2",cp=36e5,up=new ot("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function dp(e){return e instanceof st&&e.code.includes("request-failed")}function hp(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function pp(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function mp(e,t){const n=(await t.json()).error;return up.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function fp(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function gp(e,t){let{refreshToken:n}=t;const r=fp(e);return r.append("Authorization",function(e){return"".concat(lp," ").concat(e)}(n)),r}async function vp(e){const t=await e();return t.status>=500&&t.status<600?e():t}function yp(e){return new Promise(t=>{setTimeout(t,e)})}const xp=/^[cdef][\w-]{21}$/;function bp(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=function(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}(e);return t.substr(0,22)}(e);return xp.test(t)?t:""}catch(e){return""}}function jp(e){return"".concat(e.appName,"!").concat(e.appId)}const wp=new Map;function Np(e,t){const n=jp(e);kp(n,t),function(e,t){const n=Sp();n&&n.postMessage({key:e,fid:t});Ep()}(n,t)}function kp(e,t){const n=wp.get(e);if(n)for(const r of n)r(t)}let Cp=null;function Sp(){return!Cp&&"BroadcastChannel"in self&&(Cp=new BroadcastChannel("[Firebase] FID Change"),Cp.onmessage=e=>{kp(e.data.key,e.data.fid)}),Cp}function Ep(){0===wp.size&&Cp&&(Cp.close(),Cp=null)}const Tp="firebase-installations-store";let _p=null;function Ap(){return _p||(_p=Vt("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Tp)}})),_p}async function Ip(e,t){const n=jp(e),r=(await Ap()).transaction(Tp,"readwrite"),i=r.objectStore(Tp),a=await i.get(n);return await i.put(t,n),await r.done,a&&a.fid===t.fid||Np(e,t.fid),t}async function Pp(e){const t=jp(e),n=(await Ap()).transaction(Tp,"readwrite");await n.objectStore(Tp).delete(t),await n.done}async function Op(e,t){const n=jp(e),r=(await Ap()).transaction(Tp,"readwrite"),i=r.objectStore(Tp),a=await i.get(n),s=t(a);return void 0===s?await i.delete(n):await i.put(s,n),await r.done,!s||a&&a.fid===s.fid||Np(e,s.fid),s}async function Dp(e){let t;const n=await Op(e.appConfig,n=>{const r=function(e){const t=e||{fid:bp(),registrationStatus:0};return Lp(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(up.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const a=hp(n),s=fp(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const l={fid:i,authVersion:lp,appId:n.appId,sdkVersion:op},c={method:"POST",headers:s,body:JSON.stringify(l)},u=await vp(()=>fetch(a,c));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:pp(e.authToken)}}throw await mp("Create Installation",u)}(e,t);return Ip(e.appConfig,n)}catch(OQ){throw dp(OQ)&&409===OQ.customData.serverCode?await Pp(e.appConfig):await Ip(e.appConfig,{fid:t.fid,registrationStatus:0}),OQ}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Mp(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Mp(e){let t=await Rp(e.appConfig);for(;1===t.registrationStatus;)await yp(100),t=await Rp(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Dp(e);return n||t}return t}function Rp(e){return Op(e,e=>{if(!e)throw up.create("installation-not-found");return Lp(e)})}function Lp(e){return 1===(t=e).registrationStatus&&t.registrationTime+sp<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function zp(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return"".concat(hp(e),"/").concat(n,"/authTokens:generate")}(n,t),a=gp(n,t),s=r.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const o={installation:{sdkVersion:op,appId:n.appId}},l={method:"POST",headers:a,body:JSON.stringify(o)},c=await vp(()=>fetch(i,l));if(c.ok){return pp(await c.json())}throw await mp("Generate Auth Token",c)}async function Fp(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Op(e.appConfig,r=>{if(!Vp(r))throw up.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+cp}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await Up(e.appConfig);for(;1===n.authToken.requestStatus;)await yp(100),n=await Up(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Fp(e,t):r}(e,n),r;{if(!navigator.onLine)throw up.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Me(Me({},e),{},{authToken:t})}(r);return t=async function(e,t){try{const n=await zp(e,t),r=Me(Me({},t),{},{authToken:n});return await Ip(e.appConfig,r),n}catch(OQ){if(!dp(OQ)||401!==OQ.customData.serverCode&&404!==OQ.customData.serverCode){const n=Me(Me({},t),{},{authToken:{requestStatus:0}});await Ip(e.appConfig,n)}else await Pp(e.appConfig);throw OQ}}(e,n),n}});return t?await t:r.authToken}function Up(e){return Op(e,e=>{if(!Vp(e))throw up.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+sp<Date.now()?Me(Me({},e),{},{authToken:{requestStatus:0}}):e;var n})}function Vp(e){return void 0!==e&&2===e.registrationStatus}async function Bp(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await Dp(e);t&&await t}(n);return(await Fp(n,t)).token}function qp(e){return up.create("missing-app-config-values",{valueName:e})}const Hp="installations",Wp=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw qp("App Configuration");if(!e.name)throw qp("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw qp(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:An(t,"heartbeat"),_delete:()=>Promise.resolve()}},Kp=e=>{const t=An(e.getProvider("app").getImmediate(),Hp).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Dp(t);return r?r.catch(console.error):Fp(t).catch(console.error),n.fid}(t),getToken:e=>Bp(t,e)}};_n(new yt(Hp,Wp,"PUBLIC")),_n(new yt("installations-internal",Kp,"PRIVATE")),Ln(ip,ap),Ln(ip,ap,"esm2020");const Gp="analytics",Yp="https://www.googletagmanager.com/gtag/js",Qp=new Tt("@firebase/analytics"),Xp=new ot("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Jp(e){if(!e.startsWith(Yp)){const t=Xp.create("invalid-gtag-resource",{gtagURL:e});return Qp.warn(t.message),""}return e}function $p(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function Zp(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:Jp}),r=document.createElement("script"),i="".concat(Yp,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function em(e,t,n,r){return async function(i){try{for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];if("event"===i){const[r,i]=s;await async function(e,t,n,r,i){try{let a=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await $p(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){a=[];break}a.push(i)}}0===a.length&&(a=Object.values(t)),await Promise.all(a),e("event",r,i||{})}catch(OQ){Qp.error(OQ)}}(e,t,n,r,i)}else if("config"===i){const[i,a]=s;await async function(e,t,n,r,i,a){const s=r[i];try{if(s)await t[s];else{const e=(await $p(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(OQ){Qp.error(OQ)}e("config",i,a)}(e,t,n,r,i,a)}else if("consent"===i){const[t,n]=s;e("consent",t,n)}else if("get"===i){const[t,n,r]=s;e("get",t,n,r)}else if("set"===i){const[t]=s;e("set",t)}else e(i,...s)}catch(OQ){Qp.error(OQ)}}}const tm=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function nm(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function rm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tm,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:a}=e.options;if(!r)throw Xp.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw Xp.create("no-api-key")}const s=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new am;return setTimeout(async()=>{o.abort()},void 0!==n?n:6e4),im({appId:r,apiKey:i,measurementId:a},s,o,t)}async function im(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:tm;const{appId:s,measurementId:o}=e;try{await function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(a),r(Xp.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,r)}catch(OQ){if(o)return Qp.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(o)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===OQ||void 0===OQ?void 0:OQ.message,"]")),{appId:s,measurementId:o};throw OQ}try{const t=await async function(e){const{appId:t,apiKey:n}=e,r={method:"GET",headers:nm(n)},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",t),a=await fetch(i,r);if(200!==a.status&&304!==a.status){let e="";try{var s;const t=await a.json();null!==(s=t.error)&&void 0!==s&&s.message&&(e=t.error.message)}catch(o){}throw Xp.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return a.deleteThrottleMetadata(s),t}catch(OQ){var l;const r=OQ;if(!function(e){if(!(e instanceof st)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(a.deleteThrottleMetadata(s),o)return Qp.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(o)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===r||void 0===r?void 0:r.message,"]")),{appId:s,measurementId:o};throw OQ}const c=503===Number(null===r||void 0===r||null===(l=r.customData)||void 0===l?void 0:l.httpStatus)?gt(i,a.intervalMillis,30):gt(i,a.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:i+1};return a.setThrottleMetadata(s,u),Qp.debug("Calling attemptFetch again in ".concat(c," millis")),im(e,u,n,a)}}class am{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let sm,om;function lm(e){om=e}function cm(e){sm=e}async function um(e,t,n,r,i,a,s){var o;const l=rm(e);l.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Qp.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(e=>Qp.error(e)),t.push(l);const c=async function(){if(!it())return Qp.warn(Xp.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await at()}catch(OQ){return Qp.warn(Xp.create("indexeddb-unavailable",{errorInfo:null===OQ||void 0===OQ?void 0:OQ.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[u,d]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Yp)&&n.src.includes(e))return n;return null})(a)||Zp(a,u.measurementId),om&&(i("consent","default",om),lm(void 0)),i("js",new Date);const h=null!==(o=null===s||void 0===s?void 0:s.config)&&void 0!==o?o:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),i("config",u.measurementId,h),sm&&(i("set",sm),cm(void 0)),u.measurementId}class dm{constructor(e){this.app=e}_delete(){return delete hm[this.app.options.appId],Promise.resolve()}}let hm={},pm=[];const mm={};let fm,gm,vm="dataLayer",ym="gtag",xm=!1;function bm(){const e=[];if(nt()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(" "),n=Xp.create("invalid-analytics-context",{errorInfo:t});Qp.warn(n.message)}}function jm(e,t,n){bm();const r=e.options.appId;if(!r)throw Xp.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Xp.create("no-api-key");Qp.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=hm[r])throw Xp.create("already-exists",{id:r});if(!xm){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(vm);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(a=window[i]),window[i]=em(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}(hm,pm,mm,vm,ym);gm=e,fm=t,xm=!0}hm[r]=um(e,pm,mm,t,fm,vm,n);return new dm(e)}function wm(e,t,n,r){e=vt(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Me(Me({},r),{},{send_to:i}))}}(gm,hm[e.app.options.appId],t,n,r).catch(e=>Qp.error(e))}const Nm="@firebase/analytics",km="0.10.18";function Cm(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}_n(new yt(Gp,(e,t)=>{let{options:n}=t;return jm(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),_n(new yt("analytics-internal",function(e){try{const t=e.getProvider(Gp).getImmediate();return{logEvent:(e,n,r)=>wm(t,e,n,r)}}catch(OQ){throw Xp.create("interop-component-reg-failed",{reason:OQ})}},"PRIVATE")),Ln(Nm,km),Ln(Nm,km,"esm2020");const Sm=["providerId"],Em=["uid","auth","stsTokenManager"],Tm=["providerId","signInMethod"];function _m(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Am=_m,Im=new ot("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pm=new Tt("@firebase/auth");function Om(e){if(Pm.logLevel<=Nt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Pm.error("Auth (".concat(Dn,"): ").concat(e),...n)}}function Dm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Fm(e,...n)}function Mm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Fm(e,...n)}function Rm(e,t,n){const r=Me(Me({},Am()),{},{[t]:n});return new ot("auth","Firebase",r).create(t,{appName:e.name})}function Lm(e){return Rm(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zm(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Dm(e,"argument-error"),Rm(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Fm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Im.create(e,...n)}function Um(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Fm(t,...r)}}function Vm(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Om(t),new Error(t)}function Bm(e,t){e||Vm(t)}function qm(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Hm(){return"http:"===Wm()||"https:"===Wm()}function Wm(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Km{constructor(e,t){this.shortDelay=e,this.longDelay=t,Bm(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Hm()||nt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Gm(e,t){Bm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Ym{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Vm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Vm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Vm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qm={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Xm=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Jm=new Km(3e4,6e4);function $m(e,t){return e.tenantId&&!t.tenantId?Me(Me({},t),{},{tenantId:e.tenantId}):t}async function Zm(e,t,n,r){return ef(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},a={};r&&("GET"===t?a=r:i={body:JSON.stringify(r)});const s=dt(Me({key:e.config.apiKey},a)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Me({method:t,headers:o},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Ye(e.emulatorConfig.host)&&(l.credentials="include"),Ym.fetch()(await nf(e,e.config.apiHost,n,s),l)})}async function ef(e,t,n){e._canInitEmulator=!1;const r=Me(Me({},Qm),t);try{const t=new af(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw sf(e,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const t=i.ok?a.errorMessage:a.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw sf(e,"credential-already-in-use",a);if("EMAIL_EXISTS"===n)throw sf(e,"email-already-in-use",a);if("USER_DISABLED"===n)throw sf(e,"user-disabled",a);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw Rm(e,o,s);Dm(e,o)}}catch(OQ){if(OQ instanceof st)throw OQ;Dm(e,"network-request-failed",{message:String(OQ)})}}async function tf(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const a=await Zm(e,t,n,r,i);return"mfaPendingCredential"in a&&Dm(e,"multi-factor-auth-required",{_serverResponse:a}),a}async function nf(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),a=e,s=a.config.emulator?Gm(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(Xm.includes(n)&&(await a._persistenceManagerAvailable,"COOKIE"===a._getPersistenceType())){return a._getPersistence()._getFinalTarget(s).toString()}return s}function rf(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class af{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Mm(this.auth,"network-request-failed")),Jm.get())})}}function sf(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Mm(e,t,r);return i.customData._tokenResponse=n,i}function of(e){return void 0!==e&&void 0!==e.enterprise}class lf{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return rf(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cf(e,t){return Zm(e,"GET","/v2/recaptchaConfig",$m(e,t))}async function uf(e,t){return Zm(e,"POST","/v1/accounts:lookup",t)}function df(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(OQ){}}function hf(e){return 1e3*Number(e)}function pf(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Om("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ue(n);return e?JSON.parse(e):(Om("Failed to decode base64 JWT payload"),null)}catch(OQ){return Om("Caught error parsing JWT payload as JSON",null===OQ||void 0===OQ?void 0:OQ.toString()),null}}function mf(e){const t=pf(e);return Um(t,"internal-error"),Um("undefined"!==typeof t.exp,"internal-error"),Um("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ff(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(OQ){throw OQ instanceof st&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(OQ)&&e.auth.currentUser===e&&await e.auth.signOut(),OQ}}class gf{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(OQ){return void((null===OQ||void 0===OQ?void 0:OQ.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class vf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=df(this.lastLoginAt),this.creationTime=df(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function yf(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ff(e,uf(n,{idToken:r}));Um(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const a=i.users[0];e._notifyReloadListener(a);const s=null!==(t=a.providerUserInfo)&&void 0!==t&&t.length?xf(a.providerUserInfo):[],o=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,s),l=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(null!==o&&void 0!==o&&o.length),u=!!l&&c,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new vf(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function xf(e){return e.map(e=>{let{providerId:t}=e,n=Cm(e,Sm);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class bf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Um(e.idToken,"internal-error"),Um("undefined"!==typeof e.idToken,"internal-error"),Um("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):mf(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Um(0!==e.length,"internal-error");const t=mf(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Um(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await ef(e,{},async()=>{const n=dt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await nf(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:s,body:n};return e.emulatorConfig&&Ye(e.emulatorConfig.host)&&(o.credentials="include"),Ym.fetch()(a,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,a=new bf;return n&&(Um("string"===typeof n,"internal-error",{appName:e}),a.refreshToken=n),r&&(Um("string"===typeof r,"internal-error",{appName:e}),a.accessToken=r),i&&(Um("number"===typeof i,"internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bf,this.toJSON())}_performRefresh(){return Vm("not implemented")}}function jf(e,t){Um("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class wf{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=Cm(e,Em);this.providerId="firebase",this.proactiveRefresh=new gf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new vf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ff(this,this.stsTokenManager.getToken(this.auth,e));return Um(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=vt(e),r=await n.getIdToken(t),i=pf(r);Um(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a="object"===typeof i.firebase?i.firebase:void 0,s=null===a||void 0===a?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:df(hf(i.auth_time)),issuedAtTime:df(hf(i.iat)),expirationTime:df(hf(i.exp)),signInProvider:s||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=vt(e);await yf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Um(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Me({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new wf(Me(Me({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Um(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await yf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(In(this.auth.app))return Promise.reject(Lm(this.auth));const e=await this.getIdToken();return await ff(this,async function(e,t){return Zm(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Me(Me({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Me({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,a,s,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(a=t.photoURL)&&void 0!==a?a:void 0,m=null!==(s=t.tenantId)&&void 0!==s?s:void 0,f=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:x,isAnonymous:b,providerData:j,stsTokenManager:w}=t;Um(y&&w,e,"internal-error");const N=bf.fromJSON(this.name,w);Um("string"===typeof y,e,"internal-error"),jf(u,e.name),jf(d,e.name),Um("boolean"===typeof x,e,"internal-error"),Um("boolean"===typeof b,e,"internal-error"),jf(h,e.name),jf(p,e.name),jf(m,e.name),jf(f,e.name),jf(g,e.name),jf(v,e.name);const k=new wf({uid:y,auth:e,email:d,emailVerified:x,displayName:u,isAnonymous:b,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:N,createdAt:g,lastLoginAt:v});return j&&Array.isArray(j)&&(k.providerData=j.map(e=>Me({},e))),f&&(k._redirectEventId=f),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new bf;r.updateFromServerResponse(t);const i=new wf({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await yf(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Um(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?xf(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),s=new bf;s.updateFromIdToken(n);const o=new wf({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:a}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new vf(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(o,l),o}}const Nf=new Map;function kf(e){Bm(e instanceof Function,"Expected a class definition");let t=Nf.get(e);return t?(Bm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Nf.set(e,t),t)}class Cf{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Cf.type="NONE";const Sf=Cf;function Ef(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Tf{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ef(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ef("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await uf(this.auth,{idToken:e}).catch(()=>{});return t?wf._fromGetAccountInfoResponse(this.auth,t,e):null}return wf._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Tf(kf(Sf),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||kf(Sf);const a=Ef(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(a);if(t){let n;if("string"===typeof t){const r=await uf(e,{idToken:t}).catch(()=>{});if(!r)break;n=await wf._fromGetAccountInfoResponse(e,r,t)}else n=wf._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],s&&await i._set(a,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(a)}catch(t){}})),new Tf(i,e,n)):new Tf(i,e,n)}}function _f(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Of(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Af(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Mf(t))return"Blackberry";if(Rf(t))return"Webos";if(If(t))return"Safari";if((t.includes("chrome/")||Pf(t))&&!t.includes("edge/"))return"Chrome";if(Df(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Af(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return/firefox\//i.test(e)}function If(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:et()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return/crios\//i.test(e)}function Of(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return/iemobile/i.test(e)}function Df(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return/android/i.test(e)}function Mf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return/blackberry/i.test(e)}function Rf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return/webos/i.test(e)}function Lf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function zf(){return function(){const e=et();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ff(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return Lf(e)||Df(e)||Rf(e)||Mf(e)||/windows phone/i.test(e)||Of(e)}function Uf(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=_f(et());break;case"Worker":t="".concat(_f(et()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Dn,"/").concat(r)}class Vf{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(OQ){r(OQ)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(OQ){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===OQ||void 0===OQ?void 0:OQ.message})}}}class Bf{constructor(e){var t,n,r,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=a.minPasswordLength)&&void 0!==t?t:6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),void 0!==a.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),void 0!==a.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),void 0!==a.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),void 0!==a.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,a,s;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNumericCharacter)||void 0===a||a),o.isValid&&(o.isValid=null===(s=o.containsNonAlphanumericCharacter)||void 0===s||s),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class qf{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wf(this),this.idTokenSubscription=new Wf(this),this.beforeStateQueue=new Vf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Im,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=kf(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Tf.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(OQ){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await uf(this,{idToken:e}),n=await wf._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(In(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,a;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,s=null===(a=n)||void 0===a?void 0:a._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==s||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(OQ){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(OQ))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Um(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(OQ){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yf(e)}catch(OQ){if((null===OQ||void 0===OQ?void 0:OQ.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(In(this.app))return Promise.reject(Lm(this));const t=e?vt(e):null;return t&&Um(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Um(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return In(this.app)?Promise.reject(Lm(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return In(this.app)?Promise.reject(Lm(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kf(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Zm(e,"GET","/v2/passwordPolicy",$m(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Bf(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ot("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Zm(e,"POST","/v2/accounts:revokeToken",$m(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&kf(e)||this._popupRedirectResolver;Um(t,this,"argument-error"),this.redirectPersistenceManager=await Tf.create(this,[kf(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let a=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Um(s,this,"internal-error"),s.then(()=>{a||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{a=!0,i()}}{const n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Um(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Uf(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(In(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(Pm.logLevel<=Nt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Pm.warn("Auth (".concat(Dn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Hf(e){return vt(e)}class Wf{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new mt(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Um(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Gf(e){return Kf.loadJS(e)}function Yf(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Qf{constructor(){this.enterprise=new Xf}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Xf{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Jf="NO_RECAPTCHA";class $f{constructor(e){this.type="recaptcha-enterprise",this.auth=Hf(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;of(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Jf)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Qf).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{cf(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new lf(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&of(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Kf.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Gf(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Zf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new $f(e);let s;if(i)s=Jf;else try{s=await a.verify(n)}catch(l){s=await a.verify(n,!0)}const o=Me({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function eg(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Zf(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Zf(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("PHONE_PROVIDER")){const i=await Zf(e,t,n);return r(e,i).catch(async i=>{var a;if("AUDIT"===(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Zf(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Zf(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function tg(e){const t=Hf(e),n=await cf(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new lf(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new $f(t).verify()}}function ng(e,t,n){const r=Hf(e);Um(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),a=rg(t),{host:s,port:o}=function(e){const t=rg(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ig(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ig(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(a,"//").concat(s).concat(l,"/")},u=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Um(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Um(ct(c,r.config.emulator)&&ct(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Ye(s)?(Qe("".concat(a,"//").concat(s).concat(l)),Ze("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function rg(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ig(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ag{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vm("not implemented")}_getIdTokenResponse(e){return Vm("not implemented")}_linkToIdToken(e,t){return Vm("not implemented")}_getReauthenticationResolver(e){return Vm("not implemented")}}async function sg(e,t){return Zm(e,"POST","/v1/accounts:signUp",t)}async function og(e,t){return tf(e,"POST","/v1/accounts:signInWithPassword",$m(e,t))}class lg extends ag{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new lg(e,t,"password")}static _fromEmailAndCode(e,t){return new lg(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return eg(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",og,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return tf(e,"POST","/v1/accounts:signInWithEmailLink",$m(e,t))}(e,{email:this._email,oobCode:this._password});default:Dm(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return eg(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sg,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return tf(e,"POST","/v1/accounts:signInWithEmailLink",$m(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Dm(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function cg(e,t){return tf(e,"POST","/v1/accounts:signInWithIdp",$m(e,t))}class ug extends ag{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ug(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dm("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Cm(t,Tm);if(!n||!r)return null;const a=new ug(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return cg(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,cg(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,cg(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dt(t)}return e}}async function dg(e,t){return Zm(e,"POST","/v1/accounts:sendVerificationCode",$m(e,t))}const hg={USER_NOT_FOUND:"user-not-found"};class pg extends ag{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new pg({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new pg({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return tf(e,"POST","/v1/accounts:signInWithPhoneNumber",$m(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await tf(e,"POST","/v1/accounts:signInWithPhoneNumber",$m(e,t));if(n.temporaryProof)throw sf(e,"account-exists-with-different-credential",n);return n}(e,Me({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return tf(e,"POST","/v1/accounts:signInWithPhoneNumber",$m(e,Me(Me({},t),{},{operation:"REAUTH"})),hg)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new pg({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class mg{constructor(e){var t,n,r,i,a,s;const o=ht(pt(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Um(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(a=o.lang)&&void 0!==a?a:null,this.tenantId=null!==(s=o.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=ht(pt(e)).link,n=t?ht(pt(t)).deep_link_id:null,r=ht(pt(e)).deep_link_id;return(r?ht(pt(r)).link:null)||r||n||t||e}(e);try{return new mg(t)}catch(n){return null}}}class fg{constructor(){this.providerId=fg.PROVIDER_ID}static credential(e,t){return lg._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=mg.parseLink(t);return Um(n,"argument-error"),lg._fromEmailAndCode(e,n.code,n.tenantId)}}fg.PROVIDER_ID="password",fg.EMAIL_PASSWORD_SIGN_IN_METHOD="password",fg.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class gg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vg extends gg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class yg extends vg{constructor(){super("facebook.com")}static credential(e){return ug._fromParams({providerId:yg.PROVIDER_ID,signInMethod:yg.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yg.credentialFromTaggedObject(e)}static credentialFromError(e){return yg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return yg.credential(t.oauthAccessToken)}catch(n){return null}}}yg.FACEBOOK_SIGN_IN_METHOD="facebook.com",yg.PROVIDER_ID="facebook.com";class xg extends vg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ug._fromParams({providerId:xg.PROVIDER_ID,signInMethod:xg.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xg.credentialFromTaggedObject(e)}static credentialFromError(e){return xg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return xg.credential(n,r)}catch(i){return null}}}xg.GOOGLE_SIGN_IN_METHOD="google.com",xg.PROVIDER_ID="google.com";class bg extends vg{constructor(){super("github.com")}static credential(e){return ug._fromParams({providerId:bg.PROVIDER_ID,signInMethod:bg.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bg.credentialFromTaggedObject(e)}static credentialFromError(e){return bg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return bg.credential(t.oauthAccessToken)}catch(n){return null}}}bg.GITHUB_SIGN_IN_METHOD="github.com",bg.PROVIDER_ID="github.com";class jg extends vg{constructor(){super("twitter.com")}static credential(e,t){return ug._fromParams({providerId:jg.PROVIDER_ID,signInMethod:jg.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return jg.credentialFromTaggedObject(e)}static credentialFromError(e){return jg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return jg.credential(n,r)}catch(i){return null}}}async function wg(e,t){return tf(e,"POST","/v1/accounts:signUp",$m(e,t))}jg.TWITTER_SIGN_IN_METHOD="twitter.com",jg.PROVIDER_ID="twitter.com";class Ng{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await wf._fromIdTokenResponse(e,n,r),a=kg(n);return new Ng({user:i,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=kg(n);return new Ng({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function kg(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Cg extends st{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Cg.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Cg(e,t,n,r)}}function Sg(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Cg._fromErrorAndOperation(e,n,t,r);throw n})}async function Eg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ff(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ng._forOperation(e,"link",r)}async function Tg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(In(r.app))return Promise.reject(Lm(r));const i="reauthenticate";try{const a=await ff(e,Sg(r,i,t,e),n);Um(a.idToken,r,"internal-error");const s=pf(a.idToken);Um(s,r,"internal-error");const{sub:o}=s;return Um(e.uid===o,r,"user-mismatch"),Ng._forOperation(e,i,a)}catch(OQ){throw(null===OQ||void 0===OQ?void 0:OQ.code)==="auth/".concat("user-not-found")&&Dm(r,"user-mismatch"),OQ}}async function _g(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(In(e.app))return Promise.reject(Lm(e));const r="signIn",i=await Sg(e,r,t),a=await Ng._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function Ag(e,t){return _g(Hf(e),t)}async function Ig(e,t){return Tg(vt(e),t)}async function Pg(e){const t=Hf(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Og(e,t,n){if(In(e.app))return Promise.reject(Lm(e));const r=Hf(e),i=eg(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wg,"EMAIL_PASSWORD_PROVIDER"),a=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Pg(e),t}),s=await Ng._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(s.user),s}async function Dg(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=vt(e),a={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await ff(i,async function(e,t){return Zm(e,"POST","/v1/accounts:update",t)}(i.auth,a));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const o=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}async function Mg(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const a=await ff(e,async function(e,t){return Zm(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(a,!0)}function Rg(e,t){return Zm(e,"POST","/v2/accounts/mfaEnrollment:start",$m(e,t))}new WeakMap;const Lg="__sak";class zg{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lg,"1"),this.storage.removeItem(Lg),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Fg extends zg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ff(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);zf()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fg.type="LOCAL";const Ug=Fg;function Vg(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Bg(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class qg{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Bg(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Vg(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Bg(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Bg(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Vg(n);const i=setInterval(()=>{const e=Vg(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}qg.type="COOKIE";class Hg extends zg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Hg.type="SESSION";const Wg=Hg;class Kg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Kg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(null===a||void 0===a||!a.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(a).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Gg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Kg.receivers=[];class Yg{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,a;return new Promise((s,o)=>{const l=Gg("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);a={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Qg(){return window}function Xg(){return"undefined"!==typeof Qg().WorkerGlobalScope&&"function"===typeof Qg().importScripts}const Jg="firebaseLocalStorageDb",$g="firebaseLocalStorage",Zg="fbase_key";class ev{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tv(e,t){return e.transaction([$g],t?"readwrite":"readonly").objectStore($g)}function nv(){const e=indexedDB.open(Jg,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore($g,{keyPath:Zg})}catch(OQ){n(OQ)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains($g)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Jg);return new ev(e).toPromise()}(),t(await nv()))})})}async function rv(e,t,n){const r=tv(e,!0).put({[Zg]:t,value:n});return new ev(r).toPromise()}function iv(e,t){const n=tv(e,!0).delete(t);return new ev(n).toPromise()}class av{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await nv()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(OQ){if(t++>3)throw OQ;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kg._getInstance(Xg()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Yg(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nv();return await rv(e,Lg,"1"),await iv(e,Lg),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>rv(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=tv(e,!1).get(t),r=await new ev(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>iv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=tv(e,!1).getAll();return new ev(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}av.type="LOCAL";const sv=av;function ov(e,t){return Zm(e,"POST","/v2/accounts/mfaSignIn:start",$m(e,t))}Yf("rcb"),new Km(3e4,6e4);const lv="recaptcha";async function cv(e,t,n){if(!e._getRecaptchaConfig())try{await tg(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Um("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},a=eg(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Jf){Um((null===n||void 0===n?void 0:n.type)===lv,e,"argument-error");return Rg(e,await uv(e,t,n))}return Rg(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Um("signin"===t.type,e,"internal-error");const a=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Um(a,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=eg(e,s,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Jf){Um((null===n||void 0===n?void 0:n.type)===lv,e,"argument-error");return ov(e,await uv(e,t,n))}return ov(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=eg(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Jf){Um((null===n||void 0===n?void 0:n.type)===lv,e,"argument-error");return dg(e,await uv(e,t,n))}return dg(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function uv(e,t,n){Um(n.type===lv,e,"argument-error");const r=await n.verify();Um("string"===typeof r,e,"argument-error");const i=Me({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class dv{constructor(e){this.providerId=dv.PROVIDER_ID,this.auth=Hf(e)}verifyPhoneNumber(e,t){return cv(this.auth,e,vt(t))}static credential(e,t){return pg._fromVerification(e,t)}static credentialFromResult(e){const t=e;return dv.credentialFromTaggedObject(t)}static credentialFromError(e){return dv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?pg._fromTokenResponse(n,r):null}}function hv(e,t){return t?kf(t):(Um(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}dv.PROVIDER_ID="phone",dv.PHONE_SIGN_IN_METHOD="phone";class pv extends ag{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cg(e,this._buildIdpRequest())}_linkToIdToken(e,t){return cg(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return cg(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mv(e){return _g(e.auth,new pv(e),e.bypassAuthState)}function fv(e){const{auth:t,user:n}=e;return Um(n,t,"internal-error"),Tg(n,new pv(e),e.bypassAuthState)}async function gv(e){const{auth:t,user:n}=e;return Um(n,t,"internal-error"),Eg(n,new pv(e),e.bypassAuthState)}class vv{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(OQ){this.reject(OQ)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:s}=e;if(a)return void this.reject(a);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(o))}catch(OQ){this.reject(OQ)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mv;case"linkViaPopup":case"linkViaRedirect":return gv;case"reauthViaPopup":case"reauthViaRedirect":return fv;default:Dm(this.auth,"internal-error")}}resolve(e){Bm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yv=new Km(2e3,1e4);class xv extends vv{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,xv.currentPopupAction&&xv.currentPopupAction.cancel(),xv.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Um(e,this.auth,"internal-error"),e}async onExecution(){Bm(1===this.filter.length,"Popup operations only handle one event");const e=Gg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Mm(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Mm(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xv.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mm(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,yv.get())};e()}}xv.currentPopupAction=null;const bv=new Map;class jv extends vv{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=bv.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=kv(t),r=Nv(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(OQ){e=()=>Promise.reject(OQ)}bv.set(this.auth._key(),e)}return this.bypassAuthState||bv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function wv(e,t){bv.set(e._key(),t)}function Nv(e){return kf(e._redirectPersistence)}function kv(e){return Ef("pendingRedirect",e.config.apiKey,e.name)}async function Cv(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(In(e.app))return Promise.reject(Lm(e));const r=Hf(e),i=hv(r,t),a=new jv(r,i,n),s=await a.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class Sv{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tv(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Tv(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Mm(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ev(e))}saveEventToCache(e){this.cachedEventUids.add(Ev(e)),this.lastProcessedEventTime=Date.now()}}function Ev(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Tv(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const _v=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Av=/^https?/;async function Iv(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Zm(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Pv(r))return}catch(n){}Dm(e,"unauthorized-domain")}function Pv(e){const t=qm(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Av.test(n))return!1;if(_v.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ov=new Km(3e4,6e4);function Dv(){const e=Qg().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Mv(e){return new Promise((t,n)=>{var r,i;function a(){Dv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Dv(),n(Mm(e,"network-request-failed"))},timeout:Ov.get()})}if(null!==(r=Qg().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Qg().gapi)||void 0===i||!i.load){const t=Yf("iframefcb");return Qg()[t]=()=>{gapi.load?a():n(Mm(e,"network-request-failed"))},Gf("".concat(Kf.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw Rv=null,e})}let Rv=null;const Lv=new Km(5e3,15e3),zv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uv(e){const t=e.config;Um(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Gm(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Dn},i=Fv.get(e.config.apiHost);i&&(r.eid=i);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(dt(r).slice(1))}async function Vv(e){const t=await function(e){return Rv=Rv||Mv(e),Rv}(e),n=Qg().gapi;return Um(n,e,"internal-error"),t.open({where:document.body,url:Uv(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zv,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Mm(e,"network-request-failed"),a=Qg().setTimeout(()=>{r(i)},Lv.get());function s(){Qg().clearTimeout(a),n(t)}t.ping(s).then(s,()=>{r(i)})}))}const Bv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(OQ){}}}function Hv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Me(Me({},Bv),{},{width:r.toString(),height:i.toString(),top:a,left:s}),c=et().toLowerCase();n&&(o=Pf(c)?"_blank":n),Af(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Lf(arguments.length>0&&void 0!==arguments[0]?arguments[0]:et())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new qv(null);const d=window.open(t||"",o,u);Um(d,e,"popup-blocked");try{d.focus()}catch(OQ){}return new qv(d)}const Wv="__/auth/handler",Kv="emulator/auth/handler",Gv=encodeURIComponent("fac");async function Yv(e,t,n,r,i,a){Um(e.config.authDomain,e,"auth-domain-config-required"),Um(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Dn,eventId:i};if(t instanceof gg){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))s[e]=t}if(t instanceof vg){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const o=s;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Gv,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Wv);return Gm(t,Kv)}(e),"?").concat(dt(o).slice(1)).concat(c)}const Qv="webStorageSupport";const Xv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wg,this._completeRedirectFn=Cv,this._overrideRedirectResult=wv}async _openPopup(e,t,n,r){var i;Bm(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Hv(e,await Yv(e,t,n,qm(),r),Gg())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Qg().location.href=e}(await Yv(e,t,n,qm(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Bm(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Vv(e),n=new Sv(e);return t.register("authEvent",t=>{Um(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qv,{type:Qv},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Qv];void 0!==i&&t(!!i),Dm(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Iv(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ff()||If()||Lf()}};var Jv="@firebase/auth",$v="1.11.0";class Zv{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Um(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ey=Ke("authIdTokenMaxAge")||300;let ty=null;var ny;Kf={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Mm("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},ny="Browser",_n(new yt("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;Um(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:o,clientPlatform:ny,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Uf(ny)},c=new qf(r,i,a,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(kf);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),_n(new yt("auth-internal",e=>(e=>new Zv(e))(Hf(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Ln(Jv,$v,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ny)),Ln(Jv,$v,"esm2020");const ry="firebasestorage.googleapis.com",iy="storageBucket";class ay extends st{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(ly(e),"Firebase Storage: ".concat(t," (").concat(ly(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ay.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ly(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var sy,oy;function ly(e){return"storage/"+e}function cy(){return new ay(sy.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function uy(){return new ay(sy.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dy(){return new ay(sy.CANCELED,"User canceled the upload/download.")}function hy(){return new ay(sy.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function py(e){return new ay(sy.INVALID_ARGUMENT,e)}function my(){return new ay(sy.APP_DELETED,"The Firebase app was deleted.")}function fy(e,t){return new ay(sy.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function gy(e){throw new ay(sy.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(sy||(sy={}));class vy{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=vy.makeFromUrl(e,t)}catch(OQ){return new vy(e,"")}if(""===n.path)return n;throw r=e,new ay(sy.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),o=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://".concat(t===ry?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:a}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new vy(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new ay(sy.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class yy{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function xy(e){return"string"===typeof e||e instanceof String}function by(e){return jy()&&e instanceof Blob}function jy(){return"undefined"!==typeof Blob}function wy(e,t,n,r){if(r<t)throw py("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw py("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Ny(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function ky(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Cy(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(oy||(oy={}));class Sy{constructor(e,t,n,r,i,a,s,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=s,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Ey(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===oy.NO_ERROR,i=n.getStatus();if(!t||Cy(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===oy.ABORT;return void e(!1,new Ey(!1,null,t))}const a=-1!==this.successCodes_.indexOf(i);e(!0,new Ey(a,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(OQ){r(OQ)}else if(null!==i){const e=cy();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?my():dy())}else{r(uy())}};this.canceled_?t(0,new Ey(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,a=null,s=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout(()=>{i=null,e(p,l())},t)}function h(){a&&clearTimeout(a)}function p(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||s)return h(),void u.call(null,e,...n);let a;r<64&&(r*=2),1===o?(o=2,a=0):a=1e3*(r+Math.random()),d(a)}let m=!1;function f(e){m||(m=!0,h(),c||(null!==i?(e||(o=2),clearTimeout(i),d(0)):e||(o=1)))}return d(0),a=setTimeout(()=>{s=!0,f(!0)},n),f}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Ey{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Ty(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function _y(){const e=Ty();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(jy())return new Blob(n);throw new ay(sy.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Ay(e){if("undefined"===typeof atob)throw t="base-64",new ay(sy.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const Iy="raw",Py="base64",Oy="base64url",Dy="data_url";class My{constructor(e,t){this.data=e,this.contentType=t||null}}function Ry(e,t){switch(e){case Iy:return new My(Ly(t));case Py:case Oy:return new My(zy(e,t));case Dy:return new My(function(e){const t=new Fy(e);return t.base64?zy(Py,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(OQ){throw fy(Dy,"Malformed data URL.")}return Ly(t)}(t.rest)}(t),new Fy(t).contentType)}throw cy()}function Ly(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function zy(e,t){switch(e){case Py:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw fy(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Oy:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw fy(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Ay(t)}catch(OQ){if(OQ.message.includes("polyfill"))throw OQ;throw fy(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Fy{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw fy(Dy,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Uy{constructor(e,t){let n=0,r="";by(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(by(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Uy(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Uy(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(jy()){const e=t.map(e=>e instanceof Uy?e.data_:e);return new Uy(_y.apply(null,e))}{const e=t.map(e=>xy(e)?Ry(Iy,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let i=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]}),new Uy(r,!0)}}uploadData(){return this.data_}}function Vy(e){let t;try{t=JSON.parse(e)}catch(OQ){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function By(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function qy(e,t){return t}class Hy{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||qy}}let Wy=null;function Ky(){if(Wy)return Wy;const e=[];e.push(new Hy("bucket")),e.push(new Hy("generation")),e.push(new Hy("metageneration")),e.push(new Hy("name","fullPath",!0));const t=new Hy("name");t.xform=function(e,t){return function(e){return!xy(e)||e.length<2?e:By(e)}(t)},e.push(t);const n=new Hy("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Hy("timeCreated")),e.push(new Hy("updated")),e.push(new Hy("md5Hash",null,!0)),e.push(new Hy("cacheControl",null,!0)),e.push(new Hy("contentDisposition",null,!0)),e.push(new Hy("contentEncoding",null,!0)),e.push(new Hy("contentLanguage",null,!0)),e.push(new Hy("contentType",null,!0)),e.push(new Hy("metadata","customMetadata",!0)),Wy=e,Wy}function Gy(e,t,n){const r={type:"file"},i=n.length;for(let a=0;a<i;a++){const e=n[a];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new vy(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Yy(e,t,n){const r=Vy(t);if(null===r)return null;return Gy(e,r,n)}function Qy(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Xy{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Jy(e){if(!e)throw cy()}function $y(e,t){return function(n,r){const i=Yy(e,r,t);return Jy(null!==i),i}}function Zy(e,t){return function(n,r){const i=Yy(e,r,t);return Jy(null!==i),function(e,t,n,r){const i=Vy(t);if(null===i)return null;if(!xy(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const s=encodeURIComponent,o=a.split(",").map(t=>{const i=e.bucket,a=e.fullPath;return Ny("/b/"+s(i)+"/o/"+s(a),n,r)+ky({alt:"media",token:t})});return o[0]}(i,r,e.host,e._protocol)}}function ex(e){return function(t,n){let r;var i;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new ay(sy.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new ay(sy.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=e.bucket,r=new ay(sy.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):r=403===t.getStatus()?function(e){return new ay(sy.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}(e.path):n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function tx(e){const t=ex(e);return function(n,r){let i=t(n,r);return 404===n.getStatus()&&(i=function(e){return new ay(sy.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}(e.path)),i.serverResponse=r.serverResponse,i}}function nx(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function rx(e,t,n,r,i){const a=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+o;const l=nx(t,r,i),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Qy(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",d=Uy.getBlob(c,r,u);if(null===d)throw hy();const h={name:l.fullPath},p=Ny(a,e.host,e._protocol),m=e.maxUploadRetryTime,f=new Xy(p,"POST",$y(e,n),m);return f.urlParams=h,f.headers=s,f.body=d.uploadData(),f.errorHandler=ex(t),f}class ix{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oy.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oy.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oy.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,i){if(this.sent_)throw gy("cannot .send() more than once");if(Ye(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw gy("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw gy("cannot .getStatus() before sending");try{return this.xhr_.status}catch(OQ){return-1}}getResponse(){if(!this.sent_)throw gy("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw gy("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class ax extends ix{initXhr(){this.xhr_.responseType="text"}}function sx(){return new ax}class ox{constructor(e,t){this._service=e,this._location=t instanceof vy?t:vy.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ox(e,t)}get root(){const e=new vy(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return By(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new vy(this._location.bucket,e);return new ox(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new ay(sy.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function lx(e,t,n){e._throwIfRoot("uploadBytes");const r=rx(e.storage,e._location,Ky(),new Uy(t,!0),n);return e.storage.makeRequestWithTokens(r,sx).then(t=>({metadata:t,ref:e}))}function cx(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Ny(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Xy(r,"GET",Zy(e,n),i);return a.errorHandler=tx(t),a}(e.storage,e._location,Ky());return e.storage.makeRequestWithTokens(t,sx).then(e=>{if(null===e)throw new ay(sy.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function ux(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new vy(e._location.bucket,n);return new ox(e.storage,r)}function dx(e,t){if(e instanceof mx){const n=e;if(null==n._bucket)throw new ay(sy.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+iy+"' property when initializing the app?");const r=new ox(n,n._bucket);return null!=t?dx(r,t):r}return void 0!==t?ux(e,t):e}function hx(e,t){if(t&&function(e){return/^[A-Za-z]+:\/\//.test(e)}(t)){if(e instanceof mx)return new ox(e,t);throw py("To use ref(service, url), the first argument must be a Storage instance.")}return dx(e,t)}function px(e,t){const n=null===t||void 0===t?void 0:t[iy];return null==n?null:vy.makeFromBucketSpec(n,e)}class mx{constructor(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=ry,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?vy.makeFromBucketSpec(r,this._host):px(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=vy.makeFromBucketSpec(this._url,e):this._bucket=px(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){wy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){wy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(In(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ox(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new yy(my());{const a=function(e,t,n,r,i,a){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=ky(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new Sy(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s,o)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const fx="@firebase/storage",gx="0.14.0",vx="storage";function yx(e,t,n){return lx(e=vt(e),t,n)}function xx(e){return cx(e=vt(e))}function bx(e,t){return hx(e=vt(e),t)}function jx(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new mx(r,i,a,n,Dn)}_n(new yt(vx,jx,"PUBLIC").setMultipleInstances(!0)),Ln(fx,gx,""),Ln(fx,gx,"esm2020");const wx=Mn({apiKey:"AIzaSyBYLNXt1aQ9rBVRrwWqC6Y1_a5Uk5_lvu4",authDomain:"immo-app-48914.firebaseapp.com",projectId:"immo-app-48914",storageBucket:"immo-app-48914.firebasestorage.app",messagingSenderId:"381813991112",appId:"1:381813991112:web:6592641fc9465d0444e7fd",measurementId:"G-JP3FHRYCPJ"}),Nx=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn();const t=An(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=An(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(ct(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Dm(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Xv,persistence:[sv,Ug,Wg]}),r=Ke("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ey)return;const r=null===t||void 0===t?void 0:t.token;ty!==r&&(ty=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){vt(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){vt(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const a=qe("auth");return a&&ng(n,"http://".concat(a)),n}(wx),kx=function(e,t){const n="object"==typeof e?e:Rn(),r="string"==typeof e?e:t||ya,i=An(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=He("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=$r(e,Md);const i=Ye(t),a=e._getSettings(),s=Me(Me({},a),{},{emulatorOptions:e._getEmulatorOptions()}),o="".concat(t,":").concat(n);i&&(Qe("https://".concat(o)),Ze("Firestore",!0)),a.host!==Pd&&a.host!==o&&gr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Me(Me({},a),{},{host:o,ssl:i,emulatorOptions:r});if(!ct(l,s)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ur.MOCK_USER;else{var c;t=Xe(r.mockUserToken,null===(c=e._app)||void 0===c?void 0:c.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Nr(wr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ur(i)}e._authCredentials=new Er(new Cr(t,n))}}(i,...e)}return i}(wx),Cx=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn(),t=arguments.length>1?arguments[1]:void 0;e=vt(e);const n=An(e,vx).getImmediate({identifier:t}),r=He("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const i=Ye(t);i&&(Qe("https://".concat(e.host,"/b")),Ze("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(e._overrideAuthToken="string"===typeof a?a:Xe(a,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(wx);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn();e=vt(e);const t=An(e,Gp);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=An(e,Gp);if(n.isInitialized()){const e=n.getImmediate();if(ct(t,n.getOptions()))return e;throw Xp.create("already-initialized")}const r=n.initialize({options:t})}(e)}(wx);function Sx(){const[e,t]=(0,r.useState)({user:null,loading:!0,error:null});(0,r.useEffect)(()=>{const e=function(e,t,n,r){return vt(e).onAuthStateChanged(t,n,r)}(Nx,e=>{t({user:e,loading:!1,error:null})});return e},[]);return{user:e.user,loading:e.loading,error:e.error,signIn:async(e,n)=>{try{t(e=>Me(Me({},e),{},{loading:!0,error:null}));const r=await function(e,t,n){return In(e.app)?Promise.reject(Lm(e)):Ag(vt(e),fg.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Pg(e),t})}(Nx,e,n);return r.user}catch(r){throw t(e=>Me(Me({},e),{},{loading:!1,error:r.message})),r}},signUp:async(e,n,r)=>{try{t(e=>Me(Me({},e),{},{loading:!0,error:null}));const i=await Og(Nx,e,n);return r&&i.user&&await Dg(i.user,{displayName:r}),i.user}catch(i){throw t(e=>Me(Me({},e),{},{loading:!1,error:i.message})),i}},signInWithGoogle:async()=>{try{t(e=>Me(Me({},e),{},{loading:!0,error:null}));const e=new xg,n=await async function(e,t,n){if(In(e.app))return Promise.reject(Mm(e,"operation-not-supported-in-this-environment"));const r=Hf(e);zm(e,t,gg);const i=hv(r,n);return new xv(r,"signInViaPopup",t,i).executeNotNull()}(Nx,e);return n.user}catch(e){throw t(t=>Me(Me({},t),{},{loading:!1,error:e.message})),e}},logout:async()=>{try{await function(e){return vt(e).signOut()}(Nx)}catch(e){throw t(t=>Me(Me({},t),{},{error:e.message})),e}}}}function Ex(e){const[t,n]=(0,r.useState)([]),[i,a]=(0,r.useState)(!0),[s,o]=(0,r.useState)(null),{user:l}=Sx();(0,r.useEffect)(()=>{if(!l)return n([]),void a(!1);const t=Zh(Ah(Fd(kx,e),Ph("userId","==",l.uid)),e=>{const t=e.docs.map(e=>Me({id:e.id},e.data()));t.sort((e,t)=>{var n,r,i,a;const s=(null===(n=e.createdAt)||void 0===n||null===(r=n.toDate)||void 0===r?void 0:r.call(n))||new Date(0);return((null===(i=t.createdAt)||void 0===i||null===(a=i.toDate)||void 0===a?void 0:a.call(i))||new Date(0)).getTime()-s.getTime()}),n(t),a(!1),o(null)},e=>{console.error("Firestore error:",e),o(e.message),a(!1)});return t},[l,e]);return{data:t,loading:i,error:s,addItem:async t=>{if(!l)throw new Error("User not authenticated");try{return(await $h(Fd(kx,e),Me(Me({},t),{},{userId:l.uid,createdAt:ri.now(),updatedAt:ri.now()}))).id}catch(n){throw o(n.message),n}},updateItem:async(t,n)=>{if(!l)throw new Error("User not authenticated");try{console.log("useFirestore - Updating document:",t,"in collection:",e,"with updates:",n);const r=Ud(kx,e,t);await Xh(r,Me(Me({},n),{},{updatedAt:ri.now()})),console.log("useFirestore - Document updated successfully")}catch(r){throw console.error("useFirestore - Update error:",r),o(r.message),r}},deleteItem:async t=>{if(!l)throw new Error("User not authenticated");try{const n=Ud(kx,e,t);await Jh(n)}catch(n){throw o(n.message),n}}}}function Tx(){const{data:e,loading:t,error:n,addItem:r,updateItem:i,deleteItem:a}=Ex("calendar");return{events:e,loading:t,error:n,addEvent:r,updateEvent:i,deleteEvent:a}}var _x={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ax=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],Ix=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Px=(e,t)=>{const n=(0,r.forwardRef)((n,i)=>{let{color:a="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:u}=n,d=Cm(n,Ax);return(0,r.createElement)("svg",Me(Me({ref:i},_x),{},{width:s,height:s,stroke:a,strokeWidth:l?24*Number(o)/Number(s):o,className:["lucide","lucide-".concat(Ix(e)),c].join(" ")},d),[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(u)?u:[u]])});return n.displayName="".concat(e),n},Ox=Px("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Dx=Px("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Mx=Px("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Rx=Px("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var Lx=n(579);function zx(){var e;const{user:t}=Sx(),{events:n}=Tx(),[i,a]=(0,r.useState)({});(0,r.useEffect)(()=>{const e=(new Date).getMonth(),t=(new Date).getFullYear(),r=n.filter(n=>{const r=new Date(n.date);return r.getMonth()===e&&r.getFullYear()===t}),i=r.reduce((e,t)=>e+(t.cost||0),0),s=r.length;a({totalBudget:i,campaignCount:s,avgCostPerEvent:s>0?i/s:0,monthlyEvents:r})},[n]);const s=[{name:"Facebook Ads",impressions:15420,clicks:892,cost:450,roi:3.2},{name:"Google Ads",impressions:8750,clicks:654,cost:380,roi:2.8},{name:"Instagram",impressions:12300,clicks:743,cost:290,roi:4.1},{name:"LinkedIn",impressions:5600,clicks:234,cost:180,roi:2.1}],o=[{month:"Jan",leads:45,conversions:12,budget:1200},{month:"F\xe9v",leads:52,conversions:15,budget:1350},{month:"Mar",leads:38,conversions:9,budget:980},{month:"Avr",leads:61,conversions:18,budget:1580},{month:"Mai",leads:48,conversions:14,budget:1220},{month:"Jun",leads:67,conversions:22,budget:1750}],l=Math.max(...o.map(e=>e.leads)),c=[{id:1,type:"campaign",title:"Nouvelle campagne lanc\xe9e",description:"Facebook Ads - Promotion appartements",time:"Il y a 1h",icon:Ox,color:"#3B82F6"},{id:2,type:"lead",title:"Nouveau lead qualifi\xe9",description:"Contact via Instagram - Int\xe9ress\xe9 T3",time:"Il y a 3h",icon:Dx,color:"#10B981"},{id:3,type:"event",title:"\xc9v\xe9nement programm\xe9",description:"Visite virtuelle demain 15h",time:"Il y a 5h",icon:Mx,color:"#F59E0B"}];return(0,Lx.jsxs)("div",{className:"marketing-dashboard",children:[(0,Lx.jsx)("div",{className:"dashboard-header",children:(0,Lx.jsxs)("div",{children:[(0,Lx.jsx)("h1",{children:"Dashboard Marketing"}),(0,Lx.jsxs)("p",{children:["Bienvenue, ",(null===t||void 0===t?void 0:t.displayName)||"Marketeur"]})]})}),(0,Lx.jsxs)("div",{className:"metrics-grid",children:[(0,Lx.jsxs)("div",{className:"metric-card",children:[(0,Lx.jsxs)("div",{className:"metric-content",children:[(0,Lx.jsx)("div",{className:"metric-label",children:"BUDGET MENSUEL"}),(0,Lx.jsxs)("div",{className:"metric-value",children:[(null===(e=i.totalBudget)||void 0===e?void 0:e.toLocaleString())||0,"\u20ac"]})]}),(0,Lx.jsx)("div",{className:"metric-change positive",children:"+8%"})]}),(0,Lx.jsxs)("div",{className:"metric-card",children:[(0,Lx.jsxs)("div",{className:"metric-content",children:[(0,Lx.jsx)("div",{className:"metric-label",children:"CAMPAGNES ACTIVES"}),(0,Lx.jsx)("div",{className:"metric-value",children:i.campaignCount||0})]}),(0,Lx.jsx)("div",{className:"metric-change positive",children:"+3"})]}),(0,Lx.jsxs)("div",{className:"metric-card",children:[(0,Lx.jsxs)("div",{className:"metric-content",children:[(0,Lx.jsx)("div",{className:"metric-label",children:"IMPRESSIONS"}),(0,Lx.jsx)("div",{className:"metric-value",children:"42.1K"})]}),(0,Lx.jsx)("div",{className:"metric-change positive",children:"+12%"})]}),(0,Lx.jsxs)("div",{className:"metric-card",children:[(0,Lx.jsxs)("div",{className:"metric-content",children:[(0,Lx.jsx)("div",{className:"metric-label",children:"LEADS G\xc9N\xc9R\xc9S"}),(0,Lx.jsx)("div",{className:"metric-value",children:"67"})]}),(0,Lx.jsx)("div",{className:"metric-change positive",children:"+15%"})]})]}),(0,Lx.jsxs)("div",{className:"dashboard-grid",children:[(0,Lx.jsxs)("div",{className:"dashboard-card performance-chart",children:[(0,Lx.jsxs)("div",{className:"card-header",children:[(0,Lx.jsx)("h3",{children:"Performance Mensuelle"}),(0,Lx.jsxs)("div",{className:"chart-metrics",children:[(0,Lx.jsx)("div",{className:"chart-value leads",children:"67 Leads"}),(0,Lx.jsx)("div",{className:"chart-value conversions",children:"22 Conversions"})]})]}),(0,Lx.jsxs)("div",{className:"chart-container",children:[(0,Lx.jsxs)("div",{className:"chart-legend",children:[(0,Lx.jsxs)("div",{className:"legend-item",children:[(0,Lx.jsx)("div",{className:"legend-color leads"}),(0,Lx.jsx)("span",{children:"Leads"})]}),(0,Lx.jsxs)("div",{className:"legend-item",children:[(0,Lx.jsx)("div",{className:"legend-color conversions"}),(0,Lx.jsx)("span",{children:"Conversions"})]}),(0,Lx.jsxs)("div",{className:"legend-item",children:[(0,Lx.jsx)("div",{className:"legend-color budget"}),(0,Lx.jsx)("span",{children:"Budget (\xd7100\u20ac)"})]})]}),(0,Lx.jsx)("div",{className:"chart-bars",children:o.map((e,t)=>{const n=Math.max(...o.map(e=>e.conversions)),r=Math.max(...o.map(e=>e.budget)),i=t===o.length-1;return(0,Lx.jsxs)("div",{className:"chart-bar-container",children:[(0,Lx.jsxs)("div",{className:"chart-bars-group",children:[(0,Lx.jsx)("div",{className:"chart-bar leads ".concat(i?"current":""),style:{height:"".concat(e.leads/l*100,"%"),animationDelay:"".concat(.1*t,"s")},"data-value":e.leads,children:(0,Lx.jsxs)("div",{className:"bar-tooltip",children:[(0,Lx.jsx)("div",{className:"tooltip-title",children:e.month}),(0,Lx.jsxs)("div",{className:"tooltip-item",children:[(0,Lx.jsx)("span",{className:"tooltip-label",children:"Leads:"}),(0,Lx.jsx)("span",{className:"tooltip-value",children:e.leads})]}),(0,Lx.jsxs)("div",{className:"tooltip-item",children:[(0,Lx.jsx)("span",{className:"tooltip-label",children:"Conversions:"}),(0,Lx.jsx)("span",{className:"tooltip-value",children:e.conversions})]}),(0,Lx.jsxs)("div",{className:"tooltip-item",children:[(0,Lx.jsx)("span",{className:"tooltip-label",children:"Budget:"}),(0,Lx.jsxs)("span",{className:"tooltip-value",children:[e.budget,"\u20ac"]})]}),(0,Lx.jsxs)("div",{className:"tooltip-item",children:[(0,Lx.jsx)("span",{className:"tooltip-label",children:"Taux:"}),(0,Lx.jsxs)("span",{className:"tooltip-value",children:[(e.conversions/e.leads*100).toFixed(1),"%"]})]})]})}),(0,Lx.jsx)("div",{className:"chart-bar conversions ".concat(i?"current":""),style:{height:"".concat(e.conversions/n*80,"%"),animationDelay:"".concat(.1*t+.05,"s")},"data-value":e.conversions}),(0,Lx.jsx)("div",{className:"chart-bar budget ".concat(i?"current":""),style:{height:"".concat(e.budget/100/(r/100)*60,"%"),animationDelay:"".concat(.1*t+.1,"s")},"data-value":Math.round(e.budget/100)})]}),(0,Lx.jsx)("div",{className:"chart-label",children:e.month})]},t)})})]})]}),(0,Lx.jsxs)("div",{className:"dashboard-card campaigns-performance",children:[(0,Lx.jsxs)("div",{className:"card-header",children:[(0,Lx.jsx)("h3",{children:"Performance des Campagnes"}),(0,Lx.jsx)("div",{className:"campaigns-summary",children:(0,Lx.jsxs)("span",{className:"total-campaigns",children:[s.length," campagnes"]})})]}),(0,Lx.jsxs)("div",{className:"campaigns-content",children:[(0,Lx.jsx)("div",{className:"campaigns-list-compact",children:s.map((e,t)=>{(e.clicks/e.impressions*100).toFixed(1);return(0,Lx.jsxs)("div",{className:"campaign-item-compact",style:{animationDelay:"".concat(.1*t,"s")},children:[(0,Lx.jsxs)("div",{className:"campaign-compact-header",children:[(0,Lx.jsxs)("div",{className:"platform-icon-small ".concat(e.name.toLowerCase().replace(" ","-")),children:["Facebook Ads"===e.name&&"\ud83d\udcd8","Google Ads"===e.name&&"\ud83d\udd0d","Instagram"===e.name&&"\ud83d\udcf7","LinkedIn"===e.name&&"\ud83d\udcbc"]}),(0,Lx.jsxs)("div",{className:"campaign-compact-info",children:[(0,Lx.jsx)("div",{className:"campaign-name-small",children:e.name}),(0,Lx.jsxs)("div",{className:"campaign-stats-small",children:[(e.impressions/1e3).toFixed(1),"K imp \u2022 ",e.clicks," clics"]})]})]}),(0,Lx.jsxs)("div",{className:"campaign-compact-metrics",children:[(0,Lx.jsxs)("div",{className:"compact-metric",children:[(0,Lx.jsx)("span",{className:"compact-label",children:"ROI"}),(0,Lx.jsxs)("span",{className:"compact-value ".concat(e.roi>=3?"positive":e.roi>=2?"neutral":"negative"),children:[e.roi,"x"]})]}),(0,Lx.jsxs)("div",{className:"compact-metric",children:[(0,Lx.jsx)("span",{className:"compact-label",children:"Co\xfbt"}),(0,Lx.jsxs)("span",{className:"compact-value",children:[e.cost,"\u20ac"]})]})]})]},t)})}),(0,Lx.jsxs)("div",{className:"campaigns-details-panel",children:[(0,Lx.jsx)("div",{className:"details-header",children:(0,Lx.jsx)("h4",{children:"Analyse D\xe9taill\xe9e"})}),(0,Lx.jsx)("div",{className:"performance-overview",children:s.map((e,t)=>{const n=Math.max(...s.map(e=>e.impressions)),r=Math.max(...s.map(e=>e.clicks)),i=(e.clicks/e.impressions*100).toFixed(2),a=20*e.roi+2*parseFloat(i);return(0,Lx.jsxs)("div",{className:"performance-detail-item",children:[(0,Lx.jsx)("div",{className:"detail-platform-name",children:e.name}),(0,Lx.jsxs)("div",{className:"detail-bars",children:[(0,Lx.jsxs)("div",{className:"detail-bar",children:[(0,Lx.jsxs)("div",{className:"detail-bar-info",children:[(0,Lx.jsx)("span",{className:"detail-label",children:"Impressions"}),(0,Lx.jsx)("span",{className:"detail-value",children:e.impressions.toLocaleString()})]}),(0,Lx.jsx)("div",{className:"detail-progress-bar",children:(0,Lx.jsx)("div",{className:"detail-progress-fill impressions",style:{width:"".concat(e.impressions/n*100,"%"),animationDelay:"".concat(.1*t+.2,"s")}})})]}),(0,Lx.jsxs)("div",{className:"detail-bar",children:[(0,Lx.jsxs)("div",{className:"detail-bar-info",children:[(0,Lx.jsx)("span",{className:"detail-label",children:"Clics"}),(0,Lx.jsx)("span",{className:"detail-value",children:e.clicks})]}),(0,Lx.jsx)("div",{className:"detail-progress-bar",children:(0,Lx.jsx)("div",{className:"detail-progress-fill clicks",style:{width:"".concat(e.clicks/r*100,"%"),animationDelay:"".concat(.1*t+.3,"s")}})})]})]}),(0,Lx.jsxs)("div",{className:"detail-kpis",children:[(0,Lx.jsxs)("div",{className:"detail-kpi",children:[(0,Lx.jsx)("span",{className:"detail-kpi-label",children:"CTR"}),(0,Lx.jsxs)("span",{className:"detail-kpi-value",children:[i,"%"]})]}),(0,Lx.jsxs)("div",{className:"detail-kpi",children:[(0,Lx.jsx)("span",{className:"detail-kpi-label",children:"CPC"}),(0,Lx.jsxs)("span",{className:"detail-kpi-value",children:[(e.cost/e.clicks).toFixed(2),"\u20ac"]})]}),(0,Lx.jsxs)("div",{className:"detail-kpi",children:[(0,Lx.jsx)("span",{className:"detail-kpi-label",children:"Score"}),(0,Lx.jsxs)("span",{className:"detail-kpi-value performance-score",children:[Math.round(a),"/100"]})]})]})]},t)})})]})]})]}),(0,Lx.jsxs)("div",{className:"dashboard-card",children:[(0,Lx.jsx)("div",{className:"card-header",children:(0,Lx.jsx)("h3",{children:"Statut des Unit\xe9s"})}),(0,Lx.jsxs)("div",{className:"status-overview",children:[(0,Lx.jsxs)("div",{className:"status-item",children:[(0,Lx.jsx)("div",{className:"status-indicator available"}),(0,Lx.jsxs)("div",{className:"status-info",children:[(0,Lx.jsx)("div",{className:"status-label",children:"Disponibles"}),(0,Lx.jsx)("div",{className:"status-value",children:"10"})]})]}),(0,Lx.jsxs)("div",{className:"status-item",children:[(0,Lx.jsx)("div",{className:"status-indicator sold"}),(0,Lx.jsxs)("div",{className:"status-info",children:[(0,Lx.jsx)("div",{className:"status-label",children:"Vendues"}),(0,Lx.jsx)("div",{className:"status-value",children:"1"})]})]}),(0,Lx.jsxs)("div",{className:"status-item",children:[(0,Lx.jsx)("div",{className:"status-indicator reserved"}),(0,Lx.jsxs)("div",{className:"status-info",children:[(0,Lx.jsx)("div",{className:"status-label",children:"Lou\xe9es"}),(0,Lx.jsx)("div",{className:"status-value",children:"0"})]})]})]})]}),(0,Lx.jsxs)("div",{className:"dashboard-card",children:[(0,Lx.jsx)("div",{className:"card-header",children:(0,Lx.jsx)("h3",{children:"Activit\xe9s R\xe9centes"})}),(0,Lx.jsx)("div",{className:"activity-list",children:c.map(e=>{const t=e.icon;return(0,Lx.jsxs)("div",{className:"activity-item",children:[(0,Lx.jsx)("div",{className:"activity-icon",style:{backgroundColor:e.color},children:(0,Lx.jsx)(t,{size:16})}),(0,Lx.jsxs)("div",{className:"activity-content",children:[(0,Lx.jsx)("div",{className:"activity-title",children:e.title}),(0,Lx.jsx)("div",{className:"activity-description",children:e.description})]}),(0,Lx.jsx)("div",{className:"activity-time",children:e.time})]},e.id)})})]}),(0,Lx.jsxs)("div",{className:"dashboard-card",children:[(0,Lx.jsx)("div",{className:"card-header",children:(0,Lx.jsx)("h3",{children:"Actions Rapides"})}),(0,Lx.jsxs)("div",{className:"actions-grid",children:[(0,Lx.jsxs)("button",{className:"action-btn",children:[(0,Lx.jsx)(Ox,{size:20}),(0,Lx.jsx)("span",{children:"Publier sur les r\xe9seaux"})]}),(0,Lx.jsxs)("button",{className:"action-btn",children:[(0,Lx.jsx)(Mx,{size:20}),(0,Lx.jsx)("span",{children:"Planifier \xe9v\xe9nement"})]}),(0,Lx.jsxs)("button",{className:"action-btn",children:[(0,Lx.jsx)(Rx,{size:20}),(0,Lx.jsx)("span",{children:"Voir analytics"})]}),(0,Lx.jsxs)("button",{className:"action-btn",children:[(0,Lx.jsx)(Dx,{size:20}),(0,Lx.jsx)("span",{children:"Cr\xe9er campagne"})]})]})]}),(0,Lx.jsxs)("div",{className:"dashboard-card",children:[(0,Lx.jsx)("div",{className:"card-header",children:(0,Lx.jsx)("h3",{children:"Performance du Mois"})}),(0,Lx.jsxs)("div",{className:"performance-metrics",children:[(0,Lx.jsxs)("div",{className:"metric-row",children:[(0,Lx.jsx)("span",{className:"metric-label",children:"Taux de conversion"}),(0,Lx.jsxs)("span",{className:"metric-value positive",children:["24% ",(0,Lx.jsx)("small",{children:"+3%"})]})]}),(0,Lx.jsxs)("div",{className:"metric-row",children:[(0,Lx.jsx)("span",{className:"metric-label",children:"Temps moyen de vente"}),(0,Lx.jsxs)("span",{className:"metric-value neutral",children:["45j ",(0,Lx.jsx)("small",{children:"-1j"})]})]}),(0,Lx.jsxs)("div",{className:"metric-row",children:[(0,Lx.jsx)("span",{className:"metric-label",children:"Prix moyen"}),(0,Lx.jsxs)("span",{className:"metric-value negative",children:["451152\u20ac ",(0,Lx.jsx)("small",{children:"-6%"})]})]})]})]})]})]})}const Fx=()=>{const{user:e}=Sx(),[t,n]=(0,r.useState)([]),[i,a]=(0,r.useState)(!0),[s,o]=(0,r.useState)(null),l=async()=>{if(!e)return n([]),void a(!1);try{a(!0);const t=Ah(Fd(kx,"projects"),Ph("userId","==",e.uid)),r=(await Yh(t)).docs.map(e=>{var t,n,r,i;const a=e.data();return Me(Me({id:e.id},a),{},{createdAt:(null===(t=a.createdAt)||void 0===t?void 0:t.toDate())||new Date,updatedAt:(null===(n=a.updatedAt)||void 0===n?void 0:n.toDate())||new Date,startDate:null===(r=a.startDate)||void 0===r?void 0:r.toDate(),endDate:null===(i=a.endDate)||void 0===i?void 0:i.toDate()})});r.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()),n(r),o(null)}catch(t){console.error("Error fetching projects:",t),o("Erreur lors du chargement des projets")}finally{a(!1)}};return(0,r.useEffect)(()=>{l()},[null===e||void 0===e?void 0:e.uid]),{projects:t,loading:i,error:s,addProject:async t=>{if(!e)throw new Error("User not authenticated");try{const n=Fd(kx,"projects"),r=Me(Me({},t),{},{userId:e.uid,createdAt:ri.now(),updatedAt:ri.now(),startDate:t.startDate?ri.fromDate(t.startDate):null,endDate:t.endDate?ri.fromDate(t.endDate):null}),i=await $h(n,r);return await l(),i.id}catch(n){throw console.error("Error adding project:",n),console.error("Error details:",n),new Error("Erreur lors de la cr\xe9ation du projet: ".concat(n instanceof Error?n.message:"Unknown error"))}},updateProject:async(t,n)=>{if(!e)throw new Error("User not authenticated");try{const e=Ud(kx,"projects",t),r=Object.fromEntries(Object.entries(n).filter(e=>{let[t,n]=e;return void 0!==n})),i=Me(Me({},r),{},{updatedAt:ri.now()});n.startDate&&(i.startDate=ri.fromDate(n.startDate)),n.endDate&&(i.endDate=ri.fromDate(n.endDate)),await Xh(e,i),await l()}catch(r){throw console.error("Error updating project:",r),new Error("Erreur lors de la mise \xe0 jour du projet")}},deleteProject:async t=>{if(!e)throw new Error("User not authenticated");try{const e=Ud(kx,"projects",t);await Jh(e),await l()}catch(n){throw console.error("Error deleting project:",n),new Error("Erreur lors de la suppression du projet")}},refreshProjects:l}},Ux=()=>{const{user:e}=Sx(),[t,n]=(0,r.useState)([]),[i,a]=(0,r.useState)(!0),[s,o]=(0,r.useState)(null),l=(0,r.useCallback)(async t=>{if(!e)return o("User not authenticated"),void a(!1);try{a(!0),console.log("useUnits: Fetching units for user:",e.uid,"projectId:",t);const r=Fd(kx,"units");let i;t?(console.log("useUnits: Querying with projectId filter:",t),i=Ah(r,Ph("userId","==",e.uid),Ph("projectId","==",t))):(console.log("useUnits: Querying all units for user"),i=Ah(r,Ph("userId","==",e.uid)));const s=await Yh(i);console.log("useUnits: Query returned",s.docs.length,"documents");const l=s.docs.map(e=>{var t,n;const r=e.data();return console.log("useUnits: Processing unit:",e.id,r),Me(Me({id:e.id},r),{},{createdAt:(null===(t=r.createdAt)||void 0===t?void 0:t.toDate())||new Date,updatedAt:(null===(n=r.updatedAt)||void 0===n?void 0:n.toDate())||new Date})});l.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()),console.log("useUnits: Final units data:",l),n(l),o(null)}catch(r){console.error("Error fetching units:",r),o("Erreur lors du chargement des unit\xe9s")}finally{a(!1)}},[e]);return(0,r.useEffect)(()=>{(async()=>{null!==e&&void 0!==e&&e.uid?await l():(n([]),a(!1))})()},[null===e||void 0===e?void 0:e.uid,l]),{units:t,loading:i,error:s,fetchUnits:l,addUnit:async t=>{if(!e)throw new Error("User not authenticated");try{const n=Fd(kx,"units"),r=Me(Me({},t),{},{userId:e.uid,createdAt:ri.now(),updatedAt:ri.now(),pricePerSqm:t.surface>0?Math.round(t.price/t.surface):0}),i=await $h(n,r);return await l(),i.id}catch(n){throw console.error("Error adding unit:",n),console.error("Error details:",n),new Error("Erreur lors de la cr\xe9ation de l'unit\xe9: ".concat(n instanceof Error?n.message:"Unknown error"))}},updateUnit:async(n,r)=>{if(!e)throw new Error("User not authenticated");try{const e=Ud(kx,"units",n),s=Me(Me({},r),{},{updatedAt:ri.now()});if(void 0!==r.price||void 0!==r.surface){const e=t.find(e=>e.id===n);if(e){var i,a;const t=null!==(i=r.price)&&void 0!==i?i:e.price,n=null!==(a=r.surface)&&void 0!==a?a:e.surface;s.pricePerSqm=n>0?Math.round(t/n):0}}await Xh(e,s),await l()}catch(s){throw console.error("Error updating unit:",s),new Error("Erreur lors de la mise \xe0 jour de l'unit\xe9")}},deleteUnit:async t=>{if(!e)throw new Error("User not authenticated");try{const e=Ud(kx,"units",t);await Jh(e),l()}catch(n){throw console.error("Error deleting unit:",n),new Error("Erreur lors de la suppression de l'unit\xe9")}},getUnitsByProject:e=>t.filter(t=>t.projectId===e)}},Vx=Px("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Bx=Px("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),qx=Px("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),Hx=Px("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Wx=Px("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Kx=Px("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]),Gx=Px("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Yx=Px("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function Qx(){const{user:e}=Sx(),{projects:t}=Fx(),{units:n}=Ux(),[i,a]=(0,r.useState)([]),s=t.length,o=n.length,l=n.reduce((e,t)=>e+(t.price||0),0),c=n.filter(e=>"available"===e.availability).length,u=n.filter(e=>"sold"===e.availability).length,d=n.filter(e=>"rented"===e.availability).length,h=[{month:"Jan",value:28e3},{month:"F\xe9v",value:25e3},{month:"Mar",value:22e3},{month:"Avr",value:18e3},{month:"Mai",value:15e3},{month:"Jun",value:12e3}],p=Math.max(...h.map(e=>e.value)),m=t.slice(0,3).map(e=>Me(Me({},e),{},{unitsCount:n.filter(t=>t.projectId===e.id).length,soldCount:n.filter(t=>t.projectId===e.id&&"sold"===t.availability).length}));return(0,r.useEffect)(()=>{a([{id:1,type:"project",title:"Nouveau projet cr\xe9\xe9",description:"R\xe9sidence Les Jardins ajout\xe9e",time:"Il y a 2h",icon:Vx,color:"#10B981"},{id:2,type:"unit",title:"Unit\xe9 vendue",description:"Appartement A1 - 250 000\u20ac",time:"Il y a 5h",icon:Bx,color:"#3B82F6"},{id:3,type:"meeting",title:"Rendez-vous client",description:"Visite pr\xe9vue demain 14h",time:"Il y a 1j",icon:Mx,color:"#F59E0B"},{id:4,type:"contract",title:"Contrat sign\xe9",description:"Villa B3 - Compromis de vente",time:"Il y a 2j",icon:qx,color:"#8B5CF6"}])},[]),(0,Lx.jsxs)("div",{className:"immobilier-dashboard",children:[(0,Lx.jsxs)("div",{className:"dashboard-header",children:[(0,Lx.jsxs)("div",{children:[(0,Lx.jsx)("h1",{children:"Dashboard Immobilier"}),(0,Lx.jsxs)("p",{children:["Bienvenue, ",(null===e||void 0===e?void 0:e.displayName)||"Agent"]})]}),(0,Lx.jsx)("div",{className:"header-actions",children:(0,Lx.jsxs)("button",{className:"btn-primary",children:[(0,Lx.jsx)(Hx,{size:16}),"Nouveau projet"]})})]}),(0,Lx.jsxs)("div",{className:"metrics-grid",children:[(0,Lx.jsxs)("div",{className:"metric-card",children:[(0,Lx.jsx)("div",{className:"metric-icon orange",children:(0,Lx.jsx)(Vx,{size:24})}),(0,Lx.jsxs)("div",{className:"metric-content",children:[(0,Lx.jsx)("div",{className:"metric-label",children:"Total Projets"}),(0,Lx.jsx)("div",{className:"metric-value",children:s}),(0,Lx.jsx)("div",{className:"metric-change positive",children:"+12%"})]})]}),(0,Lx.jsxs)("div",{className:"metric-card",children:[(0,Lx.jsx)("div",{className:"metric-icon green",children:(0,Lx.jsx)(Bx,{size:24})}),(0,Lx.jsxs)("div",{className:"metric-content",children:[(0,Lx.jsx)("div",{className:"metric-label",children:"Unit\xe9s Totales"}),(0,Lx.jsx)("div",{className:"metric-value",children:o}),(0,Lx.jsx)("div",{className:"metric-change positive",children:"+8%"})]})]}),(0,Lx.jsxs)("div",{className:"metric-card",children:[(0,Lx.jsx)("div",{className:"metric-icon blue",children:(0,Lx.jsx)(Wx,{size:24})}),(0,Lx.jsxs)("div",{className:"metric-content",children:[(0,Lx.jsx)("div",{className:"metric-label",children:"Disponibles"}),(0,Lx.jsx)("div",{className:"metric-value",children:c}),(0,Lx.jsx)("div",{className:"metric-change neutral",children:"-2%"})]})]}),(0,Lx.jsxs)("div",{className:"metric-card",children:[(0,Lx.jsx)("div",{className:"metric-icon purple",children:(0,Lx.jsx)(Kx,{size:24})}),(0,Lx.jsxs)("div",{className:"metric-content",children:[(0,Lx.jsx)("div",{className:"metric-label",children:"Valeur Portfolio"}),(0,Lx.jsxs)("div",{className:"metric-value",children:[(l/1e6).toFixed(1),"M\u20ac"]}),(0,Lx.jsx)("div",{className:"metric-change positive",children:"+15%"})]})]})]}),(0,Lx.jsxs)("div",{className:"dashboard-grid",children:[(0,Lx.jsxs)("div",{className:"dashboard-card chart-card",children:[(0,Lx.jsxs)("div",{className:"card-header",children:[(0,Lx.jsx)("h3",{children:"Revenus Mensuels"}),(0,Lx.jsx)("div",{className:"chart-value",children:"\u20ac 28,000"})]}),(0,Lx.jsx)("div",{className:"chart-container",children:(0,Lx.jsx)("div",{className:"chart-bars",children:h.map((e,t)=>(0,Lx.jsxs)("div",{className:"chart-bar-container",children:[(0,Lx.jsx)("div",{className:"chart-label",children:e.month}),(0,Lx.jsx)("div",{className:"chart-bar",style:{height:"".concat(e.value/p*100,"%"),backgroundColor:t===h.length-1?"#3B82F6":"#E5E7EB"},children:t===h.length-1&&(0,Lx.jsxs)("div",{className:"chart-tooltip",children:["\u20ac",e.value.toLocaleString()]})})]},t))})})]}),(0,Lx.jsxs)("div",{className:"dashboard-card projects-card",children:[(0,Lx.jsx)("div",{className:"card-header",children:(0,Lx.jsx)("h3",{children:"Projets R\xe9cents"})}),(0,Lx.jsx)("div",{className:"projects-list",children:m.map(e=>(0,Lx.jsxs)("div",{className:"project-item",children:[(0,Lx.jsxs)("div",{className:"project-info",children:[(0,Lx.jsx)("div",{className:"project-name",children:e.name}),(0,Lx.jsxs)("div",{className:"project-location",children:[(0,Lx.jsx)(Gx,{size:14}),e.city]})]}),(0,Lx.jsxs)("div",{className:"project-stats",children:[(0,Lx.jsxs)("div",{className:"project-units",children:[e.unitsCount," unit\xe9s"]}),(0,Lx.jsxs)("div",{className:"project-sold",children:[e.soldCount," vendues"]})]})]},e.id))})]}),(0,Lx.jsxs)("div",{className:"dashboard-card status-card",children:[(0,Lx.jsx)("div",{className:"card-header",children:(0,Lx.jsx)("h3",{children:"Statut des Unit\xe9s"})}),(0,Lx.jsxs)("div",{className:"status-list",children:[(0,Lx.jsxs)("div",{className:"status-item",children:[(0,Lx.jsxs)("div",{className:"status-info",children:[(0,Lx.jsx)("div",{className:"status-label",children:"Disponibles"}),(0,Lx.jsx)("div",{className:"status-value",children:c})]}),(0,Lx.jsx)("div",{className:"status-indicator available"})]}),(0,Lx.jsxs)("div",{className:"status-item",children:[(0,Lx.jsxs)("div",{className:"status-info",children:[(0,Lx.jsx)("div",{className:"status-label",children:"Vendues"}),(0,Lx.jsx)("div",{className:"status-value",children:u})]}),(0,Lx.jsx)("div",{className:"status-indicator sold"})]}),(0,Lx.jsxs)("div",{className:"status-item",children:[(0,Lx.jsxs)("div",{className:"status-info",children:[(0,Lx.jsx)("div",{className:"status-label",children:"Lou\xe9es"}),(0,Lx.jsx)("div",{className:"status-value",children:d})]}),(0,Lx.jsx)("div",{className:"status-indicator rented"})]})]})]}),(0,Lx.jsxs)("div",{className:"dashboard-card activity-card",children:[(0,Lx.jsx)("div",{className:"card-header",children:(0,Lx.jsx)("h3",{children:"Activit\xe9s R\xe9centes"})}),(0,Lx.jsx)("div",{className:"activity-list",children:i.map(e=>{const t=e.icon;return(0,Lx.jsxs)("div",{className:"activity-item",children:[(0,Lx.jsx)("div",{className:"activity-icon",style:{backgroundColor:e.color},children:(0,Lx.jsx)(t,{size:16})}),(0,Lx.jsxs)("div",{className:"activity-content",children:[(0,Lx.jsx)("div",{className:"activity-title",children:e.title}),(0,Lx.jsx)("div",{className:"activity-description",children:e.description})]}),(0,Lx.jsx)("div",{className:"activity-time",children:e.time})]},e.id)})})]}),(0,Lx.jsxs)("div",{className:"dashboard-card actions-card",children:[(0,Lx.jsx)("div",{className:"card-header",children:(0,Lx.jsx)("h3",{children:"Actions Rapides"})}),(0,Lx.jsxs)("div",{className:"actions-grid",children:[(0,Lx.jsxs)("button",{className:"action-btn",children:[(0,Lx.jsx)(Vx,{size:20}),(0,Lx.jsx)("span",{children:"Nouveau projet"})]}),(0,Lx.jsxs)("button",{className:"action-btn",children:[(0,Lx.jsx)(Bx,{size:20}),(0,Lx.jsx)("span",{children:"Ajouter unit\xe9"})]}),(0,Lx.jsxs)("button",{className:"action-btn",children:[(0,Lx.jsx)(Mx,{size:20}),(0,Lx.jsx)("span",{children:"Planifier visite"})]}),(0,Lx.jsxs)("button",{className:"action-btn",children:[(0,Lx.jsx)(Yx,{size:20}),(0,Lx.jsx)("span",{children:"Voir rapports"})]})]})]}),(0,Lx.jsxs)("div",{className:"dashboard-card performance-card",children:[(0,Lx.jsx)("div",{className:"card-header",children:(0,Lx.jsx)("h3",{children:"Performance du Mois"})}),(0,Lx.jsxs)("div",{className:"performance-metrics",children:[(0,Lx.jsxs)("div",{className:"performance-item",children:[(0,Lx.jsx)("div",{className:"performance-label",children:"Taux de conversion"}),(0,Lx.jsx)("div",{className:"performance-value",children:"24%"}),(0,Lx.jsx)("div",{className:"performance-trend positive",children:"+3%"})]}),(0,Lx.jsxs)("div",{className:"performance-item",children:[(0,Lx.jsx)("div",{className:"performance-label",children:"Temps moyen de vente"}),(0,Lx.jsx)("div",{className:"performance-value",children:"45j"}),(0,Lx.jsx)("div",{className:"performance-trend positive",children:"-5j"})]}),(0,Lx.jsxs)("div",{className:"performance-item",children:[(0,Lx.jsx)("div",{className:"performance-label",children:"Prix moyen"}),(0,Lx.jsxs)("div",{className:"performance-value",children:[Math.round(l/o||0).toLocaleString(),"\u20ac"]}),(0,Lx.jsx)("div",{className:"performance-trend positive",children:"+8%"})]})]})]})]})]})}function Xx(){const[e,t]=(0,r.useState)("marketing");return(0,r.useEffect)(()=>{const e=localStorage.getItem("activeSection");e&&t(e)},[]),(0,r.useEffect)(()=>{const e=e=>{t(e.detail)};return window.addEventListener("sectionChanged",e),()=>{window.removeEventListener("sectionChanged",e)}},[]),(0,Lx.jsx)("div",{className:"home-container",children:"marketing"===e?(0,Lx.jsx)(zx,{}):(0,Lx.jsx)(Qx,{})})}function Jx(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Jx(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function $x(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Jx(e))&&(r&&(r+=" "),r+=t);return r}var Zx=n(7820),eb=n.n(Zx),tb=n(7770),nb=n.n(tb),rb=e=>0===e?0:e>0?1:-1,ib=e=>"number"==typeof e&&e!=+e,ab=e=>"string"===typeof e&&e.indexOf("%")===e.length-1,sb=e=>("number"===typeof e||e instanceof Number)&&!ib(e),ob=e=>sb(e)||"string"===typeof e,lb=0,cb=e=>{var t=++lb;return"".concat(e||"").concat(t)},ub=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!sb(e)&&"string"!==typeof e)return r;if(ab(e)){if(null==t)return r;var a=e.indexOf("%");n=t*parseFloat(e.slice(0,a))/100}else n=+e;return ib(n)&&(n=r),i&&null!=t&&n>t&&(n=t),n},db=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1},hb=(e,t)=>sb(e)&&sb(t)?n=>e+n*(t-e):()=>t;function pb(e,t,n){return sb(e)&&sb(t)?e+n*(t-e):t}function mb(e,t,n){if(e&&e.length)return e.find(e=>e&&("function"===typeof t?t(e):nb()(e,t))===n)}var fb=e=>null===e||"undefined"===typeof e,gb=e=>fb(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),vb=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]};function yb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yb(Object(n),!0).forEach(function(t){bb(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yb(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function bb(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jb=(0,r.forwardRef)((e,t)=>{var{aspect:n,initialDimension:i={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:h,className:p,onResize:m,style:f={}}=e,g=(0,r.useRef)(null),v=(0,r.useRef)();v.current=m,(0,r.useImperativeHandle)(t,()=>g.current);var[y,x]=(0,r.useState)({containerWidth:i.width,containerHeight:i.height}),b=(0,r.useCallback)((e,t)=>{x(n=>{var r=Math.round(e),i=Math.round(t);return n.containerWidth===r&&n.containerHeight===i?n:{containerWidth:r,containerHeight:i}})},[]);(0,r.useEffect)(()=>{var e=e=>{var t,{width:n,height:r}=e[0].contentRect;b(n,r),null===(t=v.current)||void 0===t||t.call(v,n,r)};d>0&&(e=eb()(e,d,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:n,height:r}=g.current.getBoundingClientRect();return b(n,r),t.observe(g.current),()=>{t.disconnect()}},[b,d]);var j=(0,r.useMemo)(()=>{var{containerWidth:e,containerHeight:t}=y;if(e<0||t<0)return null;vb(ab(a)||ab(s),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",a,s),vb(!n||n>0,"The aspect(%s) must be greater than zero.",n);var i=ab(a)?e:a,d=ab(s)?t:s;return n&&n>0&&(i?d=i/n:d&&(i=d*n),c&&d>c&&(d=c)),vb(i>0||d>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",i,d,a,s,o,l,n),r.Children.map(u,e=>(0,r.cloneElement)(e,{width:i,height:d,style:xb({width:i,height:d},e.props.style)}))},[n,u,s,c,l,o,y,a]);return r.createElement("div",{id:h?"".concat(h):void 0,className:$x("recharts-responsive-container",p),style:xb(xb({},f),{},{width:a,height:s,minWidth:o,minHeight:l,maxHeight:c}),ref:g},r.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))});function wb(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var Nb=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),kb=()=>Math.random().toString(36).substring(7).split("").join("."),Cb={INIT:"@@redux/INIT".concat(kb()),REPLACE:"@@redux/REPLACE".concat(kb()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(kb())};function Sb(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function Eb(e,t,n){if("function"!==typeof e)throw new Error(wb(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(wb(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(wb(1));return n(Eb)(e,t)}let r=e,i=t,a=new Map,s=a,o=0,l=!1;function c(){s===a&&(s=new Map,a.forEach((e,t)=>{s.set(t,e)}))}function u(){if(l)throw new Error(wb(3));return i}function d(e){if("function"!==typeof e)throw new Error(wb(4));if(l)throw new Error(wb(5));let t=!0;c();const n=o++;return s.set(n,e),function(){if(t){if(l)throw new Error(wb(6));t=!1,c(),s.delete(n),a=null}}}function h(e){if(!Sb(e))throw new Error(wb(7));if("undefined"===typeof e.type)throw new Error(wb(8));if("string"!==typeof e.type)throw new Error(wb(17));if(l)throw new Error(wb(9));try{l=!0,i=r(i,e)}finally{l=!1}return(a=s).forEach(e=>{e()}),e}h({type:Cb.INIT});return{dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(wb(10));r=e,h({type:Cb.REPLACE})},[Nb]:function(){const e=d;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(wb(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[Nb](){return this}}}}}function Tb(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const r=t[a];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach(t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:Cb.INIT}))throw new Error(wb(12));if("undefined"===typeof n(void 0,{type:Cb.PROBE_UNKNOWN_ACTION()}))throw new Error(wb(13))})}(n)}catch(OQ){i=OQ}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(i)throw i;let a=!1;const s={};for(let i=0;i<r.length;i++){const o=r[i],l=n[o],c=e[o],u=l(c,t);if("undefined"===typeof u){t&&t.type;throw new Error(wb(14))}s[o]=u,a=a||u!==c}return a=a||r.length!==Object.keys(e).length,a?s:e}}function _b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce((e,t)=>function(){return e(t(...arguments))})}function Ab(e){return Sb(e)&&"type"in e&&"string"===typeof e.type}function Ib(e){return t=>{let{dispatch:n,getState:r}=t;return t=>i=>"function"===typeof i?i(n,r,e):t(i)}}var Pb=Ib(),Ob=Ib,Db=Symbol.for("immer-nothing"),Mb=Symbol.for("immer-draftable"),Rb=Symbol.for("immer-state");function Lb(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var zb=Object.getPrototypeOf;function Fb(e){return!!e&&!!e[Rb]}function Ub(e){var t;return!!e&&(Bb(e)||Array.isArray(e)||!!e[Mb]||!(null===(t=e.constructor)||void 0===t||!t[Mb])||Gb(e)||Yb(e))}var Vb=Object.prototype.constructor.toString();function Bb(e){if(!e||"object"!==typeof e)return!1;const t=zb(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Vb}function qb(e,t){0===Hb(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Hb(e){const t=e[Rb];return t?t.type_:Array.isArray(e)?1:Gb(e)?2:Yb(e)?3:0}function Wb(e,t){return 2===Hb(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Kb(e,t,n){const r=Hb(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Gb(e){return e instanceof Map}function Yb(e){return e instanceof Set}function Qb(e){return e.copy_||e.base_}function Xb(e,t){if(Gb(e))return new Map(e);if(Yb(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Bb(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[Rb];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(zb(e),t)}{const t=zb(e);if(null!==t&&n)return Me({},e);const r=Object.create(t);return Object.assign(r,e)}}function Jb(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Zb(e)||Fb(e)||!Ub(e)||(Hb(e)>1&&(e.set=e.add=e.clear=e.delete=$b),Object.freeze(e),t&&Object.entries(e).forEach(e=>{let[t,n]=e;return Jb(n,!0)})),e}function $b(){Lb(2)}function Zb(e){return Object.isFrozen(e)}var ej,tj={};function nj(e){const t=tj[e];return t||Lb(0),t}function rj(){return ej}function ij(e,t){t&&(nj("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function aj(e){sj(e),e.drafts_.forEach(lj),e.drafts_=null}function sj(e){e===ej&&(ej=e.parent_)}function oj(e){return ej={drafts_:[],parent_:ej,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function lj(e){const t=e[Rb];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function cj(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Rb].modified_&&(aj(t),Lb(4)),Ub(e)&&(e=uj(t,e),t.parent_||hj(t,e)),t.patches_&&nj("Patches").generateReplacementPatches_(n[Rb].base_,e,t.patches_,t.inversePatches_)):e=uj(t,n,[]),aj(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Db?e:void 0}function uj(e,t,n){if(Zb(t))return t;const r=t[Rb];if(!r)return qb(t,(i,a)=>dj(e,r,t,i,a,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return hj(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,a=!1;3===r.type_&&(i=new Set(t),t.clear(),a=!0),qb(i,(i,s)=>dj(e,r,t,i,s,n,a)),hj(e,t,!1),n&&e.patches_&&nj("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function dj(e,t,n,r,i,a,s){if(Fb(i)){const s=uj(e,i,a&&t&&3!==t.type_&&!Wb(t.assigned_,r)?a.concat(r):void 0);if(Kb(n,r,s),!Fb(s))return;e.canAutoFreeze_=!1}else s&&n.add(i);if(Ub(i)&&!Zb(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;uj(e,i),t&&t.scope_.parent_||"symbol"===typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||hj(e,i)}}function hj(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Jb(t,n)}var pj={get(e,t){if(t===Rb)return e;const n=Qb(e);if(!Wb(n,t))return function(e,t,n){var r;const i=gj(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!Ub(r)?r:r===fj(e.base_,t)?(yj(e),e.copy_[t]=xj(r,e)):r},has:(e,t)=>t in Qb(e),ownKeys:e=>Reflect.ownKeys(Qb(e)),set(e,t,n){const r=gj(Qb(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=fj(Qb(e),t),i=null===r||void 0===r?void 0:r[Rb];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||Wb(e.base_,t)))return!0;yj(e),vj(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==fj(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,yj(e),vj(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Qb(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){Lb(11)},getPrototypeOf:e=>zb(e.base_),setPrototypeOf(){Lb(12)}},mj={};function fj(e,t){const n=e[Rb];return(n?Qb(n):e)[t]}function gj(e,t){if(!(t in e))return;let n=zb(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=zb(n)}}function vj(e){e.modified_||(e.modified_=!0,e.parent_&&vj(e.parent_))}function yj(e){e.copy_||(e.copy_=Xb(e.base_,e.scope_.immer_.useStrictShallowCopy_))}qb(pj,(e,t)=>{mj[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),mj.deleteProperty=function(e,t){return mj.set.call(this,e,t,void 0)},mj.set=function(e,t,n){return pj.set.call(this,e[0],t,n,e[0])};function xj(e,t){const n=Gb(e)?nj("MapSet").proxyMap_(e,t):Yb(e)?nj("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:rj(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=pj;n&&(i=[r],a=mj);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,o}(e,t);return(t?t.scope_:rj()).drafts_.push(n),n}function bj(e){return Fb(e)||Lb(10),jj(e)}function jj(e){if(!Ub(e)||Zb(e))return e;const t=e[Rb];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Xb(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Xb(e,!0);return qb(n,(e,t)=>{Kb(n,e,jj(t))}),t&&(t.finalized_=!1),n}var wj=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return r.produce(e,e=>t.call(this,e,...a))}}let r;if("function"!==typeof t&&Lb(6),void 0!==n&&"function"!==typeof n&&Lb(7),Ub(e)){const i=oj(this),a=xj(e,void 0);let s=!0;try{r=t(a),s=!1}finally{s?aj(i):sj(i)}return ij(i,n),cj(r,i)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===Db&&(r=void 0),this.autoFreeze_&&Jb(r,!0),n){const t=[],i=[];nj("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}Lb(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,t=>e(t,...i))};let r,i;const a=this.produce(e,n,(e,t)=>{r=e,i=t});return[a,r,i]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ub(e)||Lb(8),Fb(e)&&(e=bj(e));const t=oj(this),n=xj(e,void 0);return n[Rb].isManual_=!0,sj(t),n}finishDraft(e,t){const n=e&&e[Rb];n&&n.isManual_||Lb(9);const{scope_:r}=n;return ij(r,t),cj(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=nj("Patches").applyPatches_;return Fb(e)?r(e,t):this.produce(e,e=>r(e,t))}},Nj=wj.produce;wj.produceWithPatches.bind(wj),wj.setAutoFreeze.bind(wj),wj.setUseStrictShallowCopy.bind(wj),wj.applyPatches.bind(wj),wj.createDraft.bind(wj),wj.finishDraft.bind(wj);const kj=["reducerPath"];var Cj="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?_b:_b.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Sj(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(bw(0));return Me(Me({type:e,payload:n.payload},"meta"in n&&{meta:n.meta}),"error"in n&&{error:n.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>Ab(t)&&t.type===e,n}var Ej=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function Tj(e){return Ub(e)?Nj(e,()=>{}):e}function _j(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var Aj="RTK_autoBatch",Ij=e=>t=>{setTimeout(t,e)},Pj=e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let r=new Ej(e);return n&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,i=!1,a=!1;const s=new Set,o="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Ij(10):"callback"===e.type?e.queueNotification:Ij(e.timeout),l=()=>{a=!1,i&&(i=!1,s.forEach(e=>e()))};return Object.assign({},n,{subscribe(e){const t=n.subscribe(()=>r&&e());return s.add(e),()=>{t(),s.delete(e)}},dispatch(e){try{var t;return r=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[Aj]),i=!r,i&&(a||(a=!0,o(l))),n.dispatch(e)}finally{r=!0}}})}}("object"===typeof n?n:void 0)),r};function Oj(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=null!==e&&void 0!==e?e:{};let a=new Ej;return t&&(function(e){return"boolean"===typeof e}(t)?a.push(Pb):a.push(Ob(t.extraArgument))),a},{reducer:n,middleware:r,devTools:i=!0,duplicateMiddlewareCheck:a=!0,preloadedState:s,enhancers:o}=e||{};let l,c;if("function"===typeof n)l=n;else{if(!Sb(n))throw new Error(bw(1));l=Tb(n)}c="function"===typeof r?r(t):t();let u=_b;i&&(u=Cj(Me({trace:!1},"object"===typeof i&&i)));const d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(wb(15))};const s={getState:i.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return a(e,...n)}},o=t.map(e=>e(s));return a=_b(...o)(i.dispatch),Me(Me({},i),{},{dispatch:a})}}(...c),h=Pj(d);return Eb(l,s,u(..."function"===typeof o?o(h):h()))}function Dj(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(bw(28));if(r in t)throw new Error(bw(29));return t[r]=n,i},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(r=e,i)};return e(i),[t,n,r]}var Mj=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e};var Rj=Symbol.for("rtk-slice-createasyncthunk");function Lj(e,t){return"".concat(e,"/").concat(t)}function zj(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[Rj];return function(e){const{name:t,reducerPath:r=t}=e;if(!t)throw new Error(bw(11));const i=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return Me({_reducerDefinitionType:"asyncThunk",payloadCreator:e},t)}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},a=Object.keys(i),s={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(bw(12));if(n in s.sliceCaseReducersByType)throw new Error(bw(13));return s.sliceCaseReducersByType[n]=t,o},addMatcher:(e,t)=>(s.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(s.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(s.sliceCaseReducersByName[e]=t,o)};function l(){const[t={},n=[],r]="function"===typeof e.extraReducers?Dj(e.extraReducers):[e.extraReducers],i=Me(Me({},t),s.sliceCaseReducersByType);return function(e,t){let n,[r,i,a]=Dj(t);if(function(e){return"function"===typeof e}(e))n=()=>Tj(e());else{const t=Tj(e);n=()=>t}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,s=[r[t.type],...i.filter(e=>{let{matcher:n}=e;return n(t)}).map(e=>{let{reducer:t}=e;return t})];return 0===s.filter(e=>!!e).length&&(s=[a]),s.reduce((e,n)=>{if(n){if(Fb(e)){const r=n(e,t);return void 0===r?e:r}if(Ub(e))return Nj(e,e=>n(e,t));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e},e)}return s.getInitialState=n,s}(e.initialState,e=>{for(let t in i)e.addCase(t,i[t]);for(let t of s.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)})}a.forEach(r=>{const a=i[r],s={reducerName:r,type:Lj(t,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(a)?function(e,t,n){let r,i,{type:a,reducerName:s,createNotation:o}=e;if("reducer"in t){if(o&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(bw(17));r=t.reducer,i=t.prepare}else r=t;n.addCase(a,r).exposeCaseReducer(s,r).exposeAction(s,i?Sj(a,i):Sj(a))}(s,a,o):function(e,t,n,r){let{type:i,reducerName:a}=e;if(!r)throw new Error(bw(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=t,h=r(i,s,d);n.exposeAction(a,h),o&&n.addCase(h.fulfilled,o);l&&n.addCase(h.pending,l);c&&n.addCase(h.rejected,c);u&&n.addMatcher(h.settled,u);n.exposeCaseReducer(a,{fulfilled:o||Vj,pending:l||Vj,rejected:c||Vj,settled:u||Vj})}(s,a,o,n)});const c=e=>e,u=new Map,d=new WeakMap;let h;function p(e,t){return h||(h=l()),h(e,t)}function m(){return h||(h=l()),h.getInitialState()}function f(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(e){let i=e[t];return"undefined"===typeof i&&n&&(i=_j(d,r,m)),i}function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const r=_j(u,n,()=>new WeakMap);return _j(r,t,()=>{const r={};for(const[a,s]of Object.entries(null!==(i=e.selectors)&&void 0!==i?i:{})){var i;r[a]=Fj(s,t,()=>_j(d,t,m),n)}return r})}return{reducerPath:t,getSelectors:i,get selectors(){return i(r)},selectSlice:r}}const g=Me(Me({name:t,reducer:p,actions:s.actionCreators,caseReducers:s.sliceCaseReducersByName,getInitialState:m},f(r)),{},{injectInto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reducerPath:n}=t,i=Cm(t,kj);const a=null!==n&&void 0!==n?n:r;return e.inject({reducerPath:a,reducer:p},i),Me(Me({},g),f(a,!0))}});return g}}function Fj(e,t,n,r){function i(i){let a=t(i);"undefined"===typeof a&&r&&(a=n());for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return e(a,...o)}return i.unwrapped=e,i}var Uj=zj();function Vj(){}var Bj="listener",qj="completed",Hj="cancelled",Wj="task-".concat(Hj),Kj="task-".concat(qj),Gj="".concat(Bj,"-").concat(Hj),Yj="".concat(Bj,"-").concat(qj),Qj=class{constructor(e){Oe(this,"name","TaskAbortError"),Oe(this,"message",void 0),this.code=e,this.message="".concat("task"," ").concat(Hj," (reason: ").concat(e,")")}},Xj=(e,t)=>{if("function"!==typeof e)throw new TypeError(bw(32))},Jj=()=>{},$j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jj;return e.catch(t),e},Zj=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ew=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},tw=e=>{if(e.aborted){const{reason:t}=e;throw new Qj(t)}};function nw(e,t){let n=Jj;return new Promise((r,i)=>{const a=()=>i(new Qj(e.reason));e.aborted?a():(n=Zj(e,a),t.finally(()=>n()).then(r,i))}).finally(()=>{n=Jj})}var rw=e=>t=>$j(nw(e,t).then(t=>(tw(e),t))),iw=e=>{const t=rw(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:aw}=Object,sw={},ow="listenerMiddleware",lw=(e,t)=>(n,r)=>{Xj(n);const i=new AbortController;var a;a=i,Zj(e,()=>ew(a,e.reason));const s=(async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Qj?"cancelled":"rejected",error:n}}finally{null===t||void 0===t||t()}})(async()=>{tw(e),tw(i.signal);const t=await n({pause:rw(i.signal),delay:iw(i.signal),signal:i.signal});return tw(i.signal),t},()=>ew(i,Kj));return null!==r&&void 0!==r&&r.autoJoin&&t.push(s.catch(Jj)),{result:rw(e)(s),cancel(){ew(i,Wj)}}},cw=(e,t)=>(n,r)=>$j((async(n,r)=>{tw(t);let i=()=>{};const a=[new Promise((t,r)=>{let a=e({predicate:n,effect:(e,n)=>{n.unsubscribe(),t([e,n.getState(),n.getOriginalState()])}});i=()=>{a(),r()}})];null!=r&&a.push(new Promise(e=>setTimeout(e,r,null)));try{const e=await nw(t,Promise.race(a));return tw(t),e}finally{i()}})(n,r)),uw=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:a}=e;if(t)i=Sj(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(bw(21));return Xj(a),{predicate:i,type:t,effect:a}},dw=aw(e=>{const{type:t,predicate:n,effect:r}=uw(e);return{id:Mj(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(bw(22))}}},{withTypes:()=>dw}),hw=(e,t)=>{const{type:n,effect:r,predicate:i}=uw(t);return Array.from(e.values()).find(e=>("string"===typeof n?e.type===n:e.predicate===i)&&e.effect===r)},pw=e=>{e.pending.forEach(e=>{ew(e,Gj)})},mw=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},fw=aw(Sj("".concat(ow,"/add")),{withTypes:()=>fw}),gw=Sj("".concat(ow,"/removeAll")),vw=aw(Sj("".concat(ow,"/remove")),{withTypes:()=>vw}),yw=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error("".concat(ow,"/error"),...t)},xw=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new Map,{extra:n,onError:r=yw}=e;Xj(r);const i=e=>{var n;return(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),null!==t&&void 0!==t&&t.cancelActive&&pw(e)}))(null!==(n=hw(t,e))&&void 0!==n?n:dw(e))};aw(i,{withTypes:()=>i});const a=e=>{const n=hw(t,e);return n&&(n.unsubscribe(),e.cancelActive&&pw(n)),!!n};aw(a,{withTypes:()=>a});const s=async(e,a,s,o)=>{const l=new AbortController,c=cw(i,l.signal),u=[];try{e.pending.add(l),await Promise.resolve(e.effect(a,aw({},s,{getOriginalState:o,condition:(e,t)=>c(e,t).then(Boolean),take:c,delay:iw(l.signal),pause:rw(l.signal),extra:n,signal:l.signal,fork:lw(l.signal,u),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,n)=>{e!==l&&(ew(e,Gj),n.delete(e))})},cancel:()=>{ew(l,Gj),e.pending.delete(l)},throwIfCancelled:()=>{tw(l.signal)}})))}catch(d){d instanceof Qj||mw(r,d,{raisedBy:"effect"})}finally{await Promise.all(u),ew(l,Yj),e.pending.delete(l)}},o=(e=>()=>{e.forEach(pw),e.clear()})(t);return{middleware:e=>n=>l=>{if(!Ab(l))return n(l);if(fw.match(l))return i(l.payload);if(gw.match(l))return void o();if(vw.match(l))return a(l.payload);let c=e.getState();const u=()=>{if(c===sw)throw new Error(bw(23));return c};let d;try{if(d=n(l),t.size>0){const n=e.getState(),i=Array.from(t.values());for(const t of i){let i=!1;try{i=t.predicate(l,n,c)}catch(h){i=!1,mw(r,h,{raisedBy:"predicate"})}i&&s(t,l,e,u)}}}finally{c=sw}return d},startListening:i,stopListening:a,clearListeners:o}};Symbol.for("rtk-state-proxy-original");function bw(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}function jw(e,t){if(t){var n=Number.parseInt(t,10);if(!ib(n))return null===e||void 0===e?void 0:e[n]}}var ww=Uj({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Nw=ww.reducer,{createEventEmitter:kw}=ww.actions;n(7237);function Cw(e){e()}var Sw={notify(){},get:()=>[]};function Ew(e,t){let n,r=Sw,i=0,a=!1;function s(){c.onStateChange&&c.onStateChange()}function o(){i++,n||(n=t?t.addNestedSub(s):e.subscribe(s),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Cw(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=Sw)}const c={addNestedSub:function(e){o();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:s,isSubscribed:function(){return a},trySubscribe:function(){a||(a=!0,o())},tryUnsubscribe:function(){a&&(a=!1,l())},getListeners:()=>r};return c}var Tw=(()=>!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement))(),_w=(()=>"undefined"!==typeof navigator&&"ReactNative"===navigator.product)(),Aw=(()=>Tw||_w?r.useLayoutEffect:r.useEffect)();Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var Iw=Symbol.for("react-redux-context"),Pw="undefined"!==typeof globalThis?globalThis:{};function Ow(){var e;if(!r.createContext)return{};const t=null!==(e=Pw[Iw])&&void 0!==e?e:Pw[Iw]=new Map;let n=t.get(r.createContext);return n||(n=r.createContext(null),t.set(r.createContext,n)),n}var Dw=Ow();var Mw=function(e){const{children:t,context:n,serverState:i,store:a}=e,s=r.useMemo(()=>{const e=Ew(a);return{store:a,subscription:e,getServerState:i?()=>i:void 0}},[a,i]),o=r.useMemo(()=>a.getState(),[a]);Aw(()=>{const{subscription:e}=s;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==a.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[s,o]);const l=n||Dw;return r.createElement(l.Provider,{value:s},t)};var Rw=Symbol.for("immer-nothing"),Lw=Symbol.for("immer-draftable"),zw=Symbol.for("immer-state");function Fw(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var Uw=Object.getPrototypeOf;function Vw(e){return!!e&&!!e[zw]}function Bw(e){var t;return!!e&&(Hw(e)||Array.isArray(e)||!!e[Lw]||!(null===(t=e.constructor)||void 0===t||!t[Lw])||Qw(e)||Xw(e))}var qw=Object.prototype.constructor.toString();function Hw(e){if(!e||"object"!==typeof e)return!1;const t=Uw(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===qw}function Ww(e,t){0===Kw(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Kw(e){const t=e[zw];return t?t.type_:Array.isArray(e)?1:Qw(e)?2:Xw(e)?3:0}function Gw(e,t){return 2===Kw(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Yw(e,t,n){const r=Kw(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Qw(e){return e instanceof Map}function Xw(e){return e instanceof Set}function Jw(e){return e.copy_||e.base_}function $w(e,t){if(Qw(e))return new Map(e);if(Xw(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Hw(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[zw];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Uw(e),t)}{const t=Uw(e);if(null!==t&&n)return Me({},e);const r=Object.create(t);return Object.assign(r,e)}}function Zw(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return tN(e)||Vw(e)||!Bw(e)||(Kw(e)>1&&(e.set=e.add=e.clear=e.delete=eN),Object.freeze(e),t&&Object.entries(e).forEach(e=>{let[t,n]=e;return Zw(n,!0)})),e}function eN(){Fw(2)}function tN(e){return Object.isFrozen(e)}var nN,rN={};function iN(e){const t=rN[e];return t||Fw(0),t}function aN(){return nN}function sN(e,t){t&&(iN("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function oN(e){lN(e),e.drafts_.forEach(uN),e.drafts_=null}function lN(e){e===nN&&(nN=e.parent_)}function cN(e){return nN={drafts_:[],parent_:nN,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function uN(e){const t=e[zw];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function dN(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[zw].modified_&&(oN(t),Fw(4)),Bw(e)&&(e=hN(t,e),t.parent_||mN(t,e)),t.patches_&&iN("Patches").generateReplacementPatches_(n[zw].base_,e,t.patches_,t.inversePatches_)):e=hN(t,n,[]),oN(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Rw?e:void 0}function hN(e,t,n){if(tN(t))return t;const r=t[zw];if(!r)return Ww(t,(i,a)=>pN(e,r,t,i,a,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return mN(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,a=!1;3===r.type_&&(i=new Set(t),t.clear(),a=!0),Ww(i,(i,s)=>pN(e,r,t,i,s,n,a)),mN(e,t,!1),n&&e.patches_&&iN("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function pN(e,t,n,r,i,a,s){if(Vw(i)){const s=hN(e,i,a&&t&&3!==t.type_&&!Gw(t.assigned_,r)?a.concat(r):void 0);if(Yw(n,r,s),!Vw(s))return;e.canAutoFreeze_=!1}else s&&n.add(i);if(Bw(i)&&!tN(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;hN(e,i),t&&t.scope_.parent_||"symbol"===typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||mN(e,i)}}function mN(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Zw(t,n)}var fN={get(e,t){if(t===zw)return e;const n=Jw(e);if(!Gw(n,t))return function(e,t,n){var r;const i=yN(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!Bw(r)?r:r===vN(e.base_,t)?(bN(e),e.copy_[t]=jN(r,e)):r},has:(e,t)=>t in Jw(e),ownKeys:e=>Reflect.ownKeys(Jw(e)),set(e,t,n){const r=yN(Jw(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=vN(Jw(e),t),i=null===r||void 0===r?void 0:r[zw];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||Gw(e.base_,t)))return!0;bN(e),xN(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==vN(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,bN(e),xN(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Jw(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){Fw(11)},getPrototypeOf:e=>Uw(e.base_),setPrototypeOf(){Fw(12)}},gN={};function vN(e,t){const n=e[zw];return(n?Jw(n):e)[t]}function yN(e,t){if(!(t in e))return;let n=Uw(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Uw(n)}}function xN(e){e.modified_||(e.modified_=!0,e.parent_&&xN(e.parent_))}function bN(e){e.copy_||(e.copy_=$w(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Ww(fN,(e,t)=>{gN[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),gN.deleteProperty=function(e,t){return gN.set.call(this,e,t,void 0)},gN.set=function(e,t,n){return fN.set.call(this,e[0],t,n,e[0])};function jN(e,t){const n=Qw(e)?iN("MapSet").proxyMap_(e,t):Xw(e)?iN("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:aN(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=fN;n&&(i=[r],a=gN);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,o}(e,t);return(t?t.scope_:aN()).drafts_.push(n),n}function wN(e){if(!Bw(e)||tN(e))return e;const t=e[zw];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=$w(e,t.scope_.immer_.useStrictShallowCopy_)}else n=$w(e,!0);return Ww(n,(e,t)=>{Yw(n,e,wN(t))}),t&&(t.finalized_=!1),n}var NN=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return r.produce(e,e=>t.call(this,e,...a))}}let r;if("function"!==typeof t&&Fw(6),void 0!==n&&"function"!==typeof n&&Fw(7),Bw(e)){const i=cN(this),a=jN(e,void 0);let s=!0;try{r=t(a),s=!1}finally{s?oN(i):lN(i)}return sN(i,n),dN(r,i)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===Rw&&(r=void 0),this.autoFreeze_&&Zw(r,!0),n){const t=[],i=[];iN("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}Fw(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,t=>e(t,...i))};let r,i;const a=this.produce(e,n,(e,t)=>{r=e,i=t});return[a,r,i]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Bw(e)||Fw(8),Vw(e)&&(e=function(e){Vw(e)||Fw(10);return wN(e)}(e));const t=cN(this),n=jN(e,void 0);return n[zw].isManual_=!0,lN(t),n}finishDraft(e,t){const n=e&&e[zw];n&&n.isManual_||Fw(9);const{scope_:r}=n;return sN(r,t),dN(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=iN("Patches").applyPatches_;return Vw(e)?r(e,t):this.produce(e,e=>r(e,t))}};NN.produce,NN.produceWithPatches.bind(NN),NN.setAutoFreeze.bind(NN),NN.setUseStrictShallowCopy.bind(NN),NN.applyPatches.bind(NN),NN.createDraft.bind(NN),NN.finishDraft.bind(NN);var kN={active:!1,index:null,dataKey:void 0,coordinate:void 0},CN=Uj({name:"tooltip",initialState:{itemInteraction:{click:kN,hover:kN},axisInteraction:{click:kN,hover:kN},keyboardInteraction:kN,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=bj(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:SN,removeTooltipEntrySettings:EN,setTooltipSettingsState:TN,setActiveMouseOverItemIndex:_N,mouseLeaveItem:AN,mouseLeaveChart:IN,setActiveClickItemIndex:PN,setMouseOverAxisIndex:ON,setMouseClickAxisIndex:DN,setSyncInteraction:MN,setKeyboardInteraction:RN}=CN.actions,LN=CN.reducer,zN=Uj({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;null!=n&&(e.dataStartIndex=n),null!=r&&(e.dataEndIndex=r)}}}),{setChartData:FN,setDataStartEndIndexes:UN,setComputedData:VN}=zN.actions,BN=zN.reducer,qN=Uj({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:HN,setLayout:WN,setChartSize:KN,setScale:GN}=qN.actions,YN=qN.reducer;function QN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var XN=e=>Array.isArray(e)?e:[e];function JN(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every(e=>"function"===typeof e)){const n=e.map(e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var $N="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function ZN(){return{s:0,v:void 0,o:null,p:null}}function ek(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:r}=t;let i,a=0;function s(){let t=n;const{length:s}=arguments;for(let e=0,n=s;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=ZN(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=ZN(),e.set(n,t)):t=r}}const o=t;let l;if(1===t.s)l=t.v;else if(l=e.apply(null,arguments),a++,r){var c,u,d;const e=null!==(c=null===(u=i)||void 0===u||null===(d=u.deref)||void 0===d?void 0:d.call(u))&&void 0!==c?c:i;null!=e&&r(e,l)&&(l=e,0!==a&&a--);i="object"===typeof l&&null!==l||"function"===typeof l?new $N(l):l}return o.s=1,o.v=l,l}return s.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function tk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i="function"===typeof e?{memoize:e,memoizeOptions:n}:e,a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,a=0,s=0,o={},l=t.pop();"object"===typeof l&&(o=l,l=t.pop()),QN(l,"createSelector expects an output function after the inputs, but received: [".concat(typeof l,"]"));const c=Me(Me({},i),o),{memoize:u,memoizeOptions:d=[],argsMemoize:h=ek,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,f=XN(d),g=XN(p),v=JN(t),y=u(function(){return a++,l.apply(null,arguments)},...f);const x=h(function(){s++;const e=function(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}(v,arguments);return r=y.apply(null,e),r},...g);return Object.assign(x,{resultFunc:l,memoizedResultFunc:y,dependencies:v,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>r,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:u,argsMemoize:h})};return Object.assign(a,{withTypes:()=>a}),a}var nk=tk(ek),rk=Object.assign(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nk;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),r=t(n.map(t=>e[t]),function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((e,t,r)=>(e[n[r]]=t,e),{})});return r},{withTypes:()=>rk}),ik=n(8443),ak=(0,r.createContext)(null),sk=e=>e,ok=()=>{var e=(0,r.useContext)(ak);return e?e.store.dispatch:sk},lk=()=>{},ck=()=>lk,uk=(e,t)=>e===t;function dk(e){var t=(0,r.useContext)(ak);return(0,ik.useSyncExternalStoreWithSelector)(t?t.subscription.addNestedSub:ck,t?t.store.getState:lk,t?t.store.getState:lk,t?e:lk,uk)}var hk=n(3821),pk=n.n(hk),mk=e=>e.legend.settings,fk=nk([e=>e.legend.payload,mk],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?pk()(r,n):r});function gk(e,t){if((i=e.length)>1)for(var n,r,i,a=1,s=e[t[0]],o=s.length;a<i;++a)for(r=s,s=e[t[a]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}Array.prototype.slice;function vk(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function yk(e){return function(){return e}}function xk(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function bk(e,t){return e[t]}function jk(e){const t=[];return t.key=e,t}function wk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wk(Object(n),!0).forEach(function(t){kk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function kk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ck=Math.PI/180,Sk=e=>180*e/Math.PI,Ek=(e,t,n,r)=>({x:e+Math.cos(-Ck*r)*n,y:t+Math.sin(-Ck*r)*n}),Tk=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},_k=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:a}=t,s=((e,t)=>{var{x:n,y:r}=e,{x:i,y:a}=t;return Math.sqrt((n-i)**2+(r-a)**2)})({x:n,y:r},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(n-i)/s,l=Math.acos(o);return r>a&&(l=2*Math.PI-l),{radius:s,angle:Sk(l),angleInRadian:l}},Ak=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),a=Math.floor(r/360);return e+360*Math.min(i,a)},Ik=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:a}=_k({x:n,y:r},t),{innerRadius:s,outerRadius:o}=t;if(i<s||i>o)return null;if(0===i)return null;var l,{startAngle:c,endAngle:u}=(e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:t-360*a,endAngle:n-360*a}})(t),d=a;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;l=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;l=d>=u&&d<=c}return l?Nk(Nk({},t),{},{radius:i,angle:Ak(d,t)}):null};function Pk(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function Ok(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Dk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ok(Object(n),!0).forEach(function(t){Mk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ok(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Mk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rk(e,t,n){return fb(e)||fb(t)?n:ob(t)?nb()(e,t,n):"function"===typeof t?t(e):n}var Lk=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,zk=(e,t,n,r)=>{if(r)return e.map(e=>e.coordinate);var i,a,s=e.map(e=>(e.coordinate===t&&(i=!0),e.coordinate===n&&(a=!0),e.coordinate));return i||s.push(t),a||s.push(n),s},Fk=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:a,scale:s,realScaleType:o,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:d,niceTicks:h,axisType:p}=e;if(!s)return null;var m="scaleBand"===o&&s.bandwidth?s.bandwidth()/2:2,f=(t||n)&&"category"===i&&s.bandwidth?s.bandwidth()/m:0;return f="angleAxis"===p&&a&&a.length>=2?2*rb(a[0]-a[1])*f:f,t&&(d||h)?(d||h||[]).map((e,t)=>{var n=r?r.indexOf(e):e;return{coordinate:s(n)+f,value:e,offset:f,index:t}}).filter(e=>!ib(e.coordinate)):l&&c?c.map((e,t)=>({coordinate:s(e)+f,value:e,index:t,offset:f})):s.ticks&&!n&&null!=u?s.ticks(u).map((e,t)=>({coordinate:s(e)+f,value:e,offset:f,index:t})):s.domain().map((e,t)=>({coordinate:s(e)+f,value:r?r[e]:e,index:t,offset:f}))},Uk=1e-4,Vk={sign:e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0,s=0;s<t;++s){var o=ib(e[s][n][1])?e[s][n][0]:e[s][n][1];o>=0?(e[s][n][0]=i,e[s][n][1]=i+o,i=e[s][n][1]):(e[s][n][0]=a,e[s][n][1]=a+o,a=e[s][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,i,a=0,s=e[0].length;a<s;++a){for(i=n=0;n<r;++n)i+=e[n][a][1]||0;if(i)for(n=0;n<r;++n)e[n][a][1]/=i}gk(e,t)}},none:gk,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],a=i.length;r<a;++r){for(var s=0,o=0;s<n;++s)o+=e[s][r][1]||0;i[r][1]+=i[r][0]=-o/2}gk(e,t)}},wiggle:function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,a=0,s=1;s<r;++s){for(var o=0,l=0,c=0;o<i;++o){for(var u=e[t[o]],d=u[s][1]||0,h=(d-(u[s-1][1]||0))/2,p=0;p<o;++p){var m=e[t[p]];h+=(m[s][1]||0)-(m[s-1][1]||0)}l+=d,c+=h*d}n[s-1][1]+=n[s-1][0]=a,l&&(a-=c/l)}n[s-1][1]+=n[s-1][0]=a,gk(e,t)}},positive:e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0;a<t;++a){var s=ib(e[a][n][1])?e[a][n][0]:e[a][n][1];s>=0?(e[a][n][0]=i,e[a][n][1]=i+s,i=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}}},Bk=(e,t,n)=>{var r=Vk[n],i=function(){var e=yk([]),t=xk,n=gk,r=bk;function i(i){var a,s,o=Array.from(e.apply(this,arguments),jk),l=o.length,c=-1;for(const e of i)for(a=0,++c;a<l;++a)(o[a][c]=[0,+r(e,o[a].key,c,i)]).data=e;for(a=0,s=vk(t(o));a<l;++a)o[s[a]].index=a;return n(o,s),o}return i.keys=function(t){return arguments.length?(e="function"===typeof t?t:yk(Array.from(t)),i):e},i.value=function(e){return arguments.length?(r="function"===typeof e?e:yk(+e),i):r},i.order=function(e){return arguments.length?(t=null==e?xk:"function"===typeof e?e:yk(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(n=null==e?gk:e,i):n},i}().keys(t).value((e,t)=>+Rk(e,t,0)).order(xk).offset(r);return i(e)};function qk(e){return null==e?void 0:String(e)}function Hk(e){var{axis:t,ticks:n,bandSize:r,entry:i,index:a,dataKey:s}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!fb(i[t.dataKey])){var o=mb(n,"value",i[t.dataKey]);if(o)return o.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var l=Rk(i,fb(s)?t.dataKey:s);return fb(l)?null:t.scale(l)}var Wk=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:a,index:s}=e;if("category"===t.type)return n[s]?n[s].coordinate+r:null;var o=Rk(a,t.dataKey,t.scale.domain()[s]);return fb(o)?null:t.scale(o)-i/2+r},Kk=(e,t,n)=>{var r;if(null!=e)return r=Object.keys(e).reduce((r,i)=>{var a=e[i],{stackedData:s}=a,o=s.reduce((e,r)=>{var i=(e=>{var t=e.flat(2).filter(sb);return[Math.min(...t),Math.max(...t)]})(Pk(r,t,n));return[Math.min(e[0],i[0]),Math.max(e[1],i[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]),[r[0]===1/0?0:r[0],r[1]===-1/0?0:r[1]]},Gk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Yk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Qk=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=pk()(t,e=>e.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var l=i[s],c=i[s-1];a=Math.min((l.coordinate||0)-(c.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function Xk(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:a}=e;return Dk(Dk({},t),{},{dataKey:n,payload:r,value:i,name:a})}function Jk(e,t){return e?String(e):"string"===typeof t?t:void 0}var $k=e=>e.layout.width,Zk=e=>e.layout.height,eC=e=>e.layout.scale,tC=e=>e.layout.margin,nC=nk(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),rC=nk(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),iC="data-recharts-item-index",aC="data-recharts-item-data-key";function sC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sC(Object(n),!0).forEach(function(t){lC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function lC(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cC=nk([$k,Zk,tC,e=>e.brush.height,nC,rC,mk,e=>e.legend.size],(e,t,n,r,i,a,s,o)=>{var l=a.reduce((e,t)=>{var{orientation:n}=t;if(!t.mirror&&!t.hide){var r="number"===typeof t.width?t.width:60;return oC(oC({},e),{},{[n]:e[n]+r})}return e},{left:n.left||0,right:n.right||0}),c=i.reduce((e,t)=>{var{orientation:n}=t;return t.mirror||t.hide?e:oC(oC({},e),{},{[n]:nb()(e,"".concat(n))+t.height})},{top:n.top||0,bottom:n.bottom||0}),u=oC(oC({},c),l),d=u.bottom;u.bottom+=r,u=((e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:a,verticalAlign:s,layout:o}=t;if(("vertical"===o||"horizontal"===o&&"middle"===s)&&"center"!==a&&sb(e[a]))return Dk(Dk({},e),{},{[a]:e[a]+(r||0)});if(("horizontal"===o||"vertical"===o&&"center"===a)&&"middle"!==s&&sb(e[s]))return Dk(Dk({},e),{},{[s]:e[s]+(i||0)})}return e})(u,s,o);var h=e-u.left-u.right,p=t-u.top-u.bottom;return oC(oC({brushBottom:d},u),{},{width:Math.max(h,0),height:Math.max(p,0)})}),uC=nk(cC,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),dC=nk($k,Zk,(e,t)=>({x:0,y:0,width:e,height:t})),hC=(0,r.createContext)(null),pC=()=>null!=(0,r.useContext)(hC),mC=e=>e.brush,fC=nk([mC,cC,tC],(e,t,n)=>({height:e.height,x:sb(e.x)?e.x:t.left,y:sb(e.y)?e.y:t.top+t.height+t.brushBottom-((null===n||void 0===n?void 0:n.bottom)||0),width:sb(e.width)?e.width:t.width})),gC=()=>{var e,t=pC(),n=dk(uC),r=dk(fC),i=null===(e=dk(mC))||void 0===e?void 0:e.padding;return t&&r&&i?{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}:n},vC={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},yC=()=>{var e;return null!==(e=dk(cC))&&void 0!==e?e:vC},xC=()=>dk($k),bC=()=>dk(Zk),jC={top:0,right:0,bottom:0,left:0},wC=e=>e.layout.layoutType,NC=()=>dk(wC),kC=n(9859),CC=n.n(kC);function SC(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function EC(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class TC extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:PC;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(_C(this,e))}has(e){return super.has(_C(this,e))}set(e,t){return super.set(AC(this,e),t)}delete(e){return super.delete(IC(this,e))}}Set;function _C(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):t}function AC(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function IC(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function PC(e){return null!==e&&"object"===typeof e?e.valueOf():e}const OC=Symbol("implicit");function DC(){var e=new TC,t=[],n=[],r=OC;function i(i){let a=e.get(i);if(void 0===a){if(r!==OC)return r;e.set(i,a=t.push(i)-1)}return n[a%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new TC;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return DC(t,n).unknown(r)},SC.apply(i,arguments),i}function MC(){var e,t,n=DC().unknown(void 0),r=n.domain,i=n.range,a=0,s=1,o=!1,l=0,c=0,u=.5;function d(){var n=r().length,d=s<a,h=d?s:a,p=d?a:s;e=(p-h)/Math.max(1,n-l+2*c),o&&(e=Math.floor(e)),h+=(p-h-e*(n-l))*u,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var m=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}(n).map(function(t){return h+e*t});return i(d?m.reverse():m)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),d()):r()},n.range=function(e){return arguments.length?([a,s]=e,a=+a,s=+s,d()):[a,s]},n.rangeRound=function(e){return[a,s]=e,a=+a,s=+s,o=!0,d()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,d()):o},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),d()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),d()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,d()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},n.copy=function(){return MC(r(),[a,s]).round(o).paddingInner(l).paddingOuter(c).align(u)},SC.apply(d(),arguments)}function RC(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return RC(t())},e}function LC(){return RC(MC.apply(null,arguments).paddingInner(1))}const zC=Math.sqrt(50),FC=Math.sqrt(10),UC=Math.sqrt(2);function VC(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=zC?10:a>=FC?5:a>=UC?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/s,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*s,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=n&&n<2?VC(e,t,2*n):[o,l,c]}function BC(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[i,a,s]=r?VC(t,e,n):VC(e,t,n);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(r)if(s<0)for(let c=0;c<o;++c)l[c]=(a-c)/-s;else for(let c=0;c<o;++c)l[c]=(a-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(i+c)/-s;else for(let c=0;c<o;++c)l[c]=(i+c)*s;return l}function qC(e,t,n){return VC(e=+e,t=+t,n=+n)[2]}function HC(e,t,n){n=+n;const r=(t=+t)<(e=+e),i=r?qC(t,e,n):qC(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function WC(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function KC(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function GC(e){let t,n,r;function i(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<a){if(0!==t(r,r))return a;do{const t=i+a>>>1;n(e[t],r)<0?i=t+1:a=t}while(i<a)}return i}return 2!==e.length?(t=WC,n=(t,n)=>WC(e(t),n),r=(t,n)=>e(t)-n):(t=e===WC||e===KC?e:YC,n=e,r=e),{left:i,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=i(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return a>n&&r(e[a-1],t)>-r(e[a],t)?a-1:a},right:function(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<a){if(0!==t(r,r))return a;do{const t=i+a>>>1;n(e[t],r)<=0?i=t+1:a=t}while(i<a)}return i}}}function YC(){return 0}function QC(e){return null===e?NaN:+e}const XC=GC(WC),JC=XC.right,$C=(XC.left,GC(QC).center,JC);function ZC(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function eS(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function tS(){}var nS=.7,rS=1/nS,iS="\\s*([+-]?\\d+)\\s*",aS="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sS="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oS=/^#([0-9a-f]{3,8})$/,lS=new RegExp("^rgb\\(".concat(iS,",").concat(iS,",").concat(iS,"\\)$")),cS=new RegExp("^rgb\\(".concat(sS,",").concat(sS,",").concat(sS,"\\)$")),uS=new RegExp("^rgba\\(".concat(iS,",").concat(iS,",").concat(iS,",").concat(aS,"\\)$")),dS=new RegExp("^rgba\\(".concat(sS,",").concat(sS,",").concat(sS,",").concat(aS,"\\)$")),hS=new RegExp("^hsl\\(".concat(aS,",").concat(sS,",").concat(sS,"\\)$")),pS=new RegExp("^hsla\\(".concat(aS,",").concat(sS,",").concat(sS,",").concat(aS,"\\)$")),mS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function fS(){return this.rgb().formatHex()}function gS(){return this.rgb().formatRgb()}function vS(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=oS.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?yS(t):3===n?new jS(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?xS(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?xS(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=lS.exec(e))?new jS(t[1],t[2],t[3],1):(t=cS.exec(e))?new jS(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=uS.exec(e))?xS(t[1],t[2],t[3],t[4]):(t=dS.exec(e))?xS(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=hS.exec(e))?ES(t[1],t[2]/100,t[3]/100,1):(t=pS.exec(e))?ES(t[1],t[2]/100,t[3]/100,t[4]):mS.hasOwnProperty(e)?yS(mS[e]):"transparent"===e?new jS(NaN,NaN,NaN,0):null}function yS(e){return new jS(e>>16&255,e>>8&255,255&e,1)}function xS(e,t,n,r){return r<=0&&(e=t=n=NaN),new jS(e,t,n,r)}function bS(e,t,n,r){return 1===arguments.length?((i=e)instanceof tS||(i=vS(i)),i?new jS((i=i.rgb()).r,i.g,i.b,i.opacity):new jS):new jS(e,t,n,null==r?1:r);var i}function jS(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function wS(){return"#".concat(SS(this.r)).concat(SS(this.g)).concat(SS(this.b))}function NS(){const e=kS(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(CS(this.r),", ").concat(CS(this.g),", ").concat(CS(this.b)).concat(1===e?")":", ".concat(e,")"))}function kS(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function CS(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function SS(e){return((e=CS(e))<16?"0":"")+e.toString(16)}function ES(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new _S(e,t,n,r)}function TS(e){if(e instanceof _S)return new _S(e.h,e.s,e.l,e.opacity);if(e instanceof tS||(e=vS(e)),!e)return new _S;if(e instanceof _S)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(s=t===a?(n-r)/o+6*(n<r):n===a?(r-t)/o+2:(t-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new _S(s,o,l,e.opacity)}function _S(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function AS(e){return(e=(e||0)%360)<0?e+360:e}function IS(e){return Math.max(0,Math.min(1,e||0))}function PS(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function OS(e,t,n,r,i){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*r+s*i)/6}ZC(tS,vS,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fS,formatHex:fS,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return TS(this).formatHsl()},formatRgb:gS,toString:gS}),ZC(jS,bS,eS(tS,{brighter(e){return e=null==e?rS:Math.pow(rS,e),new jS(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?nS:Math.pow(nS,e),new jS(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new jS(CS(this.r),CS(this.g),CS(this.b),kS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wS,formatHex:wS,formatHex8:function(){return"#".concat(SS(this.r)).concat(SS(this.g)).concat(SS(this.b)).concat(SS(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:NS,toString:NS})),ZC(_S,function(e,t,n,r){return 1===arguments.length?TS(e):new _S(e,t,n,null==r?1:r)},eS(tS,{brighter(e){return e=null==e?rS:Math.pow(rS,e),new _S(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?nS:Math.pow(nS,e),new _S(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new jS(PS(e>=240?e-240:e+120,i,r),PS(e,i,r),PS(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new _S(AS(this.h),IS(this.s),IS(this.l),kS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=kS(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(AS(this.h),", ").concat(100*IS(this.s),"%, ").concat(100*IS(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const DS=e=>()=>e;function MS(e,t){return function(n){return e+n*t}}function RS(e){return 1===(e=+e)?LS:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):DS(isNaN(t)?n:t)}}function LS(e,t){var n=t-e;return n?MS(e,n):DS(isNaN(e)?t:e)}const zS=function e(t){var n=RS(t);function r(e,t){var r=n((e=bS(e)).r,(t=bS(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),s=LS(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=s(t),e+""}}return r.gamma=e,r}(1);function FS(e){return function(t){var n,r,i=t.length,a=new Array(i),s=new Array(i),o=new Array(i);for(n=0;n<i;++n)r=bS(t[n]),a[n]=r.r||0,s[n]=r.g||0,o[n]=r.b||0;return a=e(a),s=e(s),o=e(o),r.opacity=1,function(e){return r.r=a(e),r.g=s(e),r.b=o(e),r+""}}}FS(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],s=r>0?e[r-1]:2*i-a,o=r<t-1?e[r+2]:2*a-i;return OS((n-r/t)*t,s,i,a,o)}}),FS(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],s=e[(r+1)%t],o=e[(r+2)%t];return OS((n-r/t)*t,i,a,s,o)}});function US(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),s=new Array(r);for(n=0;n<i;++n)a[n]=YS(e[n],t[n]);for(;n<r;++n)s[n]=t[n];return function(e){for(n=0;n<i;++n)s[n]=a[n](e);return s}}function VS(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function BS(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function qS(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=YS(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var HS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,WS=new RegExp(HS.source,"g");function KS(e,t){var n,r,i,a=HS.lastIndex=WS.lastIndex=0,s=-1,o=[],l=[];for(e+="",t+="";(n=HS.exec(e))&&(r=WS.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),o[s]?o[s]+=i:o[++s]=i),(n=n[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,l.push({i:s,x:BS(n,r)})),a=WS.lastIndex;return a<t.length&&(i=t.slice(a),o[s]?o[s]+=i:o[++s]=i),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)o[(n=l[r]).i]=n.x(e);return o.join("")})}function GS(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function YS(e,t){var n,r=typeof t;return null==t||"boolean"===r?DS(t):("number"===r?BS:"string"===r?(n=vS(t))?(t=n,zS):KS:t instanceof vS?zS:t instanceof Date?VS:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?GS:Array.isArray(t)?US:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?qS:BS)(e,t)}function QS(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function XS(e){return+e}var JS=[0,1];function $S(e){return e}function ZS(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function eE(e,t,n){var r=e[0],i=e[1],a=t[0],s=t[1];return i<r?(r=ZS(i,r),a=n(s,a)):(r=ZS(r,i),a=n(a,s)),function(e){return a(r(e))}}function tE(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=ZS(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(t){var n=$C(e,t,1,r)-1;return a[n](i[n](t))}}function nE(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function rE(){var e,t,n,r,i,a,s=JS,o=JS,l=YS,c=$S;function u(){var e=Math.min(s.length,o.length);return c!==$S&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(s[0],s[e-1])),r=e>2?tE:eE,i=a=null,d}function d(t){return null==t||isNaN(t=+t)?n:(i||(i=r(s.map(e),o,l)))(e(c(t)))}return d.invert=function(n){return c(t((a||(a=r(o,s.map(e),BS)))(n)))},d.domain=function(e){return arguments.length?(s=Array.from(e,XS),u()):s.slice()},d.range=function(e){return arguments.length?(o=Array.from(e),u()):o.slice()},d.rangeRound=function(e){return o=Array.from(e),l=QS,u()},d.clamp=function(e){return arguments.length?(c=!!e||$S,u()):c!==$S},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,u()}}function iE(){return rE()($S,$S)}var aE,sE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function oE(e){if(!(t=sE.exec(e)))throw new Error("invalid format: "+e);var t;return new lE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function lE(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function cE(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function uE(e){return(e=cE(Math.abs(e)))?e[1]:NaN}function dE(e,t){var n=cE(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}oE.prototype=lE.prototype,lE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const hE={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>dE(100*e,t),r:dE,s:function(e,t){var n=cE(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(aE=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+cE(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function pE(e){return e}var mE,fE,gE,vE=Array.prototype.map,yE=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function xE(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?pE:(t=vE.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(e.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?pE:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(vE.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=oE(e)).fill,n=e.align,d=e.sign,h=e.symbol,p=e.zero,m=e.width,f=e.comma,g=e.precision,v=e.trim,y=e.type;"n"===y?(f=!0,y="g"):hE[y]||(void 0===g&&(g=12),v=!0,y="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var x="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===h?a:/[%p]/.test(y)?l:"",j=hE[y],w=/[defgprs%]/.test(y);function N(e){var i,a,l,h=x,N=b;if("c"===y)N=j(e)+N,e="";else{var k=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:j(Math.abs(e),g),v&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),k&&0===+e&&"+"!==d&&(k=!1),h=(k?"("===d?d:c:"-"===d||"("===d?"":d)+h,N=("s"===y?yE[8+aE/3]:"")+N+(k&&"("===d?")":""),w)for(i=-1,a=e.length;++i<a;)if(48>(l=e.charCodeAt(i))||l>57){N=(46===l?s+e.slice(i+1):e.slice(i))+N,e=e.slice(0,i);break}}f&&!p&&(e=r(e,1/0));var C=h.length+e.length+N.length,S=C<m?new Array(m-C+1).join(t):"";switch(f&&p&&(e=r(S+e,S.length?m-N.length:1/0),S=""),n){case"<":e=h+e+N+S;break;case"=":e=h+S+e+N;break;case"^":e=S.slice(0,C=S.length>>1)+h+e+N+S.slice(C);break;default:e=S+h+e+N}return o(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),N.toString=function(){return e+""},N}return{format:d,formatPrefix:function(e,t){var n=d(((e=oE(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(uE(t)/3))),i=Math.pow(10,-r),a=yE[8+r/3];return function(e){return n(i*e)+a}}}}function bE(e,t,n,r){var i,a=HC(e,t,n);switch((r=oE(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(uE(t)/3)))-uE(Math.abs(e)))}(a,s))||(r.precision=i),gE(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,uE(t)-uE(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-uE(Math.abs(e)))}(a))||(r.precision=i-2*("%"===r.type))}return fE(r)}function jE(e){var t=e.domain;return e.ticks=function(e){var n=t();return BC(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return bE(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,a=t(),s=0,o=a.length-1,l=a[s],c=a[o],u=10;for(c<l&&(i=l,l=c,c=i,i=s,s=o,o=i);u-- >0;){if((i=qC(l,c,n))===r)return a[s]=l,a[o]=c,t(a);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}function wE(){var e=iE();return e.copy=function(){return nE(e,wE())},SC.apply(e,arguments),jE(e)}function NE(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,XS),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return NE(e).unknown(t)},e=arguments.length?Array.from(e,XS):[0,1],jE(n)}function kE(e,t){var n,r=0,i=(e=e.slice()).length-1,a=e[r],s=e[i];return s<a&&(n=r,r=i,i=n,n=a,a=s,s=n),e[r]=t.floor(a),e[i]=t.ceil(s),e}function CE(e){return Math.log(e)}function SE(e){return Math.exp(e)}function EE(e){return-Math.log(-e)}function TE(e){return-Math.exp(-e)}function _E(e){return isFinite(e)?+("1e"+e):e<0?0:e}function AE(e){return(t,n)=>-e(-t,n)}function IE(e){const t=e(CE,SE),n=t.domain;let r,i,a=10;function s(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(a),i=function(e){return 10===e?_E:e===Math.E?Math.exp:t=>Math.pow(e,t)}(a),n()[0]<0?(r=AE(r),i=AE(i),e(EE,TE)):e(CE,SE),t}return t.base=function(e){return arguments.length?(a=+e,s()):a},t.domain=function(e){return arguments.length?(n(e),s()):n()},t.ticks=e=>{const t=n();let s=t[0],o=t[t.length-1];const l=o<s;l&&([s,o]=[o,s]);let c,u,d=r(s),h=r(o);const p=null==e?10:+e;let m=[];if(!(a%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(c=1;c<a;++c)if(u=d<0?c/i(-d):c*i(d),!(u<s)){if(u>o)break;m.push(u)}}else for(;d<=h;++d)for(c=a-1;c>=1;--c)if(u=d>0?c/i(-d):c*i(d),!(u<s)){if(u>o)break;m.push(u)}2*m.length<p&&(m=BC(s,o,p))}else m=BC(d,h,Math.min(h-d,p)).map(i);return l?m.reverse():m},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===a?"s":","),"function"!==typeof n&&(a%1||null!=(n=oE(n)).precision||(n.trim=!0),n=fE(n)),e===1/0)return n;const s=Math.max(1,a*e/t.ticks().length);return e=>{let t=e/i(Math.round(r(e)));return t*a<a-.5&&(t*=a),t<=s?n(e):""}},t.nice=()=>n(kE(n(),{floor:e=>i(Math.floor(r(e))),ceil:e=>i(Math.ceil(r(e)))})),t}function PE(){const e=IE(rE()).domain([1,10]);return e.copy=()=>nE(e,PE()).base(e.base()),SC.apply(e,arguments),e}function OE(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function DE(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function ME(e){var t=1,n=e(OE(t),DE(t));return n.constant=function(n){return arguments.length?e(OE(t=+n),DE(t)):t},jE(n)}function RE(){var e=ME(rE());return e.copy=function(){return nE(e,RE()).constant(e.constant())},SC.apply(e,arguments)}function LE(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function zE(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function FE(e){return e<0?-e*e:e*e}function UE(e){var t=e($S,$S),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e($S,$S):.5===n?e(zE,FE):e(LE(n),LE(1/n)):n},jE(t)}function VE(){var e=UE(rE());return e.copy=function(){return nE(e,VE()).exponent(e.exponent())},SC.apply(e,arguments),e}function BE(){return VE.apply(null,arguments).exponent(.5)}function qE(e){return Math.sign(e)*e*e}function HE(){var e,t=iE(),n=[0,1],r=!1;function i(n){var i=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(n));return isNaN(i)?e:r?Math.round(i):i}return i.invert=function(e){return t.invert(qE(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain()},i.range=function(e){return arguments.length?(t.range((n=Array.from(e,XS)).map(qE)),i):n.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(r=!!e,i):r},i.clamp=function(e){return arguments.length?(t.clamp(e),i):t.clamp()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return HE(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},SC.apply(i,arguments),jE(i)}function WE(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function KE(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function GE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WC;if(e===WC)return YE;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}function YE(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function QE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=void 0===i?YE:GE(i);r>n;){if(r-n>600){const a=r-n+1,s=t-n+1,o=Math.log(a),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(a-l)/a)*(s-a/2<0?-1:1);QE(e,t,Math.max(n,Math.floor(t-s*l/a+c)),Math.min(r,Math.floor(t+(a-s)*l/a+c)),i)}const a=e[t];let s=n,o=r;for(XE(e,n,t),i(e[r],a)>0&&XE(e,n,r);s<o;){for(XE(e,s,o),++s,--o;i(e[s],a)<0;)++s;for(;i(e[o],a)>0;)--o}0===i(e[n],a)?XE(e,n,o):(++o,XE(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}return e}function XE(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function JE(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),(r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return KE(e);if(t>=1)return WE(e);var r,i=(r-1)*t,a=Math.floor(i),s=WE(QE(e,a).subarray(0,a+1));return s+(KE(e.subarray(a+1))-s)*(i-a)}}function $E(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:QC;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),s=+n(e[a],a,e);return s+(+n(e[a+1],a+1,e)-s)*(i-a)}}function ZE(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=$E(t,e/i);return a}function a(t){return null==t||isNaN(t=+t)?e:n[$C(r,t)]}return a.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},a.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(WC),i()},a.range=function(e){return arguments.length?(n=Array.from(e),i()):n.slice()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.quantiles=function(){return r.slice()},a.copy=function(){return ZE().domain(t).range(n).unknown(e)},SC.apply(a,arguments)}function eT(){var e,t=0,n=1,r=1,i=[.5],a=[0,1];function s(t){return null!=t&&t<=t?a[$C(i,t,0,r)]:e}function o(){var e=-1;for(i=new Array(r);++e<r;)i[e]=((e+1)*n-(e-r)*t)/(r+1);return s}return s.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,o()):[t,n]},s.range=function(e){return arguments.length?(r=(a=Array.from(e)).length-1,o()):a.slice()},s.invertExtent=function(e){var s=a.indexOf(e);return s<0?[NaN,NaN]:s<1?[t,i[0]]:s>=r?[i[r-1],n]:[i[s-1],i[s]]},s.unknown=function(t){return arguments.length?(e=t,s):s},s.thresholds=function(){return i.slice()},s.copy=function(){return eT().domain([t,n]).range(a).unknown(e)},SC.apply(jE(s),arguments)}function tT(){var e,t=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[$C(t,i,0,r)]:e}return i.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return tT().domain(t).range(n).unknown(e)},SC.apply(i,arguments)}mE=xE({thousands:",",grouping:[3],currency:["$",""]}),fE=mE.format,gE=mE.formatPrefix;const nT=1e3,rT=6e4,iT=36e5,aT=864e5,sT=6048e5,oT=2592e6,lT=31536e6,cT=new Date,uT=new Date;function dT(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),i.round=e=>{const t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),i.range=(n,r,a)=>{const s=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r)||!(a>0))return s;let o;do{s.push(o=new Date(+n)),t(n,a),e(n)}while(o<n&&n<r);return s},i.filter=n=>dT(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}),n&&(i.count=(t,r)=>(cT.setTime(+t),uT.setTime(+r),e(cT),e(uT),Math.floor(n(cT,uT))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?t=>r(t)%e===0:t=>i.count(0,t)%e===0):i:null)),i}const hT=dT(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);hT.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?dT(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):hT:null);hT.range;const pT=dT(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*nT)},(e,t)=>(t-e)/nT,e=>e.getUTCSeconds()),mT=(pT.range,dT(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*nT)},(e,t)=>{e.setTime(+e+t*rT)},(e,t)=>(t-e)/rT,e=>e.getMinutes())),fT=(mT.range,dT(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*rT)},(e,t)=>(t-e)/rT,e=>e.getUTCMinutes())),gT=(fT.range,dT(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*nT-e.getMinutes()*rT)},(e,t)=>{e.setTime(+e+t*iT)},(e,t)=>(t-e)/iT,e=>e.getHours())),vT=(gT.range,dT(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*iT)},(e,t)=>(t-e)/iT,e=>e.getUTCHours())),yT=(vT.range,dT(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*rT)/aT,e=>e.getDate()-1)),xT=(yT.range,dT(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/aT,e=>e.getUTCDate()-1)),bT=(xT.range,dT(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/aT,e=>Math.floor(e/aT)));bT.range;function jT(e){return dT(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*rT)/sT)}const wT=jT(0),NT=jT(1),kT=jT(2),CT=jT(3),ST=jT(4),ET=jT(5),TT=jT(6);wT.range,NT.range,kT.range,CT.range,ST.range,ET.range,TT.range;function _T(e){return dT(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/sT)}const AT=_T(0),IT=_T(1),PT=_T(2),OT=_T(3),DT=_T(4),MT=_T(5),RT=_T(6),LT=(AT.range,IT.range,PT.range,OT.range,DT.range,MT.range,RT.range,dT(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),zT=(LT.range,dT(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),FT=(zT.range,dT(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));FT.every=e=>isFinite(e=Math.floor(e))&&e>0?dT(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null;FT.range;const UT=dT(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());UT.every=e=>isFinite(e=Math.floor(e))&&e>0?dT(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null;UT.range;function VT(e,t,n,r,i,a){const s=[[pT,1,nT],[pT,5,5e3],[pT,15,15e3],[pT,30,3e4],[a,1,rT],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,iT],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,aT],[r,2,1728e5],[n,1,sT],[t,1,oT],[t,3,7776e6],[e,1,lT]];function o(t,n,r){const i=Math.abs(n-t)/r,a=GC(e=>{let[,,t]=e;return t}).right(s,i);if(a===s.length)return e.every(HC(t/lT,n/lT,r));if(0===a)return hT.every(Math.max(HC(t,n,r),1));const[o,l]=s[i/s[a-1][2]<s[a][2]/i?a-1:a];return o.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"===typeof n.range?n:o(e,t,n),a=i?i.range(e,+t+1):[];return r?a.reverse():a},o]}const[BT,qT]=VT(UT,zT,AT,bT,vT,fT),[HT,WT]=VT(FT,LT,wT,yT,gT,mT);function KT(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function GT(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function YT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var QT,XT,JT,$T={"-":"",_:" ",0:"0"},ZT=/^\s*\d+/,e_=/^%/,t_=/[\\^$*+?|[\]().{}]/g;function n_(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function r_(e){return e.replace(t_,"\\$&")}function i_(e){return new RegExp("^(?:"+e.map(r_).join("|")+")","i")}function a_(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function s_(e,t,n){var r=ZT.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function o_(e,t,n){var r=ZT.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function l_(e,t,n){var r=ZT.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function c_(e,t,n){var r=ZT.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function u_(e,t,n){var r=ZT.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function d_(e,t,n){var r=ZT.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function h_(e,t,n){var r=ZT.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function p_(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function m_(e,t,n){var r=ZT.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function f_(e,t,n){var r=ZT.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function g_(e,t,n){var r=ZT.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function v_(e,t,n){var r=ZT.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function y_(e,t,n){var r=ZT.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function x_(e,t,n){var r=ZT.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function b_(e,t,n){var r=ZT.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function j_(e,t,n){var r=ZT.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function w_(e,t,n){var r=ZT.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function N_(e,t,n){var r=e_.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function k_(e,t,n){var r=ZT.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function C_(e,t,n){var r=ZT.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function S_(e,t){return n_(e.getDate(),t,2)}function E_(e,t){return n_(e.getHours(),t,2)}function T_(e,t){return n_(e.getHours()%12||12,t,2)}function __(e,t){return n_(1+yT.count(FT(e),e),t,3)}function A_(e,t){return n_(e.getMilliseconds(),t,3)}function I_(e,t){return A_(e,t)+"000"}function P_(e,t){return n_(e.getMonth()+1,t,2)}function O_(e,t){return n_(e.getMinutes(),t,2)}function D_(e,t){return n_(e.getSeconds(),t,2)}function M_(e){var t=e.getDay();return 0===t?7:t}function R_(e,t){return n_(wT.count(FT(e)-1,e),t,2)}function L_(e){var t=e.getDay();return t>=4||0===t?ST(e):ST.ceil(e)}function z_(e,t){return e=L_(e),n_(ST.count(FT(e),e)+(4===FT(e).getDay()),t,2)}function F_(e){return e.getDay()}function U_(e,t){return n_(NT.count(FT(e)-1,e),t,2)}function V_(e,t){return n_(e.getFullYear()%100,t,2)}function B_(e,t){return n_((e=L_(e)).getFullYear()%100,t,2)}function q_(e,t){return n_(e.getFullYear()%1e4,t,4)}function H_(e,t){var n=e.getDay();return n_((e=n>=4||0===n?ST(e):ST.ceil(e)).getFullYear()%1e4,t,4)}function W_(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+n_(t/60|0,"0",2)+n_(t%60,"0",2)}function K_(e,t){return n_(e.getUTCDate(),t,2)}function G_(e,t){return n_(e.getUTCHours(),t,2)}function Y_(e,t){return n_(e.getUTCHours()%12||12,t,2)}function Q_(e,t){return n_(1+xT.count(UT(e),e),t,3)}function X_(e,t){return n_(e.getUTCMilliseconds(),t,3)}function J_(e,t){return X_(e,t)+"000"}function $_(e,t){return n_(e.getUTCMonth()+1,t,2)}function Z_(e,t){return n_(e.getUTCMinutes(),t,2)}function eA(e,t){return n_(e.getUTCSeconds(),t,2)}function tA(e){var t=e.getUTCDay();return 0===t?7:t}function nA(e,t){return n_(AT.count(UT(e)-1,e),t,2)}function rA(e){var t=e.getUTCDay();return t>=4||0===t?DT(e):DT.ceil(e)}function iA(e,t){return e=rA(e),n_(DT.count(UT(e),e)+(4===UT(e).getUTCDay()),t,2)}function aA(e){return e.getUTCDay()}function sA(e,t){return n_(IT.count(UT(e)-1,e),t,2)}function oA(e,t){return n_(e.getUTCFullYear()%100,t,2)}function lA(e,t){return n_((e=rA(e)).getUTCFullYear()%100,t,2)}function cA(e,t){return n_(e.getUTCFullYear()%1e4,t,4)}function uA(e,t){var n=e.getUTCDay();return n_((e=n>=4||0===n?DT(e):DT.ceil(e)).getUTCFullYear()%1e4,t,4)}function dA(){return"+0000"}function hA(){return"%"}function pA(e){return+e}function mA(e){return Math.floor(+e/1e3)}function fA(e){return new Date(e)}function gA(e){return e instanceof Date?+e:+new Date(+e)}function vA(e,t,n,r,i,a,s,o,l,c){var u=iE(),d=u.invert,h=u.domain,p=c(".%L"),m=c(":%S"),f=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),x=c("%B"),b=c("%Y");function j(e){return(l(e)<e?p:o(e)<e?m:s(e)<e?f:a(e)<e?g:r(e)<e?i(e)<e?v:y:n(e)<e?x:b)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,gA)):h().map(fA)},u.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?j:c(t)},u.nice=function(e){var n=h();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(kE(n,e)):u},u.copy=function(){return nE(u,vA(e,t,n,r,i,a,s,o,l,c))},u}function yA(){return SC.apply(vA(HT,WT,FT,LT,wT,yT,gT,mT,pT,XT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xA(){return SC.apply(vA(BT,qT,UT,zT,AT,xT,vT,fT,pT,JT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function bA(){var e,t,n,r,i,a=0,s=1,o=$S,l=!1;function c(t){return null==t||isNaN(t=+t)?i:o(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,r;return arguments.length?([n,r]=t,o=e(n,r),c):[o(0),o(1)]}}return c.domain=function(i){return arguments.length?([a,s]=i,e=r(a=+a),t=r(s=+s),n=e===t?0:1/(t-e),c):[a,s]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=u(YS),c.rangeRound=u(QS),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(a),t=i(s),n=e===t?0:1/(t-e),c}}function jA(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function wA(){var e=jE(bA()($S));return e.copy=function(){return jA(e,wA())},EC.apply(e,arguments)}function NA(){var e=IE(bA()).domain([1,10]);return e.copy=function(){return jA(e,NA()).base(e.base())},EC.apply(e,arguments)}function kA(){var e=ME(bA());return e.copy=function(){return jA(e,kA()).constant(e.constant())},EC.apply(e,arguments)}function CA(){var e=UE(bA());return e.copy=function(){return jA(e,CA()).exponent(e.exponent())},EC.apply(e,arguments)}function SA(){return CA.apply(null,arguments).exponent(.5)}function EA(){var e=[],t=$S;function n(n){if(null!=n&&!isNaN(n=+n))return t(($C(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(WC),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map((n,r)=>t(r/(e.length-1)))},n.quantiles=function(t){return Array.from({length:t+1},(n,r)=>JE(e,r/t))},n.copy=function(){return EA(t).domain(e)},EC.apply(n,arguments)}function TA(){var e,t,n,r,i,a,s,o=0,l=.5,c=1,u=1,d=$S,h=!1;function p(e){return isNaN(e=+e)?s:(e=.5+((e=+a(e))-t)*(u*e<u*t?r:i),d(h?Math.max(0,Math.min(1,e)):e))}function m(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,d=function(e,t){void 0===t&&(t=e,e=YS);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}}(e,[n,r,i]),p):[d(0),d(.5),d(1)]}}return p.domain=function(s){return arguments.length?([o,l,c]=s,e=a(o=+o),t=a(l=+l),n=a(c=+c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,p):[o,l,c]},p.clamp=function(e){return arguments.length?(h=!!e,p):h},p.interpolator=function(e){return arguments.length?(d=e,p):d},p.range=m(YS),p.rangeRound=m(QS),p.unknown=function(e){return arguments.length?(s=e,p):s},function(s){return a=s,e=s(o),t=s(l),n=s(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,p}}function _A(){var e=jE(TA()($S));return e.copy=function(){return jA(e,_A())},EC.apply(e,arguments)}function AA(){var e=IE(TA()).domain([.1,1,10]);return e.copy=function(){return jA(e,AA()).base(e.base())},EC.apply(e,arguments)}function IA(){var e=ME(TA());return e.copy=function(){return jA(e,IA()).constant(e.constant())},EC.apply(e,arguments)}function PA(){var e=UE(TA());return e.copy=function(){return jA(e,PA()).exponent(e.exponent())},EC.apply(e,arguments)}function OA(){return PA.apply(null,arguments).exponent(.5)}!function(e){QT=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,c=i_(i),u=a_(i),d=i_(a),h=a_(a),p=i_(s),m=a_(s),f=i_(o),g=a_(o),v=i_(l),y=a_(l),x={a:function(e){return s[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:S_,e:S_,f:I_,g:B_,G:H_,H:E_,I:T_,j:__,L:A_,m:P_,M:O_,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:pA,s:mA,S:D_,u:M_,U:R_,V:z_,w:F_,W:U_,x:null,X:null,y:V_,Y:q_,Z:W_,"%":hA},b={a:function(e){return s[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:K_,e:K_,f:J_,g:lA,G:uA,H:G_,I:Y_,j:Q_,L:X_,m:$_,M:Z_,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:pA,s:mA,S:eA,u:tA,U:nA,V:iA,w:aA,W:sA,x:null,X:null,y:oA,Y:cA,Z:dA,"%":hA},j={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=m.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return k(e,t,n,r)},d:g_,e:g_,f:w_,g:h_,G:d_,H:y_,I:y_,j:v_,L:j_,m:f_,M:x_,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:m_,Q:k_,s:C_,S:b_,u:o_,U:l_,V:c_,w:s_,W:u_,x:function(e,t,r){return k(e,n,t,r)},X:function(e,t,n){return k(e,r,t,n)},y:h_,Y:d_,Z:p_,"%":N_};function w(e,t){return function(n){var r,i,a,s=[],o=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===e.charCodeAt(o)&&(s.push(e.slice(l,o)),null!=(i=$T[r=e.charAt(++o)])?r=e.charAt(++o):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),s.push(r),l=o+1);return s.push(e.slice(l,o)),s.join("")}}function N(e,t){return function(n){var r,i,a=YT(1900,void 0,1);if(k(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=GT(YT(a.y,0,1))).getUTCDay(),r=i>4||0===i?IT.ceil(r):IT(r),r=xT.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=KT(YT(a.y,0,1))).getDay(),r=i>4||0===i?NT.ceil(r):NT(r),r=yT.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?GT(YT(a.y,0,1)).getUTCDay():KT(YT(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,GT(a)):KT(a)}}function k(e,t,n,r){for(var i,a,s=0,o=t.length,l=n.length;s<o;){if(r>=l)return-1;if(37===(i=t.charCodeAt(s++))){if(i=t.charAt(s++),!(a=j[i in $T?t.charAt(s++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return x.x=w(n,x),x.X=w(r,x),x.c=w(t,x),b.x=w(n,b),b.X=w(r,b),b.c=w(t,b),{format:function(e){var t=w(e+="",x);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}(e),XT=QT.format,QT.parse,JT=QT.utcFormat,QT.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var DA=e=>e.chartData,MA=nk([DA],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),RA=(e,t,n,r)=>r?MA(e):DA(e);function LA(e){return Number.isFinite(e)}function zA(e){return"number"===typeof e&&e>0&&Number.isFinite(e)}function FA(e){if(Array.isArray(e)&&2===e.length){var[t,n]=e;if(LA(t)&&LA(n))return!0}return!1}function UA(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}var VA=n(8210),BA=n.n(VA),qA=e=>e,HA={"@@functional/placeholder":!0},WA=e=>e===HA,KA=e=>function t(){return 0===arguments.length||1===arguments.length&&WA(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},GA=(e,t)=>1===e?t:KA(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(e=>e!==HA).length;return a>=e?t(...r):GA(e-a,KA(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var a=r.map(e=>WA(e)?n.shift():e);return t(...a,...n)}))}),YA=e=>GA(e.length,e),QA=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},XA=YA((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(e=>t[e]).map(e)),JA=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),$A=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t&&i.every((e,n)=>{var r;return e===(null===(r=t)||void 0===r?void 0:r[n])})?n:(t=i,n=e(...i))}};function ZA(e){return 0===e?1:Math.floor(new(BA())(e).abs().log(10).toNumber())+1}function eI(e,t,n){for(var r=new(BA())(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}YA((e,t,n)=>{var r=+e;return r+n*(+t-r)}),YA((e,t,n)=>{var r=t-+e;return(n-e)/(r=r||1/0)}),YA((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var tI=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},nI=(e,t,n)=>{if(e.lte(0))return new(BA())(0);var r=ZA(e.toNumber()),i=new(BA())(10).pow(r),a=e.div(i),s=1!==r?.05:.1,o=new(BA())(Math.ceil(a.div(s).toNumber())).add(n).mul(s).mul(i);return t?new(BA())(o.toNumber()):new(BA())(Math.ceil(o.toNumber()))},rI=(e,t,n)=>{var r=new(BA())(1),i=new(BA())(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new(BA())(10).pow(ZA(e)-1),i=new(BA())(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new(BA())(Math.floor(e)))}else 0===e?i=new(BA())(Math.floor((t-1)/2)):n||(i=new(BA())(Math.floor(e)));var s=Math.floor((t-1)/2);return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return qA;var r=t.reverse(),i=r[0],a=r.slice(1);return function(){return a.reduce((e,t)=>t(e),i(...arguments))}}(XA(e=>i.add(new(BA())(e-s).mul(r)).toNumber()),QA)(0,t)},iI=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(BA())(0),tickMin:new(BA())(0),tickMax:new(BA())(0)};var a,s=nI(new(BA())(t).sub(e).div(n-1),r,i);a=e<=0&&t>=0?new(BA())(0):(a=new(BA())(e).add(t).div(2)).sub(new(BA())(a).mod(s));var o=Math.ceil(a.sub(e).div(s).toNumber()),l=Math.ceil(new(BA())(t).sub(a).div(s).toNumber()),c=o+l+1;return c>n?iI(e,t,n,r,i+1):(c<n&&(l=t>0?l+(n-c):l,o=t>0?o:o+(n-c)),{step:s,tickMin:a.sub(new(BA())(o).mul(s)),tickMax:a.add(new(BA())(l).mul(s))})};var aI=$A(function(e){var[t,n]=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(r,2),[s,o]=tI([t,n]);if(s===-1/0||o===1/0){var l=o===1/0?[s,...QA(0,r-1).map(()=>1/0)]:[...QA(0,r-1).map(()=>-1/0),o];return t>n?JA(l):l}if(s===o)return rI(s,r,i);var{step:c,tickMin:u,tickMax:d}=iI(s,o,a,i,0),h=eI(u,d.add(new(BA())(.1).mul(c)),c);return t>n?JA(h):h}),sI=$A(function(e,t){var[n,r]=e,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[a,s]=tI([n,r]);if(a===-1/0||s===1/0)return[n,r];if(a===s)return[a];var o=Math.max(t,2),l=nI(new(BA())(s).sub(a).div(o-1),i,0),c=[...eI(new(BA())(a),new(BA())(s),l),s];return!1===i&&(c=c.map(e=>Math.round(e))),n>r?JA(c):c}),oI=e=>e.rootProps.maxBarSize,lI=e=>e.rootProps.barCategoryGap,cI=e=>e.rootProps.stackOffset,uI=e=>e.options.chartName,dI=e=>e.rootProps.syncId,hI=e=>e.rootProps.syncMethod,pI=e=>e.options.eventEmitter,mI=0,fI="auto",gI=!0,vI=!1,yI=!0,xI=0,bI="auto",jI=!0,wI=5,NI=(e,t)=>{if(e&&t)return null!==e&&void 0!==e&&e.reversed?[t[1],t[0]]:t},kI={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:mI,includeHidden:!1,name:void 0,reversed:!1,scale:fI,tick:gI,tickCount:void 0,ticks:void 0,type:"category",unit:void 0},CI={allowDataOverflow:vI,allowDecimals:!1,allowDuplicatedCategory:yI,dataKey:void 0,domain:void 0,id:xI,includeHidden:!1,name:void 0,reversed:!1,scale:bI,tick:jI,tickCount:wI,ticks:void 0,type:"number",unit:void 0},SI={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,dataKey:void 0,domain:void 0,id:mI,includeHidden:!1,name:void 0,reversed:!1,scale:fI,tick:gI,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},EI={allowDataOverflow:vI,allowDecimals:!1,allowDuplicatedCategory:yI,dataKey:void 0,domain:void 0,id:xI,includeHidden:!1,name:void 0,reversed:!1,scale:bI,tick:jI,tickCount:wI,ticks:void 0,type:"category",unit:void 0},TI=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?SI:kI,_I=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?EI:CI,AI=e=>e.polarOptions,II=nk([$k,Zk,cC],Tk),PI=nk([AI,II],(e,t)=>{if(null!=e)return ub(e.innerRadius,t,0)}),OI=nk([AI,II],(e,t)=>{if(null!=e)return ub(e.outerRadius,t,.8*t)}),DI=nk([AI],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]}),MI=(nk([TI,DI],NI),nk([II,PI,OI],(e,t,n)=>{if(null!=e&&null!=t&&null!=n)return[t,n]})),RI=(nk([_I,MI],NI),nk([wC,AI,PI,OI,$k,Zk],(e,t,n,r,i,a)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=n&&null!=r){var{cx:s,cy:o,startAngle:l,endAngle:c}=t;return{cx:ub(s,i,i/2),cy:ub(o,a,a/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}})),LI=(e,t)=>t,zI=(e,t,n)=>n;function FI(e){return null===e||void 0===e?void 0:e.id}var UI=e=>{var t=wC(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},VI=e=>e.tooltip.settings.axisId,BI=e=>{var t=UI(e),n=VI(e);return nP(e,t,n)};function qI(e,t,n){var{chartData:r=[]}=t,i=null===n||void 0===n?void 0:n.dataKey,a=new Map;return e.forEach(e=>{var t,n=null!==(t=e.data)&&void 0!==t?t:r;if(null!=n&&0!==n.length){var s=FI(e);n.forEach((t,n)=>{var r,o=null==i?n:String(Rk(t,i,null)),l=Rk(t,e.dataKey,0);r=a.has(o)?a.get(o):{},Object.assign(r,{[s]:l}),a.set(o,r)})}}),Array.from(a.values())}function HI(e){return null!=e.stackId&&null!=e.dataKey}function WI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function KI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WI(Object(n),!0).forEach(function(t){GI(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function GI(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var YI=[0,"auto"],QI={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},XI=(e,t)=>{var n=e.cartesianAxis.xAxis[t];return null==n?QI:n},JI={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:YI,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},$I=(e,t)=>{var n=e.cartesianAxis.yAxis[t];return null==n?JI:n},ZI={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},eP=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return null==n?ZI:n},tP=(e,t,n)=>{switch(t){case"xAxis":return XI(e,n);case"yAxis":return $I(e,n);case"zAxis":return eP(e,n);case"angleAxis":return TI(e,n);case"radiusAxis":return _I(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},nP=(e,t,n)=>{switch(t){case"xAxis":return XI(e,n);case"yAxis":return $I(e,n);case"angleAxis":return TI(e,n);case"radiusAxis":return _I(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},rP=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function iP(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var aP=e=>e.graphicalItems.cartesianItems,sP=nk([LI,zI],iP),oP=(e,t,n)=>e.filter(n).filter(e=>!0===(null===t||void 0===t?void 0:t.includeHidden)||!e.hide),lP=nk([aP,tP,sP],oP),cP=nk([lP],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(HI)),uP=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),dP=nk([lP],uP),hP=e=>e.map(e=>e.data).filter(Boolean).flat(1),pP=nk([lP],hP),mP=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},fP=nk([pP,RA],mP),gP=(e,t,n)=>null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:Rk(e,t.dataKey)})):n.length>0?n.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:Rk(e,t)}))):e.map(e=>({value:e})),vP=nk([fP,tP,lP],gP);function yP(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function xP(e){return e.filter(e=>ob(e)||e instanceof Date).map(Number).filter(e=>!1===ib(e))}function bP(e,t,n){return!n||"number"!==typeof t||ib(t)?[]:n.length?xP(n.flatMap(n=>{var r,i,a=Rk(e,n.dataKey);if(Array.isArray(a)?[r,i]=a:r=i=a,LA(r)&&LA(i))return[t-r,t+i]})):[]}var jP=nk([cP,RA,BI],qI),wP=(e,t,n)=>{var r=t.reduce((e,t)=>(null==t.stackId||(null==e[t.stackId]&&(e[t.stackId]=[]),e[t.stackId].push(t)),e),{});return Object.fromEntries(Object.entries(r).map(t=>{var[r,i]=t,a=i.map(FI);return[r,{stackedData:Bk(e,a,n),graphicalItems:i}]}))},NP=nk([jP,cP,cI],wP),kP=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if("zAxis"!==n){var a=Kk(e,r,i);if(null==a||0!==a[0]||0!==a[1])return a}},CP=nk([NP,DA,LI],kP),SP=(e,t,n,r,i)=>n.length>0?e.flatMap(e=>n.flatMap(n=>{var a,s,o=null===(a=r[n.id])||void 0===a?void 0:a.filter(e=>yP(i,e)),l=Rk(e,null!==(s=t.dataKey)&&void 0!==s?s:n.dataKey);return{value:l,errorDomain:bP(e,l,o)}})).filter(Boolean):null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:Rk(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]})),EP=e=>e.errorBars,TP=(e,t,n)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>yP(n,e)),_P=(nk([dP,EP,LI],TP),nk([fP,tP,dP,EP,LI],SP));function AP(e){var{value:t}=e;if(ob(t)||t instanceof Date)return t}var IP=e=>{var t=xP(e.flatMap(e=>[e.value,e.errorDomain]).flat(1));if(0!==t.length)return[Math.min(...t),Math.max(...t)]},PP=e=>{var t;if(null==e||!("domain"in e))return YI;if(null!=e.domain)return e.domain;if(null!=e.ticks){if("number"===e.type){var n=xP(e.ticks);return[Math.min(...n),Math.max(...n)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null===e||void 0===e?void 0:e.domain)&&void 0!==t?t:YI},OP=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);if(0!==r.length){var i=r.flat();return[Math.min(...i),Math.max(...i)]}},DP=e=>e.referenceElements.dots,MP=(e,t,n)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===n:e.yAxisId===n),RP=nk([DP,LI,zI],MP),LP=e=>e.referenceElements.areas,zP=nk([LP,LI,zI],MP),FP=e=>e.referenceElements.lines,UP=nk([FP,LI,zI],MP),VP=(e,t)=>{var n=xP(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==n.length)return[Math.min(...n),Math.max(...n)]},BP=nk(RP,LI,VP),qP=(e,t)=>{var n=xP(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==n.length)return[Math.min(...n),Math.max(...n)]},HP=nk([zP,LI],qP),WP=(e,t)=>{var n=xP(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==n.length)return[Math.min(...n),Math.max(...n)]},KP=nk(UP,LI,WP),GP=nk(BP,KP,HP,(e,t,n)=>OP(e,n,t)),YP=nk([tP],PP),QP=(e,t,n,r,i,a,s)=>{var o=function(e,t){if(t&&"function"!==typeof e&&Array.isArray(e)&&2===e.length){var n,r,[i,a]=e;if(LA(i))n=i;else if("function"===typeof i)return;if(LA(a))r=a;else if("function"===typeof a)return;var s=[n,r];if(FA(s))return s}}(t,e.allowDataOverflow);return null!=o?o:function(e,t,n){if(n||null!=t){if("function"===typeof e&&null!=t)try{var r=e(t,n);if(FA(r))return UA(r,t,n)}catch(p){}if(Array.isArray(e)&&2===e.length){var i,a,[s,o]=e;if("auto"===s)null!=t&&(i=Math.min(...t));else if(sb(s))i=s;else if("function"===typeof s)try{null!=t&&(i=s(null===t||void 0===t?void 0:t[0]))}catch(m){}else if("string"===typeof s&&Gk.test(s)){var l=Gk.exec(s);if(null==l||null==t)i=void 0;else{var c=+l[1];i=t[0]-c}}else i=null===t||void 0===t?void 0:t[0];if("auto"===o)null!=t&&(a=Math.max(...t));else if(sb(o))a=o;else if("function"===typeof o)try{null!=t&&(a=o(null===t||void 0===t?void 0:t[1]))}catch(f){}else if("string"===typeof o&&Yk.test(o)){var u=Yk.exec(o);if(null==u||null==t)a=void 0;else{var d=+u[1];a=t[1]+d}}else a=null===t||void 0===t?void 0:t[1];var h=[i,a];if(FA(h))return null==t?h:UA(h,t,n)}}}(t,"vertical"===a&&"xAxis"===s||"horizontal"===a&&"yAxis"===s?OP(n,i,IP(r)):OP(i,IP(r)),e.allowDataOverflow)},XP=nk([tP,YP,CP,_P,GP,wC,LI],QP),JP=[0,1],$P=(e,t,n,r,i,a,s)=>{if(null!=e&&null!=n&&0!==n.length||void 0!==s){var{dataKey:o,type:l}=e,c=Lk(t,a);return c&&null==o?CC()(0,n.length):"category"===l?((e,t,n)=>{var r=e.map(AP).filter(e=>null!=e);return n&&(null==t.dataKey||t.allowDuplicatedCategory&&db(r))?CC()(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))})(r,e,c):"expand"===i?JP:s}},ZP=nk([tP,wC,fP,vP,cI,LI,XP],$P),eO=(t,n,r,i,a)=>{if(null!=t){var{scale:s,type:o}=t;if("auto"===s)return"radial"===n&&"radiusAxis"===a?"band":"radial"===n&&"angleAxis"===a?"linear":"category"===o&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!r)?"point":"category"===o?"band":"linear";if("string"===typeof s){var l="scale".concat(gb(s));return l in e?l:"point"}}},tO=nk([tP,wC,rP,uI,LI],eO);function nO(t,n,r,i){if(null!=r&&null!=i){if("function"===typeof t.scale)return t.scale.copy().domain(r).range(i);var a=function(t){if(null!=t){if(t in e)return e[t]();var n="scale".concat(gb(t));return n in e?e[n]():void 0}}(n);if(null!=a){var s=a.domain(r).range(i);return(e=>{var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-Uk,a=Math.max(r[0],r[1])+Uk,s=e(t[0]),o=e(t[n-1]);(s<i||s>a||o<i||o>a)&&e.domain([t[0],t[n-1]])}})(s),s}}}var rO=(e,t,n)=>{var r=PP(t);if("auto"===n||"linear"===n)return null!=t&&t.tickCount&&Array.isArray(r)&&("auto"===r[0]||"auto"===r[1])&&FA(e)?aI(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&FA(e)?sI(e,t.tickCount,t.allowDecimals):void 0},iO=nk([ZP,nP,tO],rO),aO=(e,t,n,r)=>{if("angleAxis"!==r&&"number"===(null===e||void 0===e?void 0:e.type)&&FA(t)&&Array.isArray(n)&&n.length>0){var i=t[0],a=n[0],s=t[1],o=n[n.length-1];return[Math.min(i,a),Math.max(s,o)]}return t},sO=nk([tP,ZP,iO,LI],aO),oO=nk(vP,tP,(e,t)=>{if(t&&"number"===t.type){var n=1/0,r=Array.from(xP(e.map(e=>e.value))).sort((e,t)=>e-t);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(0===i)return 1/0;for(var a=0;a<r.length-1;a++){var s=r[a+1]-r[a];n=Math.min(n,s)}return n/i}}),lO=nk(oO,wC,lI,cC,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!LA(e))return 0;var a="vertical"===t?r.height:r.width;if("gap"===i)return e*a/2;if("no-gap"===i){var s=ub(n,e*a),o=e*a/2;return o-s-(o-s)/a*s}return 0}),cO=nk(XI,(e,t)=>{var n=XI(e,t);return null==n||"string"!==typeof n.padding?0:lO(e,"xAxis",t,n.padding)},(e,t)=>{var n,r;if(null==e)return{left:0,right:0};var{padding:i}=e;return"string"===typeof i?{left:t,right:t}:{left:(null!==(n=i.left)&&void 0!==n?n:0)+t,right:(null!==(r=i.right)&&void 0!==r?r:0)+t}}),uO=nk($I,(e,t)=>{var n=$I(e,t);return null==n||"string"!==typeof n.padding?0:lO(e,"yAxis",t,n.padding)},(e,t)=>{var n,r;if(null==e)return{top:0,bottom:0};var{padding:i}=e;return"string"===typeof i?{top:t,bottom:t}:{top:(null!==(n=i.top)&&void 0!==n?n:0)+t,bottom:(null!==(r=i.bottom)&&void 0!==r?r:0)+t}}),dO=nk([cC,cO,fC,mC,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),hO=nk([cC,wC,uO,fC,mC,(e,t,n)=>n],(e,t,n,r,i,a)=>{var{padding:s}=i;return a?[r.height-s.bottom,s.top]:"horizontal"===t?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),pO=(e,t,n,r)=>{var i;switch(t){case"xAxis":return dO(e,n,r);case"yAxis":return hO(e,n,r);case"zAxis":return null===(i=eP(e,n))||void 0===i?void 0:i.range;case"angleAxis":return DI(e);case"radiusAxis":return MI(e,n);default:return}},mO=nk([tP,pO],NI),fO=nk([tP,tO,sO,mO],nO);nk([lP,EP,LI],TP);function gO(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var vO=(e,t)=>t,yO=(e,t,n)=>n,xO=nk(nC,vO,yO,(e,t,n)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===n).sort(gO)),bO=nk(rC,vO,yO,(e,t,n)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===n).sort(gO)),jO=(e,t)=>({width:e.width,height:t.height}),wO=nk(cC,XI,jO),NO=nk(Zk,cC,xO,vO,yO,(e,t,n,r,i)=>{var a,s={};return n.forEach(n=>{var o=jO(t,n);null==a&&(a=((e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}})(t,r,e));var l="top"===r&&!i||"bottom"===r&&i;s[n.id]=a-Number(l)*o.height,a+=(l?-1:1)*o.height}),s}),kO=nk($k,cC,bO,vO,yO,(e,t,n,r,i)=>{var a,s={};return n.forEach(n=>{var o=((e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height}))(t,n);null==a&&(a=((e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}})(t,r,e));var l="left"===r&&!i||"right"===r&&i;s[n.id]=a-Number(l)*o.width,a+=(l?-1:1)*o.width}),s}),CO=nk(cC,$I,(e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height})),SO=(e,t,n)=>{switch(t){case"xAxis":return wO(e,n).width;case"yAxis":return CO(e,n).height;default:return}},EO=(e,t,n,r)=>{if(null!=n){var{allowDuplicatedCategory:i,type:a,dataKey:s}=n,o=Lk(e,r),l=t.map(e=>e.value);return s&&o&&"category"===a&&i&&db(l)?l:void 0}},TO=nk([wC,vP,tP,LI],EO),_O=(e,t,n,r)=>{if(null!=n&&null!=n.dataKey){var{type:i,scale:a}=n;return!Lk(e,r)||"number"!==i&&"auto"===a?void 0:t.map(e=>e.value)}},AO=nk([wC,vP,nP,LI],_O),IO=nk([wC,(e,t,n)=>{switch(t){case"xAxis":return XI(e,n);case"yAxis":return $I(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},tO,fO,TO,AO,pO,iO,LI],(e,t,n,r,i,a,s,o,l)=>{if(null==t)return null;var c=Lk(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:a,duplicateDomain:i,isCategorical:c,niceTicks:o,range:s,realScaleType:n,scale:r}}),PO=nk([wC,nP,tO,fO,iO,pO,TO,AO,LI],(e,t,n,r,i,a,s,o,l)=>{if(null!=t&&null!=r){var c=Lk(e,l),{type:u,ticks:d,tickCount:h}=t,p="scaleBand"===n&&"function"===typeof r.bandwidth?r.bandwidth()/2:2,m="category"===u&&r.bandwidth?r.bandwidth()/p:0;m="angleAxis"===l&&null!=a&&a.length>=2?2*rb(a[0]-a[1])*m:m;var f=d||i;return f?f.map((e,t)=>{var n=s?s.indexOf(e):e;return{index:t,coordinate:r(n)+m,value:e,offset:m}}).filter(e=>!ib(e.coordinate)):c&&o?o.map((e,t)=>({coordinate:r(e)+m,value:e,index:t,offset:m})):r.ticks?r.ticks(h).map(e=>({coordinate:r(e)+m,value:e,offset:m})):r.domain().map((e,t)=>({coordinate:r(e)+m,value:s?s[e]:e,index:t,offset:m}))}}),OO=nk([wC,nP,fO,pO,TO,AO,LI],(e,t,n,r,i,a,s)=>{if(null!=t&&null!=n&&null!=r&&r[0]!==r[1]){var o=Lk(e,s),{tickCount:l}=t,c=0;return c="angleAxis"===s&&(null===r||void 0===r?void 0:r.length)>=2?2*rb(r[0]-r[1])*c:c,o&&a?a.map((e,t)=>({coordinate:n(e)+c,value:e,index:t,offset:c})):n.ticks?n.ticks(l).map(e=>({coordinate:n(e)+c,value:e,offset:c})):n.domain().map((e,t)=>({coordinate:n(e)+c,value:i?i[e]:e,index:t,offset:c}))}}),DO=nk(tP,fO,(e,t)=>{if(null!=e&&null!=t)return KI(KI({},e),{},{scale:t})}),MO=nk([tP,tO,ZP,mO],nO),RO=(nk((e,t,n)=>eP(e,n),MO,(e,t)=>{if(null!=e&&null!=t)return KI(KI({},e),{},{scale:t})}),nk([wC,nC,rC],(e,t,n)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}})),LO=e=>e.options.defaultTooltipEventType,zO=e=>e.options.validateTooltipEventTypes;function FO(e,t,n){if(null==e)return t;var r=e?"axis":"item";return null==n?t:n.includes(r)?r:t}function UO(e,t){return FO(t,LO(e),zO(e))}var VO=(e,t)=>{var n,r=Number(t);if(!ib(r)&&null!=t)return r>=0?null===e||void 0===e||null===(n=e[r])||void 0===n?void 0:n.value:void 0};function BO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BO(Object(n),!0).forEach(function(t){HO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function HO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var WO=(e,t,n,r)=>{if(null==t)return kN;var i=function(e,t,n){return"axis"===t?"click"===n?e.axisInteraction.click:e.axisInteraction.hover:"click"===n?e.itemInteraction.click:e.itemInteraction.hover}(e,t,n);if(null==i)return kN;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var a=!0===e.settings.active;if(null!=i.index){if(a)return qO(qO({},i),{},{active:!0})}else if(null!=r)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return qO(qO({},kN),{},{coordinate:i.coordinate})},KO=(e,t)=>{var n=null===e||void 0===e?void 0:e.index;if(null==n)return null;var r=Number(n);if(!LA(r))return n;var i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(0,Math.min(r,i)))},GO=(e,t,n,r,i,a,s,o)=>{if(null!=a&&null!=o){var l=s[0],c=null==l?void 0:o(l.positions,a);if(null!=c)return c;var u=null===i||void 0===i?void 0:i[Number(a)];if(u)return"horizontal"===n?{x:u.coordinate,y:(r.top+t)/2}:{x:(r.left+e)/2,y:u.coordinate}}},YO=(e,t,n,r)=>{return"axis"===t?e.tooltipItemPayloads:0===e.tooltipItemPayloads.length?[]:null==(i="hover"===n?e.itemInteraction.hover.dataKey:e.itemInteraction.click.dataKey)&&null!=r?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.dataKey)===i});var i},QO=e=>e.options.tooltipPayloadSearcher,XO=e=>e.tooltip;function JO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JO(Object(n),!0).forEach(function(t){ZO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ZO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eD=(e,t,n,r,i,a,s)=>{if(null!=t&&null!=a){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:u}=n;return e.reduce((e,n)=>{var d,h,p,{dataDefinedOnItem:m,settings:f}=n,g=function(e,t){return null!=e?e:t}(m,o),v=Array.isArray(g)?Pk(g,c,u):g,y=null!==(d=null===f||void 0===f?void 0:f.dataKey)&&void 0!==d?d:null===r||void 0===r?void 0:r.dataKey,x=null===f||void 0===f?void 0:f.nameKey;(h=null!==r&&void 0!==r&&r.dataKey&&Array.isArray(v)&&!Array.isArray(v[0])&&"axis"===s?mb(v,r.dataKey,i):a(v,t,l,x),Array.isArray(h))?h.forEach(t=>{var n=$O($O({},f),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(Xk({tooltipEntrySettings:n,dataKey:t.dataKey,payload:t.payload,value:Rk(t.payload,t.dataKey),name:t.name}))}):e.push(Xk({tooltipEntrySettings:f,dataKey:y,payload:h,value:Rk(h,y),name:null!==(p=Rk(h,x))&&void 0!==p?p:null===f||void 0===f?void 0:f.name}));return e},[])}},tD=nk([BI,wC,rP,uI,UI],eO),nD=nk([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),rD=nk([UI,VI],iP),iD=nk([nD,BI,rD],oP),aD=nk([iD],e=>e.filter(HI)),sD=nk([iD],hP),oD=nk([sD,DA],mP),lD=nk([aD,DA,BI],qI),cD=nk([oD,BI,iD],gP),uD=nk([BI],PP),dD=nk([iD],e=>e.filter(HI)),hD=nk([lD,dD,cI],wP),pD=nk([hD,DA,UI],kP),mD=nk([iD],uP),fD=nk([oD,BI,mD,EP,UI],SP),gD=nk([DP,UI,VI],MP),vD=nk([gD,UI],VP),yD=nk([LP,UI,VI],MP),xD=nk([yD,UI],qP),bD=nk([FP,UI,VI],MP),jD=nk([bD,UI],WP),wD=nk([vD,jD,xD],OP),ND=nk([BI,uD,pD,fD,wD,wC,UI],QP),kD=nk([BI,wC,oD,cD,cI,UI,ND],$P),CD=nk([kD,BI,tD],rO),SD=nk([BI,kD,CD,UI],aO),ED=e=>{var t=UI(e),n=VI(e);return pO(e,t,n,!1)},TD=nk([BI,ED],NI),_D=nk([BI,tD,SD,TD],nO),AD=nk([wC,cD,BI,UI],EO),ID=nk([wC,cD,BI,UI],_O),PD=nk([wC,BI,tD,_D,ED,AD,ID,UI],(e,t,n,r,i,a,s,o)=>{if(t){var{type:l}=t,c=Lk(e,o);if(r){var u="scaleBand"===n&&r.bandwidth?r.bandwidth()/2:2,d="category"===l&&r.bandwidth?r.bandwidth()/u:0;return d="angleAxis"===o&&null!=i&&(null===i||void 0===i?void 0:i.length)>=2?2*rb(i[0]-i[1])*d:d,c&&s?s.map((e,t)=>({coordinate:r(e)+d,value:e,index:t,offset:d})):r.domain().map((e,t)=>({coordinate:r(e)+d,value:a?a[e]:e,index:t,offset:d}))}}}),OD=nk([LO,zO,e=>e.tooltip.settings],(e,t,n)=>FO(n.shared,e,t)),DD=e=>e.tooltip.settings.trigger,MD=e=>e.tooltip.settings.defaultIndex,RD=nk([XO,OD,DD,MD],WO),LD=nk([RD,oD],KO),zD=nk([PD,LD],VO),FD=nk([RD],e=>{if(e)return e.dataKey}),UD=nk([XO,OD,DD,MD],YO),VD=nk([$k,Zk,wC,cC,PD,MD,UD,QO],GO),BD=nk([RD,VD],(e,t)=>null!==e&&void 0!==e&&e.coordinate?e.coordinate:t),qD=nk([RD],e=>e.active),HD=nk([UD,LD,DA,BI,zD,QO,OD],eD),WD=nk([HD],e=>{if(null!=e){var t=e.map(e=>e.payload).filter(e=>null!=e);return Array.from(new Set(t))}}),KD=()=>dk(uI),GD=(e,t)=>t,YD=(e,t,n)=>n,QD=(e,t,n,r)=>r,XD=nk(PD,e=>pk()(e,e=>e.coordinate)),JD=nk([XO,GD,YD,QD],WO),$D=nk([JD,oD],KO),ZD=nk([XO,GD,YD,QD],YO),eM=nk([$k,Zk,wC,cC,PD,QD,ZD,QO],GO),tM=nk([JD,eM],(e,t)=>{var n;return null!==(n=e.coordinate)&&void 0!==n?n:t}),nM=nk(PD,$D,VO),rM=nk([ZD,$D,DA,BI,nM,QO,GD],eD),iM=nk([JD],e=>({isActive:e.active,activeIndex:e.index})),aM=nk([(e,t)=>t,wC,RI,UI,TD,PD,XD,cC],(e,t,n,r,i,a,s,o)=>{if(e&&t&&r&&i&&a){var l=function(e,t,n,r,i){return"horizontal"===n||"vertical"===n?e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height?{x:e,y:t}:null:r?Ik({x:e,y:t},r):null}(e.chartX,e.chartY,t,n,o);if(l){var c=((e,t)=>"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius)(l,t),u=((e,t,n,r,i)=>{var a,s=-1,o=null!==(a=null===t||void 0===t?void 0:t.length)&&void 0!==a?a:0;if(o<=1||null==e)return 0;if("angleAxis"===r&&null!=i&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<o;l++){var c=l>0?n[l-1].coordinate:n[o-1].coordinate,u=n[l].coordinate,d=l>=o-1?n[0].coordinate:n[l+1].coordinate,h=void 0;if(rb(u-c)!==rb(d-u)){var p=[];if(rb(d-u)===rb(i[1]-i[0])){h=d;var m=u+i[1]-i[0];p[0]=Math.min(m,(m+c)/2),p[1]=Math.max(m,(m+c)/2)}else{h=c;var f=d+i[1]-i[0];p[0]=Math.min(u,(f+u)/2),p[1]=Math.max(u,(f+u)/2)}var g=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(e>g[0]&&e<=g[1]||e>=p[0]&&e<=p[1]){({index:s}=n[l]);break}}else{var v=Math.min(c,d),y=Math.max(c,d);if(e>(v+u)/2&&e<=(y+u)/2){({index:s}=n[l]);break}}}else if(t)for(var x=0;x<o;x++)if(0===x&&e<=(t[x].coordinate+t[x+1].coordinate)/2||x>0&&x<o-1&&e>(t[x].coordinate+t[x-1].coordinate)/2&&e<=(t[x].coordinate+t[x+1].coordinate)/2||x===o-1&&e>(t[x].coordinate+t[x-1].coordinate)/2){({index:s}=t[x]);break}return s})(c,s,a,r,i),d=((e,t,n,r)=>{var i=t.find(e=>e&&e.index===n);if(i){if("horizontal"===e)return{x:i.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:i.coordinate};if("centric"===e){var a=i.coordinate,{radius:s}=r;return Dk(Dk(Dk({},r),Ek(r.cx,r.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:l}=r;return Dk(Dk(Dk({},r),Ek(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}})(t,a,u,l);return{activeIndex:String(u),activeCoordinate:d}}}}),sM=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},oM=Sj("mouseClick"),lM=xw();lM.startListening({actionCreator:oM,effect:(e,t)=>{var n=e.payload,r=aM(t.getState(),sM(n));null!=(null===r||void 0===r?void 0:r.activeIndex)&&t.dispatch(DN({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var cM=Sj("mouseMove"),uM=xw();function dM(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}function hM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hM(Object(n),!0).forEach(function(t){mM(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function mM(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}uM.startListening({actionCreator:cM,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=UO(r,r.tooltip.settings.shared),a=aM(r,sM(n));"axis"===i&&(null!=(null===a||void 0===a?void 0:a.activeIndex)?t.dispatch(ON({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(IN()))}});var fM=Uj({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=pM(pM({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:gM,removeXAxis:vM,addYAxis:yM,removeYAxis:xM,addZAxis:bM,removeZAxis:jM,updateYAxisWidth:wM}=fM.actions,NM=fM.reducer,kM=Uj({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=bj(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=bj(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=bj(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:CM,replaceCartesianGraphicalItem:SM,removeCartesianGraphicalItem:EM,addPolarGraphicalItem:TM,removePolarGraphicalItem:_M}=kM.actions,AM=kM.reducer,IM=Uj({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=bj(e).dots.findIndex(e=>e===t.payload);-1!==n&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=bj(e).areas.findIndex(e=>e===t.payload);-1!==n&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=bj(e).lines.findIndex(e=>e===t.payload);-1!==n&&e.lines.splice(n,1)}}}),{addDot:PM,removeDot:OM,addArea:DM,removeArea:MM,addLine:RM,removeLine:LM}=IM.actions,zM=IM.reducer,FM={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},UM=Uj({name:"brush",initialState:FM,reducers:{setBrushSettings:(e,t)=>null==t.payload?FM:t.payload}}),{setBrushSettings:VM}=UM.actions,BM=UM.reducer,qM=Uj({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=bj(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:HM,setLegendSettings:WM,addLegendPayload:KM,removeLegendPayload:GM}=qM.actions,YM=qM.reducer,QM={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},XM=Uj({name:"rootProps",initialState:QM,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(n=t.payload.barGap)&&void 0!==n?n:QM.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),JM=XM.reducer,{updateOptions:$M}=XM.actions,ZM=Uj({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:eR,removeRadiusAxis:tR,addAngleAxis:nR,removeAngleAxis:rR}=ZM.actions,iR=ZM.reducer,aR=Uj({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:sR}=aR.actions,oR=aR.reducer,lR=Sj("keyDown"),cR=Sj("focus"),uR=xw();uR.startListening({actionCreator:lR,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:r}=n.tooltip,i=e.payload;if("ArrowRight"===i||"ArrowLeft"===i||"Enter"===i){var a=Number(KO(r,oD(n))),s=PD(n);if("Enter"!==i){var o=a+("ArrowRight"===i?1:-1)*("left-to-right"===RO(n)?1:-1);if(!(null==s||o>=s.length||o<0)){var l=eM(n,"axis","hover",String(o));t.dispatch(RN({active:!0,activeIndex:o.toString(),activeDataKey:void 0,activeCoordinate:l}))}}else{var c=eM(n,"axis","hover",String(r.index));t.dispatch(RN({active:!r.active,activeIndex:r.index,activeDataKey:r.dataKey,activeCoordinate:c}))}}}}}),uR.startListening({actionCreator:cR,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&null==r.index){var i=eM(n,"axis","hover",String("0"));t.dispatch(RN({activeDataKey:void 0,active:!0,activeIndex:"0",activeCoordinate:i}))}}}});var dR=Sj("externalEvent"),hR=xw();hR.startListening({actionCreator:dR,effect:(e,t)=>{if(null!=e.payload.handler){var n=t.getState(),r={activeCoordinate:BD(n),activeDataKey:FD(n),activeIndex:LD(n),activeLabel:zD(n),activeTooltipIndex:LD(n),isTooltipActive:qD(n)};e.payload.handler(r,e.payload.reactEvent)}}});var pR=nk([XO],e=>e.tooltipItemPayloads),mR=nk([pR,QO,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(e=>e.settings.dataKey===r);if(null!=i){var{positions:a}=i;if(null!=a)return t(a,n)}}),fR=Sj("touchMove"),gR=xw();gR.startListening({actionCreator:fR,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=UO(r,r.tooltip.settings.shared);if("axis"===i){var a=aM(r,sM({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));null!=(null===a||void 0===a?void 0:a.activeIndex)&&t.dispatch(ON({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if("item"===i){var s,o=n.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(iC),u=null!==(s=l.getAttribute(aC))&&void 0!==s?s:void 0,d=mR(t.getState(),c,u);t.dispatch(_N({activeDataKey:u,activeIndex:c,activeCoordinate:d}))}}});var vR=Uj({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(e=>e.dataKey!==r.dataKey||e.direction!==r.direction))}}}),{addErrorBar:yR,removeErrorBar:xR}=vR.actions,bR=Tb({brush:BM,cartesianAxis:NM,chartData:BN,errorBars:vR.reducer,graphicalItems:AM,layout:YN,legend:YM,options:Nw,polarAxis:iR,polarOptions:oR,referenceElements:zM,rootProps:JM,tooltip:LN});function jR(e){var{preloadedState:t,children:n,reduxStoreName:i}=e,a=pC(),s=(0,r.useRef)(null);if(a)return n;null==s.current&&(s.current=function(e){return Oj({reducer:bR,preloadedState:e,middleware:e=>e({serializableCheck:!1}).concat([lM.middleware,uM.middleware,uR.middleware,hR.middleware,gR.middleware]),devTools:{serialize:{replacer:dM},name:"recharts-".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart")}})}(t,i));var o=ak;return r.createElement(Mw,{context:o,store:s.current},n)}var wR=e=>{var{chartData:t}=e,n=ok(),i=pC();return(0,r.useEffect)(()=>i?()=>{}:(n(FN(t)),()=>{n(FN(void 0))}),[t,n,i]),null};function NR(e){var{layout:t,width:n,height:i,margin:a}=e,s=ok(),o=pC();return(0,r.useEffect)(()=>{o||(s(WN(t)),s(KN({width:n,height:i})),s(HN(a)))},[s,o,t,n,i,a]),null}function kR(e){var t=ok();return(0,r.useEffect)(()=>{t($M(e))},[t,e]),null}var CR=()=>dk(e=>e.rootProps.accessibilityLayer),SR=n(2086),ER=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function TR(e){return"string"===typeof e&&ER.includes(e)}var _R=["points","pathLength"],AR={svg:["viewBox","children"],polygon:_R,polyline:_R},IR=(e,t)=>{if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,r.isValidElement)(e)&&(n=e.props),"object"!==typeof n&&"function"!==typeof n)return null;var i={};return Object.keys(n).forEach(e=>{TR(e)&&(i[e]=t||(t=>n[e](n,t)))}),i},PR=(e,t,n)=>{if(null===e||"object"!==typeof e&&"function"!==typeof e)return null;var r=null;return Object.keys(e).forEach(i=>{var a=e[i];TR(i)&&"function"===typeof a&&(r||(r={}),r[i]=((e,t,n)=>r=>(e(t,n,r),null))(a,t,n))}),r},OR=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function DR(e){return"string"===typeof e&&OR.includes(e)}function MR(e){var t=Object.entries(e).filter(e=>{var[t]=e;return DR(t)});return Object.fromEntries(t)}var RR=e=>"string"===typeof e?e:e?e.displayName||e.name||"Component":"",LR=null,zR=null,FR=e=>{if(e===LR&&Array.isArray(zR))return zR;var t=[];return r.Children.forEach(e,e=>{fb(e)||((0,SR.isFragment)(e)?t=t.concat(FR(e.props.children)):t.push(e))}),zR=t,LR=e,t};function UR(e,t){var n=[],r=[];return r=Array.isArray(t)?t.map(e=>RR(e)):[RR(t)],FR(e).forEach(e=>{var t=nb()(e,"type.displayName")||nb()(e,"type.name");-1!==r.indexOf(t)&&n.push(e)}),n}var VR=e=>!e||"object"!==typeof e||!("clipDot"in e)||Boolean(e.clipDot),BR=(e,t,n)=>{if(!e||"function"===typeof e||"boolean"===typeof e)return null;var i=e;if((0,r.isValidElement)(e)&&(i=e.props),"object"!==typeof i&&"function"!==typeof i)return null;var a={};return Object.keys(i).forEach(e=>{var r;((e,t,n,r)=>{var i;if("symbol"===typeof t||"number"===typeof t)return!0;var a=null!==(i=r&&(null===AR||void 0===AR?void 0:AR[r]))&&void 0!==i?i:[],s=t.startsWith("data-"),o="function"!==typeof e&&(Boolean(r)&&a.includes(t)||DR(t)),l=Boolean(n)&&TR(t);return s||o||l})(null===(r=i)||void 0===r?void 0:r[e],e,t,n)&&(a[e]=i[e])}),a},qR=["children","width","height","viewBox","className","style","title","desc"];function HR(){return HR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HR.apply(null,arguments)}var WR=(0,r.forwardRef)((e,t)=>{var{children:n,width:i,height:a,viewBox:s,className:o,style:l,title:c,desc:u}=e,d=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,qR),h=s||{width:i,height:a,x:0,y:0},p=$x("recharts-surface",o);return r.createElement("svg",HR({},BR(d,!0,"svg"),{className:p,width:i,height:a,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),r.createElement("title",null,c),r.createElement("desc",null,u),n)}),KR=["children"];function GR(){return GR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GR.apply(null,arguments)}var YR={width:"100%",height:"100%"},QR=(0,r.forwardRef)((e,t)=>{var n=xC(),i=bC(),a=CR();if(!zA(n)||!zA(i))return null;var s,o,{children:l,otherAttributes:c,title:u,desc:d}=e;return s="number"===typeof c.tabIndex?c.tabIndex:a?0:void 0,o="string"===typeof c.role?c.role:a?"application":void 0,r.createElement(WR,GR({},c,{title:u,desc:d,role:o,tabIndex:s,width:n,height:i,style:YR,ref:t}),l)}),XR=e=>{var{children:t}=e,n=dk(fC);if(!n)return null;var{width:i,height:a,y:s,x:o}=n;return r.createElement(WR,{width:i,height:a,x:o,y:s},t)},JR=(0,r.forwardRef)((e,t)=>{var{children:n}=e,i=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,KR);return pC()?r.createElement(XR,null,n):r.createElement(QR,GR({ref:t},i),n)});var $R=new(n(8499)),ZR="recharts.syncEvent.tooltip",eL="recharts.syncEvent.brush";function tL(e){return e.tooltip.syncInteraction}var nL=()=>{};function rL(){var e=ok();(0,r.useEffect)(()=>{e(kw())},[e]),function(){var e=dk(dI),t=dk(pI),n=ok(),i=dk(hI),a=dk(PD),s=NC(),o=gC(),l=dk(e=>e.rootProps.className);(0,r.useEffect)(()=>{if(null==e)return nL;var r=(r,l,c)=>{if(t!==c&&e===r)if("index"!==i){if(null!=a){var u;if("function"===typeof i){var d={activeTooltipIndex:null==l.payload.index?void 0:Number(l.payload.index),isTooltipActive:l.payload.active,activeIndex:null==l.payload.index?void 0:Number(l.payload.index),activeLabel:l.payload.label,activeDataKey:l.payload.dataKey,activeCoordinate:l.payload.coordinate},h=i(a,d);u=a[h]}else"value"===i&&(u=a.find(e=>String(e.value)===l.payload.label));var{coordinate:p}=l.payload;if(null!=u&&!1!==l.payload.active&&null!=p&&null!=o){var{x:m,y:f}=p,g=Math.min(m,o.x+o.width),v=Math.min(f,o.y+o.height),y={x:"horizontal"===s?u.coordinate:g,y:"horizontal"===s?v:u.coordinate},x=MN({active:l.payload.active,coordinate:y,dataKey:l.payload.dataKey,index:String(u.index),label:l.payload.label});n(x)}else n(MN({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}))}}else n(l)};return $R.on(ZR,r),()=>{$R.off(ZR,r)}},[l,n,t,e,i,a,s,o])}(),function(){var e=dk(dI),t=dk(pI),n=ok();(0,r.useEffect)(()=>{if(null==e)return nL;var r=(r,i,a)=>{t!==a&&e===r&&n(UN(i))};return $R.on(eL,r),()=>{$R.off(eL,r)}},[n,t,e])}()}function iL(e,t,n,i,a,s){var o=dk(n=>((e,t,n)=>{if(null!=t){var r=XO(e);return"axis"===t?"hover"===n?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:"hover"===n?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}})(n,e,t)),l=dk(pI),c=dk(dI),u=dk(hI),d=dk(tL),h=null===d||void 0===d?void 0:d.active;(0,r.useEffect)(()=>{if(!h&&null!=c&&null!=l){var e=MN({active:s,coordinate:n,dataKey:o,index:a,label:"number"===typeof i?String(i):i});$R.emit(ZR,c,e,l)}},[h,n,o,a,i,l,c,u,s])}var aL=(0,r.createContext)(null),sL=(0,r.createContext)(null);function oL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oL(Object(n),!0).forEach(function(t){cL(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function cL(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uL=(0,r.forwardRef)((e,t)=>{var{children:n,className:i,height:a,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:h,onMouseUp:p,onTouchEnd:m,onTouchMove:f,onTouchStart:g,style:v,width:y}=e,x=ok(),[b,j]=(0,r.useState)(null),[w,N]=(0,r.useState)(null);rL();var k=function(){var e=ok(),[t,n]=(0,r.useState)(null),i=dk(eC);return(0,r.useEffect)(()=>{if(null!=t){var n=t.getBoundingClientRect().width/t.offsetWidth;LA(n)&&n!==i&&e(GN(n))}},[t,e,i]),n}(),C=(0,r.useCallback)(e=>{k(e),"function"===typeof t&&t(e),j(e),N(e)},[k,t,j,N]),S=(0,r.useCallback)(e=>{x(oM(e)),x(dR({handler:s,reactEvent:e}))},[x,s]),E=(0,r.useCallback)(e=>{x(cM(e)),x(dR({handler:u,reactEvent:e}))},[x,u]),T=(0,r.useCallback)(e=>{x(IN()),x(dR({handler:d,reactEvent:e}))},[x,d]),_=(0,r.useCallback)(e=>{x(cM(e)),x(dR({handler:h,reactEvent:e}))},[x,h]),A=(0,r.useCallback)(()=>{x(cR())},[x]),I=(0,r.useCallback)(e=>{x(lR(e.key))},[x]),P=(0,r.useCallback)(e=>{x(dR({handler:o,reactEvent:e}))},[x,o]),O=(0,r.useCallback)(e=>{x(dR({handler:l,reactEvent:e}))},[x,l]),D=(0,r.useCallback)(e=>{x(dR({handler:c,reactEvent:e}))},[x,c]),M=(0,r.useCallback)(e=>{x(dR({handler:p,reactEvent:e}))},[x,p]),R=(0,r.useCallback)(e=>{x(dR({handler:g,reactEvent:e}))},[x,g]),L=(0,r.useCallback)(e=>{x(fR(e)),x(dR({handler:f,reactEvent:e}))},[x,f]),z=(0,r.useCallback)(e=>{x(dR({handler:m,reactEvent:e}))},[x,m]);return r.createElement(aL.Provider,{value:b},r.createElement(sL.Provider,{value:w},r.createElement("div",{className:$x("recharts-wrapper",i),style:lL({position:"relative",cursor:"default",width:y,height:a},v),onClick:S,onContextMenu:P,onDoubleClick:O,onFocus:A,onKeyDown:I,onMouseDown:D,onMouseEnter:E,onMouseLeave:T,onMouseMove:_,onMouseUp:M,onTouchEnd:z,onTouchMove:L,onTouchStart:R,ref:C},n)))}),dL=nk([cC],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),hL=nk([dL,$k,Zk],(e,t,n)=>{if(e&&null!=t&&null!=n)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),pL=()=>dk(hL),mL=(0,r.createContext)(void 0),fL=e=>{var{children:t}=e,[n]=(0,r.useState)("".concat(cb("recharts"),"-clip")),i=pL();if(null==i)return null;var{x:a,y:s,width:o,height:l}=i;return r.createElement(mL.Provider,{value:n},r.createElement("defs",null,r.createElement("clipPath",{id:n},r.createElement("rect",{x:a,y:s,height:l,width:o}))),t)},gL=["children","className","width","height","style","compact","title","desc"];var vL=(0,r.forwardRef)((e,t)=>{var{children:n,className:i,width:a,height:s,style:o,compact:l,title:c,desc:u}=e,d=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,gL),h=MR(d);return l?r.createElement(JR,{otherAttributes:h,title:c,desc:u},n):r.createElement(uL,{className:i,style:o,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},r.createElement(JR,{otherAttributes:h,title:c,desc:u,ref:t},r.createElement(fL,null,n)))});function yL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xL(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bL(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yL(Object(n),!0).forEach(function(t){xL(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),r=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==r[t]&&(e[t]=r[t]),e),n)}var jL=["width","height"];function wL(){return wL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wL.apply(null,arguments)}var NL={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},kL=(0,r.forwardRef)(function(e,t){var n,i=bL(e.categoricalChartProps,NL),{width:a,height:s}=i,o=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(i,jL);if(!zA(a)||!zA(s))return null;var{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,categoricalChartProps:h}=e,p={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return r.createElement(jR,{preloadedState:{options:p},reduxStoreName:null!==(n=h.id)&&void 0!==n?n:l},r.createElement(wR,{chartData:h.data}),r.createElement(NR,{width:a,height:s,layout:i.layout,margin:i.margin}),r.createElement(kR,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),r.createElement(vL,wL({},o,{width:a,height:s,ref:t})))}),CL=["axis","item"],SL=(0,r.forwardRef)((e,t)=>r.createElement(kL,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:CL,tooltipPayloadSearcher:jw,categoricalChartProps:e,ref:t})),EL=!("undefined"!==typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout);function TL(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function AL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_L(Object(n),!0).forEach(function(t){IL(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_L(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function IL(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var PL=AL({},{cacheSize:2e3,enableCache:!0}),OL=new class{constructor(e){TL(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(PL.cacheSize),DL={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ML="recharts_measurement_span";var RL=(e,t)=>{try{var n=document.getElementById(ML);n||((n=document.createElement("span")).setAttribute("id",ML),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,DL,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch(i){return{width:0,height:0}}},LL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||EL)return{width:0,height:0};if(!PL.enableCache)return RL(e,t);var n=function(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",s=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}(e,t),r=OL.get(n);if(r)return r;var i=RL(e,t);return OL.set(n,i),i};function zL(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class FL{static create(e){return new FL(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==e){if(n)switch(n){case"start":default:return this.scale(e);case"middle":var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+r;case"end":var i=this.bandwidth?this.bandwidth():0;return this.scale(e)+i}if(t){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}zL(FL,"EPS",1e-4);function UL(e,t,n){if(t<1)return[];if(1===t&&void 0===n)return e;for(var r=[],i=0;i<e.length;i+=t){if(void 0!==n&&!0!==n(e[i]))return;r.push(e[i])}return r}function VL(e,t,n){return function(e){var{width:t,height:n}=e,r=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),i=r*Math.PI/180,a=Math.atan(n/t),s=i>a&&i<Math.PI-a?n/Math.sin(i):t/Math.cos(i);return Math.abs(s)}({width:e.width+t.width,height:e.height+t.height},n)}function BL(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function qL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function HL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qL(Object(n),!0).forEach(function(t){WL(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function WL(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KL(e,t,n){var r,{tick:i,ticks:a,viewBox:s,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:h}=e;if(!a||!a.length||!i)return[];if(sb(c)||EL)return null!==(r=function(e,t){return UL(e,t+1)}(a,sb(c)?c:0))&&void 0!==r?r:[];var p=[],m="top"===l||"bottom"===l?"width":"height",f=d&&"width"===m?LL(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},g=(e,r)=>{var i="function"===typeof u?u(e.value,r):e.value;return"width"===m?VL(LL(i,{fontSize:t,letterSpacing:n}),f,h):LL(i,{fontSize:t,letterSpacing:n})[m]},v=a.length>=2?rb(a[1].coordinate-a[0].coordinate):1,y=function(e,t,n){var r="width"===n,{x:i,y:a,width:s,height:o}=e;return 1===t?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}(s,v,m);return"equidistantPreserveStart"===c?function(e,t,n,r,i){for(var a,s=(r||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,h=function(){var t=null===r||void 0===r?void 0:r[c];if(void 0===t)return{v:UL(r,u)};var a,s=c,h=()=>(void 0===a&&(a=n(t,s)),a),p=t.coordinate,m=0===c||BL(e,p,h,d,l);m||(c=0,d=o,u+=1),m&&(d=p+e*(h()/2+i),c+=u)};u<=s.length;)if(a=h())return a.v;return[]}(v,y,g,a,o):(p="preserveStart"===c||"preserveStartEnd"===c?function(e,t,n,r,i,a){var s=(r||[]).slice(),o=s.length,{start:l,end:c}=t;if(a){var u=r[o-1],d=n(u,o-1),h=e*(u.coordinate+e*d/2-c);s[o-1]=u=HL(HL({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate}),BL(e,u.tickCoord,()=>d,l,c)&&(c=u.tickCoord-e*(d/2+i),s[o-1]=HL(HL({},u),{},{isShow:!0}))}for(var p=a?o-1:o,m=function(t){var r,a=s[t],o=()=>(void 0===r&&(r=n(a,t)),r);if(0===t){var u=e*(a.coordinate-e*o()/2-l);s[t]=a=HL(HL({},a),{},{tickCoord:u<0?a.coordinate-u*e:a.coordinate})}else s[t]=a=HL(HL({},a),{},{tickCoord:a.coordinate});BL(e,a.tickCoord,o,l,c)&&(l=a.tickCoord+e*(o()/2+i),s[t]=HL(HL({},a),{},{isShow:!0}))},f=0;f<p;f++)m(f);return s}(v,y,g,a,o,"preserveStartEnd"===c):function(e,t,n,r,i){for(var a=(r||[]).slice(),s=a.length,{start:o}=t,{end:l}=t,c=function(t){var r,c=a[t],u=()=>(void 0===r&&(r=n(c,t)),r);if(t===s-1){var d=e*(c.coordinate+e*u()/2-l);a[t]=c=HL(HL({},c),{},{tickCoord:d>0?c.coordinate-d*e:c.coordinate})}else a[t]=c=HL(HL({},c),{},{tickCoord:c.coordinate});BL(e,c.tickCoord,u,o,l)&&(l=c.tickCoord-e*(u()/2+i),a[t]=HL(HL({},c),{},{isShow:!0}))},u=s-1;u>=0;u--)c(u);return a}(v,y,g,a,o),p.filter(e=>e.isShow))}function GL(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}var YL=["children","className"];function QL(){return QL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QL.apply(null,arguments)}var XL=r.forwardRef((e,t)=>{var{children:n,className:i}=e,a=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,YL),s=$x("recharts-layer",i);return r.createElement("g",QL({className:s},BR(a,!0),{ref:t}),n)}),JL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$L=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ZL=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,ez=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,tz={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},nz=Object.keys(tz),rz="NaN";class iz{static parse(e){var t,[,n,r]=null!==(t=ez.exec(e))&&void 0!==t?t:[];return new iz(parseFloat(n),null!==r&&void 0!==r?r:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,ib(e)&&(this.unit=""),""===t||ZL.test(t)||(this.num=NaN,this.unit=""),nz.includes(t)&&(this.num=function(e,t){return e*tz[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new iz(NaN,""):new iz(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new iz(NaN,""):new iz(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new iz(NaN,""):new iz(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new iz(NaN,""):new iz(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ib(this.num)}}function az(e){if(e.includes(rz))return rz;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,a]=null!==(n=JL.exec(t))&&void 0!==n?n:[],s=iz.parse(null!==r&&void 0!==r?r:""),o=iz.parse(null!==a&&void 0!==a?a:""),l="*"===i?s.multiply(o):s.divide(o);if(l.isNaN())return rz;t=t.replace(JL,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,u,d,h]=null!==(c=$L.exec(t))&&void 0!==c?c:[],p=iz.parse(null!==u&&void 0!==u?u:""),m=iz.parse(null!==h&&void 0!==h?h:""),f="+"===d?p.add(m):p.subtract(m);if(f.isNaN())return rz;t=t.replace($L,f.toString())}return t}var sz=/\(([^()]*)\)/;function oz(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,n=e;null!=(t=sz.exec(n));){var[,r]=t;n=n.replace(sz,az(r))}return n}(t),t=az(t)}function lz(e){var t=function(e){try{return oz(e)}catch(t){return rz}}(e.slice(5,-1));return t===rz?"":t}var cz=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],uz=["dx","dy","angle","className","breakAll"];function dz(){return dz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dz.apply(null,arguments)}function hz(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var pz=/[ \f\n\r\t\v\u2028\u2029]+/,mz=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];return fb(t)||(i=n?t.toString().split(""):t.toString().split(pz)),{wordsWithComputedWidth:i.map(e=>({word:e,width:LL(e,r).width})),spaceWidth:n?0:LL("\xa0",r).width}}catch(a){return null}},fz=e=>[{words:fb(e)?[]:e.toString().split(pz)}],gz=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:s}=e;if((t||n)&&!EL){var o=mz({breakAll:a,children:r,style:i});if(!o)return fz(r);var{wordsWithComputedWidth:l,spaceWidth:c}=o;return((e,t,n,r,i)=>{var{maxLines:a,children:s,style:o,breakAll:l}=e,c=sb(a),u=s,d=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((e,t)=>{var{word:a,width:s}=t,o=e[e.length-1];if(o&&(null==r||i||o.width+s+n<Number(r)))o.words.push(a),o.width+=s+n;else{var l={words:[a],width:s};e.push(l)}return e},[])},h=d(t),p=e=>e.reduce((e,t)=>e.width>t.width?e:t);if(!c||i)return h;if(!(h.length>a||p(h).width>Number(r)))return h;for(var m,f=e=>{var t=u.slice(0,e),n=mz({breakAll:l,style:o,children:t+"\u2026"}).wordsWithComputedWidth,i=d(n);return[i.length>a||p(i).width>Number(r),i]},g=0,v=u.length-1,y=0;g<=v&&y<=u.length-1;){var x=Math.floor((g+v)/2),b=x-1,[j,w]=f(b),[N]=f(x);if(j||N||(g=x+1),j&&N&&(v=x-1),!j&&N){m=w;break}y++}return m||h})({breakAll:a,children:r,maxLines:s,style:i},l,c,t,n)}return fz(r)},vz="#808080",yz=(0,r.forwardRef)((e,t)=>{var{x:n=0,y:i=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=vz}=e,d=hz(e,cz),h=(0,r.useMemo)(()=>gz({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:p,dy:m,angle:f,className:g,breakAll:v}=d,y=hz(d,uz);if(!ob(n)||!ob(i))return null;var x,b=n+(sb(p)?p:0),j=i+(sb(m)?m:0);switch(c){case"start":x=lz("calc(".concat(s,")"));break;case"middle":x=lz("calc(".concat((h.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:x=lz("calc(".concat(h.length-1," * -").concat(a,")"))}var w=[];if(o){var N=h[0].width,{width:k}=d;w.push("scale(".concat(sb(k)?k/N:1,")"))}return f&&w.push("rotate(".concat(f,", ").concat(b,", ").concat(j,")")),w.length&&(y.transform=w.join(" ")),r.createElement("text",dz({},BR(y,!0),{ref:t,x:b,y:j,className:$x("recharts-text",g),textAnchor:l,fill:u.includes("url")?vz:u}),h.map((e,t)=>{var n=e.words.join(v?"":" ");return r.createElement("tspan",{x:b,dy:0===t?x:a,key:"".concat(n,"-").concat(t)},n)}))});yz.displayName="Text";var xz=["offset"],bz=["labelRef"];function jz(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wz(Object(n),!0).forEach(function(t){kz(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wz(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function kz(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cz(){return Cz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cz.apply(null,arguments)}var Sz=e=>null!=e&&"function"===typeof e,Ez=(e,t,n,i)=>{var a,s,{position:o,offset:l,className:c}=e,{cx:u,cy:d,innerRadius:h,outerRadius:p,startAngle:m,endAngle:f,clockWise:g}=i,v=(h+p)/2,y=((e,t)=>rb(t-e)*Math.min(Math.abs(t-e),360))(m,f),x=y>=0?1:-1;"insideStart"===o?(a=m+x*l,s=g):"insideEnd"===o?(a=f-x*l,s=!g):"end"===o&&(a=f+x*l,s=g),s=y<=0?s:!s;var b=Ek(u,d,v,a),j=Ek(u,d,v,a+359*(s?1:-1)),w="M".concat(b.x,",").concat(b.y,"\n    A").concat(v,",").concat(v,",0,1,").concat(s?0:1,",\n    ").concat(j.x,",").concat(j.y),N=fb(e.id)?cb("recharts-radial-line-"):e.id;return r.createElement("text",Cz({},n,{dominantBaseline:"central",className:$x("recharts-radial-bar-label",c)}),r.createElement("defs",null,r.createElement("path",{id:N,d:w})),r.createElement("textPath",{xlinkHref:"#".concat(N)},t))};function Tz(e){var{offset:t=5}=e,n=Nz({offset:t},jz(e,xz)),{viewBox:i,position:a,value:s,children:o,content:l,className:c="",textBreakAll:u,labelRef:d}=n,h=dk(RI),p=gC(),m=i||("center"===a?p:null!==h&&void 0!==h?h:p);if(!m||fb(s)&&fb(o)&&!(0,r.isValidElement)(l)&&"function"!==typeof l)return null;var f,g=Nz(Nz({},n),{},{viewBox:m});if((0,r.isValidElement)(l)){var{labelRef:v}=g,y=jz(g,bz);return(0,r.cloneElement)(l,y)}if("function"===typeof l){if(f=(0,r.createElement)(l,g),(0,r.isValidElement)(f))return f}else f=(e=>{var{value:t,formatter:n}=e,r=fb(e.children)?t:e.children;return"function"===typeof n?n(r):r})(n);var x=(e=>"cx"in e&&sb(e.cx))(m),b=BR(n,!0);if(x&&("insideStart"===a||"insideEnd"===a||"end"===a))return Ez(n,f,b,m);var j=x?((e,t,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:l}=e,c=(o+l)/2;if("outside"===n){var{x:u,y:d}=Ek(r,i,s+t,c);return{x:u,y:d,textAnchor:u>=r?"start":"end",verticalAnchor:"middle"}}if("center"===n)return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===n)return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===n)return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(a+s)/2,{x:p,y:m}=Ek(r,i,h,c);return{x:p,y:m,textAnchor:"middle",verticalAnchor:"middle"}})(m,n.offset,n.position):((e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,{x:a,y:s,width:o,height:l}=t,c=l>=0?1:-1,u=c*r,d=c>0?"end":"start",h=c>0?"start":"end",p=o>=0?1:-1,m=p*r,f=p>0?"end":"start",g=p>0?"start":"end";if("top"===i)return Nz(Nz({},{x:a+o/2,y:s-c*r,textAnchor:"middle",verticalAnchor:d}),n?{height:Math.max(s-n.y,0),width:o}:{});if("bottom"===i)return Nz(Nz({},{x:a+o/2,y:s+l+u,textAnchor:"middle",verticalAnchor:h}),n?{height:Math.max(n.y+n.height-(s+l),0),width:o}:{});if("left"===i){var v={x:a-m,y:s+l/2,textAnchor:f,verticalAnchor:"middle"};return Nz(Nz({},v),n?{width:Math.max(v.x-n.x,0),height:l}:{})}if("right"===i){var y={x:a+o+m,y:s+l/2,textAnchor:g,verticalAnchor:"middle"};return Nz(Nz({},y),n?{width:Math.max(n.x+n.width-y.x,0),height:l}:{})}var x=n?{width:o,height:l}:{};return"insideLeft"===i?Nz({x:a+m,y:s+l/2,textAnchor:g,verticalAnchor:"middle"},x):"insideRight"===i?Nz({x:a+o-m,y:s+l/2,textAnchor:f,verticalAnchor:"middle"},x):"insideTop"===i?Nz({x:a+o/2,y:s+u,textAnchor:"middle",verticalAnchor:h},x):"insideBottom"===i?Nz({x:a+o/2,y:s+l-u,textAnchor:"middle",verticalAnchor:d},x):"insideTopLeft"===i?Nz({x:a+m,y:s+u,textAnchor:g,verticalAnchor:h},x):"insideTopRight"===i?Nz({x:a+o-m,y:s+u,textAnchor:f,verticalAnchor:h},x):"insideBottomLeft"===i?Nz({x:a+m,y:s+l-u,textAnchor:g,verticalAnchor:d},x):"insideBottomRight"===i?Nz({x:a+o-m,y:s+l-u,textAnchor:f,verticalAnchor:d},x):i&&"object"===typeof i&&(sb(i.x)||ab(i.x))&&(sb(i.y)||ab(i.y))?Nz({x:a+ub(i.x,o),y:s+ub(i.y,l),textAnchor:"end",verticalAnchor:"end"},x):Nz({x:a+o/2,y:s+l/2,textAnchor:"middle",verticalAnchor:"middle"},x)})(n,m);return r.createElement(yz,Cz({ref:d,className:$x("recharts-label",c)},b,j,{breakAll:u}),f)}Tz.displayName="Label";var _z=e=>{var{cx:t,cy:n,angle:r,startAngle:i,endAngle:a,r:s,radius:o,innerRadius:l,outerRadius:c,x:u,y:d,top:h,left:p,width:m,height:f,clockWise:g,labelViewBox:v}=e;if(v)return v;if(sb(m)&&sb(f)){if(sb(u)&&sb(d))return{x:u,y:d,width:m,height:f};if(sb(h)&&sb(p))return{x:h,y:p,width:m,height:f}}return sb(u)&&sb(d)?{x:u,y:d,width:0,height:0}:sb(t)&&sb(n)?{cx:t,cy:n,startAngle:i||r||0,endAngle:a||r||0,innerRadius:l||0,outerRadius:c||o||s||0,clockWise:g}:e.viewBox?e.viewBox:void 0};Tz.parseViewBox=_z,Tz.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var{children:i,labelRef:a}=e,s=_z(e),o=UR(i,Tz).map((e,n)=>(0,r.cloneElement)(e,{viewBox:t||s,key:"label-".concat(n)}));if(!n)return o;var l=((e,t,n)=>{if(!e)return null;var i={viewBox:t,labelRef:n};return!0===e?r.createElement(Tz,Cz({key:"label-implicit"},i)):ob(e)?r.createElement(Tz,Cz({key:"label-implicit",value:e},i)):(0,r.isValidElement)(e)?e.type===Tz?(0,r.cloneElement)(e,Nz({key:"label-implicit"},i)):r.createElement(Tz,Cz({key:"label-implicit",content:e},i)):Sz(e)?r.createElement(Tz,Cz({key:"label-implicit",content:e},i)):e&&"object"===typeof e?r.createElement(Tz,Cz({},e,{key:"label-implicit"},i)):null})(e.label,t||s,a);return[l,...o]};var Az=["viewBox"],Iz=["viewBox"];function Pz(){return Pz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pz.apply(null,arguments)}function Oz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Dz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oz(Object(n),!0).forEach(function(t){Rz(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oz(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Mz(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Rz(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Lz extends r.Component{constructor(e){super(e),this.tickRefs=r.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(e,t){var{viewBox:n}=e,r=Mz(e,Az),i=this.props,{viewBox:a}=i,s=Mz(i,Iz);return!GL(n,a)||!GL(r,s)||!GL(t,this.state)}getTickLineCoord(e){var t,n,r,i,a,s,{x:o,y:l,width:c,height:u,orientation:d,tickSize:h,mirror:p,tickMargin:m}=this.props,f=p?-1:1,g=e.tickSize||h,v=sb(e.tickCoord)?e.tickCoord:e.coordinate;switch(d){case"top":t=n=e.coordinate,s=(r=(i=l+ +!p*u)-f*g)-f*m,a=v;break;case"left":r=i=e.coordinate,a=(t=(n=o+ +!p*c)-f*g)-f*m,s=v;break;case"right":r=i=e.coordinate,a=(t=(n=o+ +p*c)+f*g)+f*m,s=v;break;default:t=n=e.coordinate,s=(r=(i=l+ +p*u)+f*g)+f*m,a=v}return{line:{x1:t,y1:r,x2:n,y2:i},tick:{x:a,y:s}}}getTickTextAnchor(){var e,{orientation:t,mirror:n}=this.props;switch(t){case"left":e=n?"start":"end";break;case"right":e=n?"end":"start";break;default:e="middle"}return e}getTickVerticalAnchor(){var{orientation:e,mirror:t}=this.props;switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}renderAxisLine(){var{x:e,y:t,width:n,height:i,orientation:a,mirror:s,axisLine:o}=this.props,l=Dz(Dz(Dz({},BR(this.props,!1)),BR(o,!1)),{},{fill:"none"});if("top"===a||"bottom"===a){var c=+("top"===a&&!s||"bottom"===a&&s);l=Dz(Dz({},l),{},{x1:e,y1:t+c*i,x2:e+n,y2:t+c*i})}else{var u=+("left"===a&&!s||"right"===a&&s);l=Dz(Dz({},l),{},{x1:e+u*n,y1:t,x2:e+u*n,y2:t+i})}return r.createElement("line",Pz({},l,{className:$x("recharts-cartesian-axis-line",nb()(o,"className"))}))}static renderTickItem(e,t,n){var i,a=$x(t.className,"recharts-cartesian-axis-tick-value");if(r.isValidElement(e))i=r.cloneElement(e,Dz(Dz({},t),{},{className:a}));else if("function"===typeof e)i=e(Dz(Dz({},t),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";"boolean"!==typeof e&&(s=$x(s,e.className)),i=r.createElement(yz,Pz({},t,{className:s}),n)}return i}renderTicks(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],{tickLine:i,stroke:a,tick:s,tickFormatter:o,unit:l,padding:c}=this.props,u=KL(Dz(Dz({},this.props),{},{ticks:n}),e,t),d=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),p=MR(this.props),m=BR(s,!1),f=Dz(Dz({},p),{},{fill:"none"},BR(i,!1)),g=u.map((e,t)=>{var{line:n,tick:g}=this.getTickLineCoord(e),v=Dz(Dz(Dz(Dz({textAnchor:d,verticalAnchor:h},p),{},{stroke:"none",fill:a},m),g),{},{index:t,payload:e,visibleTicksCount:u.length,tickFormatter:o,padding:c});return r.createElement(XL,Pz({className:"recharts-cartesian-axis-tick",key:"tick-".concat(e.value,"-").concat(e.coordinate,"-").concat(e.tickCoord)},PR(this.props,e,t)),i&&r.createElement("line",Pz({},f,n,{className:$x("recharts-cartesian-axis-tick-line",nb()(i,"className"))})),s&&Lz.renderTickItem(s,v,"".concat("function"===typeof o?o(e.value,t):e.value).concat(l||"")))});return g.length>0?r.createElement("g",{className:"recharts-cartesian-axis-ticks"},g):null}render(){var{axisLine:e,width:t,height:n,className:i,hide:a}=this.props;if(a)return null;var{ticks:s}=this.props;return null!=t&&t<=0||null!=n&&n<=0?null:r.createElement(XL,{className:$x("recharts-cartesian-axis",i),ref:e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(t);var n=t[0];if(n){var r=window.getComputedStyle(n).fontSize,i=window.getComputedStyle(n).letterSpacing;r===this.state.fontSize&&i===this.state.letterSpacing||this.setState({fontSize:window.getComputedStyle(n).fontSize,letterSpacing:window.getComputedStyle(n).letterSpacing})}}}},e&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,s),Tz.renderCallByParent(this.props))}}Rz(Lz,"displayName","CartesianAxis"),Rz(Lz,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var zz=["x1","y1","x2","y2","key"],Fz=["offset"],Uz=["xAxisId","yAxisId"],Vz=["xAxisId","yAxisId"];function Bz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bz(Object(n),!0).forEach(function(t){Hz(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bz(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Hz(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wz(){return Wz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wz.apply(null,arguments)}function Kz(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Gz=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:n,x:i,y:a,width:s,height:o,ry:l}=e;return r.createElement("rect",{x:i,y:a,ry:l,width:s,height:o,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Yz(e,t){var n;if(r.isValidElement(e))n=r.cloneElement(e,t);else if("function"===typeof e)n=e(t);else{var{x1:i,y1:a,x2:s,y2:o,key:l}=t,c=MR(Kz(t,zz)),{offset:u}=c,d=Kz(c,Fz);n=r.createElement("line",Wz({},d,{x1:i,y1:a,x2:s,y2:o,fill:"none",key:l}))}return n}function Qz(e){var{x:t,width:n,horizontal:i=!0,horizontalPoints:a}=e;if(!i||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=e,l=Kz(e,Uz),c=a.map((e,r)=>{var a=qz(qz({},l),{},{x1:t,y1:e,x2:t+n,y2:e,key:"line-".concat(r),index:r});return Yz(i,a)});return r.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Xz(e){var{y:t,height:n,vertical:i=!0,verticalPoints:a}=e;if(!i||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=e,l=Kz(e,Vz),c=a.map((e,r)=>{var a=qz(qz({},l),{},{x1:e,y1:t,x2:e,y2:t+n,key:"line-".concat(r),index:r});return Yz(i,a)});return r.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Jz(e){var{horizontalFill:t,fillOpacity:n,x:i,y:a,width:s,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=l.map(e=>Math.round(e+a-a)).sort((e,t)=>e-t);a!==u[0]&&u.unshift(0);var d=u.map((e,l)=>{var c=!u[l+1]?a+o-e:u[l+1]-e;if(c<=0)return null;var d=l%t.length;return r.createElement("rect",{key:"react-".concat(l),y:e,x:i,height:c,width:s,stroke:"none",fill:t[d],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return r.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function $z(e){var{vertical:t=!0,verticalFill:n,fillOpacity:i,x:a,y:s,width:o,height:l,verticalPoints:c}=e;if(!t||!n||!n.length)return null;var u=c.map(e=>Math.round(e+a-a)).sort((e,t)=>e-t);a!==u[0]&&u.unshift(0);var d=u.map((e,t)=>{var c=!u[t+1]?a+o-e:u[t+1]-e;if(c<=0)return null;var d=t%n.length;return r.createElement("rect",{key:"react-".concat(t),x:e,y:s,width:c,height:l,stroke:"none",fill:n[d],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return r.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Zz=(e,t)=>{var{xAxis:n,width:r,height:i,offset:a}=e;return zk(KL(qz(qz(qz({},Lz.defaultProps),n),{},{ticks:Fk(n,!0),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,t)},eF=(e,t)=>{var{yAxis:n,width:r,height:i,offset:a}=e;return zk(KL(qz(qz(qz({},Lz.defaultProps),n),{},{ticks:Fk(n,!0),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,t)},tF={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function nF(e){var t=xC(),n=bC(),i=yC(),a=qz(qz({},bL(e,tF)),{},{x:sb(e.x)?e.x:i.left,y:sb(e.y)?e.y:i.top,width:sb(e.width)?e.width:i.width,height:sb(e.height)?e.height:i.height}),{xAxisId:s,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:h,horizontalValues:p,verticalValues:m}=a,f=pC(),g=dk(e=>IO(e,"xAxis",s,f)),v=dk(e=>IO(e,"yAxis",o,f));if(!sb(u)||u<=0||!sb(d)||d<=0||!sb(l)||l!==+l||!sb(c)||c!==+c)return null;var y=a.verticalCoordinatesGenerator||Zz,x=a.horizontalCoordinatesGenerator||eF,{horizontalPoints:b,verticalPoints:j}=a;if((!b||!b.length)&&"function"===typeof x){var w=p&&p.length,N=x({yAxis:v?qz(qz({},v),{},{ticks:w?p:v.ticks}):void 0,width:t,height:n,offset:i},!!w||h);vb(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(b=N)}if((!j||!j.length)&&"function"===typeof y){var k=m&&m.length,C=y({xAxis:g?qz(qz({},g),{},{ticks:k?m:g.ticks}):void 0,width:t,height:n,offset:i},!!k||h);vb(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(j=C)}return r.createElement("g",{className:"recharts-cartesian-grid"},r.createElement(Gz,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),r.createElement(Jz,Wz({},a,{horizontalPoints:b})),r.createElement($z,Wz({},a,{verticalPoints:j})),r.createElement(Qz,Wz({},a,{offset:i,horizontalPoints:b,xAxis:g,yAxis:v})),r.createElement(Xz,Wz({},a,{offset:i,verticalPoints:j,xAxis:g,yAxis:v})))}nF.displayName="CartesianGrid";var rF=["children"],iF=["dangerouslySetInnerHTML","ticks"];function aF(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sF(){return sF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sF.apply(null,arguments)}function oF(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lF(e){var t=ok(),n=(0,r.useMemo)(()=>{var{children:t}=e;return oF(e,rF)},[e]),i=dk(e=>XI(e,n.id)),a=n===i;return(0,r.useEffect)(()=>(t(gM(n)),()=>{t(vM(n))}),[n,t]),a?e.children:null}var cF=e=>{var{xAxisId:t,className:n}=e,i=dk(dC),a=pC(),s="xAxis",o=dk(e=>fO(e,s,t,a)),l=dk(e=>PO(e,s,t,a)),c=dk(e=>wO(e,t)),u=dk(e=>((e,t)=>{var n=cC(e),r=XI(e,t);if(null!=r){var i=NO(e,r.orientation,r.mirror)[t];return null==i?{x:n.left,y:0}:{x:n.left,y:i}}})(e,t));if(null==c||null==u)return null;var{dangerouslySetInnerHTML:d,ticks:h}=e,p=oF(e,iF);return r.createElement(Lz,sF({},p,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:$x("recharts-".concat(s," ").concat(s),n),viewBox:i,ticks:l}))},uF=e=>{var t,n,i,a,s;return r.createElement(lF,{interval:null!==(t=e.interval)&&void 0!==t?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:null!==(n=e.includeHidden)&&void 0!==n&&n,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:null!==(i=e.angle)&&void 0!==i?i:0,minTickGap:null!==(a=e.minTickGap)&&void 0!==a?a:5,tick:null===(s=e.tick)||void 0===s||s,tickFormatter:e.tickFormatter},r.createElement(cF,e))};class dF extends r.Component{render(){return r.createElement(uF,this.props)}}aF(dF,"displayName","XAxis"),aF(dF,"defaultProps",{allowDataOverflow:QI.allowDataOverflow,allowDecimals:QI.allowDecimals,allowDuplicatedCategory:QI.allowDuplicatedCategory,height:QI.height,hide:!1,mirror:QI.mirror,orientation:QI.orientation,padding:QI.padding,reversed:QI.reversed,scale:QI.scale,tickCount:QI.tickCount,type:QI.type,xAxisId:0});var hF=["dangerouslySetInnerHTML","ticks"];function pF(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mF(){return mF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mF.apply(null,arguments)}function fF(e){var t=ok();return(0,r.useEffect)(()=>(t(yM(e)),()=>{t(xM(e))}),[e,t]),null}var gF=e=>{var t,{yAxisId:n,className:i,width:a,label:s}=e,o=(0,r.useRef)(null),l=(0,r.useRef)(null),c=dk(dC),u=pC(),d=ok(),h="yAxis",p=dk(e=>fO(e,h,n,u)),m=dk(e=>CO(e,n)),f=dk(e=>((e,t)=>{var n=cC(e),r=$I(e,t);if(null!=r){var i=kO(e,r.orientation,r.mirror)[t];return null==i?{x:0,y:n.top}:{x:i,y:n.top}}})(e,n)),g=dk(e=>PO(e,h,n,u));if((0,r.useLayoutEffect)(()=>{var e;if("auto"===a&&m&&!Sz(s)&&!(0,r.isValidElement)(s)){var t=o.current,i=null===t||void 0===t||null===(e=t.tickRefs)||void 0===e?void 0:e.current,{tickSize:c,tickMargin:u}=t.props,h=(e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=e,s=0;if(t){t.forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>s&&(s=t.width)}});var o=n?n.getBoundingClientRect().width:0,l=s+(i+a)+o+(n?r:0);return Math.round(l)}return 0})({ticks:i,label:l.current,labelGapWithTick:5,tickSize:c,tickMargin:u});Math.round(m.width)!==Math.round(h)&&d(wM({id:n,width:h}))}},[o,null===o||void 0===o||null===(t=o.current)||void 0===t||null===(t=t.tickRefs)||void 0===t?void 0:t.current,null===m||void 0===m?void 0:m.width,m,d,s,n,a]),null==m||null==f)return null;var{dangerouslySetInnerHTML:v,ticks:y}=e,x=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,hF);return r.createElement(Lz,mF({},x,{ref:o,labelRef:l,scale:p,x:f.x,y:f.y,width:m.width,height:m.height,className:$x("recharts-".concat(h," ").concat(h),i),viewBox:c,ticks:g}))},vF=e=>{var t,n,i,a,s;return r.createElement(r.Fragment,null,r.createElement(fF,{interval:null!==(t=e.interval)&&void 0!==t?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:null!==(n=e.includeHidden)&&void 0!==n&&n,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:null!==(i=e.angle)&&void 0!==i?i:0,minTickGap:null!==(a=e.minTickGap)&&void 0!==a?a:5,tick:null===(s=e.tick)||void 0===s||s,tickFormatter:e.tickFormatter}),r.createElement(gF,e))},yF={allowDataOverflow:JI.allowDataOverflow,allowDecimals:JI.allowDecimals,allowDuplicatedCategory:JI.allowDuplicatedCategory,hide:!1,mirror:JI.mirror,orientation:JI.orientation,padding:JI.padding,reversed:JI.reversed,scale:JI.scale,tickCount:JI.tickCount,type:JI.type,width:JI.width,yAxisId:0};class xF extends r.Component{render(){return r.createElement(vF,this.props)}}function bF(){return bF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bF.apply(null,arguments)}function jF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function wF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jF(Object(n),!0).forEach(function(t){NF(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jF(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function NF(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kF(e){return Array.isArray(e)&&ob(e[0])&&ob(e[1])?e.join(" ~ "):e}pF(xF,"displayName","YAxis"),pF(xF,"defaultProps",yF);var CF=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:i={},labelStyle:a={},payload:s,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:h,accessibilityLayer:p=!1}=e,m=wF({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),f=wF({margin:0},a),g=!fb(d),v=g?d:"",y=$x("recharts-default-tooltip",c),x=$x("recharts-tooltip-label",u);g&&h&&void 0!==s&&null!==s&&(v=h(d,s));var b=p?{role:"status","aria-live":"assertive"}:{};return r.createElement("div",bF({className:y,style:m},b),r.createElement("p",{className:x,style:f},r.isValidElement(v)?v:"".concat(v)),(()=>{if(s&&s.length){var e=(l?pk()(s,l):s).map((e,n)=>{if("none"===e.type)return null;var a=e.formatter||o||kF,{value:l,name:c}=e,u=l,d=c;if(a){var h=a(l,c,e,n,s);if(Array.isArray(h))[u,d]=h;else{if(null==h)return null;u=h}}var p=wF({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},i);return r.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(n),style:p},ob(d)?r.createElement("span",{className:"recharts-tooltip-item-name"},d):null,ob(d)?r.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,r.createElement("span",{className:"recharts-tooltip-item-value"},u),r.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return r.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},SF="recharts-tooltip-wrapper",EF={visibility:"hidden"};function TF(e){var{coordinate:t,translateX:n,translateY:r}=e;return $x(SF,{["".concat(SF,"-right")]:sb(n)&&t&&sb(t.x)&&n>=t.x,["".concat(SF,"-left")]:sb(n)&&t&&sb(t.x)&&n<t.x,["".concat(SF,"-bottom")]:sb(r)&&t&&sb(t.y)&&r>=t.y,["".concat(SF,"-top")]:sb(r)&&t&&sb(t.y)&&r<t.y})}function _F(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=e;if(a&&sb(a[r]))return a[r];var u=n[r]-o-(i>0?i:0),d=n[r]+i;if(t[r])return s[r]?u:d;var h=l[r];return null==h?0:s[r]?u<h?Math.max(d,h):Math.max(u,h):null==c?0:d+o>h+c?Math.max(u,h):Math.max(d,h)}function AF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function IF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AF(Object(n),!0).forEach(function(t){PF(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AF(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function PF(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class OF extends r.PureComponent{constructor(){super(...arguments),PF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),PF(this,"handleKeyDown",e=>{var t,n,r,i;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(n=this.props.coordinate)||void 0===n?void 0:n.x)&&void 0!==t?t:0,y:null!==(r=null===(i=this.props.coordinate)||void 0===i?void 0:i.y)&&void 0!==r?r:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:n,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:l,offset:c,position:u,reverseDirection:d,useTranslate3d:h,viewBox:p,wrapperStyle:m,lastBoundingBox:f,innerRef:g,hasPortalFromProps:v}=this.props,{cssClasses:y,cssProperties:x}=function(e){var t,n,r,{allowEscapeViewBox:i,coordinate:a,offsetTopLeft:s,position:o,reverseDirection:l,tooltipBox:c,useTranslate3d:u,viewBox:d}=e;return t=c.height>0&&c.width>0&&a?function(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:n=_F({allowEscapeViewBox:i,coordinate:a,key:"x",offsetTopLeft:s,position:o,reverseDirection:l,tooltipDimension:c.width,viewBox:d,viewBoxDimension:d.width}),translateY:r=_F({allowEscapeViewBox:i,coordinate:a,key:"y",offsetTopLeft:s,position:o,reverseDirection:l,tooltipDimension:c.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:u}):EF,{cssProperties:t,cssClasses:TF({translateX:n,translateY:r,coordinate:a})}}({allowEscapeViewBox:t,coordinate:s,offsetTopLeft:c,position:u,reverseDirection:d,tooltipBox:{height:f.height,width:f.width},useTranslate3d:h,viewBox:p}),b=v?{}:IF(IF({transition:l&&e?"transform ".concat(n,"ms ").concat(i):void 0},x),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),j=IF(IF({},b),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},m);return r.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:j,ref:g},a)}}var DF=n(4332),MF=n.n(DF);function RF(e,t,n){return!0===t?MF()(e,n):"function"===typeof t?MF()(e,t):e}var LF,zF,FF,UF,VF,BF,qF,HF,WF,KF,GF,YF,QF,XF;function JF(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,n]=(0,r.useState)({height:0,left:0,top:0,width:0}),i=(0,r.useCallback)(e=>{if(null!=e){var r=e.getBoundingClientRect(),i={height:r.height,left:r.left,top:r.top,width:r.width};(Math.abs(i.height-t.height)>1||Math.abs(i.left-t.left)>1||Math.abs(i.top-t.top)>1||Math.abs(i.width-t.width)>1)&&n({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,i]}function $F(){}function ZF(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function eU(e){this._context=e}function tU(e){this._context=e}function nU(e){this._context=e}eU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ZF(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ZF(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},tU.prototype={areaStart:$F,areaEnd:$F,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ZF(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},nU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ZF(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class rU{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function iU(e){this._context=e}function aU(e){this._context=e}function sU(e){return new aU(e)}function oU(e){return e<0?-1:1}function lU(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(oU(a)+oU(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function cU(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function uU(e,t,n){var r=e._x0,i=e._y0,a=e._x1,s=e._y1,o=(a-r)/3;e._context.bezierCurveTo(r+o,i+o*t,a-o,s-o*n,a,s)}function dU(e){this._context=e}function hU(e){this._context=new pU(e)}function pU(e){this._context=e}function mU(e){this._context=e}function fU(e){var t,n,r=e.length-1,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,s[t]-=n*s[t-1];for(i[r-1]=s[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function gU(e,t){this._context=e,this._t=t}function vU(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}iU.prototype={areaStart:$F,areaEnd:$F,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},aU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},dU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:uU(this,this._t0,cU(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,uU(this,cU(this,n=lU(this,e,t)),n);break;default:uU(this,this._t0,n=lU(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(hU.prototype=Object.create(dU.prototype)).point=function(e,t){dU.prototype.point.call(this,t,e)},pU.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},mU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=fU(e),i=fU(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[s],t[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},gU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};const yU=Math.PI,xU=2*yU,bU=1e-6,jU=xU-bU;function wU(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class NU{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?wU:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return wU;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append(LF||(LF=vU(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(zF||(zF=vU(["Z"]))))}lineTo(e,t){this._append(FF||(FF=vU(["L",",",""])),this._x1=+e,this._y1=+t)}quadraticCurveTo(e,t,n,r){this._append(UF||(UF=vU(["Q",",",",",",",""])),+e,+t,this._x1=+n,this._y1=+r)}bezierCurveTo(e,t,n,r,i,a){this._append(VF||(VF=vU(["C",",",",",",",",",",",""])),+e,+t,+n,+r,this._x1=+i,this._y1=+a)}arcTo(e,t,n,r,i){if(e=+e,t=+t,n=+n,r=+r,(i=+i)<0)throw new Error("negative radius: ".concat(i));let a=this._x1,s=this._y1,o=n-e,l=r-t,c=a-e,u=s-t,d=c*c+u*u;if(null===this._x1)this._append(BF||(BF=vU(["M",",",""])),this._x1=e,this._y1=t);else if(d>bU)if(Math.abs(u*o-l*c)>bU&&i){let h=n-a,p=r-s,m=o*o+l*l,f=h*h+p*p,g=Math.sqrt(m),v=Math.sqrt(d),y=i*Math.tan((yU-Math.acos((m+d-f)/(2*g*v)))/2),x=y/v,b=y/g;Math.abs(x-1)>bU&&this._append(HF||(HF=vU(["L",",",""])),e+x*c,t+x*u),this._append(WF||(WF=vU(["A",",",",0,0,",",",",",""])),i,i,+(u*h>c*p),this._x1=e+b*o,this._y1=t+b*l)}else this._append(qF||(qF=vU(["L",",",""])),this._x1=e,this._y1=t);else;}arc(e,t,n,r,i,a){if(e=+e,t=+t,a=!!a,(n=+n)<0)throw new Error("negative radius: ".concat(n));let s=n*Math.cos(r),o=n*Math.sin(r),l=e+s,c=t+o,u=1^a,d=a?r-i:i-r;null===this._x1?this._append(KF||(KF=vU(["M",",",""])),l,c):(Math.abs(this._x1-l)>bU||Math.abs(this._y1-c)>bU)&&this._append(GF||(GF=vU(["L",",",""])),l,c),n&&(d<0&&(d=d%xU+xU),d>jU?this._append(YF||(YF=vU(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,u,e-s,t-o,n,n,u,this._x1=l,this._y1=c):d>bU&&this._append(QF||(QF=vU(["A",",",",0,",",",",",",",""])),n,n,+(d>=yU),u,this._x1=e+n*Math.cos(i),this._y1=t+n*Math.sin(i)))}rect(e,t,n,r){this._append(XF||(XF=vU(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,n=+n,+r,-n)}toString(){return this._}}function kU(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError("invalid digits: ".concat(n));t=e}return e},()=>new NU(t)}function CU(e){return e[0]}function SU(e){return e[1]}function EU(e,t){var n=yk(!0),r=null,i=sU,a=null,s=kU(o);function o(o){var l,c,u,d=(o=vk(o)).length,h=!1;for(null==r&&(a=i(u=s())),l=0;l<=d;++l)!(l<d&&n(c=o[l],l,o))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(c,l,o),+t(c,l,o));if(u)return a=null,u+""||null}return e="function"===typeof e?e:void 0===e?CU:yk(e),t="function"===typeof t?t:void 0===t?SU:yk(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:yk(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:yk(+e),o):t},o.defined=function(e){return arguments.length?(n="function"===typeof e?e:yk(!!e),o):n},o.curve=function(e){return arguments.length?(i=e,null!=r&&(a=i(r)),o):i},o.context=function(e){return arguments.length?(null==e?r=a=null:a=i(r=e),o):r},o}function TU(e,t,n){var r=null,i=yk(!0),a=null,s=sU,o=null,l=kU(c);function c(c){var u,d,h,p,m,f=(c=vk(c)).length,g=!1,v=new Array(f),y=new Array(f);for(null==a&&(o=s(m=l())),u=0;u<=f;++u){if(!(u<f&&i(p=c[u],u,c))===g)if(g=!g)d=u,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=u-1;h>=d;--h)o.point(v[h],y[h]);o.lineEnd(),o.areaEnd()}g&&(v[u]=+e(p,u,c),y[u]=+t(p,u,c),o.point(r?+r(p,u,c):v[u],n?+n(p,u,c):y[u]))}if(m)return o=null,m+""||null}function u(){return EU().defined(i).curve(s).context(a)}return e="function"===typeof e?e:void 0===e?CU:yk(+e),t="function"===typeof t?t:yk(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?SU:yk(+n),c.x=function(t){return arguments.length?(e="function"===typeof t?t:yk(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:yk(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:yk(+e),c):r},c.y=function(e){return arguments.length?(t="function"===typeof e?e:yk(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:yk(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:yk(+e),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(e){return arguments.length?(i="function"===typeof e?e:yk(!!e),c):i},c.curve=function(e){return arguments.length?(s=e,null!=a&&(o=s(a)),c):s},c.context=function(e){return arguments.length?(null==e?a=o=null:o=s(a=e),c):a},c}function _U(){return _U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_U.apply(null,arguments)}function AU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function IU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AU(Object(n),!0).forEach(function(t){PU(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function PU(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var OU={curveBasisClosed:function(e){return new tU(e)},curveBasisOpen:function(e){return new nU(e)},curveBasis:function(e){return new eU(e)},curveBumpX:function(e){return new rU(e,!0)},curveBumpY:function(e){return new rU(e,!1)},curveLinearClosed:function(e){return new iU(e)},curveLinear:sU,curveMonotoneX:function(e){return new dU(e)},curveMonotoneY:function(e){return new hU(e)},curveNatural:function(e){return new mU(e)},curveStep:function(e){return new gU(e,.5)},curveStepAfter:function(e){return new gU(e,1)},curveStepBefore:function(e){return new gU(e,0)}},DU=e=>LA(e.x)&&LA(e.y),MU=e=>e.x,RU=e=>e.y,LU=e=>{var t,{type:n="linear",points:r=[],baseLine:i,layout:a,connectNulls:s=!1}=e,o=((e,t)=>{if("function"===typeof e)return e;var n="curve".concat(gb(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?OU[n]||sU:OU["".concat(n).concat("vertical"===t?"Y":"X")]})(n,a),l=s?r.filter(DU):r;if(Array.isArray(i)){var c=s?i.filter(e=>DU(e)):i,u=l.map((e,t)=>IU(IU({},e),{},{base:c[t]}));return(t="vertical"===a?TU().y(RU).x1(MU).x0(e=>e.base.x):TU().x(MU).y1(RU).y0(e=>e.base.y)).defined(DU).curve(o),t(u)}return(t="vertical"===a&&sb(i)?TU().y(RU).x1(MU).x0(i):sb(i)?TU().x(MU).y1(RU).y0(i):EU().x(MU).y(RU)).defined(DU).curve(o),t(l)},zU=e=>{var{className:t,points:n,path:i,pathRef:a}=e;if((!n||!n.length)&&!i)return null;var s=n&&n.length?LU(e):i;return r.createElement("path",_U({},MR(e),IR(e),{className:$x("recharts-curve",t),d:null===s?void 0:s,ref:a}))},FU=["x","y","top","left","width","height","className"];function UU(){return UU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UU.apply(null,arguments)}function VU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function BU(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qU=(e,t,n,r,i,a)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n),HU=e=>{var{x:t=0,y:n=0,top:i=0,left:a=0,width:s=0,height:o=0,className:l}=e,c=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,FU),u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VU(Object(n),!0).forEach(function(t){BU(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({x:t,y:n,top:i,left:a,width:s,height:o},c);return sb(t)&&sb(n)&&sb(s)&&sb(o)&&sb(i)&&sb(a)?r.createElement("path",UU({},BR(u,!0),{className:$x("recharts-cross",l),d:qU(t,n,s,o,i,a)})):null};var WU=n(4250),KU=n.n(WU),GU=1e-4,YU=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],QU=(e,t)=>e.map((e,n)=>e*t**n).reduce((e,t)=>e+t),XU=(e,t)=>n=>{var r=YU(e,t);return QU(r,n)},JU=function(){for(var e,t,n,r,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];if(1===a.length)switch(a[0]){case"linear":[e,n,t,r]=[0,0,1,1];break;case"ease":[e,n,t,r]=[.25,.1,.25,1];break;case"ease-in":[e,n,t,r]=[.42,0,1,1];break;case"ease-out":[e,n,t,r]=[.42,0,.58,1];break;case"ease-in-out":[e,n,t,r]=[0,0,.58,1];break;default:var o=a[0].split("(");"cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length&&([e,n,t,r]=o[1].split(")")[0].split(",").map(e=>parseFloat(e)))}else 4===a.length&&([e,n,t,r]=a);var l,c,u=XU(e,t),d=XU(n,r),h=(l=e,c=t,e=>{var t=[...YU(l,c).map((e,t)=>e*t).slice(1),0];return QU(t,e)}),p=e=>e>1?1:e<0?0:e,m=e=>{for(var t=e>1?1:e,n=t,r=0;r<8;++r){var i=u(n)-t,a=h(n);if(Math.abs(i-t)<GU||a<GU)return d(n);n=p(n-i/a)}return d(n)};return m.isStepper=!1,m},$U=e=>{if("string"===typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return JU(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:n=8,dt:r=17}=e,i=(e,i,a)=>{var s=a+(-(e-i)*t-a*n)*r/1e3,o=a*r/1e3+e;return Math.abs(o-i)<GU&&Math.abs(s)<GU?[i,0]:[o,s]};return i.isStepper=!0,i.dt=r,i}();default:if("cubic-bezier"===e.split("(")[0])return JU(e)}return"function"===typeof e?e:null};function ZU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZU(Object(n),!0).forEach(function(t){tV(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tV(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nV=(e,t)=>Object.keys(t).reduce((n,r)=>eV(eV({},n),{},{[r]:e(r,t[r])}),{});function rV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rV(Object(n),!0).forEach(function(t){aV(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rV(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function aV(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sV=(e,t,n)=>e+(t-e)*n,oV=e=>{var{from:t,to:n}=e;return t!==n},lV=(e,t,n)=>{var r=nV((t,n)=>{if(oV(n)){var[r,i]=e(n.from,n.to,n.velocity);return iV(iV({},n),{},{from:r,velocity:i})}return n},t);return n<1?nV((e,t)=>oV(t)?iV(iV({},t),{},{velocity:sV(t.velocity,r[e].velocity,n),from:sV(t.from,r[e].from,n)}):t,t):lV(e,r,n-1)};function cV(e,t,n,r,i,a){var s,o=r.reduce((n,r)=>iV(iV({},n),{},{[r]:{from:e[r],velocity:0,to:t[r]}}),{}),l=null,c=r=>{s||(s=r);var u=(r-s)/n.dt;o=lV(n,o,u),i(iV(iV(iV({},e),t),nV((e,t)=>t.from,o))),s=r,Object.values(o).filter(oV).length&&(l=a.setTimeout(c))};return()=>(l=a.setTimeout(c),()=>{l()})}const uV=(e,t,n,r,i,a)=>{var s,o,l=(s=e,o=t,[Object.keys(s),Object.keys(o)].reduce((e,t)=>e.filter(e=>t.includes(e))));return!0===n.isStepper?cV(e,t,n,l,i,a):function(e,t,n,r,i,a,s){var o,l=null,c=i.reduce((n,r)=>iV(iV({},n),{},{[r]:[e[r],t[r]]}),{}),u=i=>{o||(o=i);var d=(i-o)/r,h=nV((e,t)=>sV(...t,n(d)),c);if(a(iV(iV(iV({},e),t),h)),d<1)l=s.setTimeout(u);else{var p=nV((e,t)=>sV(...t,n(1)),c);a(iV(iV(iV({},e),t),p))}};return()=>(l=s.setTimeout(u),()=>{l()})}(e,t,n,r,l,i,a)};class dV{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=performance.now(),r=null,i=a=>{a-n>=t?e(a):"function"===typeof requestAnimationFrame&&(r=requestAnimationFrame(i))};return r=requestAnimationFrame(i),()=>{cancelAnimationFrame(r)}}}function hV(){return function(e){var t=()=>null,n=!1,r=null,i=a=>{if(!n){if(Array.isArray(a)){if(!a.length)return;var s=a,[o,...l]=s;return"number"===typeof o?void(r=e.setTimeout(i.bind(null,l),o)):(i(o),void(r=e.setTimeout(i.bind(null,l))))}"string"===typeof a&&t(a),"object"===typeof a&&t(a),"function"===typeof a&&a()}};return{stop:()=>{n=!0},start:e=>{n=!1,r&&(r(),r=null),i(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e}}(new dV)}var pV=(0,r.createContext)(hV);function mV(e,t){var n=(0,r.useContext)(pV);return(0,r.useMemo)(()=>null!==t&&void 0!==t?t:n(e),[e,t,n])}var fV=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function gV(){return gV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gV.apply(null,arguments)}function vV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function yV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vV(Object(n),!0).forEach(function(t){xV(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vV(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function xV(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class bV extends r.PureComponent{constructor(e,t){super(e,t),xV(this,"mounted",!1),xV(this,"manager",void 0),xV(this,"stopJSAnimation",null),xV(this,"unSubscribe",null);var{isActive:n,attributeName:r,from:i,to:a,children:s,duration:o,animationManager:l}=this.props;if(this.manager=l,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||o<=0)return this.state={style:{}},void("function"===typeof s&&(this.state={style:a}));if(i){if("function"===typeof s)return void(this.state={style:i});this.state={style:r?{[r]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:e,canBegin:t}=this.props;this.mounted=!0,e&&t&&this.runAnimation(this.props)}componentDidUpdate(e){var{isActive:t,canBegin:n,attributeName:r,shouldReAnimate:i,to:a,from:s}=this.props,{style:o}=this.state;if(n)if(t){if(!(KU()(e.to,a)&&e.canBegin&&e.isActive)){var l=!e.canBegin||!e.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var c=l||i?s:e.to;if(this.state&&o){var u={style:r?{[r]:c}:c};(r&&o[r]!==c||!r&&o!==c)&&this.setState(u)}this.runAnimation(yV(yV({},this.props),{},{from:c,begin:0}))}}else{var d={style:r?{[r]:a}:a};this.state&&o&&(r&&o[r]!==a||!r&&o!==a)&&this.setState(d)}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:e}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}handleStyleChange(e){this.changeStyle(e)}changeStyle(e){this.mounted&&this.setState({style:e})}runJSAnimation(e){var{from:t,to:n,duration:r,easing:i,begin:a,onAnimationEnd:s,onAnimationStart:o}=e,l=uV(t,n,$U(i),r,this.changeStyle,this.manager.getTimeoutController());this.manager.start([o,a,()=>{this.stopJSAnimation=l()},r,s])}runAnimation(e){var{begin:t,duration:n,attributeName:r,to:i,easing:a,onAnimationStart:s,onAnimationEnd:o,children:l}=e;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),"function"!==typeof a&&"function"!==typeof l&&"spring"!==a){var c=r?{[r]:i}:i,u=((e,t,n)=>e.map(e=>{return"".concat((r=e,r.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())))," ").concat(t,"ms ").concat(n);var r}).join(","))(Object.keys(c),n,a);this.manager.start([s,t,yV(yV({},c),{},{transition:u}),n,o])}else this.runJSAnimation(e)}render(){var e=this.props,{children:t,begin:n,duration:i,attributeName:a,easing:s,isActive:o,from:l,to:c,canBegin:u,onAnimationEnd:d,shouldReAnimate:h,onAnimationReStart:p,animationManager:m}=e,f=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,fV),g=r.Children.count(t),v=this.state.style;if("function"===typeof t)return t(v);if(!o||0===g||i<=0)return t;var y=e=>{var{style:t={},className:n}=e.props;return(0,r.cloneElement)(e,yV(yV({},f),{},{style:yV(yV({},t),v),className:n}))};return 1===g?y(r.Children.only(t)):r.createElement("div",null,r.Children.map(t,e=>y(e)))}}function jV(e){var t,n=mV(null!==(t=e.attributeName)&&void 0!==t?t:Object.keys(e.to).join(","),e.animationManager);return r.createElement(bV,gV({},e,{animationManager:n}))}function wV(){return wV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wV.apply(null,arguments)}xV(bV,"displayName","Animate"),xV(bV,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var NV=(e,t,n,r,i)=>{var a,s=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0;if(s>0&&i instanceof Array){for(var u=[0,0,0,0],d=0;d<4;d++)u[d]=i[d]>s?s:i[d];a="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(a+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),a+="L ".concat(e+n-l*u[1],",").concat(t),u[1]>0&&(a+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+o*u[1])),a+="L ".concat(e+n,",").concat(t+r-o*u[2]),u[2]>0&&(a+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,",\n        ").concat(e+n-l*u[2],",").concat(t+r)),a+="L ".concat(e+l*u[3],",").concat(t+r),u[3]>0&&(a+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+r-o*u[3])),a+="Z"}else if(s>0&&i===+i&&i>0){var h=Math.min(s,i);a="M ".concat(e,",").concat(t+o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+n-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n,",").concat(t+o*h,"\n            L ").concat(e+n,",").concat(t+r-o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n-l*h,",").concat(t+r,"\n            L ").concat(e+l*h,",").concat(t+r,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+r-o*h," Z")}else a="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return a},kV={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},CV=e=>{var t=bL(e,kV),n=(0,r.useRef)(null),[i,a]=(0,r.useState)(-1);(0,r.useEffect)(()=>{if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&a(e)}catch(t){}},[]);var{x:s,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:h,animationDuration:p,animationBegin:m,isAnimationActive:f,isUpdateAnimationActive:g}=t;if(s!==+s||o!==+o||l!==+l||c!==+c||0===l||0===c)return null;var v=$x("recharts-rectangle",d);return g?r.createElement(jV,{canBegin:i>0,from:{width:l,height:c,x:s,y:o},to:{width:l,height:c,x:s,y:o},duration:p,animationEasing:h,isActive:g},e=>{var{width:a,height:s,x:o,y:l}=e;return r.createElement(jV,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,isActive:f,easing:h},r.createElement("path",wV({},BR(t,!0),{className:v,d:NV(o,l,a,s,u),ref:n})))}):r.createElement("path",wV({},BR(t,!0),{className:v,d:NV(s,o,l,c,u)}))};function SV(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:a}=e;return{points:[Ek(t,n,r,i),Ek(t,n,r,a)],cx:t,cy:n,radius:r,startAngle:i,endAngle:a}}function EV(){return EV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EV.apply(null,arguments)}var TV=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:l}=e,c=o*(s?1:-1)+r,u=Math.asin(o/c)/Ck,d=l?i:i+a*u,h=l?i-a*u:i;return{center:Ek(t,n,c,d),circleTangency:Ek(t,n,r,d),lineTangency:Ek(t,n,c*Math.cos(u*Ck),h),theta:u}},_V=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:s}=e,o=((e,t)=>rb(t-e)*Math.min(Math.abs(t-e),359.999))(a,s),l=a+o,c=Ek(t,n,i,a),u=Ek(t,n,i,l),d="M ".concat(c.x,",").concat(c.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(o)>180),",").concat(+(a>l),",\n    ").concat(u.x,",").concat(u.y,"\n  ");if(r>0){var h=Ek(t,n,r,a),p=Ek(t,n,r,l);d+="L ".concat(p.x,",").concat(p.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(o)>180),",").concat(+(a<=l),",\n            ").concat(h.x,",").concat(h.y," Z")}else d+="L ".concat(t,",").concat(n," Z");return d},AV={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},IV=e=>{var t=bL(e,AV),{cx:n,cy:i,innerRadius:a,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:h}=t;if(s<a||u===d)return null;var p,m=$x("recharts-sector",h),f=s-a,g=ub(o,f,0,!0);return p=g>0&&Math.abs(u-d)<360?(e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:l,endAngle:c}=e,u=rb(c-l),{circleTangency:d,lineTangency:h,theta:p}=TV({cx:t,cy:n,radius:i,angle:l,sign:u,cornerRadius:a,cornerIsExternal:o}),{circleTangency:m,lineTangency:f,theta:g}=TV({cx:t,cy:n,radius:i,angle:c,sign:-u,cornerRadius:a,cornerIsExternal:o}),v=o?Math.abs(l-c):Math.abs(l-c)-p-g;if(v<0)return s?"M ".concat(h.x,",").concat(h.y,"\n        a").concat(a,",").concat(a,",0,0,1,").concat(2*a,",0\n        a").concat(a,",").concat(a,",0,0,1,").concat(2*-a,",0\n      "):_V({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var y="M ".concat(h.x,",").concat(h.y,"\n    A").concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(d.x,",").concat(d.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(v>180),",").concat(+(u<0),",").concat(m.x,",").concat(m.y,"\n    A").concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(f.x,",").concat(f.y,"\n  ");if(r>0){var{circleTangency:x,lineTangency:b,theta:j}=TV({cx:t,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:w,lineTangency:N,theta:k}=TV({cx:t,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),C=o?Math.abs(l-c):Math.abs(l-c)-j-k;if(C<0&&0===a)return"".concat(y,"L").concat(t,",").concat(n,"Z");y+="L".concat(N.x,",").concat(N.y,"\n      A").concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(w.x,",").concat(w.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(C>180),",").concat(+(u>0),",").concat(x.x,",").concat(x.y,"\n      A").concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(b.x,",").concat(b.y,"Z")}else y+="L".concat(t,",").concat(n,"Z");return y})({cx:n,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,f/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):_V({cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),r.createElement("path",EV({},BR(t,!0),{className:m,d:p}))};function PV(e,t,n){var r,i,a,s;if("horizontal"===e)a=r=t.x,i=n.top,s=n.top+n.height;else if("vertical"===e)s=i=t.y,r=n.left,a=n.left+n.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return SV(t);var{cx:o,cy:l,innerRadius:c,outerRadius:u,angle:d}=t,h=Ek(o,l,c,d),p=Ek(o,l,u,d);r=h.x,i=h.y,a=p.x,s=p.y}return[{x:r,y:i},{x:a,y:s}]}function OV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function DV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OV(Object(n),!0).forEach(function(t){MV(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OV(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function MV(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var RV=()=>{var e=dk(BI),t=dk(PD),n=dk(_D);return Qk(DV(DV({},e),{},{scale:n}),t)};function LV(){return LV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LV.apply(null,arguments)}function zV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function FV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zV(Object(n),!0).forEach(function(t){UV(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zV(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function UV(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VV(e){var t,n,{coordinate:i,payload:a,index:s,offset:o,tooltipAxisBandSize:l,layout:c,cursor:u,tooltipEventType:d,chartName:h}=e,p=i,m=a,f=s;if(!u||!p||"ScatterChart"!==h&&"axis"!==d)return null;if("ScatterChart"===h)t=p,n=HU;else if("BarChart"===h)t=function(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-i:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-i,width:"horizontal"===e?r:n.width-1,height:"horizontal"===e?n.height-1:r}}(c,p,o,l),n=CV;else if("radial"===c){var{cx:g,cy:v,radius:y,startAngle:x,endAngle:b}=SV(p);t={cx:g,cy:v,startAngle:x,endAngle:b,innerRadius:y,outerRadius:y},n=IV}else t={points:PV(c,p,o)},n=zU;var j="object"===typeof u&&"className"in u?u.className:void 0,w=FV(FV(FV(FV({stroke:"#ccc",pointerEvents:"none"},o),t),BR(u,!1)),{},{payload:m,payloadIndex:f,className:$x("recharts-tooltip-cursor",j)});return(0,r.isValidElement)(u)?(0,r.cloneElement)(u,w):(0,r.createElement)(n,w)}function BV(e){var t=RV(),n=yC(),i=NC(),a=KD();return r.createElement(VV,LV({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:i,tooltipAxisBandSize:t,chartName:a}))}function qV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function HV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qV(Object(n),!0).forEach(function(t){WV(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qV(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function WV(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KV(e){return e.dataKey}var GV=[],YV={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!EL,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function QV(e){var t=bL(e,YV),{active:n,allowEscapeViewBox:i,animationDuration:a,animationEasing:o,content:l,filterNull:c,isAnimationActive:u,offset:d,payloadUniqBy:h,position:p,reverseDirection:m,useTranslate3d:f,wrapperStyle:g,cursor:v,shared:y,trigger:x,defaultIndex:b,portal:j,axisId:w}=t,N=ok(),k="number"===typeof b?String(b):b;(0,r.useEffect)(()=>{N(TN({shared:y,trigger:x,axisId:w,active:n,defaultIndex:k}))},[N,y,x,w,n,k]);var C=gC(),S=CR(),E=function(e){return dk(t=>UO(t,e))}(y),{activeIndex:T,isActive:_}=dk(e=>iM(e,E,x,k)),A=dk(e=>rM(e,E,x,k)),I=dk(e=>nM(e,E,x,k)),P=dk(e=>tM(e,E,x,k)),O=A,D=(0,r.useContext)(aL),M=null!==n&&void 0!==n?n:_,[R,L]=JF([O,M]),z="axis"===E?I:void 0;iL(E,x,P,z,T,M);var F=null!==j&&void 0!==j?j:D;if(null==F)return null;var U=null!==O&&void 0!==O?O:GV;M||(U=GV),c&&U.length&&(U=RF(O.filter(e=>null!=e.value&&(!0!==e.hide||t.includeHidden)),h,KV));var V=U.length>0,B=r.createElement(OF,{allowEscapeViewBox:i,animationDuration:a,animationEasing:o,isAnimationActive:u,active:M,coordinate:P,hasPayload:V,offset:d,position:p,reverseDirection:m,useTranslate3d:f,viewBox:C,wrapperStyle:g,lastBoundingBox:R,innerRef:L,hasPortalFromProps:Boolean(j)},function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):"function"===typeof e?r.createElement(e,t):r.createElement(CF,t)}(l,HV(HV({},t),{},{payload:U,label:z,active:M,coordinate:P,accessibilityLayer:S})));return r.createElement(r.Fragment,null,(0,s.createPortal)(B,F),M&&r.createElement(BV,{cursor:v,tooltipEventType:E,coordinate:P,payload:O,index:T}))}Math.abs,Math.atan2;const XV=Math.cos,JV=(Math.max,Math.min,Math.sin),$V=Math.sqrt,ZV=Math.PI,eB=2*ZV;const tB={draw(e,t){const n=$V(t/ZV);e.moveTo(n,0),e.arc(0,0,n,0,eB)}},nB={draw(e,t){const n=$V(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},rB=$V(1/3),iB=2*rB,aB={draw(e,t){const n=$V(t/iB),r=n*rB;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},sB={draw(e,t){const n=$V(t),r=-n/2;e.rect(r,r,n,n)}},oB=JV(ZV/10)/JV(7*ZV/10),lB=JV(eB/10)*oB,cB=-XV(eB/10)*oB,uB={draw(e,t){const n=$V(.8908130915292852*t),r=lB*n,i=cB*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const t=eB*a/5,s=XV(t),o=JV(t);e.lineTo(o*n,-s*n),e.lineTo(s*r-o*i,o*r+s*i)}e.closePath()}},dB=$V(3),hB={draw(e,t){const n=-$V(t/(3*dB));e.moveTo(0,2*n),e.lineTo(-dB*n,-n),e.lineTo(dB*n,-n),e.closePath()}},pB=-.5,mB=$V(3)/2,fB=1/$V(12),gB=3*(fB/2+1),vB={draw(e,t){const n=$V(t/gB),r=n/2,i=n*fB,a=r,s=n*fB+n,o=-a,l=s;e.moveTo(r,i),e.lineTo(a,s),e.lineTo(o,l),e.lineTo(pB*r-mB*i,mB*r+pB*i),e.lineTo(pB*a-mB*s,mB*a+pB*s),e.lineTo(pB*o-mB*l,mB*o+pB*l),e.lineTo(pB*r+mB*i,pB*i-mB*r),e.lineTo(pB*a+mB*s,pB*s-mB*a),e.lineTo(pB*o+mB*l,pB*l-mB*o),e.closePath()}};$V(3),$V(3);var yB=["type","size","sizeType"];function xB(){return xB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xB.apply(null,arguments)}function bB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function jB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bB(Object(n),!0).forEach(function(t){wB(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function wB(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var NB={symbolCircle:tB,symbolCross:nB,symbolDiamond:aB,symbolSquare:sB,symbolStar:uB,symbolTriangle:hB,symbolWye:vB},kB=Math.PI/180,CB=e=>{var{type:t="circle",size:n=64,sizeType:i="area"}=e,a=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,yB),s=jB(jB({},a),{},{type:t,size:n,sizeType:i}),{className:o,cx:l,cy:c}=s,u=BR(s,!0);return l===+l&&c===+c&&n===+n?r.createElement("path",xB({},u,{className:$x("recharts-symbols",o),transform:"translate(".concat(l,", ").concat(c,")"),d:(()=>{var e=(e=>{var t="symbol".concat(gb(e));return NB[t]||tB})(t),r=function(e,t){let n=null,r=kU(i);function i(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return e="function"===typeof e?e:yk(e||tB),t="function"===typeof t?t:yk(void 0===t?64:+t),i.type=function(t){return arguments.length?(e="function"===typeof t?t:yk(t),i):e},i.size=function(e){return arguments.length?(t="function"===typeof e?e:yk(+e),i):t},i.context=function(e){return arguments.length?(n=null==e?null:e,i):n},i}().type(e).size(((e,t,n)=>{if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*kB;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.tan(r)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(n,i,t));return r()})()})):null};function SB(){return SB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SB.apply(null,arguments)}function EB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function TB(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}CB.registerSymbol=(e,t)=>{NB["symbol".concat(gb(e))]=t};var _B=32;class AB extends r.PureComponent{renderIcon(e,t){var{inactiveColor:n}=this.props,i=16,a=_B/6,s=_B/3,o=e.inactive?n:e.color,l=null!==t&&void 0!==t?t:e.type;if("none"===l)return null;if("plainline"===l)return r.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:i,x2:_B,y2:i,className:"recharts-legend-icon"});if("line"===l)return r.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(s,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(i,"\n            H").concat(_B,"M").concat(2*s,",").concat(i,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if("rect"===l)return r.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(4,"h").concat(_B,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(r.isValidElement(e.legendIcon)){var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EB(Object(n),!0).forEach(function(t){TB(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return delete c.legendIcon,r.cloneElement(e.legendIcon,c)}return r.createElement(CB,{fill:o,cx:i,cy:i,size:_B,sizeType:"diameter",type:l})}renderItems(){var{payload:e,iconSize:t,layout:n,formatter:i,inactiveColor:a,iconType:s}=this.props,o={x:0,y:0,width:_B,height:_B},l={display:"horizontal"===n?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((e,n)=>{var u=e.formatter||i,d=$x({"recharts-legend-item":!0,["legend-item-".concat(n)]:!0,inactive:e.inactive});if("none"===e.type)return null;var h=e.inactive?a:e.color,p=u?u(e.value,e,n):e.value;return r.createElement("li",SB({className:d,style:l,key:"legend-item-".concat(n)},PR(this.props,e,n)),r.createElement(WR,{width:t,height:t,viewBox:o,style:c,"aria-label":"".concat(p," legend icon")},this.renderIcon(e,s)),r.createElement("span",{className:"recharts-legend-item-text",style:{color:h}},p))})}render(){var{payload:e,layout:t,align:n}=this.props;if(!e||!e.length)return null;var i={padding:0,margin:0,textAlign:"horizontal"===t?n:"left"};return r.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}TB(AB,"displayName","Legend"),TB(AB,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var IB=["contextPayload"];function PB(){return PB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PB.apply(null,arguments)}function OB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function DB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OB(Object(n),!0).forEach(function(t){MB(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function MB(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RB(e){return e.value}function LB(e){var{contextPayload:t}=e,n=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,IB),i=RF(t,e.payloadUniqBy,RB),a=DB(DB({},n),{},{payload:i});return r.isValidElement(e.content)?r.cloneElement(e.content,a):"function"===typeof e.content?r.createElement(e.content,a):r.createElement(AB,a)}function zB(e){var t=ok();return(0,r.useEffect)(()=>{t(WM(e))},[t,e]),null}function FB(e){var t=ok();return(0,r.useEffect)(()=>(t(HM(e)),()=>{t(HM({width:0,height:0}))}),[t,e]),null}function UB(e){var t=dk(fk),n=(0,r.useContext)(sL),i=(()=>{var e;return null!==(e=dk(e=>e.layout.margin))&&void 0!==e?e:jC})(),{width:a,height:o,wrapperStyle:l,portal:c}=e,[u,d]=JF([t]),h=xC(),p=bC(),m=h-(i.left||0)-(i.right||0),f=VB.getWidthOrHeight(e.layout,o,a,m),g=c?l:DB(DB({position:"absolute",width:(null===f||void 0===f?void 0:f.width)||a||"auto",height:(null===f||void 0===f?void 0:f.height)||o||"auto"},function(e,t,n,r,i,a){var s,o,{layout:l,align:c,verticalAlign:u}=t;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(s="center"===c&&"vertical"===l?{left:((r||0)-a.width)/2}:"right"===c?{right:n&&n.right||0}:{left:n&&n.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(o="middle"===u?{top:((i||0)-a.height)/2}:"bottom"===u?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),DB(DB({},s),o)}(l,e,i,h,p,u)),l),v=null!==c&&void 0!==c?c:n;if(null==v)return null;var y=r.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:d},r.createElement(zB,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),r.createElement(FB,{width:u.width,height:u.height}),r.createElement(LB,PB({},e,f,{margin:i,chartWidth:h,chartHeight:p,contextPayload:t})));return(0,s.createPortal)(y,v)}class VB extends r.PureComponent{static getWidthOrHeight(e,t,n,r){return"vertical"===e&&sb(t)?{height:t}:"horizontal"===e?{width:n||r}:null}render(){return r.createElement(UB,this.props)}}MB(VB,"displayName","Legend"),MB(VB,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});var BB=e=>null;BB.displayName="Cell";var qB=n(356),HB=n.n(qB),WB=["valueAccessor"],KB=["data","dataKey","clockWise","id","textBreakAll"];function GB(){return GB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GB.apply(null,arguments)}function YB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function QB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YB(Object(n),!0).forEach(function(t){XB(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function XB(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JB(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var $B=e=>Array.isArray(e.value)?HB()(e.value):e.value;function ZB(e){var{valueAccessor:t=$B}=e,n=JB(e,WB),{data:i,dataKey:a,clockWise:s,id:o,textBreakAll:l}=n,c=JB(n,KB);return i&&i.length?r.createElement(XL,{className:"recharts-label-list"},i.map((e,n)=>{var i=fb(a)?t(e,n):Rk(e&&e.payload,a),u=fb(o)?{}:{id:"".concat(o,"-").concat(n)};return r.createElement(Tz,GB({},BR(e,!0),c,u,{parentViewBox:e.parentViewBox,value:i,textBreakAll:l,viewBox:Tz.parseViewBox(fb(s)?e:QB(QB({},e),{},{clockWise:s})),key:"label-".concat(n),index:n}))})):null}ZB.displayName="LabelList",ZB.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var{children:i}=e,a=UR(i,ZB).map((e,n)=>(0,r.cloneElement)(e,{data:t,key:"labelList-".concat(n)}));if(!n)return a;var s=function(e,t){return e?!0===e?r.createElement(ZB,{key:"labelList-implicit",data:t}):r.isValidElement(e)||Sz(e)?r.createElement(ZB,{key:"labelList-implicit",data:t,content:e}):"object"===typeof e?r.createElement(ZB,GB({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t);return[s,...a]};var eq="Invariant failed";var tq=n(9397),nq=n.n(tq);function rq(){return rq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rq.apply(null,arguments)}var iq=(e,t,n,r,i)=>{var a,s=n-r;return a="M ".concat(e,",").concat(t),a+="L ".concat(e+n,",").concat(t),a+="L ".concat(e+n-s/2,",").concat(t+i),a+="L ".concat(e+n-s/2-r,",").concat(t+i),a+="L ".concat(e,",").concat(t," Z")},aq={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},sq=e=>{var t=bL(e,aq),n=(0,r.useRef)(),[i,a]=(0,r.useState)(-1);(0,r.useEffect)(()=>{if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&a(e)}catch(t){}},[]);var{x:s,y:o,upperWidth:l,lowerWidth:c,height:u,className:d}=t,{animationEasing:h,animationDuration:p,animationBegin:m,isUpdateAnimationActive:f}=t;if(s!==+s||o!==+o||l!==+l||c!==+c||u!==+u||0===l&&0===c||0===u)return null;var g=$x("recharts-trapezoid",d);return f?r.createElement(jV,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:o},to:{upperWidth:l,lowerWidth:c,height:u,x:s,y:o},duration:p,animationEasing:h,isActive:f},e=>{var{upperWidth:a,lowerWidth:s,height:o,x:l,y:c}=e;return r.createElement(jV,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,easing:h},r.createElement("path",rq({},BR(t,!0),{className:g,d:iq(l,c,a,s,o),ref:n})))}):r.createElement("g",null,r.createElement("path",rq({},BR(t,!0),{className:g,d:iq(s,o,l,c,u)})))},oq=["option","shapeType","propTransformer","activeClassName","isActive"];function lq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lq(Object(n),!0).forEach(function(t){uq(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function uq(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dq(e,t){return cq(cq({},t),e)}function hq(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return r.createElement(CV,n);case"trapezoid":return r.createElement(sq,n);case"sector":return r.createElement(IV,n);case"symbols":if(function(e){return"symbols"===e}(t))return r.createElement(CB,n);break;default:return null}}function pq(e){var t,{option:n,shapeType:i,propTransformer:a=dq,activeClassName:s="recharts-active-shape",isActive:o}=e,l=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,oq);if((0,r.isValidElement)(n))t=(0,r.cloneElement)(n,cq(cq({},l),function(e){return(0,r.isValidElement)(e)?e.props:e}(n)));else if("function"===typeof n)t=n(l);else if(nq()(n)&&"boolean"!==typeof n){var c=a(n,l);t=r.createElement(hq,{shapeType:i,elementProps:c})}else{var u=l;t=r.createElement(hq,{shapeType:i,elementProps:u})}return o?r.createElement(XL,{className:s},t):t}var mq=["x","y"];function fq(){return fq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fq.apply(null,arguments)}function gq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gq(Object(n),!0).forEach(function(t){yq(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function yq(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xq(e,t){var{x:n,y:r}=e,i=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,mq),a="".concat(n),s=parseInt(a,10),o="".concat(r),l=parseInt(o,10),c="".concat(t.height||i.height),u=parseInt(c,10),d="".concat(t.width||i.width),h=parseInt(d,10);return vq(vq(vq(vq(vq({},t),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:u,width:h,name:t.name,radius:t.radius})}function bq(e){return r.createElement(pq,fq({shapeType:"rectangle",propTransformer:xq,activeClassName:"recharts-active-bar"},e))}var jq=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(n,r)=>{if(sb(e))return e;var i=sb(n)||fb(n);return i?e(n,r):(i||function(e){if(!e)throw new Error(eq)}(!1),t)}},wq=(e,t)=>{var n=ok();return(r,i)=>a=>{null===e||void 0===e||e(r,i,a),n(_N({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},Nq=e=>{var t=ok();return(n,r)=>i=>{null===e||void 0===e||e(n,r,i),t(AN())}},kq=(e,t)=>{var n=ok();return(r,i)=>a=>{null===e||void 0===e||e(r,i,a),n(PN({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function Cq(e){var{fn:t,args:n}=e,i=ok(),a=pC();return(0,r.useEffect)(()=>{if(!a){var e=t(n);return i(SN(e)),()=>{i(EN(e))}}},[t,n,i,a]),null}var Sq=["children"];var Eq={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Tq=(0,r.createContext)(Eq);function _q(e){var{children:t}=e,n=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,Sq);return r.createElement(Tq.Provider,{value:n},t)}function Aq(e,t){var n,r,i=dk(t=>XI(t,e)),a=dk(e=>$I(e,t)),s=null!==(n=null===i||void 0===i?void 0:i.allowDataOverflow)&&void 0!==n?n:QI.allowDataOverflow,o=null!==(r=null===a||void 0===a?void 0:a.allowDataOverflow)&&void 0!==r?r:JI.allowDataOverflow;return{needClip:s||o,needClipX:s,needClipY:o}}function Iq(e){var{xAxisId:t,yAxisId:n,clipPathId:i}=e,a=pL(),{needClipX:s,needClipY:o,needClip:l}=Aq(t,n);if(!l)return null;var{x:c,y:u,width:d,height:h}=a;return r.createElement("clipPath",{id:"clipPath-".concat(i)},r.createElement("rect",{x:s?c:c-d/2,y:o?u:u-h/2,width:s?d:2*d,height:o?h:2*h}))}function Pq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Oq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pq(Object(n),!0).forEach(function(t){Dq(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Dq(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mq=nk([aP,(e,t,n,r,i)=>i],(e,t)=>e.filter(e=>"bar"===e.type).find(e=>e.id===t)),Rq=nk([Mq],e=>null===e||void 0===e?void 0:e.maxBarSize),Lq=(e,t,n)=>{var r=null!==n&&void 0!==n?n:e;if(!fb(r))return ub(r,t,0)},zq=nk([wC,aP,(e,t)=>t,(e,t,n)=>n,(e,t,n,r)=>r],(e,t,n,r,i)=>t.filter(t=>"horizontal"===e?t.xAxisId===n:t.yAxisId===r).filter(e=>e.isPanorama===i).filter(e=>!1===e.hide).filter(e=>"bar"===e.type)),Fq=nk([zq,e=>e.rootProps.barSize,(e,t,n)=>"horizontal"===wC(e)?SO(e,"xAxis",t):SO(e,"yAxis",n)],(e,t,n)=>{var r=e.filter(HI),i=e.filter(e=>null==e.stackId),a=r.reduce((e,t)=>(e[t.stackId]||(e[t.stackId]=[]),e[t.stackId].push(t),e),{}),s=Object.entries(a).map(e=>{var[r,i]=e;return{stackId:r,dataKeys:i.map(e=>e.dataKey),barSize:Lq(t,n,i[0].barSize)}});return[...s,...i.map(e=>({stackId:void 0,dataKeys:[e.dataKey].filter(e=>null!=e),barSize:Lq(t,n,e.barSize)}))]}),Uq=(e,t,n,r)=>{var i,a;return"horizontal"===wC(e)?(i=DO(e,"xAxis",t,r),a=OO(e,"xAxis",t,r)):(i=DO(e,"yAxis",n,r),a=OO(e,"yAxis",n,r)),Qk(i,a)};var Vq,Bq=nk([Fq,oI,e=>e.rootProps.barGap,lI,(e,t,n,r,i)=>{var a,s,o=Mq(e,t,n,r,i);if(null!=o){var l,c,u=wC(e),d=oI(e),{maxBarSize:h}=o,p=fb(h)?d:h;return"horizontal"===u?(l=DO(e,"xAxis",t,r),c=OO(e,"xAxis",t,r)):(l=DO(e,"yAxis",n,r),c=OO(e,"yAxis",n,r)),null!==(a=null!==(s=Qk(l,c,!0))&&void 0!==s?s:p)&&void 0!==a?a:0}},Uq,Rq],(e,t,n,r,i,a,s)=>{var o=fb(s)?t:s,l=function(e,t,n,r,i){var a=r.length;if(!(a<1)){var s,o=ub(e,n,0,!0),l=[];if(LA(r[0].barSize)){var c=!1,u=n/a,d=r.reduce((e,t)=>e+(t.barSize||0),0);(d+=(a-1)*o)>=n&&(d-=(a-1)*o,o=0),d>=n&&u>0&&(c=!0,d=a*(u*=.9));var h={offset:((n-d)/2|0)-o,size:0};s=r.reduce((e,t)=>{var n,r=[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:h.offset+h.size+o,size:c?u:null!==(n=t.barSize)&&void 0!==n?n:0}}];return h=r[r.length-1].position,r},l)}else{var p=ub(t,n,0,!0);n-2*p-(a-1)*o<=0&&(o=0);var m=(n-2*p-(a-1)*o)/a;m>1&&(m>>=0);var f=LA(i)?Math.min(m,i):m;s=r.reduce((e,t,n)=>[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:p+(m+o)*n+(m-f)/2,size:f}}],l)}return s}}(n,r,i!==a?i:a,e,o);return i!==a&&null!=l&&(l=l.map(e=>Oq(Oq({},e),{},{position:Oq(Oq({},e.position),{},{offset:e.position.offset-i/2})}))),l}),qq=nk([Bq,Mq],(e,t)=>{if(null!=e&&null!=t){var n=e.find(e=>e.stackId===t.stackId&&null!=t.dataKey&&e.dataKeys.includes(t.dataKey));if(null!=n)return n.position}}),Hq=nk([(e,t,n,r)=>"horizontal"===wC(e)?NP(e,"yAxis",n,r):NP(e,"xAxis",t,r),Mq],(e,t)=>{var n=FI(t);if(e&&null!=n&&null!=t){var{stackId:r}=t;if(null!=r){var i=e[r];if(i){var{stackedData:a}=i;if(a)return a.find(e=>e.key===n)}}}}),Wq=nk([cC,(e,t,n,r)=>DO(e,"xAxis",t,r),(e,t,n,r)=>DO(e,"yAxis",n,r),(e,t,n,r)=>OO(e,"xAxis",t,r),(e,t,n,r)=>OO(e,"yAxis",n,r),qq,wC,RA,Uq,Hq,Mq,(e,t,n,r,i,a)=>a],(e,t,n,r,i,a,s,o,l,c,u,d)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:m}=o;if(null!=u&&null!=a&&("horizontal"===s||"vertical"===s)&&null!=t&&null!=n&&null!=r&&null!=i&&null!=l){var f,{data:g}=u;if(null!=(f=null!=g&&g.length>0?g:null===h||void 0===h?void 0:h.slice(p,m+1)))return function(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:l,yAxisTicks:c,stackedData:u,displayedData:d,offset:h,cells:p}=e,m="horizontal"===t?o:s,f=u?m.scale.domain():null,g=(e=>{var{numericAxis:t}=e,n=t.scale.domain();if("number"===t.type){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]})({numericAxis:m});return d.map((e,d)=>{var m,v,y,x,b,j;u?m=((e,t)=>{if(!t||2!==t.length||!sb(t[0])||!sb(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!sb(e[0])||e[0]<n)&&(i[0]=n),(!sb(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i})(u[d],f):(m=Rk(e,n),Array.isArray(m)||(m=[g,m]));var w=jq(r,jH)(m[1],d);if("horizontal"===t){var N,[k,C]=[o.scale(m[0]),o.scale(m[1])];v=Wk({axis:s,ticks:l,bandSize:a,offset:i.offset,entry:e,index:d}),y=null!==(N=null!==C&&void 0!==C?C:k)&&void 0!==N?N:void 0,x=i.size;var S=k-C;if(b=ib(S)?0:S,j={x:v,y:h.top,width:x,height:h.height},Math.abs(w)>0&&Math.abs(b)<Math.abs(w)){var E=rb(b||w)*(Math.abs(w)-Math.abs(b));y-=E,b+=E}}else{var[T,_]=[s.scale(m[0]),s.scale(m[1])];if(v=T,y=Wk({axis:o,ticks:c,bandSize:a,offset:i.offset,entry:e,index:d}),x=_-T,b=i.size,j={x:h.left,y:y,width:h.width,height:b},Math.abs(w)>0&&Math.abs(x)<Math.abs(w))x+=rb(x||w)*(Math.abs(w)-Math.abs(x))}return null==v||null==y||null==x||null==b?null:hH(hH({},e),{},{x:v,y:y,width:x,height:b,value:u?m:m[1],payload:e,background:j,tooltipPosition:{x:v+x/2,y:y+b/2}},p&&p[d]&&p[d].props)}).filter(Boolean)}({layout:s,barSettings:u,pos:a,bandSize:l,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,stackedData:c,displayedData:f,offset:e,cells:d})}}),Kq=()=>{};function Gq(e){var{legendPayload:t}=e,n=ok(),i=pC();return(0,r.useEffect)(()=>i?Kq:(n(KM(t)),()=>{n(GM(t))}),[n,i,t]),null}function Yq(e){var{legendPayload:t}=e,n=ok(),i=dk(wC);return(0,r.useEffect)(()=>"centric"!==i&&"radial"!==i?Kq:(n(KM(t)),()=>{n(GM(t))}),[n,i,t]),null}function Qq(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",n=(0,r.useRef)(cb(t)),i=(0,r.useRef)(e);return i.current!==e&&(n.current=cb(t),i.current=e),n.current}var Xq=null!==(Vq=i["useId".toString()])&&void 0!==Vq?Vq:()=>{var[e]=r.useState(()=>cb("uid-"));return e};var Jq=(0,r.createContext)(void 0),$q=e=>{var{id:t,type:n,children:i}=e,a=function(e,t){var n=Xq();return t||(e?"".concat(e,"-").concat(n):n)}("recharts-".concat(n),t);return r.createElement(Jq.Provider,{value:a},i(a))};function Zq(e){var t=ok(),n=(0,r.useRef)(null);return(0,r.useEffect)(()=>{null===n.current?t(CM(e)):n.current!==e&&t(SM({prev:n.current,next:e})),n.current=e},[t,e]),(0,r.useEffect)(()=>()=>{n.current&&(t(EM(n.current)),n.current=null)},[t]),null}function eH(e){var t=ok();return(0,r.useEffect)(()=>(t(TM(e)),()=>{t(_M(e))}),[t,e]),null}function tH(){}var nH={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},rH={t:0},iH={t:1};function aH(e){var t=bL(e,nH),{isActive:n,canBegin:i,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d=mV("JavascriptAnimate",t.animationManager),[h,p]=(0,r.useState)(n?rH:iH),m=(0,r.useRef)(null);return(0,r.useEffect)(()=>{n||p(iH)},[n]),(0,r.useEffect)(()=>{if(!n||!i)return tH;var e=uV(rH,iH,$U(s),a,p,d.getTimeoutController());return d.start([c,o,()=>{m.current=e()},a,l]),()=>{d.stop(),m.current&&m.current(),l()}},[n,i,a,s,o,c,l,d]),u(h.t)}var sH=["onMouseEnter","onMouseLeave","onClick"],oH=["value","background","tooltipPosition"],lH=["id"],cH=["onMouseEnter","onClick","onMouseLeave"];function uH(){return uH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uH.apply(null,arguments)}function dH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function hH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dH(Object(n),!0).forEach(function(t){pH(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pH(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mH(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var fH=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:r,value:Jk(n,t),payload:e}]};function gH(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:a,hide:s,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:Jk(a,t),hide:s,type:e.tooltipType,color:e.fill,unit:o}}}function vH(e){var t=dk(LD),{data:n,dataKey:i,background:a,allOtherBarProps:s}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=s,u=mH(s,sH),d=wq(o,i),h=Nq(l),p=kq(c,i);if(!a||null==n)return null;var m=BR(a,!1);return r.createElement(r.Fragment,null,n.map((e,n)=>{var{value:s,background:o,tooltipPosition:l}=e,c=mH(e,oH);if(!o)return null;var f=d(e,n),g=h(e,n),v=p(e,n),y=hH(hH(hH(hH(hH({option:a,isActive:String(n)===t},c),{},{fill:"#eee"},o),m),PR(u,e,n)),{},{onMouseEnter:f,onMouseLeave:g,onClick:v,dataKey:i,index:n,className:"recharts-bar-background-rectangle"});return r.createElement(bq,uH({key:"background-bar-".concat(n)},y))}))}function yH(e){var{data:t,props:n,showLabels:i}=e,a=MR(n),{id:s}=a,o=mH(a,lH),{shape:l,dataKey:c,activeBar:u}=n,d=dk(LD),h=dk(FD),{onMouseEnter:p,onClick:m,onMouseLeave:f}=n,g=mH(n,cH),v=wq(p,c),y=Nq(f),x=kq(m,c);return t?r.createElement(r.Fragment,null,t.map((e,t)=>{var n=u&&String(t)===d&&(null==h||c===h),i=n?u:l,a=hH(hH(hH({},o),e),{},{isActive:n,option:i,index:t,dataKey:c});return r.createElement(XL,uH({className:"recharts-bar-rectangle"},PR(g,e,t),{onMouseEnter:v(e,t),onMouseLeave:y(e,t),onClick:x(e,t),key:"rectangle-".concat(null===e||void 0===e?void 0:e.x,"-").concat(null===e||void 0===e?void 0:e.y,"-").concat(null===e||void 0===e?void 0:e.value,"-").concat(t)}),r.createElement(bq,a))}),i&&ZB.renderCallByParent(n,t)):null}function xH(e){var{props:t,previousRectanglesRef:n}=e,{data:i,layout:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,h=n.current,p=Qq(t,"recharts-bar-"),[m,f]=(0,r.useState)(!1),g=(0,r.useCallback)(()=>{"function"===typeof u&&u(),f(!1)},[u]),v=(0,r.useCallback)(()=>{"function"===typeof d&&d(),f(!0)},[d]);return r.createElement(aH,{begin:o,duration:l,isActive:s,easing:c,onAnimationEnd:g,onAnimationStart:v,key:p},e=>{var s=1===e?i:null===i||void 0===i?void 0:i.map((t,n)=>{var r=h&&h[n];if(r)return hH(hH({},t),{},{x:pb(r.x,t.x,e),y:pb(r.y,t.y,e),width:pb(r.width,t.width,e),height:pb(r.height,t.height,e)});if("horizontal"===a){var i=pb(0,t.height,e);return hH(hH({},t),{},{y:t.y+t.height-i,height:i})}var s=pb(0,t.width,e);return hH(hH({},t),{},{width:s})});return e>0&&(n.current=null!==s&&void 0!==s?s:null),null==s?null:r.createElement(XL,null,r.createElement(yH,{props:t,data:s,showLabels:!m}))})}function bH(e){var{data:t,isAnimationActive:n}=e,i=(0,r.useRef)(null);return n&&t&&t.length&&(null==i.current||i.current!==t)?r.createElement(xH,{previousRectanglesRef:i,props:e}):r.createElement(yH,{props:e,data:t,showLabels:!0})}var jH=0,wH=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Rk(e,t)}};class NH extends r.PureComponent{render(){var{hide:e,data:t,dataKey:n,className:i,xAxisId:a,yAxisId:s,needClip:o,background:l,id:c}=this.props;if(e)return null;var u=$x("recharts-bar",i),d=c;return r.createElement(XL,{className:u,id:c},o&&r.createElement("defs",null,r.createElement(Iq,{clipPathId:d,xAxisId:a,yAxisId:s})),r.createElement(XL,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(d,")"):void 0},r.createElement(vH,{data:t,dataKey:n,background:l,allOtherBarProps:this.props}),r.createElement(bH,this.props)),this.props.children)}}var kH={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!EL,legendType:"rect",minPointSize:jH,xAxisId:0,yAxisId:0};function CH(e){var t,{xAxisId:n,yAxisId:i,hide:a,legendType:s,minPointSize:o,activeBar:l,animationBegin:c,animationDuration:u,animationEasing:d,isAnimationActive:h}=e,{needClip:p}=Aq(n,i),m=NC(),f=pC(),g=UR(e.children,BB),v=dk(t=>Wq(t,n,i,f,e.id,g));if("vertical"!==m&&"horizontal"!==m)return null;var y=null===v||void 0===v?void 0:v[0];return t=null==y||null==y.height||null==y.width?0:"vertical"===m?y.height/2:y.width/2,r.createElement(_q,{xAxisId:n,yAxisId:i,data:v,dataPointFormatter:wH,errorBarOffset:t},r.createElement(NH,uH({},e,{layout:m,needClip:p,data:v,xAxisId:n,yAxisId:i,hide:a,legendType:s,minPointSize:o,activeBar:l,animationBegin:c,animationDuration:u,animationEasing:d,isAnimationActive:h})))}function SH(e){var t=bL(e,kH),n=pC();return r.createElement($q,{id:t.id,type:"bar"},e=>r.createElement(r.Fragment,null,r.createElement(Gq,{legendPayload:fH(t)}),r.createElement(Cq,{fn:gH,args:t}),r.createElement(Zq,{type:"bar",id:e,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:qk(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),r.createElement(CH,uH({},t,{id:e}))))}SH.displayName="Bar";var EH=["axis"],TH=(0,r.forwardRef)((e,t)=>r.createElement(kL,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:EH,tooltipPayloadSearcher:jw,categoricalChartProps:e,ref:t}));function _H(){return _H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_H.apply(null,arguments)}var AH=e=>{var{cx:t,cy:n,r:i,className:a}=e,s=$x("recharts-dot",a);return t===+t&&n===+n&&i===+i?r.createElement("circle",_H({},MR(e),IR(e),{className:s,cx:t,cy:n,r:i})):null};function IH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function PH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IH(Object(n),!0).forEach(function(t){OH(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function OH(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DH(e){var{points:t,mainColor:n,activeDot:i,itemDataKey:a}=e,s=dk(LD),o=dk(WD);if(null==t||null==o)return null;var l=t.find(e=>o.includes(e.payload));return fb(l)?null:(e=>{var{point:t,childIndex:n,mainColor:i,activeDot:a,dataKey:s}=e;if(!1===a||null==t.x||null==t.y)return null;var o,l=PH(PH({index:n,dataKey:s,cx:t.x,cy:t.y,r:4,fill:null!==i&&void 0!==i?i:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},BR(a,!1)),IR(a));return o=(0,r.isValidElement)(a)?(0,r.cloneElement)(a,l):"function"===typeof a?a(l):r.createElement(AH,l),r.createElement(XL,{className:"recharts-active-dot"},o)})({point:l,childIndex:Number(s),mainColor:n,dataKey:a,activeDot:i})}var MH=(e,t,n,r)=>DO(e,"xAxis",t,r),RH=(e,t,n,r)=>OO(e,"xAxis",t,r),LH=(e,t,n,r)=>DO(e,"yAxis",n,r),zH=(e,t,n,r)=>OO(e,"yAxis",n,r),FH=nk([wC,MH,LH,RH,zH],(e,t,n,r,i)=>Lk(e,"xAxis")?Qk(t,r,!1):Qk(n,i,!1));function UH(e){return"line"===e.type}var VH=nk([aP,(e,t,n,r,i)=>i],(e,t)=>e.filter(UH).find(e=>e.id===t)),BH=nk([wC,MH,LH,RH,zH,VH,FH,RA],(e,t,n,r,i,a,s,o)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=o;if(null!=a&&null!=t&&null!=n&&null!=r&&null!=i&&0!==r.length&&0!==i.length&&null!=s){var d,{dataKey:h,data:p}=a;if(null!=(d=null!=p&&p.length>0?p:null===l||void 0===l?void 0:l.slice(c,u+1)))return function(e){var{layout:t,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,dataKey:s,bandSize:o,displayedData:l}=e;return l.map((e,l)=>{var c=Rk(e,s);if("horizontal"===t)return{x:Hk({axis:n,ticks:i,bandSize:o,entry:e,index:l}),y:fb(c)?null:r.scale(c),value:c,payload:e};var u=fb(c)?null:n.scale(c),d=Hk({axis:r,ticks:a,bandSize:o,entry:e,index:l});return null==u||null==d?null:{x:u,y:d,value:c,payload:e}}).filter(Boolean)}({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:h,bandSize:s,displayedData:d})}}),qH=["id"],HH=["type","layout","connectNulls","needClip"],WH=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function KH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function GH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KH(Object(n),!0).forEach(function(t){YH(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function YH(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QH(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function XH(){return XH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XH.apply(null,arguments)}var JH=e=>{var{dataKey:t,name:n,stroke:r,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:r,value:Jk(n,t),payload:e}]};function $H(e){var{dataKey:t,data:n,stroke:r,strokeWidth:i,fill:a,name:s,hide:o,unit:l}=e;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:t,nameKey:void 0,name:Jk(s,t),hide:o,type:e.tooltipType,color:e.stroke,unit:l}}}var ZH=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function eW(e,t){for(var n=e.length%2!==0?[...e,0]:e,r=[],i=0;i<t;++i)r=[...r,...n];return r}function tW(e){var{clipPathId:t,points:n,props:i}=e,{dot:a,dataKey:s,needClip:o}=i;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(n,a))return null;var{id:l}=i,c=QH(i,qH),u=VR(a),d=MR(c),h=BR(a,!0),p=n.map((e,t)=>{var i=GH(GH(GH({key:"dot-".concat(t),r:3},d),h),{},{index:t,cx:e.x,cy:e.y,dataKey:s,value:e.value,payload:e.payload,points:n});return function(e,t){var n;if(r.isValidElement(e))n=r.cloneElement(e,t);else if("function"===typeof e)n=e(t);else{var i=$x("recharts-line-dot","boolean"!==typeof e?e.className:"");n=r.createElement(AH,XH({},t,{className:i}))}return n}(a,i)}),m={clipPath:o?"url(#clipPath-".concat(u?"":"dots-").concat(t,")"):void 0};return r.createElement(XL,XH({className:"recharts-line-dots",key:"dots"},m),p)}function nW(e){var{clipPathId:t,pathRef:n,points:i,strokeDasharray:a,props:s,showLabels:o}=e,{type:l,layout:c,connectNulls:u,needClip:d}=s,h=QH(s,HH),p=GH(GH({},BR(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:i,type:l,layout:c,connectNulls:u,strokeDasharray:null!==a&&void 0!==a?a:s.strokeDasharray});return r.createElement(r.Fragment,null,(null===i||void 0===i?void 0:i.length)>1&&r.createElement(zU,XH({},p,{pathRef:n})),r.createElement(tW,{points:i,clipPathId:t,props:s}),o&&ZB.renderCallByParent(s,i))}function rW(e){var{clipPathId:t,props:n,pathRef:i,previousPointsRef:a,longestAnimatedLengthRef:s}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:h,animateNewValues:p,width:m,height:f,onAnimationEnd:g,onAnimationStart:v}=n,y=a.current,x=Qq(n,"recharts-line-"),[b,j]=(0,r.useState)(!1),w=(0,r.useCallback)(()=>{"function"===typeof g&&g(),j(!1)},[g]),N=(0,r.useCallback)(()=>{"function"===typeof v&&v(),j(!0)},[v]),k=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}(i.current),C=s.current;return r.createElement(aH,{begin:u,duration:d,isActive:c,easing:h,onAnimationEnd:w,onAnimationStart:N,key:x},e=>{var c,u=pb(C,k+C,e),d=Math.min(u,k);if(l){var h="".concat(l).split(/[,\s]+/gim).map(e=>parseFloat(e));c=((e,t,n)=>{var r=n.reduce((e,t)=>e+t);if(!r)return ZH(t,e);for(var i=Math.floor(e/r),a=e%r,s=t-e,o=[],l=0,c=0;l<n.length;c+=n[l],++l)if(c+n[l]>a){o=[...n.slice(0,l),a-c];break}var u=o.length%2===0?[0,s]:[s];return[...eW(n,i),...o,...u].map(e=>"".concat(e,"px")).join(", ")})(d,k,h)}else c=ZH(k,d);if(y){var g=y.length/o.length,v=1===e?o:o.map((t,n)=>{var r=Math.floor(n*g);if(y[r]){var i=y[r];return GH(GH({},t),{},{x:pb(i.x,t.x,e),y:pb(i.y,t.y,e)})}return GH(GH({},t),{},p?{x:pb(2*m,t.x,e),y:pb(f/2,t.y,e)}:{x:t.x,y:t.y})});return a.current=v,r.createElement(nW,{props:n,points:v,clipPathId:t,pathRef:i,showLabels:!b,strokeDasharray:c})}return e>0&&k>0&&(a.current=o,s.current=d),r.createElement(nW,{props:n,points:o,clipPathId:t,pathRef:i,showLabels:!b,strokeDasharray:c})})}function iW(e){var{clipPathId:t,props:n}=e,{points:i,isAnimationActive:a}=n,s=(0,r.useRef)(null),o=(0,r.useRef)(0),l=(0,r.useRef)(null),c=s.current;return a&&i&&i.length&&c!==i?r.createElement(rW,{props:n,clipPathId:t,previousPointsRef:s,longestAnimatedLengthRef:o,pathRef:l}):r.createElement(nW,{props:n,points:i,clipPathId:t,pathRef:l,showLabels:!0})}var aW=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Rk(e.payload,t)});class sW extends r.Component{render(){var e,{hide:t,dot:n,points:i,className:a,xAxisId:s,yAxisId:o,top:l,left:c,width:u,height:d,id:h,needClip:p}=this.props;if(t)return null;var m=$x("recharts-line",a),f=h,{r:g=3,strokeWidth:v=2}=null!==(e=BR(n,!1))&&void 0!==e?e:{r:3,strokeWidth:2},y=VR(n),x=2*g+v;return r.createElement(r.Fragment,null,r.createElement(XL,{className:m},p&&r.createElement("defs",null,r.createElement(Iq,{clipPathId:f,xAxisId:s,yAxisId:o}),!y&&r.createElement("clipPath",{id:"clipPath-dots-".concat(f)},r.createElement("rect",{x:c-x/2,y:l-x/2,width:u+x,height:d+x}))),r.createElement(iW,{props:this.props,clipPathId:f}),r.createElement(_q,{xAxisId:s,yAxisId:o,data:i,dataPointFormatter:aW,errorBarOffset:0},this.props.children)),r.createElement(DH,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var oW={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!EL,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function lW(e){var t=bL(e,oW),{activeDot:n,animateNewValues:i,animationBegin:a,animationDuration:s,animationEasing:o,connectNulls:l,dot:c,hide:u,isAnimationActive:d,label:h,legendType:p,xAxisId:m,yAxisId:f,id:g}=t,v=QH(t,WH),{needClip:y}=Aq(m,f),x=pL(),b=NC(),j=pC(),w=dk(e=>BH(e,m,f,j,g));if("horizontal"!==b&&"vertical"!==b||null==w||null==x)return null;var{height:N,width:k,x:C,y:S}=x;return r.createElement(sW,XH({},v,{id:g,connectNulls:l,dot:c,activeDot:n,animateNewValues:i,animationBegin:a,animationDuration:s,animationEasing:o,isAnimationActive:d,hide:u,label:h,legendType:p,xAxisId:m,yAxisId:f,points:w,layout:b,height:N,width:k,left:C,top:S,needClip:y}))}function cW(e){var t=bL(e,oW),n=pC();return r.createElement($q,{id:t.id,type:"line"},e=>r.createElement(r.Fragment,null,r.createElement(Gq,{legendPayload:JH(t)}),r.createElement(Cq,{fn:$H,args:t}),r.createElement(Zq,{type:"line",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),r.createElement(lW,XH({},t,{id:e}))))}function uW(e){var t=ok();return(0,r.useEffect)(()=>{t(sR(e))},[t,e]),null}cW.displayName="Line";var dW=["width","height","layout"];function hW(){return hW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hW.apply(null,arguments)}var pW={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial"},mW=(0,r.forwardRef)(function(e,t){var n,i=bL(e.categoricalChartProps,pW),{width:a,height:s,layout:o}=i,l=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(i,dW);if(!zA(a)||!zA(s))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:h}=e,p={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:h,eventEmitter:void 0};return r.createElement(jR,{preloadedState:{options:p},reduxStoreName:null!==(n=i.id)&&void 0!==n?n:c},r.createElement(wR,{chartData:i.data}),r.createElement(NR,{width:a,height:s,layout:o,margin:i.margin}),r.createElement(kR,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),r.createElement(uW,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),r.createElement(vL,hW({width:a,height:s},l,{ref:t})))}),fW=["item"],gW={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},vW=(0,r.forwardRef)((e,t)=>{var n=bL(e,gW);return r.createElement(mW,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:fW,tooltipPayloadSearcher:jw,categoricalChartProps:n,ref:t})}),yW=e=>e.graphicalItems.polarItems,xW=nk([LI,zI],iP),bW=nk([yW,tP,xW],oP),jW=nk([bW],hP),wW=nk([jW,MA],mP),NW=nk([wW,tP,bW],gP),kW=nk([wW,tP,bW],(e,t,n)=>n.length>0?e.flatMap(e=>n.flatMap(n=>{var r;return{value:Rk(e,null!==(r=t.dataKey)&&void 0!==r?r:n.dataKey),errorDomain:[]}})).filter(Boolean):null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:Rk(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]}))),CW=()=>{},SW=nk([tP,YP,CW,kW,CW,wC,LI],QP),EW=nk([tP,wC,wW,NW,cI,LI,SW],$P),TW=nk([EW,tP,tO],rO);nk([tP,EW,TW,LI],aO);function _W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function AW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_W(Object(n),!0).forEach(function(t){IW(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_W(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function IW(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var PW=nk([yW,(e,t)=>t],(e,t)=>e.filter(e=>"pie"===e.type).find(e=>e.id===t)),OW=[],DW=(e,t,n)=>0===(null===n||void 0===n?void 0:n.length)?OW:n,MW=nk([MA,PW,DW],(e,t,n)=>{var r,{chartData:i}=e;if(null!=t&&((r=null!=(null===t||void 0===t?void 0:t.data)&&t.data.length>0?t.data:i)&&r.length||null==n||(r=n.map(e=>AW(AW({},t.presentationProps),e.props))),null!=r))return r}),RW=nk([MW,PW,DW],(e,t,n)=>{if(null!=e&&null!=t)return e.map((e,r)=>{var i,a,s=Rk(e,t.nameKey,t.name);return a=null!==n&&void 0!==n&&null!==(i=n[r])&&void 0!==i&&null!==(i=i.props)&&void 0!==i&&i.fill?n[r].props.fill:"object"===typeof e&&null!=e&&"fill"in e?e.fill:t.fill,{value:Jk(s,t.dataKey),color:a,payload:e,type:t.legendType}})}),LW=nk([MW,PW,DW,cC],(e,t,n,r)=>{if(null!=t&&null!=e)return function(e){var t,n,r,{pieSettings:i,displayedData:a,cells:s,offset:o}=e,{cornerRadius:l,startAngle:c,endAngle:u,dataKey:d,nameKey:h,tooltipType:p}=i,m=Math.abs(i.minAngle),f=XW(c,u),g=Math.abs(f),v=a.length<=1?0:null!==(t=i.paddingAngle)&&void 0!==t?t:0,y=a.filter(e=>0!==Rk(e,d,0)).length,x=g-y*m-(g>=360?y:y-1)*v,b=a.reduce((e,t)=>{var n=Rk(t,d,0);return e+(sb(n)?n:0)},0);b>0&&(n=a.map((e,t)=>{var n,a=Rk(e,d,0),u=Rk(e,h,t),g=QW(i,o,e),y=(sb(a)?a:0)/b,j=qW(qW({},e),s&&s[t]&&s[t].props),w=(n=t?r.endAngle+rb(f)*v*(0!==a?1:0):c)+rb(f)*((0!==a?m:0)+y*x),N=(n+w)/2,k=(g.innerRadius+g.outerRadius)/2,C=[{name:u,value:a,payload:j,dataKey:d,type:p}],S=Ek(g.cx,g.cy,k,N);return r=qW(qW(qW(qW({},i.presentationProps),{},{percent:y,cornerRadius:l,name:u,tooltipPayload:C,midAngle:N,middleRadius:k,tooltipPosition:S},j),g),{},{value:Rk(e,d),startAngle:n,endAngle:w,payload:j,paddingAngle:rb(f)*v})}));return n}({offset:r,pieSettings:t,displayedData:e,cells:n})}),zW=["onMouseEnter","onClick","onMouseLeave"],FW=["id"],UW=["id"];function VW(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function BW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BW(Object(n),!0).forEach(function(t){HW(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BW(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function HW(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WW(){return WW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WW.apply(null,arguments)}function KW(e){var t=(0,r.useMemo)(()=>UR(e.children,BB),[e.children]),n=dk(n=>RW(n,e.id,t));return null==n?null:r.createElement(Yq,{legendPayload:n})}function GW(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:s,name:o,hide:l,tooltipType:c}=e;return{dataDefinedOnItem:null===r||void 0===r?void 0:r.map(e=>e.tooltipPayload),positions:null===r||void 0===r?void 0:r.map(e=>e.tooltipPosition),settings:{stroke:i,strokeWidth:a,fill:s,dataKey:t,nameKey:n,name:Jk(o,t),hide:l,type:c,color:s,unit:""}}}var YW=(e,t)=>e>t?"start":e<t?"end":"middle",QW=(e,t,n)=>{var{top:r,left:i,width:a,height:s}=t,o=Tk(a,s),l=i+ub(e.cx,a,a/2),c=r+ub(e.cy,s,s/2),u=ub(e.innerRadius,o,0),d=((e,t,n)=>"function"===typeof t?t(e):ub(t,n,.8*n))(n,e.outerRadius,o);return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:e.maxRadius||Math.sqrt(a*a+s*s)/2}},XW=(e,t)=>rb(t-e)*Math.min(Math.abs(t-e),360);function JW(e){var{sectors:t,props:n,showLabels:i}=e,{label:a,labelLine:s,dataKey:o}=n;if(!i||!a||!t)return null;var l=MR(n),c=BR(a,!1),u=BR(s,!1),d="object"===typeof a&&"offsetRadius"in a&&a.offsetRadius||20,h=t.map((e,t)=>{var n=(e.startAngle+e.endAngle)/2,i=Ek(e.cx,e.cy,e.outerRadius+d,n),h=qW(qW(qW(qW({},l),e),{},{stroke:"none"},c),{},{index:t,textAnchor:YW(i.x,e.cx)},i),p=qW(qW(qW(qW({},l),e),{},{fill:"none",stroke:e.fill},u),{},{index:t,points:[Ek(e.cx,e.cy,e.outerRadius,n),i],key:"line"});return r.createElement(XL,{key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(t)},s&&((e,t)=>{if(r.isValidElement(e))return r.cloneElement(e,t);if("function"===typeof e)return e(t);var n=$x("recharts-pie-label-line","boolean"!==typeof e?e.className:"");return r.createElement(zU,WW({},t,{type:"linear",className:n}))})(s,p),((e,t,n)=>{if(r.isValidElement(e))return r.cloneElement(e,t);var i=n;if("function"===typeof e&&(i=e(t),r.isValidElement(i)))return i;var a=$x("recharts-pie-label-text","boolean"!==typeof e&&"function"!==typeof e?e.className:"");return r.createElement(yz,WW({},t,{alignmentBaseline:"middle",className:a}),i)})(a,h,Rk(e,o)))});return r.createElement(XL,{className:"recharts-pie-labels"},h)}function $W(e){var{sectors:t,activeShape:n,inactiveShape:i,allOtherPieProps:a,showLabels:s}=e,o=dk(LD),{onMouseEnter:l,onClick:c,onMouseLeave:u}=a,d=VW(a,zW),h=wq(l,a.dataKey),p=Nq(u),m=kq(c,a.dataKey);return null==t?null:r.createElement(r.Fragment,null,t.map((e,s)=>{if(0===(null===e||void 0===e?void 0:e.startAngle)&&0===(null===e||void 0===e?void 0:e.endAngle)&&1!==t.length)return null;var l=n&&String(s)===o,c=l?n:o?i:null,u=qW(qW({},e),{},{stroke:e.stroke,tabIndex:-1,[iC]:s,[aC]:a.dataKey});return r.createElement(XL,WW({tabIndex:-1,className:"recharts-pie-sector"},PR(d,e,s),{onMouseEnter:h(e,s),onMouseLeave:p(e,s),onClick:m(e,s),key:"sector-".concat(null===e||void 0===e?void 0:e.startAngle,"-").concat(null===e||void 0===e?void 0:e.endAngle,"-").concat(e.midAngle,"-").concat(s)}),r.createElement(pq,WW({option:c,isActive:l,shapeType:"sector"},u)))}),r.createElement(JW,{sectors:t,props:a,showLabels:s}))}function ZW(e){var{props:t,previousSectorsRef:n}=e,{sectors:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:h}=t,p=Qq(t,"recharts-pie-"),m=n.current,[f,g]=(0,r.useState)(!0),v=(0,r.useCallback)(()=>{"function"===typeof h&&h(),g(!1)},[h]),y=(0,r.useCallback)(()=>{"function"===typeof d&&d(),g(!0)},[d]);return r.createElement(aH,{begin:s,duration:o,isActive:a,easing:l,onAnimationStart:y,onAnimationEnd:v,key:p},e=>{var a=[],s=(i&&i[0]).startAngle;return i.forEach((t,n)=>{var r=m&&m[n],i=n>0?nb()(t,"paddingAngle",0):0;if(r){var o=hb(r.endAngle-r.startAngle,t.endAngle-t.startAngle),l=qW(qW({},t),{},{startAngle:s+i,endAngle:s+o(e)+i});a.push(l),s=l.endAngle}else{var{endAngle:c,startAngle:u}=t,d=hb(0,c-u)(e),h=qW(qW({},t),{},{startAngle:s+i,endAngle:s+d+i});a.push(h),s=h.endAngle}}),n.current=a,r.createElement(XL,null,r.createElement($W,{sectors:a,activeShape:c,inactiveShape:u,allOtherPieProps:t,showLabels:!f}))})}function eK(e){var{sectors:t,isAnimationActive:n,activeShape:i,inactiveShape:a}=e,s=(0,r.useRef)(null),o=s.current;return n&&t&&t.length&&(!o||o!==t)?r.createElement(ZW,{props:e,previousSectorsRef:s}):r.createElement($W,{sectors:t,activeShape:i,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function tK(e){var{hide:t,className:n,rootTabIndex:i}=e,a=$x("recharts-pie",n);return t?null:r.createElement(XL,{tabIndex:i,className:a},r.createElement(eK,e))}var nK={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!EL,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function rK(e){var{id:t}=e,n=VW(e,FW),i=(0,r.useMemo)(()=>UR(e.children,BB),[e.children]),a=dk(e=>LW(e,t,i));return r.createElement(r.Fragment,null,r.createElement(Cq,{fn:GW,args:qW(qW({},e),{},{sectors:a})}),r.createElement(tK,WW({},n,{sectors:a})))}function iK(e){var t=bL(e,nK),{id:n}=t,i=VW(t,UW),a=MR(i);return r.createElement($q,{id:n,type:"pie"},e=>r.createElement(r.Fragment,null,r.createElement(eH,{type:"pie",id:e,data:i.data,dataKey:i.dataKey,hide:i.hide,angleAxisId:0,radiusAxisId:0,name:i.name,nameKey:i.nameKey,tooltipType:i.tooltipType,legendType:i.legendType,fill:i.fill,cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,paddingAngle:i.paddingAngle,minAngle:i.minAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius,cornerRadius:i.cornerRadius,presentationProps:a}),r.createElement(KW,WW({},i,{id:e})),r.createElement(rK,WW({},i,{id:e})),i.children))}iK.displayName="Pie";var aK=["axis"],sK=(0,r.forwardRef)((e,t)=>r.createElement(kL,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:aK,tooltipPayloadSearcher:jw,categoricalChartProps:e,ref:t})),oK=(e,t,n,r)=>DO(e,"xAxis",t,r),lK=(e,t,n,r)=>OO(e,"xAxis",t,r),cK=(e,t,n,r)=>DO(e,"yAxis",n,r),uK=(e,t,n,r)=>OO(e,"yAxis",n,r),dK=nk([wC,oK,cK,lK,uK],(e,t,n,r,i)=>Lk(e,"xAxis")?Qk(t,r,!1):Qk(n,i,!1)),hK=nk([aP,(e,t,n,r,i)=>i],(e,t)=>e.filter(e=>"area"===e.type).find(e=>e.id===t)),pK=nk([wC,oK,cK,lK,uK,(e,t,n,r,i)=>{var a,s=hK(e,t,n,r,i);if(null!=s){var o,l=wC(e);if(null!=(o=Lk(l,"xAxis")?NP(e,"yAxis",n,r):NP(e,"xAxis",t,r))){var{stackId:c}=s,u=FI(s);if(null!=c&&null!=u){var d=null===(a=o[c])||void 0===a?void 0:a.stackedData;return null===d||void 0===d?void 0:d.find(e=>e.key===u)}}}},RA,dK,hK],(e,t,n,r,i,a,s,o,l)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=s;if(null!=l&&("horizontal"===e||"vertical"===e)&&null!=t&&null!=n&&null!=r&&null!=i&&0!==r.length&&0!==i.length&&null!=o){var h,{data:p}=l;if(null!=(h=p&&p.length>0?p:null===c||void 0===c?void 0:c.slice(u,d+1))){return function(e){var t,{areaSettings:{connectNulls:n,baseValue:r,dataKey:i},stackedData:a,layout:s,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:u,dataStartIndex:d,xAxisTicks:h,yAxisTicks:p,bandSize:m}=e,f=a&&a.length,g=DK(s,o,r,l,c),v="horizontal"===s,y=!1,x=u.map((e,t)=>{var r;f?r=a[d+t]:(r=Rk(e,i),Array.isArray(r)?y=!0:r=[g,r]);var s=null==r[1]||f&&!n&&null==Rk(e,i);return v?{x:Hk({axis:l,ticks:h,bandSize:m,entry:e,index:t}),y:s?null:c.scale(r[1]),value:r,payload:e}:{x:s?null:l.scale(r[1]),y:Hk({axis:c,ticks:p,bandSize:m,entry:e,index:t}),value:r,payload:e}});t=f||y?x.map(e=>{var t=Array.isArray(e.value)?e.value[0]:null;return v?{x:e.x,y:null!=t&&null!=e.y?c.scale(t):null,payload:e.payload}:{x:null!=t?l.scale(t):null,y:e.y,payload:e.payload}}):v?c.scale(g):l.scale(g);return{points:x,baseLine:t,isRange:y}}({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:u,areaSettings:l,stackedData:a,displayedData:h,chartBaseValue:undefined,bandSize:o})}}}),mK=["id"],fK=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function gK(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function yK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vK(Object(n),!0).forEach(function(t){xK(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function xK(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bK(){return bK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bK.apply(null,arguments)}function jK(e,t){return e&&"none"!==e?e:t}var wK=e=>{var{dataKey:t,name:n,stroke:r,fill:i,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:jK(r,i),value:Jk(n,t),payload:e}]};function NK(e){var{dataKey:t,data:n,stroke:r,strokeWidth:i,fill:a,name:s,hide:o,unit:l}=e;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:t,nameKey:void 0,name:Jk(s,t),hide:o,type:e.tooltipType,color:jK(r,a),unit:l}}}function kK(e){var{clipPathId:t,points:n,props:i}=e,{needClip:a,dot:s,dataKey:o}=i;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(n,s))return null;var l=VR(s),c=MR(i),u=BR(s,!0),d=n.map((e,t)=>{var i=yK(yK(yK({key:"dot-".concat(t),r:3},c),u),{},{index:t,cx:e.x,cy:e.y,dataKey:o,value:e.value,payload:e.payload,points:n});return((e,t)=>{var n;if(r.isValidElement(e))n=r.cloneElement(e,t);else if("function"===typeof e)n=e(t);else{var i=$x("recharts-area-dot","boolean"!==typeof e?e.className:"");n=r.createElement(AH,bK({},t,{className:i}))}return n})(s,i)}),h={clipPath:a?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):void 0};return r.createElement(XL,bK({className:"recharts-area-dots"},h),d)}function CK(e){var{points:t,baseLine:n,needClip:i,clipPathId:a,props:s,showLabels:o}=e,{layout:l,type:c,stroke:u,connectNulls:d,isRange:h}=s,{id:p}=s,m=gK(s,mK),f=MR(m);return r.createElement(r.Fragment,null,(null===t||void 0===t?void 0:t.length)>1&&r.createElement(XL,{clipPath:i?"url(#clipPath-".concat(a,")"):void 0},r.createElement(zU,bK({},f,{id:p,points:t,connectNulls:d,type:c,baseLine:n,layout:l,stroke:"none",className:"recharts-area-area"})),"none"!==u&&r.createElement(zU,bK({},f,{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:t})),"none"!==u&&h&&r.createElement(zU,bK({},f,{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:n}))),r.createElement(kK,{points:t,props:m,clipPathId:a}),o&&ZB.renderCallByParent(m,t))}function SK(e){var{alpha:t,baseLine:n,points:i,strokeWidth:a}=e,s=i[0].y,o=i[i.length-1].y;if(!LA(s)||!LA(o))return null;var l=t*Math.abs(s-o),c=Math.max(...i.map(e=>e.x||0));return sb(n)?c=Math.max(n,c):n&&Array.isArray(n)&&n.length&&(c=Math.max(...n.map(e=>e.x||0),c)),sb(c)?r.createElement("rect",{x:0,y:s<o?s:s-l,width:c+(a?parseInt("".concat(a),10):1),height:Math.floor(l)}):null}function EK(e){var{alpha:t,baseLine:n,points:i,strokeWidth:a}=e,s=i[0].x,o=i[i.length-1].x;if(!LA(s)||!LA(o))return null;var l=t*Math.abs(s-o),c=Math.max(...i.map(e=>e.y||0));return sb(n)?c=Math.max(n,c):n&&Array.isArray(n)&&n.length&&(c=Math.max(...n.map(e=>e.y||0),c)),sb(c)?r.createElement("rect",{x:s<o?s:s-l,y:0,width:l,height:Math.floor(c+(a?parseInt("".concat(a),10):1))}):null}function TK(e){var{alpha:t,layout:n,points:i,baseLine:a,strokeWidth:s}=e;return"vertical"===n?r.createElement(SK,{alpha:t,points:i,baseLine:a,strokeWidth:s}):r.createElement(EK,{alpha:t,points:i,baseLine:a,strokeWidth:s})}function _K(e){var{needClip:t,clipPathId:n,props:i,previousPointsRef:a,previousBaselineRef:s}=e,{points:o,baseLine:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:h,onAnimationStart:p,onAnimationEnd:m}=i,f=Qq(i,"recharts-area-"),[g,v]=(0,r.useState)(!0),y=(0,r.useCallback)(()=>{"function"===typeof m&&m(),v(!1)},[m]),x=(0,r.useCallback)(()=>{"function"===typeof p&&p(),v(!0)},[p]),b=a.current,j=s.current;return r.createElement(aH,{begin:u,duration:d,isActive:c,easing:h,onAnimationEnd:y,onAnimationStart:x,key:f},e=>{if(b){var c,u=b.length/o.length,d=1===e?o:o.map((t,n)=>{var r=Math.floor(n*u);if(b[r]){var i=b[r];return yK(yK({},t),{},{x:pb(i.x,t.x,e),y:pb(i.y,t.y,e)})}return t});return c=sb(l)?pb(j,l,e):fb(l)||ib(l)?pb(j,0,e):l.map((t,n)=>{var r=Math.floor(n*u);if(Array.isArray(j)&&j[r]){var i=j[r];return yK(yK({},t),{},{x:pb(i.x,t.x,e),y:pb(i.y,t.y,e)})}return t}),e>0&&(a.current=d,s.current=c),r.createElement(CK,{points:d,baseLine:c,needClip:t,clipPathId:n,props:i,showLabels:!g})}return e>0&&(a.current=o,s.current=l),r.createElement(XL,null,r.createElement("defs",null,r.createElement("clipPath",{id:"animationClipPath-".concat(n)},r.createElement(TK,{alpha:e,points:o,baseLine:l,layout:i.layout,strokeWidth:i.strokeWidth}))),r.createElement(XL,{clipPath:"url(#animationClipPath-".concat(n,")")},r.createElement(CK,{points:o,baseLine:l,needClip:t,clipPathId:n,props:i,showLabels:!0})))})}function AK(e){var{needClip:t,clipPathId:n,props:i}=e,{points:a,baseLine:s,isAnimationActive:o}=i,l=(0,r.useRef)(null),c=(0,r.useRef)(),u=l.current,d=c.current;return o&&a&&a.length&&(u!==a||d!==s)?r.createElement(_K,{needClip:t,clipPathId:n,props:i,previousPointsRef:l,previousBaselineRef:c}):r.createElement(CK,{points:a,baseLine:s,needClip:t,clipPathId:n,props:i,showLabels:!0})}class IK extends r.PureComponent{render(){var e,{hide:t,dot:n,points:i,className:a,top:s,left:o,needClip:l,xAxisId:c,yAxisId:u,width:d,height:h,id:p,baseLine:m}=this.props;if(t)return null;var f=$x("recharts-area",a),g=p,{r:v=3,strokeWidth:y=2}=null!==(e=BR(n,!1))&&void 0!==e?e:{r:3,strokeWidth:2},x=VR(n),b=2*v+y;return r.createElement(r.Fragment,null,r.createElement(XL,{className:f},l&&r.createElement("defs",null,r.createElement(Iq,{clipPathId:g,xAxisId:c,yAxisId:u}),!x&&r.createElement("clipPath",{id:"clipPath-dots-".concat(g)},r.createElement("rect",{x:o-b/2,y:s-b/2,width:d+b,height:h+b}))),r.createElement(AK,{needClip:l,clipPathId:g,props:this.props})),r.createElement(DH,{points:i,mainColor:jK(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(m)&&r.createElement(DH,{points:m,mainColor:jK(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var PK={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!EL,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function OK(e){var t,n=bL(e,PK),{activeDot:i,animationBegin:a,animationDuration:s,animationEasing:o,connectNulls:l,dot:c,fill:u,fillOpacity:d,hide:h,isAnimationActive:p,legendType:m,stroke:f,xAxisId:g,yAxisId:v}=n,y=gK(n,fK),x=NC(),b=KD(),{needClip:j}=Aq(g,v),w=pC(),{points:N,isRange:k,baseLine:C}=null!==(t=dk(t=>pK(t,g,v,w,e.id)))&&void 0!==t?t:{},S=pL();if("horizontal"!==x&&"vertical"!==x||null==S)return null;if("AreaChart"!==b&&"ComposedChart"!==b)return null;var{height:E,width:T,x:_,y:A}=S;return N&&N.length?r.createElement(IK,bK({},y,{activeDot:i,animationBegin:a,animationDuration:s,animationEasing:o,baseLine:C,connectNulls:l,dot:c,fill:u,fillOpacity:d,height:E,hide:h,layout:x,isAnimationActive:p,isRange:k,legendType:m,needClip:j,points:N,stroke:f,width:T,left:_,top:A,xAxisId:g,yAxisId:v})):null}var DK=(e,t,n,r,i)=>{var a=null!==n&&void 0!==n?n:t;if(sb(a))return a;var s="horizontal"===e?i:r,o=s.scale.domain();if("number"===s.type){var l=Math.max(o[0],o[1]),c=Math.min(o[0],o[1]);return"dataMin"===a?c:"dataMax"===a||l<0?l:Math.max(Math.min(o[0],o[1]),0)}return"dataMin"===a?o[0]:"dataMax"===a?o[1]:o[0]};function MK(e){var t=bL(e,PK),n=pC();return r.createElement($q,{id:t.id,type:"area"},e=>r.createElement(r.Fragment,null,r.createElement(Gq,{legendPayload:wK(t)}),r.createElement(Cq,{fn:NK,args:t}),r.createElement(Zq,{type:"area",id:e,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:qk(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),r.createElement(OK,bK({},t,{id:e}))))}function RK(){const{data:e,loading:t,error:n,addItem:i,updateItem:a,deleteItem:s}=Ex("transactions"),{data:o,loading:l,error:c}=Ex("marketingCosts"),u=(0,r.useMemo)(()=>o.map(e=>{var t,n,r,i;return{id:"marketing_".concat(e.id),type:"expense",amount:e.cost,category:"Marketing",description:"".concat(e.name," - ").concat(e.description),date:(null===(t=e.createdAt)||void 0===t||null===(n=t.toDate)||void 0===n||null===(r=n.call(t))||void 0===r||null===(i=r.toISOString())||void 0===i?void 0:i.split("T")[0])||(new Date).toISOString().split("T")[0],source:"marketing",createdAt:e.createdAt,updatedAt:e.updatedAt}}),[o]),d=(0,r.useMemo)(()=>[...e,...u].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),[e,u]);return{transactions:d,manualTransactions:e,marketingTransactions:u,loading:t||l,error:n||c,addTransaction:i,updateTransaction:a,deleteTransaction:s}}function LK(){const{transactions:e,loading:t,error:n}=RK(),{data:r,loading:i,error:a}=Ex("marketingCosts"),s=e.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),o=e.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0),l=r.reduce((e,t)=>e+t.cost,0),c=o+l,u=s-c,d={impression:r.filter(e=>"impression"===e.type).reduce((e,t)=>e+t.cost,0),digital:r.filter(e=>"digital"===e.type).reduce((e,t)=>e+t.cost,0),subscription:r.filter(e=>"subscription"===e.type).reduce((e,t)=>e+t.cost,0)};return{totalIncome:s,totalExpenses:c,netBalance:u,transactionExpenses:o,marketingExpenses:l,marketingBreakdown:d,transactions:e,marketingCosts:r,loading:t||i,error:n||a}}MK.displayName="Area";const zK=[{id:"1",name:"Marketing",allocated:3e3,spent:0,color:"#8b5cf6"},{id:"2",name:"Op\xe9rationnel",allocated:2400,spent:0,color:"#06b6d4"},{id:"3",name:"Personnel",allocated:4200,spent:0,color:"#10b981"},{id:"4",name:"\xc9quipement",allocated:1200,spent:0,color:"#f59e0b"},{id:"5",name:"Divers",allocated:1200,spent:0,color:"#ef4444"}];function FK(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const[t,n]=(0,r.useState)(zK),[i,a]=(0,r.useState)(!0),[s,o]=(0,r.useState)(null),{user:l}=Sx(),{transactions:c}=RK();(0,r.useEffect)(()=>{if(!l)return n(zK),void a(!1);(async()=>{try{const e=Ud(kx,"budgetCategories",l.uid),t=await Kh(e);if(t.exists()){const e=t.data();n(e.categories||zK)}else await Qh(e,{categories:zK,updatedAt:new Date,userId:l.uid}),n(zK);a(!1),o(null)}catch(e){console.error("Erreur lors du chargement des cat\xe9gories budget:",e),o(e.message),a(!1)}})()},[l]);(0,r.useEffect)(()=>{const r=(()=>{const n={};return t.forEach(t=>{n[t.name]="Marketing"===t.name?e:0}),c.filter(e=>"expense"===e.type).forEach(e=>{const r=t.find(t=>t.name===e.category);r&&"Marketing"!==e.category?n[e.category]=(n[e.category]||0)+e.amount:r||t.find(e=>"Divers"===e.name)&&(n.Divers=(n.Divers||0)+e.amount)}),n})();n(e=>e.map(e=>Me(Me({},e),{},{spent:r[e.name]||0})))},[e,c]);return{categories:t,loading:i,error:s,updateCategoryBudget:async(e,r)=>{if(!l)throw o("Utilisateur non connect\xe9"),new Error("Utilisateur non connect\xe9");if(r<0)throw o("Le budget doit \xeatre positif"),new Error("Le budget doit \xeatre positif");try{const i=t.map(t=>t.id===e?Me(Me({},t),{},{allocated:r}):t),a=Ud(kx,"budgetCategories",l.uid);await Qh(a,{categories:i,updatedAt:new Date,userId:l.uid}),n(i),o(null)}catch(i){throw console.error("Erreur lors de la mise \xe0 jour de la cat\xe9gorie:",i),o(i.message),i}},addCategory:async e=>{if(!l)throw o("Utilisateur non connect\xe9"),new Error("Utilisateur non connect\xe9");if(!e.name.trim())throw o("Le nom de la cat\xe9gorie est requis"),new Error("Le nom de la cat\xe9gorie est requis");if(e.allocated<0)throw o("Le budget doit \xeatre positif"),new Error("Le budget doit \xeatre positif");try{const r={id:"category_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),name:e.name.trim(),color:e.color,allocated:e.allocated,spent:0},i=[...t,r],a=Ud(kx,"budgetCategories",l.uid);await Qh(a,{categories:i,updatedAt:new Date,userId:l.uid}),n(i),o(null)}catch(r){throw console.error("Erreur lors de l'ajout de la cat\xe9gorie:",r),o(r.message),r}},deleteCategory:async e=>{if(!l)throw o("Utilisateur non connect\xe9"),new Error("Utilisateur non connect\xe9");try{const r=t.filter(t=>t.id!==e),i=Ud(kx,"budgetCategories",l.uid);await Qh(i,{categories:r,updatedAt:new Date,userId:l.uid}),n(r),o(null)}catch(r){throw console.error("Erreur lors de la suppression de la cat\xe9gorie:",r),o(r.message),r}},updateCategory:async(e,r)=>{if(!l)throw o("Utilisateur non connect\xe9"),new Error("Utilisateur non connect\xe9");try{const i=t.map(t=>t.id===e?Me(Me({},t),r):t),a=Ud(kx,"budgetCategories",l.uid);await Qh(a,{categories:i,updatedAt:new Date,userId:l.uid}),n(i),o(null)}catch(i){throw console.error("Erreur lors de la mise \xe0 jour de la cat\xe9gorie:",i),o(i.message),i}}}}function UK(){const{user:e}=Sx(),{transactions:t}=LK(),{categories:n}=FK(),[i,a]=(0,r.useState)([]),[s,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{if(e)try{const t=Ah(Fd(kx,"calendar"),Ph("userId","==",e.uid)),n=(await Yh(t)).docs.map(e=>Me({id:e.id},e.data())),r=Ah(Fd(kx,"marketingCosts"),Ph("userId","==",e.uid)),i=(await Yh(r)).docs.map(e=>Me({id:e.id},e.data()));a(n),o(i)}catch(t){console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es:",t)}finally{c(!1)}})()},[e]);const u=n.map(e=>{const n=t.filter(t=>t.category===e.name).reduce((e,t)=>e+Math.abs(t.amount),0),r=e.allocated;return{name:e.name,"d\xe9pens\xe9":n,budget:r,restant:Math.max(0,r-n),color:e.color}}),d=u.filter(e=>e.d\u00e9pens\u00e9>0).map(e=>({name:e.name,value:e.d\u00e9pens\u00e9,color:e.color})),h=n.map(e=>{const n=i.filter(t=>t.category===e.name),r=t.filter(t=>t.category===e.name),a=n.length>0?r.reduce((e,t)=>e+Math.abs(t.amount),0)/n.length:0;return{"cat\xe9gorie":e.name,"\xe9v\xe9nements":n.length,"co\xfbtMoyen":a,"budgetUtilis\xe9":r.reduce((e,t)=>e+Math.abs(t.amount),0)/e.allocated*100}}),p=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4"];return l?(0,Lx.jsxs)("div",{className:"page-container",children:[(0,Lx.jsx)("h1",{className:"page-title",children:"Analytics"}),(0,Lx.jsx)("div",{className:"loading",children:"Chargement des donn\xe9es..."})]}):(0,Lx.jsxs)("div",{className:"page-container",children:[(0,Lx.jsx)("h1",{className:"page-title",children:"Analytics"}),(0,Lx.jsxs)("div",{className:"analytics-grid",children:[(0,Lx.jsxs)("div",{className:"analytics-card overview",children:[(0,Lx.jsx)("h2",{children:"Vue d'ensemble"}),(0,Lx.jsxs)("div",{className:"overview-stats",children:[(0,Lx.jsxs)("div",{className:"stat",children:[(0,Lx.jsx)("span",{className:"stat-value",children:t.length}),(0,Lx.jsx)("span",{className:"stat-label",children:"Transactions"})]}),(0,Lx.jsxs)("div",{className:"stat",children:[(0,Lx.jsx)("span",{className:"stat-value",children:i.length}),(0,Lx.jsx)("span",{className:"stat-label",children:"\xc9v\xe9nements"})]}),(0,Lx.jsxs)("div",{className:"stat",children:[(0,Lx.jsx)("span",{className:"stat-value",children:n.length}),(0,Lx.jsx)("span",{className:"stat-label",children:"Cat\xe9gories"})]}),(0,Lx.jsxs)("div",{className:"stat",children:[(0,Lx.jsx)("span",{className:"stat-value",children:s.length}),(0,Lx.jsx)("span",{className:"stat-label",children:"Co\xfbts Marketing"})]})]})]}),(0,Lx.jsxs)("div",{className:"analytics-card",children:[(0,Lx.jsx)("h3",{children:"D\xe9penses vs Budget par Cat\xe9gorie"}),(0,Lx.jsx)(jb,{width:"100%",height:300,children:(0,Lx.jsxs)(SL,{data:u,children:[(0,Lx.jsx)(nF,{strokeDasharray:"3 3"}),(0,Lx.jsx)(dF,{dataKey:"name"}),(0,Lx.jsx)(xF,{}),(0,Lx.jsx)(QV,{formatter:e=>["".concat(e,"\u20ac"),""]}),(0,Lx.jsx)(VB,{}),(0,Lx.jsx)(SH,{dataKey:"budget",fill:"#3B82F6",name:"Budget allou\xe9"}),(0,Lx.jsx)(SH,{dataKey:"d\xe9pens\xe9",fill:"#82ca9d",name:"D\xe9pens\xe9"})]})})]}),(0,Lx.jsxs)("div",{className:"analytics-card",children:[(0,Lx.jsx)("h3",{children:"\xc9volution Mensuelle"}),(0,Lx.jsx)(jb,{width:"100%",height:300,children:(0,Lx.jsxs)(TH,{data:(()=>{const e=(new Date).getFullYear();return["Jan","F\xe9v","Mar","Avr","Mai","Jun","Jul","Ao\xfb","Sep","Oct","Nov","D\xe9c"].map((n,r)=>{const a=t.filter(t=>{const n=new Date(t.date);return n.getMonth()===r&&n.getFullYear()===e}),o=i.filter(t=>{const n=new Date(t.date);return n.getMonth()===r&&n.getFullYear()===e}),l=s.filter(t=>{const n=new Date(t.date);return n.getMonth()===r&&n.getFullYear()===e}),c=a.reduce((e,t)=>e+Math.abs(t.amount),0),u=l.reduce((e,t)=>e+t.amount,0);return{mois:n,"d\xe9penses":c,marketing:u,"\xe9v\xe9nements":o.length}})})(),children:[(0,Lx.jsx)(nF,{strokeDasharray:"3 3"}),(0,Lx.jsx)(dF,{dataKey:"mois"}),(0,Lx.jsx)(xF,{}),(0,Lx.jsx)(QV,{}),(0,Lx.jsx)(VB,{}),(0,Lx.jsx)(cW,{type:"monotone",dataKey:"d\xe9penses",stroke:"#3B82F6",name:"D\xe9penses (\u20ac)"}),(0,Lx.jsx)(cW,{type:"monotone",dataKey:"marketing",stroke:"#82ca9d",name:"Marketing (\u20ac)"}),(0,Lx.jsx)(cW,{type:"monotone",dataKey:"\xe9v\xe9nements",stroke:"#ffc658",name:"\xc9v\xe9nements"})]})})]}),(0,Lx.jsxs)("div",{className:"analytics-card",children:[(0,Lx.jsx)("h3",{children:"R\xe9partition des D\xe9penses"}),(0,Lx.jsx)(jb,{width:"100%",height:300,children:(0,Lx.jsxs)(vW,{children:[(0,Lx.jsx)(iK,{data:d,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percent:n}=e;return"".concat(t," ").concat(n?(100*n).toFixed(0):0,"%")},outerRadius:80,fill:"#3B82F6",dataKey:"value",children:d.map((e,t)=>(0,Lx.jsx)(BB,{fill:e.color||p[t%p.length]},"cell-".concat(t)))}),(0,Lx.jsx)(QV,{formatter:e=>["".concat(e,"\u20ac"),"Montant"]})]})})]}),(0,Lx.jsxs)("div",{className:"analytics-card",children:[(0,Lx.jsx)("h3",{children:"Analyse Budget/\xc9v\xe9nements"}),(0,Lx.jsx)(jb,{width:"100%",height:300,children:(0,Lx.jsxs)(sK,{data:h,children:[(0,Lx.jsx)(nF,{strokeDasharray:"3 3"}),(0,Lx.jsx)(dF,{dataKey:"cat\xe9gorie"}),(0,Lx.jsx)(xF,{}),(0,Lx.jsx)(QV,{}),(0,Lx.jsx)(VB,{}),(0,Lx.jsx)(MK,{type:"monotone",dataKey:"budgetUtilis\xe9",stackId:"1",stroke:"#3B82F6",fill:"rgba(59, 130, 246, 0.3)",name:"Budget utilis\xe9 (%)"}),(0,Lx.jsx)(SH,{dataKey:"\xe9v\xe9nements",fill:"#10B981",name:"Nombre d'\xe9v\xe9nements"})]})})]}),(0,Lx.jsxs)("div",{className:"analytics-card efficiency-card",children:[(0,Lx.jsx)("h3",{children:"\ud83c\udfaf Performance par Cat\xe9gorie"}),(0,Lx.jsx)("div",{className:"efficiency-explanation",children:(0,Lx.jsx)("p",{children:"Analyse de l'efficacit\xe9 de vos investissements par cat\xe9gorie d'\xe9v\xe9nements"})}),(0,Lx.jsx)("div",{className:"efficiency-grid",children:h.filter(e=>e.\u00e9v\u00e9nements>0||n.find(t=>t.name===e.cat\u00e9gorie)).map((e,t)=>{const r=e.\u00e9v\u00e9nements>0&&e.budgetUtilis\u00e9>0?e.\u00e9v\u00e9nements/(e.budgetUtilis\u00e9/100)*10:0,i=e=>e>=50?"#10B981":e>=20?"#3B82F6":e>=10?"#F59E0B":"#EF4444",a=n.find(t=>t.name===e.cat\u00e9gorie),s=(null===a||void 0===a?void 0:a.allocated)||0,o=s-s*(e.budgetUtilis\u00e9/100);return(0,Lx.jsxs)("div",{className:"efficiency-card-item",style:{"--efficiency-color":i(r)},children:[(0,Lx.jsxs)("div",{className:"efficiency-header",children:[(0,Lx.jsx)("div",{className:"efficiency-category",children:e.cat\u00e9gorie}),(0,Lx.jsx)("div",{className:"efficiency-badge",style:{backgroundColor:i(r)},children:(l=r,l>=50?"Excellent ROI":l>=20?"Bon ROI":l>=10?"ROI Moyen":l>0?"ROI Faible":"Pas d'activit\xe9")})]}),(0,Lx.jsx)("div",{className:"efficiency-summary",children:(0,Lx.jsxs)("div",{className:"roi-score",children:[(0,Lx.jsx)("span",{className:"roi-value",children:r.toFixed(0)}),(0,Lx.jsx)("span",{className:"roi-label",children:"Score ROI"})]})}),(0,Lx.jsxs)("div",{className:"efficiency-stats",children:[(0,Lx.jsxs)("div",{className:"efficiency-stat",children:[(0,Lx.jsx)("div",{className:"stat-icon",children:"\ud83d\udcc5"}),(0,Lx.jsxs)("div",{className:"stat-info",children:[(0,Lx.jsx)("span",{className:"stat-number",children:e.\u00e9v\u00e9nements}),(0,Lx.jsx)("span",{className:"stat-text",children:"\xc9v\xe9nements r\xe9alis\xe9s"})]})]}),(0,Lx.jsxs)("div",{className:"efficiency-stat",children:[(0,Lx.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb0"}),(0,Lx.jsxs)("div",{className:"stat-info",children:[(0,Lx.jsxs)("span",{className:"stat-number",children:[s.toFixed(0),"\u20ac"]}),(0,Lx.jsx)("span",{className:"stat-text",children:"Budget allou\xe9"})]})]}),(0,Lx.jsxs)("div",{className:"efficiency-stat",children:[(0,Lx.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb8"}),(0,Lx.jsxs)("div",{className:"stat-info",children:[(0,Lx.jsxs)("span",{className:"stat-number",children:[(s*(e.budgetUtilis\u00e9/100)).toFixed(0),"\u20ac"]}),(0,Lx.jsx)("span",{className:"stat-text",children:"D\xe9pens\xe9"})]})]}),(0,Lx.jsxs)("div",{className:"efficiency-stat",children:[(0,Lx.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb3"}),(0,Lx.jsxs)("div",{className:"stat-info",children:[(0,Lx.jsxs)("span",{className:"stat-number",children:[o.toFixed(0),"\u20ac"]}),(0,Lx.jsx)("span",{className:"stat-text",children:"Restant"})]})]})]}),(0,Lx.jsxs)("div",{className:"efficiency-progress",children:[(0,Lx.jsx)("div",{className:"progress-bar",children:(0,Lx.jsx)("div",{className:"progress-fill",style:{width:"".concat(Math.min(e.budgetUtilis\u00e9,100),"%"),backgroundColor:i(r)}})}),(0,Lx.jsxs)("div",{className:"progress-info",children:[(0,Lx.jsxs)("span",{className:"progress-label",children:["Utilisation: ",e.budgetUtilis\u00e9.toFixed(1),"%"]}),(0,Lx.jsxs)("span",{className:"progress-cost",children:["Co\xfbt/\xe9v\xe9nement: ",e.\u00e9v\u00e9nements>0?e.co\u00fbtMoyen.toFixed(0):"0","\u20ac"]})]})]})]},t);var l})})]})]})]})}const VK=Px("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),BK=Px("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),qK=Px("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),HK=Px("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),WK=Px("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);function KK(e){let{totalIncome:t,totalExpenses:n,monthlyBudget:i,onBudgetUpdate:a,canEdit:s=!1}=e;const[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(i.toString());r.useEffect(()=>{u(i.toString())},[i]);const d=t-n,h=i>0?n/i*100:0,p=i-n,m=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e),f=async()=>{const e=parseFloat(c);if(!isNaN(e)&&e>0&&a)try{await a(e),l(!1)}catch(t){console.error("Erreur lors de la sauvegarde:",t),alert("Erreur lors de la sauvegarde du budget")}},g=()=>{u(i.toString()),l(!1)};return(0,Lx.jsxs)("div",{className:"budget-summary",children:[(0,Lx.jsxs)("div",{className:"summary-cards",children:[(0,Lx.jsxs)("div",{className:"summary-card income",children:[(0,Lx.jsx)("div",{className:"card-icon",children:(0,Lx.jsx)(Yx,{size:24})}),(0,Lx.jsxs)("div",{className:"card-content",children:[(0,Lx.jsx)("h3",{children:"Revenus"}),(0,Lx.jsx)("p",{className:"amount",children:m(t)})]})]}),(0,Lx.jsxs)("div",{className:"summary-card expenses",children:[(0,Lx.jsx)("div",{className:"card-icon",children:(0,Lx.jsx)(VK,{size:24})}),(0,Lx.jsxs)("div",{className:"card-content",children:[(0,Lx.jsx)("h3",{children:"D\xe9penses"}),(0,Lx.jsx)("p",{className:"amount",children:m(n)})]})]}),(0,Lx.jsxs)("div",{className:"summary-card balance ".concat(d>=0?"positive":"negative"),children:[(0,Lx.jsx)("div",{className:"card-icon",children:(0,Lx.jsx)(BK,{size:24})}),(0,Lx.jsxs)("div",{className:"card-content",children:[(0,Lx.jsx)("h3",{children:"Solde"}),(0,Lx.jsx)("p",{className:"amount",children:m(d)})]})]}),(0,Lx.jsxs)("div",{className:"summary-card budget",children:[(0,Lx.jsx)("div",{className:"card-icon",children:(0,Lx.jsx)(Dx,{size:24})}),(0,Lx.jsxs)("div",{className:"card-content",children:[(0,Lx.jsx)("div",{className:"budget-header",children:(0,Lx.jsx)("h3",{children:"Budget restant"})}),(0,Lx.jsx)("p",{className:"amount",children:m(p)})]})]})]}),(0,Lx.jsxs)("div",{className:"budget-progress",children:[(0,Lx.jsxs)("div",{className:"progress-header",style:{background:"rgba(255, 255, 255, 0.9)",padding:"16px",borderRadius:"12px",marginBottom:"16px"},children:[(0,Lx.jsx)("h4",{style:{color:"#000",margin:0},children:"Utilisation du budget mensuel"}),(0,Lx.jsx)("div",{className:"header-actions",style:{display:"flex",alignItems:"center",gap:"16px"},children:(0,Lx.jsxs)("span",{className:"progress-percentage",style:{fontSize:"18px",fontWeight:"700",color:"#000"},children:[h.toFixed(1),"%"]})})]}),(0,Lx.jsx)("div",{className:"progress-bar",children:(0,Lx.jsx)("div",{className:"progress-fill ".concat(h>100?"over-budget":h>80?"warning":"normal"),style:{width:"".concat(Math.min(h,100),"%")}})}),(0,Lx.jsxs)("div",{className:"progress-info",children:[(0,Lx.jsx)("div",{className:"budget-display",children:o?(0,Lx.jsxs)("div",{className:"budget-edit",style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Lx.jsxs)("span",{style:{color:"#000"},children:[m(n)," / "]}),(0,Lx.jsx)("input",{type:"number",value:c,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key?f():"Escape"===e.key&&g()},style:{padding:"8px 12px",border:"2px solid #007bff",borderRadius:"6px",fontSize:"14px",width:"120px",color:"#000",backgroundColor:"#fff"},min:"0",step:"100",autoFocus:!0,placeholder:"Budget"}),(0,Lx.jsx)("span",{style:{color:"#000"},children:"\u20ac"}),(0,Lx.jsxs)("div",{className:"edit-actions",style:{display:"flex",gap:"4px"},children:[(0,Lx.jsx)("button",{onClick:f,style:{background:"#28a745",border:"none",color:"#fff",padding:"6px 8px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},title:"Sauvegarder",children:(0,Lx.jsx)(qK,{size:14})}),(0,Lx.jsx)("button",{onClick:g,style:{background:"#dc3545",border:"none",color:"#fff",padding:"6px 8px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center"},title:"Annuler",children:(0,Lx.jsx)(HK,{size:14})})]})]}):(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsxs)("span",{style:{color:"#000",fontSize:"18px",fontWeight:"600"},children:[m(n)," / ",m(i)]}),(0,Lx.jsxs)("button",{onClick:()=>{u(i.toString()),l(!0)},style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",color:"#fff",padding:"8px 16px",borderRadius:"8px",cursor:"pointer",marginLeft:"12px",fontSize:"13px",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px",boxShadow:"0 2px 8px rgba(102, 126, 234, 0.3)",transition:"all 0.2s ease"},title:"Modifier le budget",onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(102, 126, 234, 0.3)"},children:[(0,Lx.jsx)(WK,{size:14}),"Modifier"]})]})}),h>100&&(0,Lx.jsxs)("span",{className:"over-budget-text",children:["D\xe9passement de ",m(n-i)]})]})]})]})}const GK=Px("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),YK=Px("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),QK=Px("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),XK=Px("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),JK=Px("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),$K=Px("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),ZK=Px("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),eG=Px("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function tG(){var e,t,n,i,a,s;const{user:o}=Sx(),{data:l,loading:c,error:u,addItem:d,updateItem:h,deleteItem:p}=Ex("marketingCosts"),[m,f]=(0,r.useState)(!1),[g,v]=(0,r.useState)(null),[y,x]=(0,r.useState)("all"),[b,j]=(0,r.useState)({}),[w,N]=(0,r.useState)({type:"digital",name:"",description:"",cost:0,details:{},date:(new Date).toISOString().split("T")[0]}),k=async()=>{if(o&&g)try{await h(g,b),v(null),j({})}catch(u){console.error("Erreur lors de la modification du co\xfbt:",u)}},C=()=>{v(null),j({})},S=e=>l.filter(t=>t.type===e).reduce((e,t)=>e+t.cost,0),E=()=>l.reduce((e,t)=>e+t.cost,0),T=[{id:"sample-1",type:"digital",name:"Site Web",description:"Modules WordPress",cost:220,details:{modules:["WooCommerce","SEO"]}},{id:"sample-2",type:"subscription",name:"Abonnements",description:"Outils marketing",cost:15,details:{subscriptionDuration:"mensuel"}},{id:"sample-3",type:"impression",name:"Impressions",description:"Flyers et brochures",cost:400,details:{pages:4,quantity:500}}],_=e=>T.filter(t=>t.type===e).reduce((e,t)=>e+t.cost,0),A=()=>T.reduce((e,t)=>e+t.cost,0);return o?(0,Lx.jsxs)("div",{className:"marketing-costs",children:[(0,Lx.jsxs)("div",{className:"costs-header",children:[(0,Lx.jsx)("h3",{children:"Co\xfbts Marketing"}),(0,Lx.jsxs)("div",{className:"total-cost",children:["Total: ",E().toFixed(2)," \u20ac"]})]}),(0,Lx.jsxs)("div",{className:"cost-tabs",children:[(0,Lx.jsxs)("button",{className:"tab-btn ".concat("all"===y?"active":""),onClick:()=>x("all"),children:[(0,Lx.jsx)(GK,{size:16}),"Tous (",E().toFixed(2)," \u20ac)"]}),(0,Lx.jsxs)("button",{className:"tab-btn ".concat("digital"===y?"active":""),onClick:()=>x("digital"),children:[(0,Lx.jsx)(YK,{size:16}),"Sites Web (",S("digital").toFixed(2)," \u20ac)"]}),(0,Lx.jsxs)("button",{className:"tab-btn ".concat("visual"===y?"active":""),onClick:()=>x("visual"),children:[(0,Lx.jsx)(XK,{size:16}),"Visuels Virtuels (",S("visual").toFixed(2)," \u20ac)"]}),(0,Lx.jsxs)("button",{className:"tab-btn ".concat("platform"===y?"active":""),onClick:()=>x("platform"),children:[(0,Lx.jsx)(JK,{size:16}),"Plateformes (",S("platform").toFixed(2)," \u20ac)"]}),(0,Lx.jsxs)("button",{className:"tab-btn ".concat("subscription"===y?"active":""),onClick:()=>x("subscription"),children:[(0,Lx.jsx)(QK,{size:16}),"Abonnements (",S("subscription").toFixed(2)," \u20ac)"]}),(0,Lx.jsxs)("button",{className:"tab-btn ".concat("impression"===y?"active":""),onClick:()=>x("impression"),children:[(0,Lx.jsx)(GK,{size:16}),"Impressions (",S("impression").toFixed(2)," \u20ac)"]})]}),(0,Lx.jsxs)("div",{className:"costs-content",children:["all"!==y&&(0,Lx.jsx)("div",{className:"costs-actions",children:(0,Lx.jsxs)("button",{className:"add-cost-btn",onClick:()=>f(!0),children:[(0,Lx.jsx)(Hx,{size:16}),"Ajouter ","digital"===y?"un site web":"visual"===y?"un visuel virtuel":"platform"===y?"une plateforme":"subscription"===y?"un abonnement":"une impression"]})}),c&&(0,Lx.jsx)("div",{className:"loading",children:"Chargement..."}),u&&(0,Lx.jsxs)("div",{className:"error",children:["Erreur: ",u]}),m&&(0,Lx.jsxs)("div",{className:"cost-form",children:[(0,Lx.jsxs)("h4",{children:["Nouveau ","digital"===y?"site web":"visual"===y?"visuel virtuel":"platform"===y?"plateforme immobili\xe8re":"subscription"===y?"abonnement":"projet d'impression"]}),(0,Lx.jsxs)("div",{className:"form-row",children:[(0,Lx.jsx)("input",{type:"text",placeholder:"Nom du projet",value:w.name||"",onChange:e=>N(t=>Me(Me({},t),{},{name:e.target.value}))}),(0,Lx.jsxs)("div",{className:"input-with-suffix",children:[(0,Lx.jsx)("input",{type:"number",placeholder:"Co\xfbt",value:w.cost||0,onChange:e=>N(t=>Me(Me({},t),{},{cost:parseFloat(e.target.value)||0}))}),(0,Lx.jsx)("span",{className:"input-suffix",children:"\u20ac"})]})]}),(0,Lx.jsx)("textarea",{placeholder:"Description",value:w.description||"",onChange:e=>N(t=>Me(Me({},t),{},{description:e.target.value}))}),"impression"===y&&(0,Lx.jsxs)("div",{className:"impression-details",children:[(0,Lx.jsxs)("div",{className:"form-row",children:[(0,Lx.jsx)("input",{type:"number",placeholder:"Nombre de pages",value:(null===(e=w.details)||void 0===e?void 0:e.pages)||"",onChange:e=>N(t=>Me(Me({},t),{},{details:Me(Me({},t.details),{},{pages:parseInt(e.target.value)||0})}))}),(0,Lx.jsx)("input",{type:"text",placeholder:"Grammage (ex: 250g/m\xb2)",value:(null===(t=w.details)||void 0===t?void 0:t.paperWeight)||"",onChange:e=>N(t=>Me(Me({},t),{},{details:Me(Me({},t.details),{},{paperWeight:e.target.value})}))})]}),(0,Lx.jsxs)("div",{className:"form-row",children:[(0,Lx.jsx)("input",{type:"text",placeholder:"Reliure (ex: agraf\xe9, spirale)",value:(null===(n=w.details)||void 0===n?void 0:n.binding)||"",onChange:e=>N(t=>Me(Me({},t),{},{details:Me(Me({},t.details),{},{binding:e.target.value})}))}),(0,Lx.jsx)("input",{type:"number",placeholder:"Quantit\xe9",value:(null===(i=w.details)||void 0===i?void 0:i.quantity)||"",onChange:e=>N(t=>Me(Me({},t),{},{details:Me(Me({},t.details),{},{quantity:parseInt(e.target.value)||0})}))})]})]}),(0,Lx.jsx)("div",{className:"form-row",children:(0,Lx.jsx)("input",{type:"date",placeholder:"Date",value:w.date||"",onChange:e=>N(t=>Me(Me({},t),{},{date:e.target.value}))})}),"subscription"===y&&(0,Lx.jsx)("div",{className:"subscription-details",children:(0,Lx.jsxs)("div",{className:"form-row",children:[(0,Lx.jsxs)("select",{value:(null===(a=w.details)||void 0===a?void 0:a.subscriptionDuration)||"",onChange:e=>N(t=>Me(Me({},t),{},{details:Me(Me({},t.details),{},{subscriptionDuration:e.target.value})})),children:[(0,Lx.jsx)("option",{value:"",children:"Dur\xe9e"}),(0,Lx.jsx)("option",{value:"mensuel",children:"Mensuel"}),(0,Lx.jsx)("option",{value:"annuel",children:"Annuel"}),(0,Lx.jsx)("option",{value:"ponctuel",children:"Ponctuel"})]}),(0,Lx.jsx)("input",{type:"date",placeholder:"Date de renouvellement",value:(null===(s=w.details)||void 0===s?void 0:s.renewalDate)||"",onChange:e=>N(t=>Me(Me({},t),{},{details:Me(Me({},t.details),{},{renewalDate:e.target.value})}))})]})}),(0,Lx.jsxs)("div",{className:"form-actions",children:[(0,Lx.jsxs)("button",{onClick:async()=>{var e;if(o&&null!==(e=w.name)&&void 0!==e&&e.trim())try{await d(Me(Me({},w),{},{type:"all"===y?"digital":y})),N({type:"all"===y?"digital":y,name:"",description:"",cost:0,details:{}}),f(!1)}catch(u){console.error("Erreur lors de l'ajout du co\xfbt:",u)}},className:"save-btn",children:[(0,Lx.jsx)($K,{size:16}),"Enregistrer"]}),(0,Lx.jsxs)("button",{onClick:()=>f(!1),className:"cancel-btn",children:[(0,Lx.jsx)(HK,{size:16}),"Annuler"]})]})]}),(0,Lx.jsx)("div",{className:"costs-list",children:l.filter(e=>"all"===y||e.type===y).map(e=>{var t,n,r,i,a,s;return(0,Lx.jsx)("div",{className:"cost-item",children:g===e.id?(0,Lx.jsxs)("div",{className:"cost-form",children:[(0,Lx.jsxs)("div",{className:"form-row",children:[(0,Lx.jsx)("input",{type:"text",value:b.name||"",onChange:e=>j(t=>Me(Me({},t),{},{name:e.target.value})),placeholder:"Nom du projet"}),(0,Lx.jsxs)("div",{className:"input-with-suffix",children:[(0,Lx.jsx)("input",{type:"number",value:b.cost||0,onChange:e=>j(t=>Me(Me({},t),{},{cost:parseFloat(e.target.value)||0})),placeholder:"Co\xfbt"}),(0,Lx.jsx)("span",{className:"input-suffix",children:"\u20ac"})]})]}),(0,Lx.jsx)("textarea",{value:b.description||"",onChange:e=>j(t=>Me(Me({},t),{},{description:e.target.value})),placeholder:"Description"}),"impression"===e.type&&(0,Lx.jsxs)("div",{className:"impression-details",children:[(0,Lx.jsxs)("div",{className:"form-row",children:[(0,Lx.jsx)("input",{type:"number",placeholder:"Nombre de pages",value:(null===(t=b.details)||void 0===t?void 0:t.pages)||"",onChange:e=>j(t=>Me(Me({},t),{},{details:Me(Me({},t.details),{},{pages:parseInt(e.target.value)||0})}))}),(0,Lx.jsx)("input",{type:"text",placeholder:"Grammage",value:(null===(n=b.details)||void 0===n?void 0:n.paperWeight)||"",onChange:e=>j(t=>Me(Me({},t),{},{details:Me(Me({},t.details),{},{paperWeight:e.target.value})}))})]}),(0,Lx.jsxs)("div",{className:"form-row",children:[(0,Lx.jsx)("input",{type:"text",placeholder:"Reliure",value:(null===(r=b.details)||void 0===r?void 0:r.binding)||"",onChange:e=>j(t=>Me(Me({},t),{},{details:Me(Me({},t.details),{},{binding:e.target.value})}))}),(0,Lx.jsx)("input",{type:"number",placeholder:"Quantit\xe9",value:(null===(i=b.details)||void 0===i?void 0:i.quantity)||"",onChange:e=>j(t=>Me(Me({},t),{},{details:Me(Me({},t.details),{},{quantity:parseInt(e.target.value)||0})}))})]})]}),(0,Lx.jsx)("div",{className:"form-row",children:(0,Lx.jsx)("input",{type:"date",value:b.date||"",onChange:e=>j(t=>Me(Me({},t),{},{date:e.target.value})),placeholder:"Date"})}),"subscription"===e.type&&(0,Lx.jsx)("div",{className:"subscription-details",children:(0,Lx.jsxs)("div",{className:"form-row",children:[(0,Lx.jsxs)("select",{value:(null===(a=b.details)||void 0===a?void 0:a.subscriptionDuration)||"",onChange:e=>j(t=>Me(Me({},t),{},{details:Me(Me({},t.details),{},{subscriptionDuration:e.target.value})})),children:[(0,Lx.jsx)("option",{value:"",children:"Dur\xe9e"}),(0,Lx.jsx)("option",{value:"mensuel",children:"Mensuel"}),(0,Lx.jsx)("option",{value:"annuel",children:"Annuel"}),(0,Lx.jsx)("option",{value:"ponctuel",children:"Ponctuel"})]}),(0,Lx.jsx)("input",{type:"date",value:(null===(s=b.details)||void 0===s?void 0:s.renewalDate)||"",onChange:e=>j(t=>Me(Me({},t),{},{details:Me(Me({},t.details),{},{renewalDate:e.target.value})}))})]})}),(0,Lx.jsxs)("div",{className:"form-actions",children:[(0,Lx.jsxs)("button",{onClick:k,className:"save-btn",children:[(0,Lx.jsx)($K,{size:16}),"Sauvegarder"]}),(0,Lx.jsxs)("button",{onClick:C,className:"cancel-btn",children:[(0,Lx.jsx)(HK,{size:16}),"Annuler"]})]})]}):(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsxs)("div",{className:"cost-info",children:[(0,Lx.jsx)("h4",{children:e.name}),(0,Lx.jsx)("p",{children:e.description}),(0,Lx.jsxs)("div",{className:"cost-details",children:["impression"===e.type&&(0,Lx.jsxs)("span",{children:[e.details.pages," pages \u2022 ",e.details.paperWeight," \u2022 ",e.details.binding," \u2022 Qt\xe9: ",e.details.quantity]}),"digital"===e.type&&e.date&&(0,Lx.jsxs)("span",{children:["Date: ",new Date(e.date).toLocaleDateString("fr-FR")]}),"subscription"===e.type&&(0,Lx.jsxs)("span",{children:[e.details.subscriptionDuration,e.details.renewalDate?" \u2022 Renouvellement: ".concat(e.details.renewalDate):""]})]})]}),(0,Lx.jsxs)("div",{className:"cost-amount",children:[e.cost.toFixed(2)," \u20ac"]}),(0,Lx.jsxs)("div",{className:"cost-actions",children:[(0,Lx.jsx)("button",{onClick:()=>(e=>{v(e.id),j(e)})(e),className:"edit-btn",children:(0,Lx.jsx)(ZK,{size:16})}),(0,Lx.jsx)("button",{onClick:()=>(async e=>{if(o&&window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce co\xfbt ?"))try{await p(e)}catch(u){console.error("Erreur lors de la suppression du co\xfbt:",u)}})(e.id),className:"delete-btn",children:(0,Lx.jsx)(eG,{size:16})})]})]})},e.id)})})]})]}):(0,Lx.jsxs)("div",{className:"marketing-costs",children:[(0,Lx.jsxs)("div",{className:"costs-header",children:[(0,Lx.jsx)("h3",{children:"Co\xfbts Marketing"}),(0,Lx.jsxs)("div",{className:"total-cost",children:["Total: ",A().toFixed(2)," \u20ac"]})]}),(0,Lx.jsxs)("div",{className:"cost-tabs",children:[(0,Lx.jsxs)("button",{className:"tab-btn ".concat("all"===y?"active":""),onClick:()=>x("all"),children:[(0,Lx.jsx)(GK,{size:16}),"Tous (",A().toFixed(2)," \u20ac)"]}),(0,Lx.jsxs)("button",{className:"tab-btn ".concat("digital"===y?"active":""),onClick:()=>x("digital"),children:[(0,Lx.jsx)(YK,{size:16}),"Sites Web (",_("digital").toFixed(2)," \u20ac)"]}),(0,Lx.jsxs)("button",{className:"tab-btn ".concat("subscription"===y?"active":""),onClick:()=>x("subscription"),children:[(0,Lx.jsx)(QK,{size:16}),"Abonnements (",_("subscription").toFixed(2)," \u20ac)"]}),(0,Lx.jsxs)("button",{className:"tab-btn ".concat("impression"===y?"active":""),onClick:()=>x("impression"),children:[(0,Lx.jsx)(GK,{size:16}),"Impressions (",_("impression").toFixed(2)," \u20ac)"]})]}),(0,Lx.jsxs)("div",{className:"costs-content",children:[(0,Lx.jsx)("div",{className:"costs-list",children:T.filter(e=>"all"===y||e.type===y).map(e=>{var t;return(0,Lx.jsxs)("div",{className:"cost-item",children:[(0,Lx.jsxs)("div",{className:"cost-info",children:[(0,Lx.jsx)("h4",{children:e.name}),(0,Lx.jsx)("p",{children:e.description}),(0,Lx.jsxs)("div",{className:"cost-details",children:["impression"===e.type&&(0,Lx.jsxs)("span",{children:[e.details.pages," pages \u2022 Qt\xe9: ",e.details.quantity]}),"digital"===e.type&&(0,Lx.jsx)("span",{children:null!==(t=e.details.modules)&&void 0!==t&&t.length?"Modules: ".concat(e.details.modules.join(", ")):""}),"subscription"===e.type&&(0,Lx.jsx)("span",{children:e.details.subscriptionDuration})]})]}),(0,Lx.jsxs)("div",{className:"cost-amount",children:[e.cost.toFixed(2)," \u20ac"]})]},e.id)})}),(0,Lx.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"rgba(0,0,0,0.6)",fontStyle:"italic"},children:"Connectez-vous pour g\xe9rer vos co\xfbts marketing"})]})]})}const nG=Px("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function rG(e){let{totalBudget:t,marketingExpenses:n=0,transactionExpenses:i=0}=e;const{categories:a,loading:s,error:o,updateCategoryBudget:l}=FK(n,i),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(""),p=a.reduce((e,t)=>e+t.allocated,0),m=(a.reduce((e,t)=>e+t.spent,0),t-p),f=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e),g=(e,t)=>t>0?e/t*100:0,v=(e,t)=>{u(e),h(t.toString())},y=async e=>{const t=parseFloat(d);if(!isNaN(t)&&t>=0)try{await l(e,t),u(null)}catch(o){console.error("Erreur lors de la sauvegarde:",o),alert("Erreur lors de la sauvegarde du budget")}},x=()=>{u(null),h("")};a.map(e=>({name:e.name,value:e.allocated,color:e.color})),a.map(e=>({name:e.name,"allou\xe9":e.allocated,"d\xe9pens\xe9":e.spent,pourcentage:g(e.spent,e.allocated)}));return s?(0,Lx.jsx)("div",{className:"budget-categories",children:(0,Lx.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:"Chargement des cat\xe9gories..."})}):o?(0,Lx.jsx)("div",{className:"budget-categories",children:(0,Lx.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"#ef4444"},children:["Erreur: ",o]})}):(0,Lx.jsxs)("div",{className:"budget-categories",children:[(0,Lx.jsxs)("div",{className:"categories-header",children:[(0,Lx.jsx)("h3",{children:"Budget par cat\xe9gorie"}),(0,Lx.jsxs)("div",{className:"budget-overview",children:[(0,Lx.jsxs)("div",{className:"overview-item",children:[(0,Lx.jsx)("span",{className:"label",children:"Total allou\xe9:"}),(0,Lx.jsx)("span",{className:"value",children:f(p)})]}),(0,Lx.jsxs)("div",{className:"overview-item",children:[(0,Lx.jsx)("span",{className:"label",children:"Non allou\xe9:"}),(0,Lx.jsx)("span",{className:"value ".concat(m<0?"negative":"positive"),children:f(m)})]})]})]}),(0,Lx.jsx)("div",{className:"categories-content",children:(0,Lx.jsx)("div",{className:"categories-list",children:a.map(e=>{const t=g(e.spent,e.allocated);return(0,Lx.jsxs)("div",{className:"category-item",style:{background:"linear-gradient(90deg, ".concat(e.color," ").concat(Math.min(t,100),"%, #374151 ").concat(Math.min(t,100),"%)"),borderColor:"".concat(e.color)},children:[(0,Lx.jsx)("div",{className:"category-header",children:(0,Lx.jsxs)("div",{className:"category-info",children:[(0,Lx.jsx)("div",{className:"category-header",children:(0,Lx.jsx)("span",{className:"category-name",children:e.name})}),(0,Lx.jsx)("div",{className:"category-amounts",children:c===e.id?(0,Lx.jsxs)("div",{className:"edit-amount-container",children:[(0,Lx.jsx)("input",{type:"number",value:d,onChange:e=>h(e.target.value),onKeyDown:t=>{"Enter"===t.key&&y(e.id),"Escape"===t.key&&x()},className:"edit-amount-input",autoFocus:!0}),(0,Lx.jsx)("button",{className:"save-edit-btn",onClick:()=>y(e.id),title:"Sauvegarder",children:"\u2713"}),(0,Lx.jsx)("button",{className:"cancel-edit-btn",onClick:x,title:"Annuler",children:"\u2717"})]}):(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsx)("span",{className:"spent-amount",children:f(e.spent)}),(0,Lx.jsxs)("span",{className:"allocated-amount clickable",onClick:()=>v(e.id,e.allocated),title:"Cliquer pour modifier",children:["/ ",f(e.allocated)]}),(0,Lx.jsx)("button",{className:"edit-category-btn",onClick:()=>v(e.id,e.allocated),title:"Modifier le budget allou\xe9",children:(0,Lx.jsx)(WK,{size:14})})]})})]})}),(0,Lx.jsxs)("div",{className:"category-percentage",children:[t.toFixed(1),"%",t>100&&(0,Lx.jsx)(nG,{size:14,color:"#ef4444"})]})]},e.id)})})}),m<0&&(0,Lx.jsxs)("div",{className:"budget-alert",children:[(0,Lx.jsx)(nG,{size:16}),(0,Lx.jsxs)("span",{children:["Attention: Vous avez sur-allou\xe9 votre budget de ",f(Math.abs(m))]})]})]})}function iG(e){let{totalIncome:t,totalExpenses:n,monthlyBudget:r,marketingExpenses:i,transactionExpenses:a}=e;const s=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e),o=n/r*100,l=r-n,c=l/30,u=i/n*100,d=[{type:o>100?"warning":o>80?"caution":"success",icon:o>100?nG:o>80?Yx:Dx,title:o>100?"Budget d\xe9pass\xe9":o>80?"Attention au budget":"Budget sous contr\xf4le",message:o>100?"Vous avez d\xe9pass\xe9 votre budget de ".concat(s(Math.abs(l))):o>80?"Vous avez utilis\xe9 ".concat(o.toFixed(1),"% de votre budget mensuel"):"Il vous reste ".concat(s(l)," sur votre budget mensuel")},{type:c<0?"warning":c<50?"caution":"info",icon:Mx,title:"Budget quotidien restant",message:c<0?"Budget quotidien \xe9puis\xe9":"Environ ".concat(s(c)," par jour jusqu'\xe0 la fin du mois")},{type:u>40?"caution":"info",icon:Yx,title:"D\xe9penses marketing",message:"".concat(u.toFixed(1),"% de vos d\xe9penses sont li\xe9es au marketing (").concat(s(i),")")},{type:t>n?"success":"warning",icon:t>n?Yx:VK,title:t>n?"Solde positif":"Solde n\xe9gatif",message:t>n?"Vous avez un exc\xe9dent de ".concat(s(t-n)):"Vous avez un d\xe9ficit de ".concat(s(Math.abs(t-n)))}],h=[...o>90?[{icon:nG,text:"R\xe9duisez les d\xe9penses non essentielles pour respecter votre budget"}]:[],...i>a?[{icon:Yx,text:"Vos co\xfbts marketing d\xe9passent vos autres d\xe9penses, analysez le ROI"}]:[],...t<n?[{icon:BK,text:"Augmentez vos revenus ou r\xe9duisez vos d\xe9penses pour \xe9quilibrer votre budget"}]:[],...l>.3*r?[{icon:Dx,text:"Vous avez une marge confortable, consid\xe9rez investir dans la croissance"}]:[]];return(0,Lx.jsxs)("div",{className:"budget-insights",children:[(0,Lx.jsx)("h3",{children:"Analyses et recommandations"}),(0,Lx.jsx)("div",{className:"insights-grid",children:d.map((e,t)=>(0,Lx.jsxs)("div",{className:"insight-card ".concat(e.type),children:[(0,Lx.jsx)("div",{className:"insight-icon",children:(0,Lx.jsx)(e.icon,{size:20})}),(0,Lx.jsxs)("div",{className:"insight-content",children:[(0,Lx.jsx)("h4",{children:e.title}),(0,Lx.jsx)("p",{children:e.message})]})]},t))}),h.length>0&&(0,Lx.jsxs)("div",{className:"recommendations",children:[(0,Lx.jsx)("h4",{children:"Recommandations"}),(0,Lx.jsx)("div",{className:"recommendations-list",children:h.map((e,t)=>(0,Lx.jsxs)("div",{className:"recommendation-item",children:[(0,Lx.jsx)(e.icon,{size:16}),(0,Lx.jsx)("span",{children:e.text})]},t))})]}),(0,Lx.jsxs)("div",{className:"quick-stats",children:[(0,Lx.jsxs)("div",{className:"stat-item",children:[(0,Lx.jsx)("span",{className:"stat-label",children:"Taux d'\xe9pargne"}),(0,Lx.jsxs)("span",{className:"stat-value",children:[t>0?((t-n)/t*100).toFixed(1):"0","%"]})]}),(0,Lx.jsxs)("div",{className:"stat-item",children:[(0,Lx.jsx)("span",{className:"stat-label",children:"D\xe9penses/Revenus"}),(0,Lx.jsxs)("span",{className:"stat-value",children:[t>0?(n/t*100).toFixed(1):"0","%"]})]}),(0,Lx.jsxs)("div",{className:"stat-item",children:[(0,Lx.jsx)("span",{className:"stat-label",children:"Budget utilis\xe9"}),(0,Lx.jsxs)("span",{className:"stat-value",children:[o.toFixed(1),"%"]})]})]})]})}const aG=Px("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);function sG(e){let{transactions:t}=e;const n=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e),r=(e,t)=>0===e?0:(t-e)/e*100,i=t.filter(e=>"expense"===e.type&&["Marketing Digital","Publicit\xe9 Facebook/Google","SEO/SEM","Influenceurs"].includes(e.category)).reduce((e,t)=>e+t.amount,0),a=.6*t.filter(e=>"income"===e.type&&["Ventes Produits","Services/Consulting","Revenus Publicitaires"].includes(e.category)).reduce((e,t)=>e+t.amount,0),s=t.filter(e=>"expense"===e.type&&["Infrastructure Web","D\xe9veloppement Web","Design/UX"].includes(e.category)).reduce((e,t)=>e+t.amount,0),o=t.filter(e=>"income"===e.type&&["Abonnements/SaaS","Formations/Cours"].includes(e.category)).reduce((e,t)=>e+t.amount,0),l=t.filter(e=>"expense"===e.type&&["Support Client","Outils/Logiciels"].includes(e.category)).reduce((e,t)=>e+t.amount,0),c=.3*t.filter(e=>"income"===e.type&&["Services/Consulting"].includes(e.category)).reduce((e,t)=>e+t.amount,0),u=[{category:"Marketing Digital",investment:i,revenue:a,roi:r(i,a),color:"#e74c3c"},{category:"Infrastructure Web",investment:s,revenue:o,roi:r(s,o),color:"#3498db"},{category:"Support & Outils",investment:l,revenue:c,roi:r(l,c),color:"#2ecc71"}],d=u.reduce((e,t)=>e+t.investment,0),h=u.reduce((e,t)=>e+t.revenue,0),p=r(d,h);return(0,Lx.jsxs)("div",{className:"roi-tracker",children:[(0,Lx.jsx)("h3",{children:"Suivi du ROI par secteur"}),(0,Lx.jsx)("div",{className:"roi-summary",children:(0,Lx.jsxs)("div",{className:"roi-summary-card global",children:[(0,Lx.jsx)("div",{className:"roi-icon",children:(0,Lx.jsx)(aG,{size:24})}),(0,Lx.jsxs)("div",{className:"roi-content",children:[(0,Lx.jsx)("h4",{children:"ROI Global"}),(0,Lx.jsxs)("p",{className:"roi-value ".concat(p>=0?"positive":"negative"),children:[p.toFixed(1),"%"]}),(0,Lx.jsxs)("span",{className:"roi-details",children:[n(h)," / ",n(d)]})]})]})}),(0,Lx.jsx)("div",{className:"roi-categories",children:u.map(e=>(0,Lx.jsxs)("div",{className:"roi-category-card",children:[(0,Lx.jsxs)("div",{className:"roi-category-header",children:[(0,Lx.jsxs)("div",{className:"category-info",children:[(0,Lx.jsx)("div",{className:"category-indicator",style:{backgroundColor:e.color}}),(0,Lx.jsx)("h5",{children:e.category})]}),(0,Lx.jsxs)("div",{className:"roi-percentage ".concat(e.roi>=0?"positive":"negative"),children:[e.roi>=0?(0,Lx.jsx)(Yx,{size:16}):(0,Lx.jsx)(VK,{size:16}),e.roi.toFixed(1),"%"]})]}),(0,Lx.jsxs)("div",{className:"roi-metrics",children:[(0,Lx.jsxs)("div",{className:"metric",children:[(0,Lx.jsx)("span",{className:"metric-label",children:"Investissement"}),(0,Lx.jsx)("span",{className:"metric-value investment",children:n(e.investment)})]}),(0,Lx.jsxs)("div",{className:"metric",children:[(0,Lx.jsx)("span",{className:"metric-label",children:"Revenus attribu\xe9s"}),(0,Lx.jsx)("span",{className:"metric-value revenue",children:n(e.revenue)})]}),(0,Lx.jsxs)("div",{className:"metric",children:[(0,Lx.jsx)("span",{className:"metric-label",children:"Profit/Perte"}),(0,Lx.jsx)("span",{className:"metric-value ".concat(e.revenue-e.investment>=0?"profit":"loss"),children:n(e.revenue-e.investment)})]})]}),(0,Lx.jsx)("div",{className:"roi-progress",children:(0,Lx.jsx)("div",{className:"progress-bar",children:(0,Lx.jsx)("div",{className:"progress-fill",style:{width:"".concat(Math.min(Math.abs(e.roi),100),"%"),backgroundColor:e.roi>=0?"#28a745":"#dc3545"}})})})]},e.category))}),(0,Lx.jsxs)("div",{className:"roi-insights",children:[(0,Lx.jsx)("h4",{children:"Insights & Recommandations"}),(0,Lx.jsxs)("div",{className:"insights-list",children:[p>20&&(0,Lx.jsxs)("div",{className:"insight positive",children:[(0,Lx.jsx)(Yx,{size:16}),(0,Lx.jsx)("span",{children:"Excellent ROI global ! Continuez sur cette lanc\xe9e."})]}),u.some(e=>e.roi<0)&&(0,Lx.jsxs)("div",{className:"insight warning",children:[(0,Lx.jsx)(VK,{size:16}),(0,Lx.jsx)("span",{children:"Certains secteurs sont en perte. Analysez et optimisez."})]}),i>0&&a/i>2&&(0,Lx.jsxs)("div",{className:"insight positive",children:[(0,Lx.jsx)(BK,{size:16}),(0,Lx.jsx)("span",{children:"Le marketing digital performe bien. Augmentez le budget."})]})]})]})]})}function oG(e){let{transactions:t,onDelete:n}=e;const r=[...t].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime());return 0===t.length?(0,Lx.jsxs)("div",{className:"transaction-list-empty",children:[(0,Lx.jsx)("p",{children:"Aucune transaction enregistr\xe9e"}),(0,Lx.jsx)("p",{children:"Commencez par ajouter votre premi\xe8re transaction !"})]}):(0,Lx.jsxs)("div",{className:"transaction-list",children:[(0,Lx.jsx)("h3",{children:"Transactions r\xe9centes"}),(0,Lx.jsx)("div",{className:"transactions",children:r.map(e=>{return(0,Lx.jsxs)("div",{className:"transaction-item ".concat(e.type),children:[(0,Lx.jsx)("div",{className:"transaction-icon",children:"income"===e.type?(0,Lx.jsx)(Yx,{size:20}):(0,Lx.jsx)(VK,{size:20})}),(0,Lx.jsxs)("div",{className:"transaction-details",children:[(0,Lx.jsxs)("div",{className:"transaction-header",children:[(0,Lx.jsx)("span",{className:"transaction-description",children:e.description}),(0,Lx.jsxs)("span",{className:"transaction-amount ".concat(e.type),children:["income"===e.type?"+":"-",(r=e.amount,new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(r))]})]}),(0,Lx.jsxs)("div",{className:"transaction-meta",children:[(0,Lx.jsx)("span",{className:"transaction-category",children:e.category}),(0,Lx.jsx)("span",{className:"transaction-date",children:(t=e.date,new Date(t).toLocaleDateString("fr-FR"))})]})]}),"marketing"!==e.source&&(0,Lx.jsx)("button",{className:"delete-button",onClick:()=>n(e.id),title:"Supprimer la transaction",children:(0,Lx.jsx)(eG,{size:16})})]},e.id);var t,r})})]})}const lG=["Ventes Produits","Services/Consulting","Revenus Publicitaires","Affiliations","Abonnements/SaaS","Formations/Cours","Investissements","Dividendes","Salaire","Freelance","Bonus","Autre"];function cG(e){let{isOpen:t,onClose:n,onSave:i}=e;const{categories:a}=FK(),[s,o]=(0,r.useState)("expense"),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[m,f]=(0,r.useState)((new Date).toISOString().split("T")[0]);if(!t)return null;const g=a.map(e=>e.name),v=g.length>0?g:lG;return(0,Lx.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,Lx.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Lx.jsxs)("div",{className:"modal-header",children:[(0,Lx.jsx)("h3",{children:"Nouvelle transaction"}),(0,Lx.jsx)("button",{className:"close-button",onClick:n,children:(0,Lx.jsx)(HK,{size:20})})]}),(0,Lx.jsx)("div",{className:"modal-body",children:(0,Lx.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l&&u&&h&&(i({type:s,amount:parseFloat(l),category:u,description:h.trim(),date:m}),c(""),d(""),p(""),f((new Date).toISOString().split("T")[0]),n())},children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Type de transaction"}),(0,Lx.jsxs)("div",{className:"transaction-type-selector",children:[(0,Lx.jsx)("button",{type:"button",className:"type-button ".concat("expense"===s?"active expense":""),onClick:()=>{o("expense"),d("")},children:"D\xe9pense"}),(0,Lx.jsx)("button",{type:"button",className:"type-button ".concat("income"===s?"active income":""),onClick:()=>{o("income"),d("")},children:"Revenu"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"amount",children:"Montant (\u20ac) *"}),(0,Lx.jsx)("input",{type:"number",id:"amount",value:l,onChange:e=>c(e.target.value),placeholder:"0.00",step:"0.01",min:"0",required:!0,autoFocus:!0})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"category",children:"Cat\xe9gorie *"}),(0,Lx.jsxs)("select",{id:"category",value:u,onChange:e=>d(e.target.value),required:!0,children:[(0,Lx.jsx)("option",{value:"",children:"S\xe9lectionner une cat\xe9gorie"}),v.map(e=>(0,Lx.jsx)("option",{value:e,children:e},e))]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"description",children:"Description *"}),(0,Lx.jsx)("input",{type:"text",id:"description",value:h,onChange:e=>p(e.target.value),placeholder:"Description de la transaction",required:!0})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"date",children:"Date *"}),(0,Lx.jsx)("input",{type:"date",id:"date",value:m,onChange:e=>f(e.target.value),required:!0})]}),(0,Lx.jsxs)("div",{className:"modal-actions",children:[(0,Lx.jsx)("button",{type:"button",className:"button button-secondary",onClick:n,children:"Annuler"}),(0,Lx.jsxs)("button",{type:"submit",className:"button",children:[(0,Lx.jsx)(Hx,{size:16}),"Ajouter"]})]})]})})]})})}function uG(e){let{impressions:t,digital:n,subscriptions:r,total:i}=e;const a=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e),s=e=>i>0?(e/i*100).toFixed(1):"0.0";return(0,Lx.jsxs)("div",{className:"marketing-breakdown",children:[(0,Lx.jsx)("h4",{children:"D\xe9tail des co\xfbts marketing"}),(0,Lx.jsxs)("div",{className:"breakdown-items",children:[(0,Lx.jsxs)("div",{className:"breakdown-item",children:[(0,Lx.jsxs)("div",{className:"breakdown-item-main",children:[(0,Lx.jsx)("div",{className:"item-icon impressions",children:(0,Lx.jsx)(GK,{size:20})}),(0,Lx.jsxs)("div",{className:"item-content",children:[(0,Lx.jsx)("span",{className:"item-label",children:"Impressions"}),(0,Lx.jsxs)("div",{className:"item-details",children:[(0,Lx.jsx)("span",{className:"item-amount",children:a(t)}),(0,Lx.jsxs)("span",{className:"item-percentage",children:[s(t),"%"]})]})]})]}),(0,Lx.jsx)("div",{className:"item-description",children:"Brochures, flyers, supports imprim\xe9s"})]}),(0,Lx.jsxs)("div",{className:"breakdown-item",children:[(0,Lx.jsxs)("div",{className:"breakdown-item-main",children:[(0,Lx.jsx)("div",{className:"item-icon digital",children:(0,Lx.jsx)(YK,{size:20})}),(0,Lx.jsxs)("div",{className:"item-content",children:[(0,Lx.jsx)("span",{className:"item-label",children:"D\xe9veloppement Digital"}),(0,Lx.jsxs)("div",{className:"item-details",children:[(0,Lx.jsx)("span",{className:"item-amount",children:a(n)}),(0,Lx.jsxs)("span",{className:"item-percentage",children:[s(n),"%"]})]})]})]}),(0,Lx.jsx)("div",{className:"item-description",children:"Sites web, plugins, d\xe9veloppements"})]}),(0,Lx.jsxs)("div",{className:"breakdown-item",children:[(0,Lx.jsxs)("div",{className:"breakdown-item-main",children:[(0,Lx.jsx)("div",{className:"item-icon subscriptions",children:(0,Lx.jsx)(QK,{size:20})}),(0,Lx.jsxs)("div",{className:"item-content",children:[(0,Lx.jsx)("span",{className:"item-label",children:"Abonnements"}),(0,Lx.jsxs)("div",{className:"item-details",children:[(0,Lx.jsx)("span",{className:"item-amount",children:a(r)}),(0,Lx.jsxs)("span",{className:"item-percentage",children:[s(r),"%"]})]})]})]}),(0,Lx.jsx)("div",{className:"item-description",children:"Licences logiciels, services SaaS"})]})]}),(0,Lx.jsx)("div",{className:"breakdown-total",children:(0,Lx.jsxs)("span",{children:["Total Marketing: ",a(i)]})})]})}const dG=Px("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),hG=Px("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function pG(e){let{transactions:t,onDelete:n,canEdit:i=!1}=e;const[a,s]=(0,r.useState)(new Set),o=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e),l=t.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{}),c=Object.entries(l).map(e=>{let[t,n]=e;const r=n.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),i=n.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0);return{category:t,transactions:n.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),income:r,expenses:i,net:r-i,count:n.length}}).sort((e,t)=>t.count-e.count),u=e=>"income"===e?"#10b981":"#ef4444",d=e=>"income"===e?"+":"-";return 0===t.length?(0,Lx.jsx)("div",{className:"transactions-by-category",children:(0,Lx.jsx)("div",{className:"no-transactions",children:"Aucune transaction disponible"})}):(0,Lx.jsxs)("div",{className:"transactions-by-category",children:[(0,Lx.jsx)("div",{className:"category-summary",children:(0,Lx.jsxs)("div",{className:"summary-stats",children:[(0,Lx.jsxs)("div",{className:"stat-item",children:[(0,Lx.jsx)("span",{className:"stat-label",children:"Cat\xe9gories"}),(0,Lx.jsx)("span",{className:"stat-value",children:c.length})]}),(0,Lx.jsxs)("div",{className:"stat-item",children:[(0,Lx.jsx)("span",{className:"stat-label",children:"Total transactions"}),(0,Lx.jsx)("span",{className:"stat-value",children:t.length})]})]})}),(0,Lx.jsx)("div",{className:"categories-list",children:c.map(e=>{let{category:t,transactions:r,income:l,expenses:c,net:h,count:p}=e;const m=a.has(t);return(0,Lx.jsxs)("div",{className:"category-group",children:[(0,Lx.jsxs)("div",{className:"category-header",onClick:()=>(e=>{const t=new Set(a);t.has(e)?t.delete(e):t.add(e),s(t)})(t),children:[(0,Lx.jsxs)("div",{className:"category-info",children:[(0,Lx.jsx)("div",{className:"category-toggle",children:m?(0,Lx.jsx)(dG,{size:16}):(0,Lx.jsx)(hG,{size:16})}),(0,Lx.jsxs)("div",{className:"category-details",children:[(0,Lx.jsx)("h4",{className:"category-name",children:t}),(0,Lx.jsxs)("span",{className:"transaction-count",children:[p," transaction",p>1?"s":""]})]})]}),(0,Lx.jsxs)("div",{className:"category-totals",children:[l>0&&(0,Lx.jsxs)("div",{className:"total-item income",children:[(0,Lx.jsx)("span",{className:"total-label",children:"Revenus"}),(0,Lx.jsx)("span",{className:"total-amount",children:o(l)})]}),c>0&&(0,Lx.jsxs)("div",{className:"total-item expense",children:[(0,Lx.jsx)("span",{className:"total-label",children:"D\xe9penses"}),(0,Lx.jsx)("span",{className:"total-amount",children:o(c)})]}),(0,Lx.jsxs)("div",{className:"total-item net ".concat(h>=0?"positive":"negative"),children:[(0,Lx.jsx)("span",{className:"total-label",children:"Net"}),(0,Lx.jsx)("span",{className:"total-amount",children:o(h)})]})]})]}),m&&(0,Lx.jsx)("div",{className:"category-transactions",children:r.map(e=>{return(0,Lx.jsxs)("div",{className:"transaction-item",children:[(0,Lx.jsxs)("div",{className:"transaction-info",children:[(0,Lx.jsxs)("div",{className:"transaction-main",children:[(0,Lx.jsx)("div",{className:"transaction-type",children:(0,Lx.jsx)("span",{className:"type-indicator ".concat(e.type),style:{color:u(e.type)},children:d(e.type)})}),(0,Lx.jsxs)("div",{className:"transaction-details",children:[(0,Lx.jsx)("div",{className:"transaction-description",children:e.description}),(0,Lx.jsx)("div",{className:"transaction-date",children:(t=e.date,new Date(t).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}))})]})]}),(0,Lx.jsx)("div",{className:"transaction-amount",children:(0,Lx.jsxs)("span",{className:"amount ".concat(e.type),style:{color:u(e.type)},children:[d(e.type),o(e.amount)]})})]}),i&&n&&"marketing"!==e.source&&(0,Lx.jsx)("button",{className:"delete-transaction-btn",onClick:()=>n(e.id),title:"Supprimer cette transaction",children:(0,Lx.jsx)(eG,{size:14})})]},e.id);var t})})]},t)})})]})}function mG(e){let{transactions:t,children:n}=e;const[i,a]=(0,r.useState)("global"),s=(()=>{switch(i){case"expenses":return t.filter(e=>"expense"===e.type);case"income":return t.filter(e=>"income"===e.type);default:return t}})(),o=e=>{switch(e){case"expenses":return t.filter(e=>"expense"===e.type).length;case"income":return t.filter(e=>"income"===e.type).length;default:return t.length}};return(0,Lx.jsxs)("div",{className:"tabbed-transactions",children:[(0,Lx.jsxs)("div",{className:"transaction-tabs",children:[(0,Lx.jsxs)("button",{className:"tab-button ".concat("global"===i?"active":""),onClick:()=>a("global"),children:["Global (",o("global"),")"]}),(0,Lx.jsxs)("button",{className:"tab-button ".concat("expenses"===i?"active":""),onClick:()=>a("expenses"),children:["D\xe9penses (",o("expenses"),")"]}),(0,Lx.jsxs)("button",{className:"tab-button ".concat("income"===i?"active":""),onClick:()=>a("income"),children:["Revenus (",o("income"),")"]})]}),(0,Lx.jsx)("div",{className:"tab-content",children:n(s)})]})}function fG(){const{user:e}=Sx(),{addTransaction:t,deleteTransaction:n}=RK(),{totalIncome:i,totalExpenses:a,netBalance:s,transactionExpenses:o,marketingExpenses:l,marketingBreakdown:c,transactions:u,loading:d,error:h}=LK(),{monthlyBudget:p,updateMonthlyBudget:m,loading:f}=function(){const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(!0),[a,s]=(0,r.useState)(null),{user:o}=Sx();(0,r.useEffect)(()=>{if(!o)return t(2500),void i(!1);(async()=>{try{const e=Ud(kx,"budgetSettings",o.uid),n=await Kh(e);if(n.exists()){const e=n.data();t(e.monthlyBudget||2500)}else await Qh(e,{monthlyBudget:2500,updatedAt:new Date,userId:o.uid}),t(2500),await l(0,2500,"Cr\xe9ation du budget initial");i(!1),s(null)}catch(e){console.error("Erreur lors du chargement des param\xe8tres budget:",e),s(e.message),i(!1)}})()},[o]);const l=async(e,t,n)=>{if(o)try{const r={userId:o.uid,previousBudget:e,newBudget:t,changedAt:new Date,reason:n||"Modification manuelle"};await $h(Fd(kx,"budgetHistory"),r)}catch(r){console.error("Erreur lors de la sauvegarde de l'historique:",r)}};return{monthlyBudget:e,loading:n,error:a,updateMonthlyBudget:async(n,r)=>{if(!o)throw s("Utilisateur non connect\xe9"),new Error("Utilisateur non connect\xe9");if(n<=0)throw s("Le budget doit \xeatre sup\xe9rieur \xe0 0"),new Error("Le budget doit \xeatre sup\xe9rieur \xe0 0");try{const i=e,a=Ud(kx,"budgetSettings",o.uid);await Qh(a,{monthlyBudget:n,updatedAt:new Date,userId:o.uid}),await l(i||0,n,r),t(n),s(null)}catch(i){throw console.error("Erreur lors de la mise \xe0 jour du budget:",i),s(i.message),i}}}}(),g=!!e&&(f||d||null===p),[v,y]=(0,r.useState)(!1),[x,b]=(0,r.useState)("marketing-costs"),j=[{id:"sample-1",type:"income",amount:15e3,category:"Ventes Produits",description:"Ventes e-commerce du mois",date:"2025-08-01"},{id:"sample-2",type:"expense",amount:1720,category:"Infrastructure Web",description:"H\xe9bergement et services cloud",date:"2025-08-02"},{id:"sample-3",type:"expense",amount:1505,category:"D\xe9veloppement Web",description:"Freelance d\xe9veloppeur",date:"2025-08-03"},{id:"sample-4",type:"expense",amount:860,category:"Transport",description:"D\xe9placements professionnels",date:"2025-08-04"},{id:"sample-5",type:"expense",amount:215,category:"Autre",description:"Frais divers",date:"2025-08-05"}],w=e?u:j,N=e?i:j.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),k=e?a:j.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0),C=e?l:630,S=e?o:4300,E=e?p:12e3,T=async t=>{if(e)try{await n(t)}catch(h){console.error("Erreur lors de la suppression de la transaction:",h)}else alert("Veuillez vous connecter pour supprimer des transactions")};return(0,Lx.jsxs)("div",{className:"budget-page",children:[(0,Lx.jsx)("div",{className:"page-header",children:(0,Lx.jsx)("h1",{children:"Budget"})}),!g&&(0,Lx.jsx)(KK,{totalIncome:N,totalExpenses:k,monthlyBudget:E,onBudgetUpdate:m,canEdit:!!e}),g&&(0,Lx.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.9)",padding:"40px",borderRadius:"16px",textAlign:"center",marginBottom:"24px"},children:"Chargement des donn\xe9es..."}),!g&&(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsxs)("div",{className:"budget-tabs",children:[(0,Lx.jsx)("button",{className:"tab-button ".concat("marketing-costs"===x?"active":""),onClick:()=>b("marketing-costs"),children:"Co\xfbts Marketing"}),(0,Lx.jsx)("button",{className:"tab-button ".concat("recent-transactions"===x?"active":""),onClick:()=>b("recent-transactions"),children:"Transactions r\xe9centes"}),(0,Lx.jsx)("button",{className:"tab-button ".concat("transactions-by-category"===x?"active":""),onClick:()=>b("transactions-by-category"),children:"Transactions par cat\xe9gorie"}),(0,Lx.jsx)("button",{className:"tab-button ".concat("budget-by-category"===x?"active":""),onClick:()=>b("budget-by-category"),children:"Budget par cat\xe9gorie"}),(0,Lx.jsx)("button",{className:"tab-button ".concat("insights"===x?"active":""),onClick:()=>b("insights"),children:"Analyses et recommandations"}),(0,Lx.jsx)("button",{className:"tab-button ".concat("roi-tracking"===x?"active":""),onClick:()=>b("roi-tracking"),children:"Suivi ROI"})]}),(0,Lx.jsx)("div",{className:"budget-content",children:(()=>{switch(x){case"marketing-costs":return(0,Lx.jsxs)("div",{className:"tab-content",children:[(0,Lx.jsx)(tG,{}),e&&(0,Lx.jsx)(uG,{impressions:c.impression,digital:c.digital,subscriptions:c.subscription,total:l})]});case"recent-transactions":return(0,Lx.jsxs)("div",{className:"tab-content",children:[(0,Lx.jsx)("div",{className:"tab-header",children:(0,Lx.jsxs)("button",{className:"btn-primary",onClick:()=>y(!0),style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Lx.jsx)(Hx,{size:16}),"Nouvelle transaction"]})}),(0,Lx.jsx)(mG,{transactions:w,children:e=>(0,Lx.jsx)(oG,{transactions:e,onDelete:T})})]});case"transactions-by-category":return(0,Lx.jsx)("div",{className:"tab-content",children:(0,Lx.jsx)(mG,{transactions:w,children:t=>(0,Lx.jsx)(pG,{transactions:t,onDelete:T,canEdit:!!e})})});case"budget-by-category":return(0,Lx.jsx)("div",{className:"tab-content",children:(0,Lx.jsx)(rG,{totalBudget:E,marketingExpenses:C,transactionExpenses:S})});case"insights":return(0,Lx.jsx)("div",{className:"tab-content",children:(0,Lx.jsx)(iG,{totalIncome:N,totalExpenses:k,monthlyBudget:E,marketingExpenses:C,transactionExpenses:S})});case"roi-tracking":return(0,Lx.jsx)("div",{className:"tab-content",children:(0,Lx.jsx)(sG,{transactions:w})});default:return null}})()})]}),h&&(0,Lx.jsxs)("div",{style:{background:"#f8d7da",color:"#721c24",padding:"12px",borderRadius:"6px",marginBottom:"20px"},children:["Erreur: ",h]}),(0,Lx.jsx)(cG,{isOpen:v,onClose:()=>y(!1),onSave:async n=>{if(e)try{await t(n)}catch(h){console.error("Erreur lors de l'ajout de la transaction:",h)}else alert("Veuillez vous connecter pour ajouter des transactions")}})]})}const gG=Px("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),vG=Px("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),yG=Px("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);function xG(e){let{events:t=[],onAddEvent:n,onEventClick:i}=e;const[a,s]=(0,r.useState)(new Date),[o,l]=(0,r.useState)("month"),c=new Date,u=a.getMonth(),d=a.getFullYear(),h=["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"],p=["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],m=new Date(d,u,1),f=new Date(d,u+1,0),g=m.getDay(),v=f.getDate(),y=[],x=new Date(d,u-1,0);for(let r=g-1;r>=0;r--)y.push({day:x.getDate()-r,isCurrentMonth:!1,date:new Date(d,u-1,x.getDate()-r)});for(let r=1;r<=v;r++)y.push({day:r,isCurrentMonth:!0,date:new Date(d,u,r)});const b=42-y.length;for(let r=1;r<=b;r++)y.push({day:r,isCurrentMonth:!1,date:new Date(d,u+1,r)});const j=e=>{s(t=>{const n=new Date(t);return"prev"===e?n.setMonth(t.getMonth()-1):n.setMonth(t.getMonth()+1),n})},w=e=>{s(t=>{const n=new Date(t);return"prev"===e?n.setDate(t.getDate()-7):n.setDate(t.getDate()+7),n})},N=e=>{s(t=>{const n=new Date(t);return"prev"===e?n.setDate(t.getDate()-1):n.setDate(t.getDate()+1),n})},k=e=>e.toDateString()===c.toDateString(),C=e=>{const n=e.toISOString().split("T")[0];return t.filter(e=>e.date===n)},S=e=>e.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),E=e=>{const t=new Date(e),n=t.getDay(),r=t.getDate()-n+(0===n?-6:1);t.setDate(r);const i=[];for(let a=0;a<7;a++){const e=new Date(t);e.setDate(t.getDate()+a),i.push(e)}return i},[T,_]=(0,r.useState)(null),[A,I]=(0,r.useState)(!1),[P,O]=(0,r.useState)(0),D=(e,t)=>{_(e),I(!0),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",e.id)},M=()=>{I(!1),_(null)},R=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},L=(e,t)=>{if(t.preventDefault(),T&&i){const t=15*Math.round(e/15),n=Math.floor(t/60),r=t%60,a="".concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"));let s=60;if(T.startTime&&T.endTime){const[e,t]=T.startTime.split(":").map(Number),[n,r]=T.endTime.split(":").map(Number);s=60*n+r-(60*e+t)}const o=t+s,l=Math.floor(o/60),c=o%60,u="".concat(l.toString().padStart(2,"0"),":").concat(c.toString().padStart(2,"0"));console.log("Drag drop: ".concat(e,"min -> ").concat(t,"min (").concat(a," - ").concat(u,")"));const d=Me(Me({},T),{},{startTime:a,endTime:u,time:a});i(d)}I(!1),_(null)},z=(e,t)=>{A||(t.stopPropagation(),null===i||void 0===i||i(e))};return(0,Lx.jsxs)("div",{className:"calendar-container",children:[(0,Lx.jsxs)("div",{className:"calendar-header",children:[(0,Lx.jsx)("button",{className:"nav-button",onClick:()=>{"month"===o?j("prev"):"week"===o?w("prev"):N("prev")},children:(0,Lx.jsx)(gG,{size:20})}),(0,Lx.jsx)("h2",{className:"calendar-title",children:"month"===o?"".concat(h[u]," ").concat(d):"week"===o?(e=>{const t=E(e),n=t[0],r=t[6];return n.getMonth()===r.getMonth()?"".concat(n.getDate()," - ").concat(r.getDate()," ").concat(h[n.getMonth()]," ").concat(n.getFullYear()):"".concat(n.getDate()," ").concat(h[n.getMonth()]," - ").concat(r.getDate()," ").concat(h[r.getMonth()]," ").concat(n.getFullYear())})(a):S(a)}),(0,Lx.jsx)("button",{className:"nav-button",onClick:()=>{"month"===o?j("next"):"week"===o?w("next"):N("next")},children:(0,Lx.jsx)(hG,{size:20})}),(0,Lx.jsxs)("div",{className:"view-toggle",children:[(0,Lx.jsxs)("button",{className:"view-btn ".concat("month"===o?"active":""),onClick:()=>l("month"),children:[(0,Lx.jsx)(Mx,{size:16}),"Mois"]}),(0,Lx.jsxs)("button",{className:"view-btn ".concat("week"===o?"active":""),onClick:()=>l("week"),children:[(0,Lx.jsx)(vG,{size:16}),"Semaine"]}),(0,Lx.jsxs)("button",{className:"view-btn ".concat("day"===o?"active":""),onClick:()=>l("day"),children:[(0,Lx.jsx)(yG,{size:16}),"Jour"]})]})]}),"month"===o?(0,Lx.jsxs)("div",{className:"calendar-grid",children:[p.map(e=>(0,Lx.jsx)("div",{className:"day-header",children:e},e)),y.map((e,t)=>{const r=C(e.date);return(0,Lx.jsxs)("div",{className:"calendar-day ".concat(e.isCurrentMonth?"":"other-month"," ").concat(k(e.date)?"today":""),onClick:()=>(e=>{if("month"===o)s(e),l("day");else if("week"===o)s(e),l("day");else if(n){const t=e.toISOString().split("T")[0];n(t)}})(e.date),children:[(0,Lx.jsx)("span",{className:"day-number",children:e.day}),r.length>0&&(0,Lx.jsxs)("div",{className:"events-indicator",children:[r.slice(0,2).map(e=>(0,Lx.jsx)("div",{className:"event-indicator",title:e.title,onClick:t=>{t.stopPropagation(),null===i||void 0===i||i(e)},style:{cursor:"pointer",backgroundColor:e.color||"#007bff"},children:e.title},e.id)),r.length>2&&(0,Lx.jsxs)("div",{className:"more-events",children:["+",r.length-2]})]}),n&&(0,Lx.jsx)("button",{className:"add-event-btn",title:"Ajouter un \xe9v\xe9nement",children:(0,Lx.jsx)(Hx,{size:12})})]},t)})]}):"week"===o?(()=>{const e=E(a);return(0,Lx.jsxs)("div",{className:"week-view",children:[(0,Lx.jsx)("div",{className:"week-view-header",children:(0,Lx.jsxs)("div",{className:"week-days-header",children:[(0,Lx.jsx)("div",{className:"time-column-header"}),e.map((e,t)=>(0,Lx.jsxs)("div",{className:"week-day-header",children:[(0,Lx.jsx)("div",{className:"week-day-name",children:p[e.getDay()]}),(0,Lx.jsx)("div",{className:"week-day-number ".concat(k(e)?"today":""),children:e.getDate()}),(0,Lx.jsx)("div",{className:"week-day-month",children:e.getMonth()!==a.getMonth()?h[e.getMonth()].substring(0,3):""})]},t))]})}),(0,Lx.jsx)("div",{className:"week-view-content",children:(0,Lx.jsxs)("div",{className:"week-time-grid",children:[Array.from({length:24},(t,r)=>(0,Lx.jsxs)("div",{className:"week-hour-row",children:[(0,Lx.jsxs)("div",{className:"week-hour-label",children:[r.toString().padStart(2,"0"),":00"]}),(0,Lx.jsx)("div",{className:"week-hour-content",children:Array.from({length:4},(t,i)=>{const a=60*r+15*i;return(0,Lx.jsx)("div",{className:"week-quarter-row",children:e.map((e,t)=>(0,Lx.jsx)("div",{className:"week-quarter-slot ".concat(0===i?"hour-start":""," ").concat(T&&A?"drag-target":""),onClick:()=>{if(n&&!A){const t=e.toISOString().split("T")[0],a="".concat(r.toString().padStart(2,"0"),":").concat((15*i).toString().padStart(2,"0"));n(t,a)}},onDragOver:R,onDrop:e=>{const t=e.currentTarget.getBoundingClientRect(),n=(e.clientY-t.top)/t.height;L(a+15*n,e)},children:i>0&&(0,Lx.jsx)("div",{className:"week-quarter-line"})},t))},i)})})]},r)),e.map((e,t)=>C(e).map(e=>{const{top:n,height:r}=(e=>{let t=0,n=60;if(e.startTime){const[r,i]=e.startTime.split(":").map(Number);if(t=60*r+i,e.endTime){const[r,i]=e.endTime.split(":").map(Number),a=60*r+i;a>t&&(n=a-t)}}else if(e.time){const[n,r]=e.time.split(":").map(Number);t=60*n+r}return{top:1*t,height:Math.max(1*n,20)}})(e);return(0,Lx.jsxs)("div",{className:"week-event-positioned ".concat((null===T||void 0===T?void 0:T.id)===e.id&&A?"dragging":""),style:{backgroundColor:e.color||"#007bff",top:"".concat(n,"px"),height:"".concat(r,"px"),position:"absolute",left:"calc(80px + ".concat(t," * (100% - 80px) / 7 + 3px)"),width:"calc((100% - 80px) / 7 - 6px)",zIndex:(null===T||void 0===T?void 0:T.id)===e.id&&A?100:10},draggable:!0,onDragStart:t=>D(e,t),onDragEnd:M,onClick:t=>z(e,t),children:[(0,Lx.jsx)("div",{className:"week-event-title",children:e.title}),(e.startTime||e.time)&&(0,Lx.jsx)("div",{className:"week-event-time",children:e.startTime&&e.endTime?"".concat(e.startTime," - ").concat(e.endTime):e.startTime||e.time})]},"".concat(e.id,"-").concat(t))}))]})})]})})():(()=>{const e=C(a);Array.from({length:96},(e,t)=>15*t);return(0,Lx.jsxs)("div",{className:"day-view",children:[(0,Lx.jsxs)("div",{className:"day-view-header",children:[(0,Lx.jsx)("h3",{children:S(a)}),n&&(0,Lx.jsxs)("button",{className:"add-event-btn-day",onClick:()=>{const e=a.toISOString().split("T")[0];n(e)},children:[(0,Lx.jsx)(Hx,{size:16}),"Ajouter un \xe9v\xe9nement"]})]}),(0,Lx.jsx)("div",{className:"day-view-content",children:(0,Lx.jsxs)("div",{className:"time-grid",children:[Array.from({length:24},(e,t)=>(0,Lx.jsxs)("div",{className:"hour-row",children:[(0,Lx.jsxs)("div",{className:"hour-label",children:[t.toString().padStart(2,"0"),":00"]}),(0,Lx.jsx)("div",{className:"hour-content",children:Array.from({length:4},(e,r)=>{const i=60*t+15*r;return(0,Lx.jsx)("div",{className:"quarter-slot ".concat(0===r?"hour-start":""," ").concat(T&&A?"drag-target":""),onClick:()=>(e=>{if(n&&!A){const t=a.toISOString().split("T")[0],r="".concat(e.toString().padStart(2,"0"),":00");n(t,r)}})(t),onDragOver:R,onDrop:e=>{const t=e.currentTarget.getBoundingClientRect(),n=(e.clientY-t.top)/t.height;L(i+15*n,e)},children:r>0&&(0,Lx.jsx)("div",{className:"quarter-line"})},r)})})]},t)),(0,Lx.jsx)("div",{className:"events-overlay",children:e.map(e=>{const{top:t,height:n}=(e=>{let t=0,n=60;if(e.startTime){const[r,i]=e.startTime.split(":").map(Number);if(t=60*r+i,e.endTime){const[r,i]=e.endTime.split(":").map(Number);n=60*r+i-t}}else if(e.time){const[n,r]=e.time.split(":").map(Number);t=60*n+r}return{top:t/60*60,height:Math.max(n/60*60,20)}})(e);return(0,Lx.jsxs)("div",{className:"day-event-positioned draggable-event ".concat((null===T||void 0===T?void 0:T.id)===e.id&&A?"dragging":""),style:{backgroundColor:e.color||"#007bff",opacity:(null===T||void 0===T?void 0:T.id)===e.id&&A?.5:1,top:"".concat(t,"px"),height:"".concat(n,"px"),left:"60px",right:"20px",position:"absolute",zIndex:10},draggable:!0,onDragStart:t=>D(e,t),onDragEnd:M,onClick:t=>z(e,t),children:[(0,Lx.jsx)("div",{className:"day-event-title",children:e.title}),(e.startTime||e.time)&&(0,Lx.jsx)("div",{className:"day-event-time",children:e.startTime&&e.endTime?"".concat(e.startTime," - ").concat(e.endTime):e.startTime||e.time}),(0,Lx.jsx)("div",{className:"drag-handle",children:"\u22ee\u22ee"})]},e.id)})})]})})]})})()]})}const bG=Px("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),jG=Px("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),wG=[{id:"marketing-digital",name:"Marketing Digital",icon:"\ud83d\udcf1",value:"marketing-digital"},{id:"publicite",name:"Publicit\xe9",icon:"\ud83d\udce2",value:"publicite"},{id:"evenement",name:"\xc9v\xe9nement",icon:"\ud83c\udf89",value:"evenement"},{id:"reunion",name:"R\xe9union",icon:"\ud83d\udc65",value:"reunion"},{id:"formation",name:"Formation",icon:"\ud83d\udcda",value:"formation"},{id:"prospection",name:"Prospection",icon:"\ud83c\udfaf",value:"prospection"},{id:"visite",name:"Visite",icon:"\ud83c\udfe0",value:"visite"},{id:"suivi-client",name:"Suivi Client",icon:"\ud83d\udcde",value:"suivi-client"}];function NG(){const{user:e}=Sx(),{data:t,loading:n,error:i,addItem:a,updateItem:s,deleteItem:o}=Ex("eventCategories"),l=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{if(e&&!n&&!l.current&&0===t.length){l.current=!0;const n=async()=>{console.log("Initializing default categories for user:",e.uid);try{if(t.length>0)return void console.log("Categories already exist, aborting initialization");const e=new Set,n=new Set;for(const t of wG){const r=t.value.toLowerCase().trim(),i=t.name.toLowerCase().trim();e.has(r)||n.has(i)?console.log("Skipping duplicate category: ".concat(t.name)):(await a({name:t.name,icon:t.icon,value:t.value}),e.add(r),n.add(i),console.log("Added category: ".concat(t.name)),await new Promise(e=>setTimeout(e,100)))}console.log("Default categories initialized successfully")}catch(i){console.error("Error initializing default categories:",i),l.current=!1}};setTimeout(n,500)}},[null===e||void 0===e?void 0:e.uid,n,t.length]),{categories:t,loading:n,error:i,addCategory:a,updateCategory:s,deleteCategory:o}}const kG=()=>Array.from({length:96},(e,t)=>{const n=15*t,r=Math.floor(n/60),i=n%60;return"".concat(r.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"))});function CG(e){let{isOpen:t,onClose:n,onSave:i,selectedDate:a}=e;const{categories:s,loading:o}=NG(),{projects:l}=Fx(),{units:c,getUnitsByProject:u}=Ux(),[d,h]=(0,r.useState)({title:"",time:"",startTime:"",endTime:"",description:"",color:"#007bff",category:"",projectId:"",unitId:"",location:"",additionalInfo:"",cost:"",images:[]}),[p,m]=(0,r.useState)([]);(0,r.useEffect)(()=>{if(d.projectId){const e=u(d.projectId);m(e)}else m([])},[d.projectId]);if(!t)return null;const f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.7;return new Promise((r,i)=>{const a=document.createElement("canvas"),s=a.getContext("2d"),o=document.createElement("img");o.onload=()=>{const e=Math.min(t/o.width,t/o.height);a.width=o.width*e,a.height=o.height*e,s?(s.drawImage(o,0,0,a.width,a.height),a.toBlob(e=>{if(e){const t=new FileReader;t.onload=()=>r(t.result),t.onerror=i,t.readAsDataURL(e)}else i(new Error("Compression failed"))},"image/jpeg",n)):i(new Error("Canvas context not available"))},o.onerror=i,o.src=URL.createObjectURL(e)})};return(0,Lx.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,Lx.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Lx.jsxs)("div",{className:"modal-header",children:[(0,Lx.jsx)("h3",{children:"Nouvel \xe9v\xe9nement"}),(0,Lx.jsx)("button",{className:"close-button",onClick:n,children:(0,Lx.jsx)(HK,{size:20})})]}),(0,Lx.jsxs)("div",{className:"modal-body",children:[(0,Lx.jsx)("p",{className:"selected-date",children:(g=a,new Date(g).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))}),(0,Lx.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!d.title.trim())return;const t=Me(Me(Me(Me(Me(Me(Me(Me(Me(Me(Me({title:d.title.trim(),date:a},d.time&&{time:d.time}),d.startTime&&{startTime:d.startTime}),d.endTime&&{endTime:d.endTime}),d.description.trim()&&{description:d.description.trim()}),{},{color:d.color},d.category&&{category:d.category}),d.projectId&&{projectId:d.projectId}),d.unitId&&{unitId:d.unitId}),d.location.trim()&&{location:d.location.trim()}),d.additionalInfo.trim()&&{additionalInfo:d.additionalInfo.trim()}),d.cost&&{cost:parseFloat(d.cost)}),d.images.length>0&&{images:d.images});i(t),h({title:"",time:"",startTime:"",endTime:"",description:"",color:"#007bff",category:"",projectId:"",unitId:"",location:"",additionalInfo:"",cost:"",images:[]}),m([]),n()},children:[(0,Lx.jsxs)("div",{className:"form-group half-width",children:[(0,Lx.jsx)("label",{htmlFor:"title",children:"Titre *"}),(0,Lx.jsx)("input",{type:"text",id:"title",value:d.title,onChange:e=>h(t=>Me(Me({},t),{},{title:e.target.value})),placeholder:"Nom de l'\xe9v\xe9nement",required:!0,autoFocus:!0})]}),(0,Lx.jsxs)("div",{className:"form-group quarter-width",children:[(0,Lx.jsx)("label",{htmlFor:"startTime",children:"Heure d\xe9but"}),(0,Lx.jsxs)("select",{id:"startTime",value:d.startTime,onChange:e=>h(t=>Me(Me({},t),{},{startTime:e.target.value})),className:"form-select",children:[(0,Lx.jsx)("option",{value:"",children:"--:--"}),kG().map(e=>(0,Lx.jsx)("option",{value:e,children:e},e))]})]}),(0,Lx.jsxs)("div",{className:"form-group quarter-width",children:[(0,Lx.jsx)("label",{htmlFor:"endTime",children:"Heure fin"}),(0,Lx.jsxs)("select",{id:"endTime",value:d.endTime,onChange:e=>h(t=>Me(Me({},t),{},{endTime:e.target.value})),className:"form-select",children:[(0,Lx.jsx)("option",{value:"",children:"--:--"}),kG().map(e=>(0,Lx.jsx)("option",{value:e,children:e},e))]})]}),(0,Lx.jsxs)("div",{className:"form-group quarter-width",children:[(0,Lx.jsx)("label",{htmlFor:"category",children:"Cat\xe9gorie"}),(0,Lx.jsxs)("select",{id:"category",value:d.category,onChange:e=>h(t=>Me(Me({},t),{},{category:e.target.value})),className:"form-select",disabled:o,children:[(0,Lx.jsx)("option",{value:"",children:"S\xe9lectionner une cat\xe9gorie"}),o?(0,Lx.jsx)("option",{disabled:!0,children:"Chargement..."}):s&&s.length>0?s.map(e=>(0,Lx.jsxs)("option",{value:e.value,children:[e.icon," ",e.name]},e.id)):(0,Lx.jsx)("option",{disabled:!0,children:"Aucune cat\xe9gorie disponible"})]})]}),(0,Lx.jsxs)("div",{className:"form-group half-width",children:[(0,Lx.jsxs)("label",{htmlFor:"projectId",children:[(0,Lx.jsx)(Vx,{size:16,style:{marginRight:"4px"}}),"Projet immobilier"]}),(0,Lx.jsxs)("select",{id:"projectId",value:d.projectId,onChange:e=>{return t=e.target.value,void h(e=>Me(Me({},e),{},{projectId:t,unitId:""}));var t},className:"form-select",children:[(0,Lx.jsx)("option",{value:"",children:"S\xe9lectionner un projet (optionnel)"}),l.map(e=>(0,Lx.jsxs)("option",{value:e.id,children:[e.name," - ",e.address]},e.id))]})]}),d.projectId&&p.length>0&&(0,Lx.jsxs)("div",{className:"form-group half-width",children:[(0,Lx.jsxs)("label",{htmlFor:"unitId",children:[(0,Lx.jsx)(Bx,{size:16,style:{marginRight:"4px"}}),"Unit\xe9"]}),(0,Lx.jsxs)("select",{id:"unitId",value:d.unitId,onChange:e=>h(t=>Me(Me({},t),{},{unitId:e.target.value})),className:"form-select",children:[(0,Lx.jsx)("option",{value:"",children:"S\xe9lectionner une unit\xe9 (optionnel)"}),p.map(e=>(0,Lx.jsxs)("option",{value:e.id,children:[e.name," - ",e.surface,"m\xb2 - ",e.price.toLocaleString(),"\u20ac"]},e.id))]})]}),(0,Lx.jsxs)("div",{className:"form-group quarter-width",children:[(0,Lx.jsxs)("label",{htmlFor:"location",children:[(0,Lx.jsx)(Gx,{size:16,style:{marginRight:"4px"}}),"Lieu"]}),(0,Lx.jsx)("input",{type:"text",id:"location",value:d.location,onChange:e=>h(t=>Me(Me({},t),{},{location:e.target.value})),placeholder:"Lieu de l'\xe9v\xe9nement (optionnel)"})]}),(0,Lx.jsxs)("div",{className:"form-group quarter-width",children:[(0,Lx.jsxs)("label",{htmlFor:"cost",children:[(0,Lx.jsx)(BK,{size:16,style:{marginRight:"4px"}}),"Co\xfbt"]}),(0,Lx.jsx)("input",{type:"number",step:"0.01",id:"cost",value:d.cost,onChange:e=>h(t=>Me(Me({},t),{},{cost:e.target.value})),placeholder:"Co\xfbt en \u20ac (optionnel)"})]}),(0,Lx.jsxs)("div",{className:"form-group half-width",children:[(0,Lx.jsx)("label",{htmlFor:"description",children:"Description"}),(0,Lx.jsx)("textarea",{id:"description",value:d.description,onChange:e=>h(t=>Me(Me({},t),{},{description:e.target.value})),placeholder:"Description de l'\xe9v\xe9nement (optionnel)",rows:3})]}),(0,Lx.jsxs)("div",{className:"form-group half-width",children:[(0,Lx.jsxs)("label",{htmlFor:"additionalInfo",children:[(0,Lx.jsx)(bG,{size:16,style:{marginRight:"4px"}}),"Informations compl\xe9mentaires"]}),(0,Lx.jsx)("textarea",{id:"additionalInfo",value:d.additionalInfo,onChange:e=>h(t=>Me(Me({},t),{},{additionalInfo:e.target.value})),placeholder:"Informations compl\xe9mentaires (optionnel)",rows:3})]}),(0,Lx.jsxs)("div",{className:"form-group full-width",children:[(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)(jG,{size:16,style:{marginRight:"4px"}}),"Images (",d.images.length,"/3)"]}),(0,Lx.jsxs)("div",{children:[(0,Lx.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:"12px"},children:d.images.map((e,t)=>(0,Lx.jsxs)("div",{style:{position:"relative",width:"80px",height:"80px"},children:[(0,Lx.jsx)("img",{src:e,alt:"Image ".concat(t+1),style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"6px",border:"2px solid #e5e7eb"}}),(0,Lx.jsx)("button",{type:"button",onClick:()=>(e=>{h(t=>Me(Me({},t),{},{images:t.images.filter((t,n)=>n!==e)}))})(t),style:{position:"absolute",top:"-8px",right:"-8px",width:"20px",height:"20px",borderRadius:"50%",background:"#dc3545",color:"white",border:"none",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:"\xd7"})]},t))}),d.images.length<3&&(0,Lx.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:async e=>{const t=e.target.files;if(!t)return;const n=Math.min(t.length,3-d.images.length),r=Array.from(t).slice(0,n);try{const e=await Promise.all(r.map(async e=>e.size>5e5?await f(e,600,.6):await f(e,800,.8)));h(t=>Me(Me({},t),{},{images:[...t.images,...e]}))}catch(i){console.error("Error uploading images:",i),alert("Erreur lors du traitement des images. Veuillez r\xe9essayer avec des images plus petites.")}},style:{marginTop:"8px"}})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"color",children:"Couleur"}),(0,Lx.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[(0,Lx.jsx)("input",{type:"color",id:"color",value:d.color,onChange:e=>h(t=>Me(Me({},t),{},{color:e.target.value})),style:{width:"40px",height:"40px",border:"none",borderRadius:"6px",cursor:"pointer"}}),(0,Lx.jsx)("div",{style:{display:"flex",gap:"4px"},children:["#007bff","#28a745","#dc3545","#ffc107","#6f42c1","#fd7e14"].map(e=>(0,Lx.jsx)("button",{type:"button",onClick:()=>h(t=>Me(Me({},t),{},{color:e})),style:{width:"24px",height:"24px",backgroundColor:e,border:d.color===e?"2px solid #000":"1px solid #ddd",borderRadius:"4px",cursor:"pointer"},title:e},e))})]})]}),(0,Lx.jsxs)("div",{className:"modal-actions",children:[(0,Lx.jsx)("button",{type:"button",className:"button button-secondary",onClick:n,children:"Annuler"}),(0,Lx.jsx)("button",{type:"submit",className:"button",children:"Ajouter"})]})]})]})]})});var g}const SG=Px("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);function EG(e){var t;let{isOpen:n,event:i,onClose:a,onUpdate:s,onDelete:o}=e;const{categories:l}=NG(),{projects:c}=Fx(),{units:u}=Ux(),[d,h]=(0,r.useState)(!1),[p,m]=(0,r.useState)({title:"",time:"",startTime:"",endTime:"",description:"",color:"#007bff",category:"",projectId:"",unitId:"",location:"",additionalInfo:"",cost:"",images:[]}),[f,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)({});(0,r.useEffect)(()=>{var e;i&&(m({title:i.title||"",time:i.time||"",startTime:i.startTime||"",endTime:i.endTime||"",description:i.description||"",color:i.color||"#007bff",category:i.category||"",projectId:i.projectId||"",unitId:i.unitId||"",location:i.location||"",additionalInfo:i.additionalInfo||"",cost:(null===(e=i.cost)||void 0===e?void 0:e.toString())||"",images:i.images||[]}),y({}),h(!1))},[i]);const x=(0,r.useCallback)(()=>p.projectId?u.filter(e=>e.projectId===p.projectId):[],[p.projectId,u]);if(!n||!i)return null;return(0,Lx.jsx)("div",{className:"event-modal-overlay",onClick:a,children:(0,Lx.jsxs)("div",{className:"event-modal-content",onClick:e=>e.stopPropagation(),children:[(0,Lx.jsxs)("div",{className:"event-modal-header",children:[(0,Lx.jsx)("h2",{children:d?"Modifier l'\xe9v\xe9nement":"D\xe9tails de l'\xe9v\xe9nement"}),(0,Lx.jsx)("button",{className:"close-btn",onClick:a,children:(0,Lx.jsx)(HK,{size:20})})]}),(0,Lx.jsx)("div",{className:"event-modal-body",children:(0,Lx.jsxs)("div",{className:"event-content-layout",children:[(0,Lx.jsxs)("div",{className:"event-fields-section",children:[(0,Lx.jsxs)("div",{className:"event-field",children:[(0,Lx.jsxs)("div",{className:"field-label",children:[(0,Lx.jsx)(GK,{size:16}),(0,Lx.jsx)("span",{children:"Titre"})]}),d?(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsx)("input",{type:"text",value:p.title,onChange:e=>m(t=>Me(Me({},t),{},{title:e.target.value})),className:"edit-input ".concat(v.title?"error":""),placeholder:"Titre de l'\xe9v\xe9nement"}),v.title&&(0,Lx.jsx)("div",{className:"error-message",children:v.title})]}):(0,Lx.jsx)("div",{className:"field-value",children:i.title})]}),(0,Lx.jsxs)("div",{className:"event-field",children:[(0,Lx.jsxs)("div",{className:"field-label",children:[(0,Lx.jsx)(Mx,{size:16}),(0,Lx.jsx)("span",{children:"Date"})]}),(0,Lx.jsx)("div",{className:"field-value",children:(b=i.date,new Date(b).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))})]}),(0,Lx.jsxs)("div",{className:"event-field",children:[(0,Lx.jsxs)("div",{className:"field-label",children:[(0,Lx.jsx)(SG,{size:16}),(0,Lx.jsx)("span",{children:"Heure d\xe9but"})]}),d?(0,Lx.jsxs)("select",{value:p.startTime,onChange:e=>m(t=>Me(Me({},t),{},{startTime:e.target.value})),className:"edit-input",children:[(0,Lx.jsx)("option",{value:"",children:"--:--"}),kG().map(e=>(0,Lx.jsx)("option",{value:e,children:e},e))]}):(0,Lx.jsx)("div",{className:"field-value",children:i.startTime||"Non sp\xe9cifi\xe9e"})]}),(0,Lx.jsxs)("div",{className:"event-field",children:[(0,Lx.jsxs)("div",{className:"field-label",children:[(0,Lx.jsx)(SG,{size:16}),(0,Lx.jsx)("span",{children:"Heure fin"})]}),d?(0,Lx.jsxs)("select",{value:p.endTime,onChange:e=>m(t=>Me(Me({},t),{},{endTime:e.target.value})),className:"edit-input",children:[(0,Lx.jsx)("option",{value:"",children:"--:--"}),kG().map(e=>(0,Lx.jsx)("option",{value:e,children:e},e))]}):(0,Lx.jsx)("div",{className:"field-value",children:i.endTime||"Non sp\xe9cifi\xe9e"})]}),(0,Lx.jsxs)("div",{className:"event-field",children:[(0,Lx.jsxs)("div",{className:"field-label",children:[(0,Lx.jsx)(Gx,{size:16}),(0,Lx.jsx)("span",{children:"Lieu"})]}),d?(0,Lx.jsx)("input",{type:"text",value:p.location,onChange:e=>m(t=>Me(Me({},t),{},{location:e.target.value})),className:"edit-input",placeholder:"Lieu de l'\xe9v\xe9nement"}):(0,Lx.jsx)("div",{className:"field-value",children:i.location||"Non sp\xe9cifi\xe9"})]}),(0,Lx.jsxs)("div",{className:"event-field",children:[(0,Lx.jsxs)("div",{className:"field-label",children:[(0,Lx.jsx)(GK,{size:16}),(0,Lx.jsx)("span",{children:"Cat\xe9gorie"})]}),d?(0,Lx.jsxs)("select",{value:p.category,onChange:e=>m(t=>Me(Me({},t),{},{category:e.target.value})),className:"edit-input",children:[(0,Lx.jsx)("option",{value:"",children:"S\xe9lectionner une cat\xe9gorie"}),l.map(e=>(0,Lx.jsxs)("option",{value:e.value,children:[e.icon," ",e.name]},e.id))]}):(0,Lx.jsx)("div",{className:"field-value",children:i.category?(e=>{const t=l.find(t=>t.value===e);return t?"".concat(t.icon," ").concat(t.name):e})(i.category):"Aucune cat\xe9gorie"})]}),(0,Lx.jsxs)("div",{className:"event-field",children:[(0,Lx.jsxs)("div",{className:"field-label",children:[(0,Lx.jsx)(Vx,{size:16}),(0,Lx.jsx)("span",{children:"Projet immobilier"})]}),d?(0,Lx.jsxs)("select",{value:p.projectId||"",onChange:e=>{return t=e.target.value,m(e=>Me(Me({},e),{},{projectId:t,unitId:""})),void(v.unitId&&y(e=>Me(Me({},e),{},{unitId:""})));var t},className:"edit-input",children:[(0,Lx.jsx)("option",{value:"",children:"S\xe9lectionner un projet (optionnel)"}),c.map(e=>(0,Lx.jsxs)("option",{value:e.id,children:[e.name," - ",e.address]},e.id))]}):(0,Lx.jsx)("div",{className:"field-value",children:i.projectId?(e=>{const t=c.find(t=>t.id===e);return t?"".concat(t.name," - ").concat(t.address):"Projet introuvable"})(i.projectId):"Aucun projet s\xe9lectionn\xe9"})]}),(0,Lx.jsxs)("div",{className:"event-field",children:[(0,Lx.jsxs)("div",{className:"field-label",children:[(0,Lx.jsx)(Bx,{size:16}),(0,Lx.jsx)("span",{children:"Unit\xe9"})]}),d?(0,Lx.jsxs)("select",{value:p.unitId||"",onChange:e=>m(t=>Me(Me({},t),{},{unitId:e.target.value})),className:"edit-input",disabled:!p.projectId,children:[(0,Lx.jsx)("option",{value:"",children:"S\xe9lectionner une unit\xe9 (optionnel)"}),x().length>0?x().map(e=>(0,Lx.jsxs)("option",{value:e.id,children:[e.name," - ",e.surface,"m\xb2 - ",e.price.toLocaleString(),"\u20ac"]},e.id)):(0,Lx.jsx)("option",{disabled:!0,children:"Aucune unit\xe9 disponible"})]}):(0,Lx.jsx)("div",{className:"field-value",children:i.unitId?(e=>{const t=u.find(t=>t.id===e);return t?"".concat(t.name," - ").concat(t.surface,"m\xb2 - ").concat(t.price.toLocaleString(),"\u20ac"):"Unit\xe9 introuvable"})(i.unitId):"Aucune unit\xe9 s\xe9lectionn\xe9e"})]}),(0,Lx.jsxs)("div",{className:"event-field",children:[(0,Lx.jsxs)("div",{className:"field-label",children:[(0,Lx.jsx)(BK,{size:16}),(0,Lx.jsx)("span",{children:"Co\xfbt"})]}),d?(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsx)("input",{type:"number",step:"0.01",value:p.cost,onChange:e=>m(t=>Me(Me({},t),{},{cost:e.target.value})),className:"edit-input ".concat(v.cost?"error":""),placeholder:"Co\xfbt en \u20ac"}),v.cost&&(0,Lx.jsx)("div",{className:"error-message",children:v.cost})]}):(0,Lx.jsx)("div",{className:"field-value",children:i.cost?"".concat(i.cost," \u20ac"):"Non sp\xe9cifi\xe9"})]}),(0,Lx.jsxs)("div",{className:"event-field half-width",children:[(0,Lx.jsxs)("div",{className:"field-label",children:[(0,Lx.jsx)(GK,{size:16}),(0,Lx.jsx)("span",{children:"Description"})]}),d?(0,Lx.jsx)("textarea",{value:p.description,onChange:e=>m(t=>Me(Me({},t),{},{description:e.target.value})),className:"edit-textarea",placeholder:"Description de l'\xe9v\xe9nement",rows:3}):(0,Lx.jsx)("div",{className:"field-value",children:i.description||"Aucune description"})]}),(0,Lx.jsxs)("div",{className:"event-field half-width",children:[(0,Lx.jsxs)("div",{className:"field-label",children:[(0,Lx.jsx)(bG,{size:16}),(0,Lx.jsx)("span",{children:"Informations compl\xe9mentaires"})]}),d?(0,Lx.jsx)("textarea",{value:p.additionalInfo,onChange:e=>m(t=>Me(Me({},t),{},{additionalInfo:e.target.value})),className:"edit-textarea",placeholder:"Informations compl\xe9mentaires",rows:3}):(0,Lx.jsx)("div",{className:"field-value",children:i.additionalInfo||"Aucune information compl\xe9mentaire"})]}),(0,Lx.jsxs)("div",{className:"event-field",children:[(0,Lx.jsxs)("div",{className:"field-label",children:[(0,Lx.jsx)("div",{style:{width:"16px",height:"16px",backgroundColor:i.color||"#007bff",borderRadius:"3px"}}),(0,Lx.jsx)("span",{children:"Couleur"})]}),d?(0,Lx.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[(0,Lx.jsx)("input",{type:"color",value:p.color,onChange:e=>m(t=>Me(Me({},t),{},{color:e.target.value})),style:{width:"40px",height:"40px",border:"none",borderRadius:"6px",cursor:"pointer"}}),(0,Lx.jsx)("div",{style:{display:"flex",gap:"4px"},children:["#007bff","#28a745","#dc3545","#ffc107","#6f42c1","#fd7e14"].map(e=>(0,Lx.jsx)("button",{type:"button",onClick:()=>m(t=>Me(Me({},t),{},{color:e})),style:{width:"24px",height:"24px",backgroundColor:e,border:p.color===e?"2px solid #000":"1px solid #ddd",borderRadius:"4px",cursor:"pointer"},title:e},e))})]}):(0,Lx.jsxs)("div",{className:"field-value",style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Lx.jsx)("div",{style:{width:"20px",height:"20px",backgroundColor:i.color||"#007bff",borderRadius:"4px"}}),i.color||"#007bff"]})]})]}),(0,Lx.jsxs)("div",{className:"event-images-section",children:[(0,Lx.jsxs)("div",{className:"images-header",children:[(0,Lx.jsxs)("div",{className:"field-label",children:[(0,Lx.jsx)(jG,{size:16}),(0,Lx.jsxs)("span",{children:["Images (",(null===(t=i.images)||void 0===t?void 0:t.length)||0,"/3)"]})]}),d&&p.images.length<3&&(0,Lx.jsxs)("label",{className:"add-image-btn",children:[(0,Lx.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=e.target.files;if(!t)return;const n=3-p.images.length;if(n<=0)return;const r=Array.from(t).slice(0,n),i=[];let a=0;r.forEach(e=>{if(e.size>5242880)return void y(e=>Me(Me({},e),{},{images:"Les images doivent faire moins de 5MB"}));const t=new FileReader;t.onload=e=>{var t;null!==(t=e.target)&&void 0!==t&&t.result&&(i.push(e.target.result),a++,a===r.length&&(m(e=>Me(Me({},e),{},{images:[...e.images,...i]})),y(e=>Me(Me({},e),{},{images:""}))))},t.readAsDataURL(e)})},style:{display:"none"}}),"+ Ajouter"]})]}),(0,Lx.jsxs)("div",{className:"images-container",children:[(d?p.images:i.images||[]).map((e,t)=>(0,Lx.jsxs)("div",{className:"image-item",children:[(0,Lx.jsx)("img",{src:e,alt:"Image ".concat(t+1),className:"event-image"}),d&&(0,Lx.jsx)("button",{type:"button",onClick:()=>(e=>{m(t=>Me(Me({},t),{},{images:t.images.filter((t,n)=>n!==e)}))})(t),className:"remove-image-btn",children:"\xd7"})]},t)),(!i.images||0===i.images.length)&&!d&&(0,Lx.jsx)("div",{className:"no-images",children:"Aucune image"})]})]})]})}),(0,Lx.jsx)("div",{className:"event-modal-actions",children:d?(0,Lx.jsxs)(Lx.Fragment,{children:[v.general&&(0,Lx.jsx)("div",{className:"error-message general-error",children:v.general}),(0,Lx.jsx)("button",{className:"btn-cancel",onClick:()=>{var e;i&&m({title:i.title||"",time:i.time||"",startTime:i.startTime||"",endTime:i.endTime||"",description:i.description||"",color:i.color||"#007bff",category:i.category||"",projectId:i.projectId||"",unitId:i.unitId||"",location:i.location||"",additionalInfo:i.additionalInfo||"",cost:(null===(e=i.cost)||void 0===e?void 0:e.toString())||"",images:i.images||[]});h(!1),y({})},disabled:f,children:"Annuler"}),(0,Lx.jsxs)("button",{className:"btn-save",onClick:async()=>{if((()=>{const e={};return p.title.trim()||(e.title="Le titre est obligatoire"),p.cost&&isNaN(parseFloat(p.cost))&&(e.cost="Le co\xfbt doit \xeatre un nombre valide"),y(e),0===Object.keys(e).length})()){g(!0);try{const e={title:p.title.trim(),color:p.color};p.time&&p.time.trim()&&(e.time=p.time.trim()),p.startTime&&p.startTime.trim()&&(e.startTime=p.startTime.trim()),p.endTime&&p.endTime.trim()&&(e.endTime=p.endTime.trim()),p.description&&p.description.trim()&&(e.description=p.description.trim()),p.category&&p.category.trim()&&(e.category=p.category.trim()),p.projectId&&p.projectId.trim()&&(e.projectId=p.projectId.trim()),p.unitId&&p.unitId.trim()&&(e.unitId=p.unitId.trim()),p.location&&p.location.trim()&&(e.location=p.location.trim()),p.additionalInfo&&p.additionalInfo.trim()&&(e.additionalInfo=p.additionalInfo.trim()),p.cost&&p.cost.trim()&&!isNaN(parseFloat(p.cost))&&(e.cost=parseFloat(p.cost)),p.images&&p.images.length>0&&(e.images=p.images),await s(i.id,e),h(!1)}catch(e){console.error("Erreur lors de la sauvegarde:",e),y({general:"Erreur lors de la sauvegarde. Veuillez r\xe9essayer."})}finally{g(!1)}}},disabled:f,children:[(0,Lx.jsx)($K,{size:16}),f?"Sauvegarde...":"Sauvegarder"]})]}):(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsxs)("button",{className:"btn-delete",onClick:()=>{window.confirm("\xcates-vous s\xfbr de vouloir supprimer cet \xe9v\xe9nement ?")&&(o(i.id),a())},children:[(0,Lx.jsx)(eG,{size:16}),"Supprimer"]}),(0,Lx.jsxs)("button",{className:"btn-edit",onClick:()=>{h(!0),y({})},children:[(0,Lx.jsx)(ZK,{size:16}),"Modifier"]})]})})]})});var b}const TG=e=>{let{events:t}=e;const n=(()=>{const e=new Date,n=new Date(e);n.setDate(e.getDate()-e.getDay()),n.setHours(0,0,0,0);const r=new Date(n);r.setDate(n.getDate()+6),r.setHours(23,59,59,999);const i=t.filter(e=>{const t=new Date(e.date);return t>=n&&t<=r}),a=Array(7).fill(0);console.log("WeeklyChart - Events for this week:",i.length),i.forEach(e=>{const t=new Date(e.date).getDay();let n=1;if(console.log("Event: ".concat(e.title,", Date: ").concat(e.date,", StartTime: ").concat(e.startTime,", EndTime: ").concat(e.endTime)),e.startTime&&e.endTime){const[t,r]=e.startTime.split(":").map(Number),[i,a]=e.endTime.split(":").map(Number),s=60*t+r,o=60*i+a;o>s&&(n=(o-s)/60,console.log("Calculated duration from times: ".concat(n,"h (").concat(s,"min to ").concat(o,"min)")))}else e.duration?(n=e.duration,console.log("Using existing duration: ".concat(n,"h"))):e.time&&console.log("Using default duration: ".concat(n,"h for time: ").concat(e.time));a[t]+=n,console.log("Day ".concat(t," (").concat(["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"][t],") total hours: ").concat(a[t],"h"))});const s=a.map(e=>Math.min(e/8*100,100)),o=a.reduce((e,t)=>e+t,0),l=o/56*100;return{dailyHours:a,percentages:s,dayNames:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],weeklyPercentage:Math.min(l,100),totalHours:o}})();return(0,Lx.jsxs)("div",{className:"weekly-chart",children:[(0,Lx.jsxs)("div",{className:"chart-header",children:[(0,Lx.jsx)("h3",{children:"Occupation hebdomadaire"}),(0,Lx.jsxs)("div",{className:"weekly-stats",children:[(0,Lx.jsxs)("span",{className:"total-percentage",children:[n.weeklyPercentage.toFixed(1),"%"]}),(0,Lx.jsxs)("span",{className:"total-hours",children:[n.totalHours,"h / 56h"]})]})]}),(0,Lx.jsx)("div",{className:"chart-container",children:(0,Lx.jsx)("div",{className:"chart-bars",children:n.dayNames.map((e,t)=>(0,Lx.jsxs)("div",{className:"day-bar",children:[(0,Lx.jsx)("div",{className:"bar-container",children:(0,Lx.jsx)("div",{className:"bar-fill",style:{height:"".concat(n.percentages[t],"%"),backgroundColor:n.percentages[t]>80?"#dc3545":n.percentages[t]>60?"#ffc107":"#28a745"}})}),(0,Lx.jsx)("div",{className:"day-label",children:e}),(0,Lx.jsxs)("div",{className:"hours-label",children:[n.dailyHours[t],"h"]})]},e))})}),(0,Lx.jsxs)("div",{className:"chart-legend",children:[(0,Lx.jsxs)("div",{className:"legend-item",children:[(0,Lx.jsx)("div",{className:"legend-color",style:{backgroundColor:"#28a745"}}),(0,Lx.jsx)("span",{children:"Optimal (<60%)"})]}),(0,Lx.jsxs)("div",{className:"legend-item",children:[(0,Lx.jsx)("div",{className:"legend-color",style:{backgroundColor:"#ffc107"}}),(0,Lx.jsx)("span",{children:"Charg\xe9 (60-80%)"})]}),(0,Lx.jsxs)("div",{className:"legend-item",children:[(0,Lx.jsx)("div",{className:"legend-color",style:{backgroundColor:"#dc3545"}}),(0,Lx.jsx)("span",{children:"Surcharg\xe9 (>80%)"})]})]})]})};function _G(){const{user:e}=Sx(),{projects:t}=Fx(),{units:n}=Ux(),{events:i,loading:a,error:s,addEvent:o,updateEvent:l,deleteEvent:c}=Tx(),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[m,f]=(0,r.useState)(""),[g,v]=(0,r.useState)(null),y=e?i:[],x=e=>{if(e.id&&i.find(t=>t.id===e.id)){const t=i.find(t=>t.id===e.id);if(t&&(t.startTime!==e.startTime||t.endTime!==e.endTime||t.time!==e.time))return void b(e.id,{startTime:e.startTime,endTime:e.endTime,time:e.time})}v(e),p(!0)},b=async(t,n)=>{if(e)try{console.log("Calendar - Updating event:",t,"with updates:",n),await l(t,n);const e=i.find(e=>e.id===t);e&&v(Me(Me({},e),n)),console.log("Calendar - Event updated successfully")}catch(s){console.error("Erreur lors de la modification de l'\xe9v\xe9nement:",s),alert("Erreur lors de la sauvegarde des modifications")}else alert("Veuillez vous connecter pour modifier des \xe9v\xe9nements")},j=y.filter(e=>{const t=new Date(e.date+"T00:00:00"),n=new Date;return n.setHours(0,0,0,0),t>=n}).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()).slice(0,8);return(0,Lx.jsxs)("div",{className:"page-container",children:[(0,Lx.jsx)("h1",{className:"page-title",children:"Calendrier"}),a&&e&&(0,Lx.jsx)("div",{style:{textAlign:"center",padding:"20px"},children:"Chargement des \xe9v\xe9nements..."}),s&&(0,Lx.jsxs)("div",{style:{background:"#f8d7da",color:"#721c24",padding:"12px",borderRadius:"6px",marginBottom:"20px"},children:["Erreur: ",s]}),(0,Lx.jsxs)("div",{className:"calendar-layout",children:[(0,Lx.jsx)("div",{className:"calendar-main",children:(0,Lx.jsx)(xG,{events:y,onAddEvent:e?(t,n)=>{e?(f(t),n&&localStorage.setItem("selectedTime",n),d(!0)):alert("Veuillez vous connecter pour ajouter des \xe9v\xe9nements")}:void 0,onEventClick:e?x:void 0})}),(0,Lx.jsxs)("div",{className:"calendar-sidebar",children:[(0,Lx.jsxs)("div",{className:"upcoming-events-card",children:[(0,Lx.jsx)("h3",{children:"\xc9v\xe9nements \xe0 venir"}),(0,Lx.jsx)("div",{className:"upcoming-events-list",children:0===j.length?(0,Lx.jsx)("div",{className:"no-events",children:e?"Aucun \xe9v\xe9nement programm\xe9":"Connectez-vous pour acc\xe9der au calendrier"}):j.map(e=>{var r,i;return(0,Lx.jsxs)("div",{className:"upcoming-event",onClick:()=>x(e),children:[(0,Lx.jsx)("div",{className:"event-indicator-dot",style:{backgroundColor:e.color||"#007bff"}}),(0,Lx.jsxs)("div",{className:"event-details",children:[(0,Lx.jsx)("div",{className:"event-title",children:e.title}),(0,Lx.jsxs)("div",{className:"event-date",children:[new Date(e.date).toLocaleDateString("fr-FR"),e.time&&" \xe0 ".concat(e.time)]}),e.projectId&&(0,Lx.jsxs)("div",{className:"event-project",children:["\ud83c\udfe2 ",(null===(r=t.find(t=>t.id===e.projectId))||void 0===r?void 0:r.name)||"Projet",e.unitId&&" - ".concat((null===(i=n.find(t=>t.id===e.unitId))||void 0===i?void 0:i.name)||"Unit\xe9")]})]})]},e.id)})})]}),(0,Lx.jsx)(TG,{events:y})]})]}),(0,Lx.jsx)(CG,{isOpen:u,onClose:()=>d(!1),onSave:async t=>{if(e)try{await o(t)}catch(s){console.error("Erreur lors de l'ajout de l'\xe9v\xe9nement:",s)}else alert("Veuillez vous connecter pour ajouter des \xe9v\xe9nements")},selectedDate:m}),(0,Lx.jsx)(EG,{isOpen:h,event:g,onClose:()=>{p(!1),v(null)},onUpdate:b,onDelete:async t=>{if(e)try{await c(t)}catch(s){console.error("Erreur lors de la suppression de l'\xe9v\xe9nement:",s)}else alert("Veuillez vous connecter pour supprimer des \xe9v\xe9nements")}})]})}const AG=Px("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),IG=Px("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),PG=Px("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),OG=Px("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]),DG=Px("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),MG=Px("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),RG=Px("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),LG=Px("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function zG(e){let{isOpen:t,onClose:n,onSave:i,onUpdate:a,campaign:s,mode:o}=e;const[l,c]=(0,r.useState)({name:"",platform:"Facebook Ads",budget:0,spent:0,impressions:0,clicks:0,conversions:0,roi:0,startDate:"",endDate:"",status:"active"}),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)({});(0,r.useEffect)(()=>{c(s&&"edit"===o?{name:s.name,platform:s.platform,budget:s.budget,spent:s.spent,impressions:s.impressions,clicks:s.clicks,conversions:s.conversions,roi:s.roi,startDate:s.startDate,endDate:s.endDate,status:s.status}:{name:"",platform:"Facebook Ads",budget:0,spent:0,impressions:0,clicks:0,conversions:0,roi:0,startDate:(new Date).toISOString().split("T")[0],endDate:"",status:"active"}),p({})},[s,o,t]);const m=(e,t)=>{c(n=>Me(Me({},n),{},{[e]:t})),h[e]&&p(t=>Me(Me({},t),{},{[e]:""}))};return t?(0,Lx.jsx)("div",{className:"campaign-modal-overlay",children:(0,Lx.jsxs)("div",{className:"campaign-modal",children:[(0,Lx.jsxs)("div",{className:"campaign-modal-header",children:[(0,Lx.jsx)("h2",{children:"create"===o?"Nouvelle Campagne":"Modifier la Campagne"}),(0,Lx.jsx)("button",{className:"modal-close-btn",onClick:n,children:(0,Lx.jsx)(HK,{size:20})})]}),(0,Lx.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return l.name.trim()||(e.name="Le nom de la campagne est requis"),l.budget<=0&&(e.budget="Le budget doit \xeatre sup\xe9rieur \xe0 0"),l.spent<0&&(e.spent="Le montant d\xe9pens\xe9 ne peut pas \xeatre n\xe9gatif"),l.spent>l.budget&&(e.spent="Le montant d\xe9pens\xe9 ne peut pas d\xe9passer le budget"),l.startDate||(e.startDate="La date de d\xe9but est requise"),l.endDate&&l.startDate&&l.endDate<l.startDate&&(e.endDate="La date de fin doit \xeatre apr\xe8s la date de d\xe9but"),p(e),0===Object.keys(e).length})()){d(!0);try{"create"===o?await i(l):"edit"===o&&s&&a&&await a(s.id,l),n()}catch(t){console.error("Erreur lors de la sauvegarde:",t)}finally{d(!1)}}},className:"campaign-modal-form",children:[(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsx)("h3",{children:"Informations g\xe9n\xe9rales"}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"name",children:"Nom de la campagne *"}),(0,Lx.jsx)("input",{id:"name",type:"text",value:l.name,onChange:e=>m("name",e.target.value),className:h.name?"error":"",placeholder:"Ex: Campagne Appartements Centre-ville"}),h.name&&(0,Lx.jsx)("span",{className:"error-message",children:h.name})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"platform",children:"Plateforme *"}),(0,Lx.jsxs)("select",{id:"platform",value:l.platform,onChange:e=>m("platform",e.target.value),children:[(0,Lx.jsx)("option",{value:"Facebook Ads",children:"Facebook Ads"}),(0,Lx.jsx)("option",{value:"Google Ads",children:"Google Ads"}),(0,Lx.jsx)("option",{value:"Instagram",children:"Instagram"}),(0,Lx.jsx)("option",{value:"LinkedIn",children:"LinkedIn"}),(0,Lx.jsx)("option",{value:"Twitter Ads",children:"Twitter Ads"}),(0,Lx.jsx)("option",{value:"TikTok Ads",children:"TikTok Ads"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"status",children:"Statut"}),(0,Lx.jsxs)("select",{id:"status",value:l.status,onChange:e=>m("status",e.target.value),children:[(0,Lx.jsx)("option",{value:"active",children:"Actif"}),(0,Lx.jsx)("option",{value:"paused",children:"En pause"}),(0,Lx.jsx)("option",{value:"completed",children:"Termin\xe9"})]})]})]}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsx)("h3",{children:"Budget et planification"}),(0,Lx.jsxs)("div",{className:"form-row",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"budget",children:"Budget total (\u20ac) *"}),(0,Lx.jsxs)("div",{className:"input-with-icon",children:[(0,Lx.jsx)(BK,{size:18}),(0,Lx.jsx)("input",{id:"budget",type:"number",min:"0",step:"0.01",value:l.budget,onChange:e=>m("budget",parseFloat(e.target.value)||0),className:h.budget?"error":""})]}),h.budget&&(0,Lx.jsx)("span",{className:"error-message",children:h.budget})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"spent",children:"Montant d\xe9pens\xe9 (\u20ac)"}),(0,Lx.jsxs)("div",{className:"input-with-icon",children:[(0,Lx.jsx)(BK,{size:18}),(0,Lx.jsx)("input",{id:"spent",type:"number",min:"0",step:"0.01",value:l.spent,onChange:e=>m("spent",parseFloat(e.target.value)||0),className:h.spent?"error":""})]}),h.spent&&(0,Lx.jsx)("span",{className:"error-message",children:h.spent})]})]}),(0,Lx.jsxs)("div",{className:"form-row",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"startDate",children:"Date de d\xe9but *"}),(0,Lx.jsxs)("div",{className:"input-with-icon",children:[(0,Lx.jsx)(Mx,{size:18}),(0,Lx.jsx)("input",{id:"startDate",type:"date",value:l.startDate,onChange:e=>m("startDate",e.target.value),className:h.startDate?"error":""})]}),h.startDate&&(0,Lx.jsx)("span",{className:"error-message",children:h.startDate})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"endDate",children:"Date de fin"}),(0,Lx.jsxs)("div",{className:"input-with-icon",children:[(0,Lx.jsx)(Mx,{size:18}),(0,Lx.jsx)("input",{id:"endDate",type:"date",value:l.endDate,onChange:e=>m("endDate",e.target.value),className:h.endDate?"error":""})]}),h.endDate&&(0,Lx.jsx)("span",{className:"error-message",children:h.endDate})]})]})]}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsx)("h3",{children:"M\xe9triques de performance"}),(0,Lx.jsxs)("div",{className:"form-row",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"impressions",children:"Impressions"}),(0,Lx.jsxs)("div",{className:"input-with-icon",children:[(0,Lx.jsx)(Dx,{size:18}),(0,Lx.jsx)("input",{id:"impressions",type:"number",min:"0",value:l.impressions,onChange:e=>m("impressions",parseInt(e.target.value)||0)})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"clicks",children:"Clics"}),(0,Lx.jsxs)("div",{className:"input-with-icon",children:[(0,Lx.jsx)(Dx,{size:18}),(0,Lx.jsx)("input",{id:"clicks",type:"number",min:"0",value:l.clicks,onChange:e=>m("clicks",parseInt(e.target.value)||0)})]})]})]}),(0,Lx.jsxs)("div",{className:"form-row",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"conversions",children:"Conversions"}),(0,Lx.jsxs)("div",{className:"input-with-icon",children:[(0,Lx.jsx)(Dx,{size:18}),(0,Lx.jsx)("input",{id:"conversions",type:"number",min:"0",value:l.conversions,onChange:e=>m("conversions",parseInt(e.target.value)||0)})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"roi",children:"ROI"}),(0,Lx.jsxs)("div",{className:"input-with-icon",children:[(0,Lx.jsx)(Yx,{size:18}),(0,Lx.jsx)("input",{id:"roi",type:"number",min:"0",step:"0.1",value:l.roi,onChange:e=>m("roi",parseFloat(e.target.value)||0)})]})]})]})]})]}),(0,Lx.jsxs)("div",{className:"campaign-modal-actions",children:[(0,Lx.jsx)("button",{type:"button",className:"btn-cancel",onClick:n,children:"Annuler"}),(0,Lx.jsxs)("button",{type:"submit",className:"btn-save",disabled:u,children:[(0,Lx.jsx)($K,{size:18}),u?"Sauvegarde...":"create"===o?"Cr\xe9er":"Modifier"]})]})]})]})}):null}function FG(){const{campaigns:e,loading:t,error:n,addCampaign:i,updateCampaign:a,deleteCampaign:s,pauseCampaign:o,resumeCampaign:l,completeCampaign:c}=function(){const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[a,s]=(0,r.useState)(null),{user:o}=Sx();(0,r.useEffect)(()=>{if(!o)return t([]),void i(!1);const e=Zh(Ah(Fd(kx,"campaigns"),Ph("userId","==",o.uid),Mh("createdAt","desc")),e=>{const n=e.docs.map(e=>Me({id:e.id},e.data()));t(n),i(!1),s(null)},e=>{console.error("Error fetching campaigns:",e),s("Erreur lors du chargement des campagnes"),i(!1)});return()=>e()},[o]);const l=async(e,t)=>{if(!o)throw new Error("Utilisateur non connect\xe9");try{const n=Ud(kx,"campaigns",e);await Xh(n,Me(Me({},t),{},{updatedAt:ri.now()})),console.log("Campagne mise \xe0 jour:",e)}catch(a){throw console.error("Erreur lors de la mise \xe0 jour de la campagne:",a),a}};return{campaigns:e,loading:n,error:a,addCampaign:async e=>{if(!o)throw new Error("Utilisateur non connect\xe9");try{const t=await $h(Fd(kx,"campaigns"),Me(Me({},e),{},{userId:o.uid,createdAt:ri.now(),updatedAt:ri.now()}));return console.log("Campagne ajout\xe9e avec ID:",t.id),t.id}catch(a){throw console.error("Erreur lors de l'ajout de la campagne:",a),a}},updateCampaign:l,deleteCampaign:async e=>{if(!o)throw new Error("Utilisateur non connect\xe9");try{await Jh(Ud(kx,"campaigns",e)),console.log("Campagne supprim\xe9e:",e)}catch(a){throw console.error("Erreur lors de la suppression de la campagne:",a),a}},updateCampaignMetrics:async(e,t)=>{if(!o)throw new Error("Utilisateur non connect\xe9");try{const n=Ud(kx,"campaigns",e);await Xh(n,Me(Me({},t),{},{updatedAt:ri.now()})),console.log("M\xe9triques de campagne mises \xe0 jour:",e)}catch(a){throw console.error("Erreur lors de la mise \xe0 jour des m\xe9triques:",a),a}},pauseCampaign:async e=>{await l(e,{status:"paused"})},resumeCampaign:async e=>{await l(e,{status:"active"})},completeCampaign:async e=>{await l(e,{status:"completed"})}}}(),[u,d]=(0,r.useState)("all"),[h,p]=(0,r.useState)("all"),[m,f]=(0,r.useState)("30"),[g,v]=(0,r.useState)(!1),[y,x]=(0,r.useState)("create"),[b,j]=(0,r.useState)(null),[w,N]=(0,r.useState)(null),k=()=>{x("create"),j(null),v(!0)},C=async(e,t)=>{N(e.id);try{switch(t){case"active":await l(e.id);break;case"paused":await o(e.id);break;case"completed":await c(e.id)}}catch(n){console.error("Erreur lors du changement de statut:",n),alert("Erreur lors du changement de statut")}finally{N(null)}},S=e.filter(e=>{const t="all"===u||e.platform===u,n="all"===h||e.status===h;return t&&n}),E=S.reduce((e,t)=>({budget:e.budget+t.budget,spent:e.spent+t.spent,impressions:e.impressions+t.impressions,clicks:e.clicks+t.clicks,conversions:e.conversions+t.conversions}),{budget:0,spent:0,impressions:0,clicks:0,conversions:0}),T=S.length>0?S.reduce((e,t)=>e+t.roi,0)/S.length:0,_=(e,t)=>t>0?(e/t*100).toFixed(2):"0.00",A=e=>{switch(e){case"active":return"#10B981";case"paused":return"#F59E0B";default:return"#6B7280"}},I=e=>{switch(e){case"Facebook Ads":return"\ud83d\udcd8";case"Google Ads":return"\ud83d\udd0d";case"Instagram":return"\ud83d\udcf7";case"LinkedIn":return"\ud83d\udcbc";default:return"\ud83d\udcca"}};return t?(0,Lx.jsxs)("div",{className:"campaigns-loading",children:[(0,Lx.jsx)(AG,{className:"loading-spinner"}),(0,Lx.jsx)("p",{children:"Chargement des performances..."})]}):n?(0,Lx.jsxs)("div",{className:"campaigns-container",children:[(0,Lx.jsxs)("div",{className:"campaigns-header",children:[(0,Lx.jsxs)("div",{className:"campaigns-title",children:[(0,Lx.jsx)(Yx,{size:32}),(0,Lx.jsx)("h1",{children:"Performance des Campagnes"})]}),(0,Lx.jsx)("div",{className:"campaigns-actions",children:(0,Lx.jsxs)("button",{className:"btn-create",onClick:k,children:[(0,Lx.jsx)(Hx,{size:18}),"Nouvelle Campagne"]})})]}),(0,Lx.jsx)("div",{className:"error-message-container",children:(0,Lx.jsxs)("div",{className:"error-message",children:[(0,Lx.jsx)("h3",{children:"\u26a0\ufe0f Configuration Firebase requise"}),(0,Lx.jsx)("p",{children:"Les r\xe8gles Firebase pour les campagnes ne sont pas encore d\xe9ploy\xe9es."}),(0,Lx.jsxs)("div",{className:"solution-options",children:[(0,Lx.jsxs)("div",{className:"solution-option",children:[(0,Lx.jsx)("h4",{children:"\xc9tape 1 : Cr\xe9er l'index Firebase requis"}),(0,Lx.jsx)("p",{children:"Cliquez sur ce lien pour cr\xe9er automatiquement l'index :"}),(0,Lx.jsx)("a",{href:"https://console.firebase.google.com/v1/r/project/immo-app-48914/firestore/indexes?create_composite=ClBwcm9qZWN0cy9pbW1vLWFwcC00ODkxNC9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvY2FtcGFpZ25zL2luZGV4ZXMvXxABGgoKBnVzZXJJZBABGg0KCWNyZWF0ZWRBdBACGgwKCF9fbmFtZV9fEAI",target:"_blank",className:"index-link",children:"\ud83d\udd17 Cr\xe9er l'index Firebase automatiquement"}),(0,Lx.jsx)("p",{children:(0,Lx.jsx)("small",{children:"Attendez que l'index soit cr\xe9\xe9 (quelques minutes) avant de passer \xe0 l'\xe9tape 2."})})]}),(0,Lx.jsxs)("div",{className:"solution-option",children:[(0,Lx.jsx)("h4",{children:"\xc9tape 2 : D\xe9ployer les r\xe8gles Firebase (M\xe9thode simplifi\xe9e)"}),(0,Lx.jsxs)("p",{children:["Allez sur ",(0,Lx.jsx)("a",{href:"https://console.firebase.google.com/project/immo-app-48914/firestore/rules",target:"_blank",className:"index-link",children:"\ud83d\udd17 Firebase Console - R\xe8gles"})]}),(0,Lx.jsxs)("ol",{children:[(0,Lx.jsxs)("li",{children:["Dans l'\xe9diteur de r\xe8gles, ajoutez ce code ",(0,Lx.jsx)("strong",{children:"avant la derni\xe8re accolade"})," :"]}),(0,Lx.jsx)("pre",{children:(0,Lx.jsx)("code",{children:"    // R\xe8gles pour la collection campaigns\n    match /campaigns/{document} {\n      allow read, write: if request.auth != null && \n        request.auth.uid == resource.data.userId;\n      allow create: if request.auth != null && \n        request.auth.uid == request.resource.data.userId;\n    }"})}),(0,Lx.jsxs)("li",{children:["Cliquez sur ",(0,Lx.jsx)("strong",{children:'"Publier"'})]}),(0,Lx.jsx)("li",{children:"Attendez la confirmation de d\xe9ploiement"})]})]})]}),(0,Lx.jsxs)("button",{className:"btn-refresh",onClick:()=>window.location.reload(),children:[(0,Lx.jsx)(AG,{size:18}),"Actualiser apr\xe8s configuration"]})]})})]}):(0,Lx.jsxs)("div",{className:"campaigns-container",children:[(0,Lx.jsxs)("div",{className:"campaigns-header",children:[(0,Lx.jsxs)("div",{className:"campaigns-title",children:[(0,Lx.jsx)(Yx,{size:32}),(0,Lx.jsx)("h1",{children:"Performance des Campagnes"})]}),(0,Lx.jsxs)("div",{className:"campaigns-actions",children:[(0,Lx.jsxs)("button",{className:"btn-create",onClick:k,children:[(0,Lx.jsx)(Hx,{size:18}),"Nouvelle Campagne"]}),(0,Lx.jsxs)("button",{className:"btn-export",onClick:()=>{const e=[["Nom","Plateforme","Budget","D\xe9pens\xe9","Impressions","Clics","Conversions","ROI","Statut"].join(","),...S.map(e=>[e.name,e.platform,e.budget,e.spent,e.impressions,e.clicks,e.conversions,e.roi,e.status].join(","))].join("\n"),t=new Blob([e],{type:"text/csv"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="campagnes_".concat((new Date).toISOString().split("T")[0],".csv"),r.click(),window.URL.revokeObjectURL(n)},children:[(0,Lx.jsx)(IG,{size:18}),"Exporter"]}),(0,Lx.jsxs)("button",{className:"btn-refresh",onClick:()=>window.location.reload(),children:[(0,Lx.jsx)(AG,{size:18}),"Actualiser"]})]})]}),(0,Lx.jsxs)("div",{className:"campaigns-filters",children:[(0,Lx.jsxs)("div",{className:"filter-group",children:[(0,Lx.jsx)("label",{children:"Plateforme:"}),(0,Lx.jsxs)("select",{value:u,onChange:e=>d(e.target.value),children:[(0,Lx.jsx)("option",{value:"all",children:"Toutes les plateformes"}),(0,Lx.jsx)("option",{value:"Facebook Ads",children:"Facebook Ads"}),(0,Lx.jsx)("option",{value:"Google Ads",children:"Google Ads"}),(0,Lx.jsx)("option",{value:"Instagram",children:"Instagram"}),(0,Lx.jsx)("option",{value:"LinkedIn",children:"LinkedIn"})]})]}),(0,Lx.jsxs)("div",{className:"filter-group",children:[(0,Lx.jsx)("label",{children:"Statut:"}),(0,Lx.jsxs)("select",{value:h,onChange:e=>p(e.target.value),children:[(0,Lx.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,Lx.jsx)("option",{value:"active",children:"Actif"}),(0,Lx.jsx)("option",{value:"paused",children:"En pause"}),(0,Lx.jsx)("option",{value:"completed",children:"Termin\xe9"})]})]}),(0,Lx.jsxs)("div",{className:"filter-group",children:[(0,Lx.jsx)("label",{children:"P\xe9riode:"}),(0,Lx.jsxs)("select",{value:m,onChange:e=>f(e.target.value),children:[(0,Lx.jsx)("option",{value:"7",children:"7 derniers jours"}),(0,Lx.jsx)("option",{value:"30",children:"30 derniers jours"}),(0,Lx.jsx)("option",{value:"90",children:"90 derniers jours"}),(0,Lx.jsx)("option",{value:"365",children:"Ann\xe9e compl\xe8te"})]})]})]}),(0,Lx.jsxs)("div",{className:"campaigns-metrics",children:[(0,Lx.jsxs)("div",{className:"metric-card",children:[(0,Lx.jsx)("div",{className:"metric-icon budget",children:(0,Lx.jsx)(BK,{size:24})}),(0,Lx.jsxs)("div",{className:"metric-content",children:[(0,Lx.jsx)("h3",{children:"Budget Total"}),(0,Lx.jsxs)("p",{className:"metric-value",children:[E.budget,"\u20ac"]}),(0,Lx.jsxs)("span",{className:"metric-subtitle",children:["D\xe9pens\xe9: ",E.spent,"\u20ac"]})]})]}),(0,Lx.jsxs)("div",{className:"metric-card",children:[(0,Lx.jsx)("div",{className:"metric-icon impressions",children:(0,Lx.jsx)(PG,{size:24})}),(0,Lx.jsxs)("div",{className:"metric-content",children:[(0,Lx.jsx)("h3",{children:"Impressions"}),(0,Lx.jsx)("p",{className:"metric-value",children:E.impressions.toLocaleString()}),(0,Lx.jsx)("span",{className:"metric-subtitle",children:"Port\xe9e totale"})]})]}),(0,Lx.jsxs)("div",{className:"metric-card",children:[(0,Lx.jsx)("div",{className:"metric-icon clicks",children:(0,Lx.jsx)(OG,{size:24})}),(0,Lx.jsxs)("div",{className:"metric-content",children:[(0,Lx.jsx)("h3",{children:"Clics"}),(0,Lx.jsx)("p",{className:"metric-value",children:E.clicks.toLocaleString()}),(0,Lx.jsxs)("span",{className:"metric-subtitle",children:["CTR: ",_(E.clicks,E.impressions),"%"]})]})]}),(0,Lx.jsxs)("div",{className:"metric-card",children:[(0,Lx.jsx)("div",{className:"metric-icon conversions",children:(0,Lx.jsx)(Dx,{size:24})}),(0,Lx.jsxs)("div",{className:"metric-content",children:[(0,Lx.jsx)("h3",{children:"Conversions"}),(0,Lx.jsx)("p",{className:"metric-value",children:E.conversions}),(0,Lx.jsxs)("span",{className:"metric-subtitle",children:["Taux: ",(P=E.conversions,O=E.clicks,O>0?(P/O*100).toFixed(2):"0.00"),"%"]})]})]}),(0,Lx.jsxs)("div",{className:"metric-card",children:[(0,Lx.jsx)("div",{className:"metric-icon roi",children:(0,Lx.jsx)(Yx,{size:24})}),(0,Lx.jsxs)("div",{className:"metric-content",children:[(0,Lx.jsx)("h3",{children:"ROI Moyen"}),(0,Lx.jsxs)("p",{className:"metric-value",children:[T.toFixed(1),"x"]}),(0,Lx.jsx)("span",{className:"metric-subtitle",children:"Retour sur investissement"})]})]})]}),(0,Lx.jsxs)("div",{className:"campaigns-list",children:[(0,Lx.jsx)("h2",{children:"D\xe9tail des Campagnes"}),0===S.length?(0,Lx.jsx)("div",{className:"no-campaigns",children:(0,Lx.jsx)("p",{children:"Aucune campagne trouv\xe9e avec les filtres s\xe9lectionn\xe9s."})}):(0,Lx.jsx)("div",{className:"campaigns-table",children:S.map(e=>(0,Lx.jsxs)("div",{className:"campaign-card",children:[(0,Lx.jsxs)("div",{className:"campaign-header",children:[(0,Lx.jsxs)("div",{className:"campaign-platform",children:[(0,Lx.jsx)("span",{className:"platform-icon",children:I(e.platform)}),(0,Lx.jsxs)("div",{children:[(0,Lx.jsx)("h3",{children:e.name}),(0,Lx.jsx)("p",{children:e.platform})]})]}),(0,Lx.jsx)("div",{className:"campaign-status",children:(0,Lx.jsx)("span",{className:"status-badge",style:{backgroundColor:A(e.status)},children:"active"===e.status?"Actif":"paused"===e.status?"En pause":"Termin\xe9"})})]}),(0,Lx.jsxs)("div",{className:"campaign-metrics",children:[(0,Lx.jsxs)("div",{className:"campaign-metric",children:[(0,Lx.jsx)("span",{className:"metric-label",children:"Budget"}),(0,Lx.jsxs)("span",{className:"metric-value",children:[e.budget,"\u20ac"]})]}),(0,Lx.jsxs)("div",{className:"campaign-metric",children:[(0,Lx.jsx)("span",{className:"metric-label",children:"D\xe9pens\xe9"}),(0,Lx.jsxs)("span",{className:"metric-value",children:[e.spent,"\u20ac"]})]}),(0,Lx.jsxs)("div",{className:"campaign-metric",children:[(0,Lx.jsx)("span",{className:"metric-label",children:"Impressions"}),(0,Lx.jsx)("span",{className:"metric-value",children:e.impressions.toLocaleString()})]}),(0,Lx.jsxs)("div",{className:"campaign-metric",children:[(0,Lx.jsx)("span",{className:"metric-label",children:"Clics"}),(0,Lx.jsx)("span",{className:"metric-value",children:e.clicks})]}),(0,Lx.jsxs)("div",{className:"campaign-metric",children:[(0,Lx.jsx)("span",{className:"metric-label",children:"CTR"}),(0,Lx.jsxs)("span",{className:"metric-value",children:[_(e.clicks,e.impressions),"%"]})]}),(0,Lx.jsxs)("div",{className:"campaign-metric",children:[(0,Lx.jsx)("span",{className:"metric-label",children:"Conversions"}),(0,Lx.jsx)("span",{className:"metric-value",children:e.conversions})]}),(0,Lx.jsxs)("div",{className:"campaign-metric roi-metric",children:[(0,Lx.jsx)("span",{className:"metric-label",children:"ROI"}),(0,Lx.jsxs)("span",{className:"metric-value",children:[e.roi,"x"]})]})]}),(0,Lx.jsxs)("div",{className:"campaign-progress",children:[(0,Lx.jsx)("div",{className:"progress-bar",children:(0,Lx.jsx)("div",{className:"progress-fill",style:{width:"".concat(e.spent/e.budget*100,"%")}})}),(0,Lx.jsxs)("span",{className:"progress-text",children:[(e.spent/e.budget*100).toFixed(1),"% du budget utilis\xe9"]})]}),(0,Lx.jsxs)("div",{className:"campaign-actions",children:[(0,Lx.jsx)("button",{className:"btn-action edit",onClick:()=>(e=>{x("edit"),j(e),v(!0)})(e),disabled:w===e.id,children:(0,Lx.jsx)(DG,{size:16})}),"active"===e.status?(0,Lx.jsx)("button",{className:"btn-action pause",onClick:()=>C(e,"paused"),disabled:w===e.id,title:"Mettre en pause",children:(0,Lx.jsx)(MG,{size:16})}):"paused"===e.status?(0,Lx.jsx)("button",{className:"btn-action play",onClick:()=>C(e,"active"),disabled:w===e.id,title:"Reprendre",children:(0,Lx.jsx)(RG,{size:16})}):null,"completed"!==e.status&&(0,Lx.jsx)("button",{className:"btn-action complete",onClick:()=>C(e,"completed"),disabled:w===e.id,title:"Marquer comme termin\xe9",children:(0,Lx.jsx)(LG,{size:16})}),(0,Lx.jsx)("button",{className:"btn-action delete",onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer cette campagne ?")){N(e);try{await s(e)}catch(n){console.error("Erreur lors de la suppression:",n),alert("Erreur lors de la suppression de la campagne")}finally{N(null)}}})(e.id),disabled:w===e.id,title:"Supprimer",children:(0,Lx.jsx)(eG,{size:16})})]})]},e.id))})]}),(0,Lx.jsx)(zG,{isOpen:g,onClose:()=>v(!1),onSave:async e=>{try{await i(e)}catch(n){throw console.error("Erreur lors de la cr\xe9ation:",n),n}},onUpdate:async(e,t)=>{try{await a(e,t)}catch(n){throw console.error("Erreur lors de la mise \xe0 jour:",n),n}},campaign:b,mode:y})]});var P,O}const UG=Px("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),VG=Px("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),BG=Px("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),qG=Px("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);function HG(){const{stocks:e,loading:t,error:n,addStock:i,updateStock:a,deleteStock:s}=function(){const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[a,s]=(0,r.useState)(null),{user:o}=Sx();(0,r.useEffect)(()=>{(()=>{try{const e=localStorage.getItem("stocks_".concat((null===o||void 0===o?void 0:o.uid)||"guest"));if(e){const n=JSON.parse(e);t(n)}else{const e=[{id:"sample-1",name:"Brochure Villa Moderne",type:"brochure",quantity:500,quantityUsed:120,cost:250,supplier:"Imprimerie Dupont",dateAdded:"2024-01-15",description:"Brochure haute qualit\xe9 pour pr\xe9sentation villas"},{id:"sample-2",name:"Flyer Appartements Centre-ville",type:"flyer",quantity:1e3,quantityUsed:450,cost:180,supplier:"Print Express",dateAdded:"2024-02-10",description:"Flyers A5 pour promotion appartements"},{id:"sample-3",name:"Cartes de Visite Agent",type:"carte_visite",quantity:250,quantityUsed:80,cost:45,supplier:"Vistaprint",dateAdded:"2024-01-20",description:"Cartes de visite premium avec logo"},{id:"sample-4",name:"Panneau \xc0 Vendre Grand Format",type:"panneau",quantity:20,quantityUsed:12,cost:400,supplier:"Signaletique Pro",dateAdded:"2024-03-05",description:"Panneaux 80x60cm r\xe9sistants aux intemp\xe9ries"},{id:"sample-5",name:"Roll-up Salon Immobilier",type:"panneau",quantity:5,quantityUsed:3,cost:150,supplier:"Display Pro",dateAdded:"2024-02-20",description:"Roll-up portable pour salons et \xe9v\xe9nements"}];t(e),localStorage.setItem("stocks_".concat((null===o||void 0===o?void 0:o.uid)||"guest"),JSON.stringify(e))}i(!1),s(null)}catch(e){console.error("Erreur lors du chargement des stocks locaux:",e),t([{id:"sample-1",name:"Brochure Villa Moderne",type:"brochure",quantity:500,quantityUsed:120,cost:250,supplier:"Imprimerie Dupont",dateAdded:"2024-01-15",description:"Brochure haute qualit\xe9 pour pr\xe9sentation villas"},{id:"sample-2",name:"Flyer Appartements Centre-ville",type:"flyer",quantity:1e3,quantityUsed:450,cost:180,supplier:"Print Express",dateAdded:"2024-02-10",description:"Flyers A5 pour promotion appartements"},{id:"sample-3",name:"Cartes de Visite Agent",type:"carte_visite",quantity:250,quantityUsed:80,cost:45,supplier:"Vistaprint",dateAdded:"2024-01-20",description:"Cartes de visite premium avec logo"},{id:"sample-4",name:"Panneau \xc0 Vendre Grand Format",type:"panneau",quantity:20,quantityUsed:12,cost:400,supplier:"Signaletique Pro",dateAdded:"2024-03-05",description:"Panneaux 80x60cm r\xe9sistants aux intemp\xe9ries"},{id:"sample-5",name:"Roll-up Salon Immobilier",type:"panneau",quantity:5,quantityUsed:3,cost:150,supplier:"Display Pro",dateAdded:"2024-02-20",description:"Roll-up portable pour salons et \xe9v\xe9nements"}]),i(!1),s("Utilisation des donn\xe9es par d\xe9faut")}})()},[o]);const l=e=>{try{localStorage.setItem("stocks_".concat((null===o||void 0===o?void 0:o.uid)||"guest"),JSON.stringify(e))}catch(t){console.error("Erreur lors de la sauvegarde locale:",t)}};return{stocks:e,loading:n,error:a,addStock:async n=>{try{const r=[Me(Me({},n),{},{id:"stock_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),userId:null===o||void 0===o?void 0:o.uid,dateAdded:n.dateAdded||(new Date).toISOString().split("T")[0]}),...e];t(r),l(r)}catch(r){throw console.error("Erreur lors de l'ajout du stock:",r),new Error("Erreur lors de l'ajout du stock")}},updateStock:async(n,r)=>{try{const i=e.map(e=>e.id===n?Me(Me({},e),r):e);t(i),l(i)}catch(i){throw console.error("Erreur lors de la modification du stock:",i),new Error("Erreur lors de la modification du stock")}},deleteStock:async n=>{try{const r=e.filter(e=>e.id!==n);t(r),l(r)}catch(r){throw console.error("Erreur lors de la suppression du stock:",r),new Error("Erreur lors de la suppression du stock")}}}}(),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)("all"),[d,h]=(0,r.useState)(!1),[p,m]=(0,r.useState)(null),f={brochure:"Brochure",flyer:"Flyer",carte_visite:"Carte de visite",panneau:"Panneau",autre:"Autre"},g=e.filter(e=>{const t=e.name.toLowerCase().includes(o.toLowerCase())||e.supplier.toLowerCase().includes(o.toLowerCase()),n="all"===c||e.type===c;return t&&n}),v=e.reduce((e,t)=>e+t.cost,0),y=e.reduce((e,t)=>e+t.quantity,0),x=e.reduce((e,t)=>e+t.quantityUsed,0);return(0,Lx.jsxs)("div",{className:"page-container",children:[(0,Lx.jsxs)("div",{className:"supports-header",children:[(0,Lx.jsxs)("div",{className:"header-content",children:[(0,Lx.jsxs)("h1",{className:"page-title",children:[(0,Lx.jsx)(UG,{size:28}),"Gestion des Supports"]}),(0,Lx.jsx)("p",{className:"page-subtitle",children:"G\xe9rez votre stock de supports marketing et commerciaux"})]}),(0,Lx.jsxs)("button",{className:"btn-primary",onClick:()=>{m(null),h(!0)},children:[(0,Lx.jsx)(Hx,{size:20}),"Ajouter un support"]})]}),(0,Lx.jsxs)("div",{className:"stats-grid",children:[(0,Lx.jsxs)("div",{className:"stat-card",children:[(0,Lx.jsx)("div",{className:"stat-icon",children:(0,Lx.jsx)(UG,{size:24})}),(0,Lx.jsxs)("div",{className:"stat-content",children:[(0,Lx.jsx)("span",{className:"stat-value",children:g.length}),(0,Lx.jsx)("span",{className:"stat-label",children:"Types de supports"})]})]}),(0,Lx.jsxs)("div",{className:"stat-card",children:[(0,Lx.jsx)("div",{className:"stat-icon",children:(0,Lx.jsx)(IG,{size:24})}),(0,Lx.jsxs)("div",{className:"stat-content",children:[(0,Lx.jsx)("span",{className:"stat-value",children:y}),(0,Lx.jsx)("span",{className:"stat-label",children:"Quantit\xe9 totale"})]})]}),(0,Lx.jsxs)("div",{className:"stat-card",children:[(0,Lx.jsx)("div",{className:"stat-icon",children:(0,Lx.jsx)(VG,{size:24})}),(0,Lx.jsxs)("div",{className:"stat-content",children:[(0,Lx.jsx)("span",{className:"stat-value",children:x}),(0,Lx.jsx)("span",{className:"stat-label",children:"Quantit\xe9 utilis\xe9e"})]})]}),(0,Lx.jsxs)("div",{className:"stat-card",children:[(0,Lx.jsx)("div",{className:"stat-icon",children:(0,Lx.jsx)("span",{children:"\u20ac"})}),(0,Lx.jsxs)("div",{className:"stat-content",children:[(0,Lx.jsxs)("span",{className:"stat-value",children:[v,"\u20ac"]}),(0,Lx.jsx)("span",{className:"stat-label",children:"Valeur totale"})]})]})]}),(0,Lx.jsxs)("div",{className:"filters-section",children:[(0,Lx.jsxs)("div",{className:"search-box",children:[(0,Lx.jsx)(BG,{size:20}),(0,Lx.jsx)("input",{type:"text",placeholder:"Rechercher un support...",value:o,onChange:e=>l(e.target.value)})]}),(0,Lx.jsxs)("div",{className:"filter-select",children:[(0,Lx.jsx)(qG,{size:20}),(0,Lx.jsxs)("select",{value:c,onChange:e=>u(e.target.value),children:[(0,Lx.jsx)("option",{value:"all",children:"Tous les types"}),(0,Lx.jsx)("option",{value:"brochure",children:"Brochures"}),(0,Lx.jsx)("option",{value:"flyer",children:"Flyers"}),(0,Lx.jsx)("option",{value:"carte_visite",children:"Cartes de visite"}),(0,Lx.jsx)("option",{value:"panneau",children:"Panneaux"}),(0,Lx.jsx)("option",{value:"autre",children:"Autres"})]})]})]}),t&&(0,Lx.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.9)",padding:"40px",borderRadius:"16px",textAlign:"center",marginBottom:"24px"},children:"Chargement des donn\xe9es..."}),n&&(0,Lx.jsxs)("div",{style:{background:"#f8d7da",color:"#721c24",padding:"12px",borderRadius:"6px",marginBottom:"20px"},children:["Erreur: ",n]}),!t&&(0,Lx.jsx)("div",{className:"supports-grid",children:g.map(e=>{const t=e.quantity-e.quantityUsed,n=t/e.quantity*100,r=(e=>{const t=(e.quantity-e.quantityUsed)/e.quantity*100;return t<=10?"critical":t<=25?"low":"good"})(e);return(0,Lx.jsxs)("div",{className:"support-card ".concat(r),children:[(0,Lx.jsxs)("div",{className:"support-header",children:[(0,Lx.jsxs)("div",{className:"support-type",children:[(0,Lx.jsx)(UG,{size:18}),(0,Lx.jsx)("span",{children:f[e.type]})]}),(0,Lx.jsxs)("div",{className:"support-actions",children:[(0,Lx.jsx)("button",{className:"btn-icon",onClick:()=>(e=>{m(e),h(!0)})(e),children:(0,Lx.jsx)(DG,{size:16})}),(0,Lx.jsx)("button",{className:"btn-icon",onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce support ?"))try{await s(e)}catch(t){alert("Erreur lors de la suppression du support")}})(e.id),children:(0,Lx.jsx)(eG,{size:16})})]})]}),(0,Lx.jsx)("h3",{className:"support-name",children:e.name}),e.description&&(0,Lx.jsx)("p",{className:"support-description",children:e.description}),(0,Lx.jsxs)("div",{className:"support-details",children:[(0,Lx.jsxs)("div",{className:"detail-row",children:[(0,Lx.jsx)("span",{className:"detail-label",children:"Fournisseur:"}),(0,Lx.jsx)("span",{className:"detail-value",children:e.supplier})]}),(0,Lx.jsxs)("div",{className:"detail-row",children:[(0,Lx.jsx)("span",{className:"detail-label",children:"Co\xfbt:"}),(0,Lx.jsxs)("span",{className:"detail-value",children:[e.cost,"\u20ac"]})]}),(0,Lx.jsxs)("div",{className:"detail-row",children:[(0,Lx.jsx)("span",{className:"detail-label",children:"Date d'ajout:"}),(0,Lx.jsx)("span",{className:"detail-value",children:new Date(e.dateAdded).toLocaleDateString("fr-FR")})]})]}),(0,Lx.jsxs)("div",{className:"stock-info",children:[(0,Lx.jsxs)("div",{className:"stock-numbers",children:[(0,Lx.jsx)("span",{className:"stock-remaining",children:t}),(0,Lx.jsx)("span",{className:"stock-separator",children:"/"}),(0,Lx.jsx)("span",{className:"stock-total",children:e.quantity}),(0,Lx.jsx)("span",{className:"stock-label",children:"restants"})]}),(0,Lx.jsx)("div",{className:"stock-bar",children:(0,Lx.jsx)("div",{className:"stock-fill",style:{width:"".concat(n,"%")}})}),(0,Lx.jsxs)("div",{className:"stock-status-label",children:["critical"===r&&"Stock critique","low"===r&&"Stock faible","good"===r&&"Stock correct"]})]})]},e.id)})}),!t&&0===g.length&&(0,Lx.jsxs)("div",{className:"empty-state",children:[(0,Lx.jsx)(UG,{size:64}),(0,Lx.jsx)("h3",{children:"Aucun support trouv\xe9"}),(0,Lx.jsx)("p",{children:o||"all"!==c?"Aucun support ne correspond \xe0 vos crit\xe8res de recherche.":"Commencez par ajouter votre premier support marketing."})]}),d&&(0,Lx.jsx)(WG,{support:p,onSave:async e=>{try{p?await a(p.id,e):await i(e),h(!1),m(null)}catch(t){alert("Erreur lors de la sauvegarde du support")}},onClose:()=>{h(!1),m(null)}})]})}function WG(e){let{support:t,onSave:n,onClose:i}=e;const[a,s]=(0,r.useState)({name:(null===t||void 0===t?void 0:t.name)||"",type:(null===t||void 0===t?void 0:t.type)||"brochure",quantity:(null===t||void 0===t?void 0:t.quantity)||0,quantityUsed:(null===t||void 0===t?void 0:t.quantityUsed)||0,cost:(null===t||void 0===t?void 0:t.cost)||0,supplier:(null===t||void 0===t?void 0:t.supplier)||"",dateAdded:(null===t||void 0===t?void 0:t.dateAdded)||(new Date).toISOString().split("T")[0],description:(null===t||void 0===t?void 0:t.description)||""}),o=(e,t)=>{s(n=>Me(Me({},n),{},{[e]:t}))};return(0,Lx.jsx)("div",{className:"modal-overlay",onClick:i,children:(0,Lx.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Lx.jsxs)("div",{className:"modal-header",children:[(0,Lx.jsx)("h2",{children:t?"Modifier le support":"Ajouter un support"}),(0,Lx.jsx)("button",{className:"btn-close",onClick:i,children:(0,Lx.jsx)(HK,{size:20})})]}),(0,Lx.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a.name.trim()&&a.supplier.trim()?a.quantity<0||a.quantityUsed<0||a.cost<0?alert("Les quantit\xe9s et co\xfbts ne peuvent pas \xeatre n\xe9gatifs"):a.quantityUsed>a.quantity?alert("La quantit\xe9 utilis\xe9e ne peut pas \xeatre sup\xe9rieure \xe0 la quantit\xe9 totale"):n(a):alert("Veuillez remplir tous les champs obligatoires")},className:"support-form",children:[(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"name",children:"Nom du support *"}),(0,Lx.jsx)("input",{id:"name",type:"text",value:a.name,onChange:e=>o("name",e.target.value),placeholder:"Ex: Brochure Villa Moderne",required:!0})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"type",children:"Type de support *"}),(0,Lx.jsxs)("select",{id:"type",value:a.type,onChange:e=>o("type",e.target.value),required:!0,children:[(0,Lx.jsx)("option",{value:"brochure",children:"Brochure"}),(0,Lx.jsx)("option",{value:"flyer",children:"Flyer"}),(0,Lx.jsx)("option",{value:"carte_visite",children:"Carte de visite"}),(0,Lx.jsx)("option",{value:"panneau",children:"Panneau"}),(0,Lx.jsx)("option",{value:"autre",children:"Autre"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"quantity",children:"Quantit\xe9 totale *"}),(0,Lx.jsx)("input",{id:"quantity",type:"number",min:"0",value:a.quantity,onChange:e=>o("quantity",parseInt(e.target.value)||0),required:!0})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"quantityUsed",children:"Quantit\xe9 utilis\xe9e"}),(0,Lx.jsx)("input",{id:"quantityUsed",type:"number",min:"0",max:a.quantity,value:a.quantityUsed,onChange:e=>o("quantityUsed",parseInt(e.target.value)||0)})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"cost",children:"Co\xfbt (\u20ac) *"}),(0,Lx.jsx)("input",{id:"cost",type:"number",min:"0",step:"0.01",value:a.cost,onChange:e=>o("cost",parseFloat(e.target.value)||0),required:!0})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"supplier",children:"Fournisseur *"}),(0,Lx.jsx)("input",{id:"supplier",type:"text",value:a.supplier,onChange:e=>o("supplier",e.target.value),placeholder:"Ex: Imprimerie Dupont",required:!0})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"dateAdded",children:"Date d'ajout"}),(0,Lx.jsx)("input",{id:"dateAdded",type:"date",value:a.dateAdded,onChange:e=>o("dateAdded",e.target.value)})]}),(0,Lx.jsxs)("div",{className:"form-group full-width",children:[(0,Lx.jsx)("label",{htmlFor:"description",children:"Description"}),(0,Lx.jsx)("textarea",{id:"description",value:a.description,onChange:e=>o("description",e.target.value),placeholder:"Description du support...",rows:3})]})]}),(0,Lx.jsxs)("div",{className:"modal-actions",children:[(0,Lx.jsx)("button",{type:"button",className:"btn-secondary",onClick:i,children:"Annuler"}),(0,Lx.jsx)("button",{type:"submit",className:"btn-primary",children:t?"Modifier":"Ajouter"})]})]})]})})}const KG=Px("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),GG=Px("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]),YG=Px("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),QG=Px("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),XG=Px("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);function JG(){const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[a,s]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(new Date),[d,h]=(0,r.useState)(!1),[p,m]=(0,r.useState)(null),f="d2t8n39r01qkuv3jq71gd2t8n39r01qkuv3jq720",g="https://finnhub.io/api/v1";(0,r.useEffect)(()=>{N();const e=setInterval(()=>{N()},3e5);return()=>clearInterval(e)},[]);const v=e=>{const t=y(e),n=4*(Math.random()-.5),r=t*(n/100);return{price:Math.round(100*(t+r))/100,change:Math.round(100*r)/100,changePercent:Math.round(100*n)/100,volume:Math.floor(5e7*Math.random())+1e7}},y=e=>({AAPL:175,MSFT:340,GOOGL:135,TSLA:250,NVDA:450,AMZN:145,META:320,NFLX:420}[e]||100),x=async e=>{try{await new Promise(e=>setTimeout(e,1100));const t=await fetch("".concat(g,"/quote?symbol=").concat(e,"&token=").concat(f));if(!t.ok)return console.warn("Finnhub API not available for ".concat(e,": ").concat(t.status," - Using fallback data")),v(e);const n=await t.json();return n&&void 0!==n.c?{price:n.c||0,change:n.d||0,changePercent:n.dp||0,volume:n.v||0}:(console.warn("No data for ".concat(e,":"),n),v(e))}catch(t){return console.error("Error fetching quote for ".concat(e,":"),t),v(e)}},b=async e=>{try{await new Promise(e=>setTimeout(e,1100));const t=await fetch("".concat(g,"/stock/profile2?symbol=").concat(e,"&token=").concat(f));if(!t.ok)return console.warn("Finnhub API not available for company profile ".concat(e,": ").concat(t.status," - Using fallback data")),null;const n=await t.json();return n&&n.name?{name:n.name||k(e),marketCap:n.marketCapitalization||C(e),sector:n.finnhubIndustry||"Technology",industry:n.finnhubIndustry||"Software"}:(console.warn("No company data for ".concat(e,":"),n),null)}catch(t){return console.error("Error fetching overview for ".concat(e,":"),t),null}},j=e=>({"Immobilier R\xe9sidentiel Mondial":"280T\u20ac","March\xe9 Immobilier Europ\xe9en":"75T\u20ac","Immobilier Am\xe9ricain":"45T\u20ac","March\xe9 Asie-Pacifique":"85T\u20ac","Immobilier Commercial":"32T\u20ac","REITs Mondiaux":"2.8T\u20ac"}[e]||"1T\u20ac"),w=e=>{const t=e.toLowerCase();return t.includes("real estate")||t.includes("property")||t.includes("housing")||t.includes("mortgage")?"real-estate":t.includes("market")||t.includes("trading")||t.includes("stock")||t.includes("investment")?"market":t.includes("economy")||t.includes("economic")||t.includes("gdp")||t.includes("inflation")?"economy":"finance"},N=async()=>{h(!0),m(null);const e=["AAPL","MSFT","GOOGL","TSLA","NVDA","AMZN","META","NFLX"],n=[];for(const t of e)try{const[e,r]=await Promise.all([x(t),b(t)]);e&&n.push({symbol:t,name:(null===r||void 0===r?void 0:r.name)||k(t),price:e.price,change:e.change,changePercent:e.changePercent,volume:e.volume,marketCap:(null===r||void 0===r?void 0:r.marketCap)||C(t)})}catch(r){console.error("Error processing ".concat(t,":"),r)}try{n.length>0?(t(n),m(null)):(m("Cl\xe9 API Finnhub en cours d'activation - Utilisation des donn\xe9es de d\xe9monstration"),S());const e=await(async()=>{try{const e=await fetch("".concat(g,"/news?category=general&token=").concat(f));if(!e.ok)return console.warn("Finnhub News API not available: ".concat(e.status," - Using fallback news")),[];const t=await e.json();return t&&Array.isArray(t)?t.slice(0,10).map((e,t)=>({id:"finnhub_".concat(t),title:e.headline||"No title",summary:e.summary||"No description",description:e.summary||"No description",url:e.url||"#",publishedAt:new Date(1e3*e.datetime).toISOString(),timestamp:new Date(1e3*e.datetime),source:e.source||"Finnhub",category:w(e.headline+" "+(e.summary||"")),impact:"neutral",relevanceScore:.5})):(console.warn("Invalid news data format:",t),[])}catch(r){return console.error("Error fetching news:",r),[]}})();e.length>0?l(e):E();const i=await(async()=>{try{return[{name:"Immobilier R\xe9sidentiel Mondial",region:"Global",baseGrowth:2.1},{name:"March\xe9 Immobilier Europ\xe9en",region:"Europe",baseGrowth:1.8},{name:"Immobilier Am\xe9ricain",region:"USA",baseGrowth:3.2},{name:"March\xe9 Asie-Pacifique",region:"APAC",baseGrowth:2.7},{name:"Immobilier Commercial",region:"Global",baseGrowth:1.5},{name:"REITs Mondiaux",region:"Global",baseGrowth:4.1}].map(e=>{const t=2*(Math.random()-.5),n=e.baseGrowth+t;return{name:e.name,region:e.region,marketValue:j(e.name),growth:Math.round(10*n)/10,trend:n>0?"up":n<0?"down":"stable"}})}catch(r){return console.error("Error fetching global real estate data:",r),[]}})();i.length>0?s(i):_()}catch(r){console.error("Error loading real-time data:",r),m("Erreur de connexion Finnhub - Donn\xe9es de d\xe9monstration"),S(),E(),_()}T(),h(!1)},k=e=>({AAPL:"Apple Inc.",MSFT:"Microsoft Corp.",GOOGL:"Alphabet Inc.",TSLA:"Tesla Inc.",NVDA:"NVIDIA Corp.",AMZN:"Amazon.com Inc.",META:"Meta Platforms Inc.",NFLX:"Netflix Inc.",ADBE:"Adobe Inc.",CRM:"Salesforce Inc.",TTD:"The Trade Desk Inc.",ROKU:"Roku Inc.",SNAP:"Snap Inc.",PINS:"Pinterest Inc.",TWTR:"Twitter Inc.",DIS:"The Walt Disney Company",AMT:"American Tower Corp.",PLD:"Prologis Inc.",EXR:"Extended Stay America Inc.",SPG:"Simon Property Group",O:"Realty Income Corp.",VTR:"Ventas Inc.",ASML:"ASML Holding N.V.",SAP:"SAP SE","LVMH.PA":"LVMH Mo\xebt Hennessy","MC.PA":"LVMH","OR.PA":"L'Or\xe9al S.A.","SAN.PA":"Sanofi",TSM:"Taiwan Semiconductor",BABA:"Alibaba Group",TCEHY:"Tencent Holdings",NIO:"NIO Inc.",JD:"JD.com Inc.",PDD:"PDD Holdings",JPM:"JPMorgan Chase & Co.",BAC:"Bank of America Corp.",WFC:"Wells Fargo & Company",GS:"The Goldman Sachs Group",MS:"Morgan Stanley",C:"Citigroup Inc.",XOM:"Exxon Mobil Corp.",CVX:"Chevron Corp.",COP:"ConocoPhillips",SLB:"Schlumberger Limited",HAL:"Halliburton Company",OXY:"Occidental Petroleum"}[e]||e),C=e=>({AAPL:34e11,MSFT:32e11,GOOGL:21e11,TSLA:775e9,NVDA:29e11,AMZN:195e10,META:13e11,NFLX:19e10,ADBE:22e10,CRM:25e10,TTD:35e9,ROKU:35e8,SNAP:15e9,PINS:18e9,TWTR:35e9,DIS:18e10,AMT:95e9,PLD:12e10,EXR:8e9,SPG:35e9,O:45e9,VTR:25e9,ASML:28e10,SAP:15e10,"LVMH.PA":38e10,"MC.PA":38e10,"OR.PA":22e10,"SAN.PA":12e10,TSM:52e10,BABA:2e11,TCEHY:35e10,NIO:12e9,JD:45e9,PDD:15e10,JPM:48e10,BAC:28e10,WFC:18e10,GS:12e10,MS:15e10,C:95e9,XOM:42e10,CVX:32e10,COP:14e10,SLB:65e9,HAL:28e9,OXY:55e9}[e]||1e12),S=()=>{t([{symbol:"AAPL",name:"Apple Inc.",price:220.85,change:2.15,changePercent:.98,volume:45234567,marketCap:34e11},{symbol:"MSFT",name:"Microsoft Corp.",price:428.5,change:-1.45,changePercent:-.34,volume:23456789,marketCap:32e11},{symbol:"GOOGL",name:"Alphabet Inc.",price:165.4,change:3.22,changePercent:1.99,volume:18765432,marketCap:21e11},{symbol:"TSLA",name:"Tesla Inc.",price:242.8,change:-5.75,changePercent:-2.31,volume:67890123,marketCap:775e9},{symbol:"NVDA",name:"NVIDIA Corp.",price:118.75,change:2.45,changePercent:2.1,volume:34567890,marketCap:29e11},{symbol:"AMZN",name:"Amazon.com Inc.",price:188.9,change:1.85,changePercent:.99,volume:29876543,marketCap:195e10},{symbol:"META",name:"Meta Platforms Inc.",price:485.2,change:8.45,changePercent:1.77,volume:18234567,marketCap:13e11},{symbol:"NFLX",name:"Netflix Inc.",price:445.3,change:-3.2,changePercent:-.71,volume:4567890,marketCap:19e10},{symbol:"ADBE",name:"Adobe Inc.",price:520.75,change:12.85,changePercent:2.53,volume:2345678,marketCap:22e10},{symbol:"CRM",name:"Salesforce Inc.",price:285.4,change:5.6,changePercent:2,volume:3456789,marketCap:25e10},{symbol:"TTD",name:"The Trade Desk Inc.",price:95.8,change:2.15,changePercent:2.29,volume:1234567,marketCap:35e9},{symbol:"ROKU",name:"Roku Inc.",price:65.25,change:-1.85,changePercent:-2.76,volume:5678901,marketCap:35e8},{symbol:"SNAP",name:"Snap Inc.",price:12.45,change:.35,changePercent:2.89,volume:12345678,marketCap:15e9},{symbol:"PINS",name:"Pinterest Inc.",price:28.75,change:1.25,changePercent:4.55,volume:8765432,marketCap:18e9},{symbol:"DIS",name:"The Walt Disney Company",price:92.4,change:-.85,changePercent:-.91,volume:12345678,marketCap:18e10},{symbol:"AMT",name:"American Tower Corp.",price:195.6,change:1.25,changePercent:.64,volume:1876543,marketCap:95e9},{symbol:"PLD",name:"Prologis Inc.",price:125.8,change:.95,changePercent:.76,volume:2987654,marketCap:12e10},{symbol:"EXR",name:"Extended Stay America Inc.",price:145.3,change:-.75,changePercent:-.51,volume:987654,marketCap:8e9},{symbol:"SPG",name:"Simon Property Group",price:115.25,change:2.1,changePercent:1.86,volume:2345678,marketCap:35e9},{symbol:"O",name:"Realty Income Corp.",price:58.9,change:.45,changePercent:.77,volume:3456789,marketCap:45e9},{symbol:"ASML",name:"ASML Holding N.V.",price:685.4,change:12.5,changePercent:1.86,volume:876543,marketCap:28e10},{symbol:"SAP",name:"SAP SE",price:145.75,change:-2.25,changePercent:-1.52,volume:1234567,marketCap:15e10},{symbol:"TSM",name:"Taiwan Semiconductor",price:105.8,change:3.45,changePercent:3.37,volume:15678901,marketCap:52e10},{symbol:"BABA",name:"Alibaba Group",price:78.25,change:-1.85,changePercent:-2.31,volume:23456789,marketCap:2e11},{symbol:"JPM",name:"JPMorgan Chase & Co.",price:185.4,change:2.75,changePercent:1.51,volume:8765432,marketCap:48e10},{symbol:"BAC",name:"Bank of America Corp.",price:38.9,change:.65,changePercent:1.7,volume:45678901,marketCap:28e10},{symbol:"XOM",name:"Exxon Mobil Corp.",price:115.75,change:1.85,changePercent:1.62,volume:12345678,marketCap:42e10},{symbol:"CVX",name:"Chevron Corp.",price:158.2,change:-.95,changePercent:-.6,volume:6789012,marketCap:32e10}])},E=()=>{const e=[{id:"1",title:"Les taux d'int\xe9r\xeat europ\xe9ens en baisse stimulent l'immobilier",summary:"La BCE maintient sa politique accommodante, favorisant les investissements immobiliers dans la zone euro.",category:"real-estate",timestamp:new Date(Date.now()-72e5),source:"Reuters Finance",impact:"positive"},{id:"2",title:"Tech stocks rebondissent apr\xe8s les r\xe9sultats trimestriels",summary:"Apple, Microsoft et Google d\xe9passent les attentes avec des revenus en forte croissance.",category:"finance",timestamp:new Date(Date.now()-144e5),source:"Bloomberg",impact:"positive"},{id:"3",title:"Inflation fran\xe7aise stable \xe0 2.1% en septembre",summary:"L'INSEE confirme une inflation ma\xeetris\xe9e, rassurant les march\xe9s financiers.",category:"economy",timestamp:new Date(Date.now()-216e5),source:"Les \xc9chos",impact:"neutral"},{id:"4",title:"Nexity annonce un plan de restructuration",summary:"Le promoteur immobilier fran\xe7ais pr\xe9voit de c\xe9der plusieurs filiales pour optimiser sa structure.",category:"real-estate",timestamp:new Date(Date.now()-288e5),source:"Le Figaro \xc9conomie",impact:"negative"}];l(e)},T=()=>{i([{name:"Paris Immobilier Index",region:"France",value:2847.5,change:15.2,changePercent:.54,trend:"up"},{name:"London Property Index",region:"UK",value:1923.8,change:-8.7,changePercent:-.45,trend:"down"},{name:"NYC Real Estate Index",region:"USA",value:3456.2,change:22.1,changePercent:.64,trend:"up"},{name:"Tokyo Housing Index",region:"Japan",value:1678.9,change:5.3,changePercent:.32,trend:"up"},{name:"Berlin Property Index",region:"Germany",value:2134.7,change:-3.2,changePercent:-.15,trend:"down"},{name:"Sydney Real Estate Index",region:"Australia",value:2789.4,change:18.6,changePercent:.67,trend:"up"}]),u(new Date)},_=()=>{s([{name:"Immobilier R\xe9sidentiel Mondial",region:"Global",marketValue:"280T\u20ac",growth:2.3,trend:"up"},{name:"March\xe9 Immobilier Europ\xe9en",region:"Europe",marketValue:"75T\u20ac",growth:1.7,trend:"up"},{name:"Immobilier Am\xe9ricain",region:"USA",marketValue:"45T\u20ac",growth:3.4,trend:"up"},{name:"March\xe9 Asie-Pacifique",region:"APAC",marketValue:"85T\u20ac",growth:2.9,trend:"up"},{name:"Immobilier Commercial",region:"Global",marketValue:"32T\u20ac",growth:1.2,trend:"up"},{name:"REITs Mondiaux",region:"Global",marketValue:"2.8T\u20ac",growth:4.3,trend:"up"}])},A=e=>{const t=new Date,n=Math.floor((t.getTime()-e.getTime())/36e5);if(n<1)return"Il y a moins d'1h";if(1===n)return"Il y a 1h";if(n<24)return"Il y a ".concat(n,"h");const r=Math.floor(n/24);return 1===r?"Il y a 1 jour":"Il y a ".concat(r," jours")},I=e=>{switch(e){case"finance":return"#3B82F6";case"real-estate":return"#10B981";case"market":return"#8B5CF6";case"economy":return"#F59E0B";default:return"#6B7280"}},P=e=>{switch(e){case"finance":return"Finance";case"real-estate":return"Immobilier";case"market":return"March\xe9s";case"economy":return"\xc9conomie";default:return"Actualit\xe9s"}};return(0,Lx.jsxs)("div",{className:"page-container",children:[(0,Lx.jsxs)("div",{className:"globaltrade-header",children:[(0,Lx.jsxs)("div",{className:"header-content",children:[(0,Lx.jsxs)("h1",{className:"page-title",children:[(0,Lx.jsx)(YK,{size:28}),"Global Trade"]}),(0,Lx.jsx)("p",{className:"page-subtitle",children:"March\xe9s financiers, valorisations d'entreprises et indices immobiliers"})]}),(0,Lx.jsxs)("div",{className:"header-actions",children:[(0,Lx.jsxs)("div",{className:"last-update",children:["Derni\xe8re mise \xe0 jour: ",c.toLocaleTimeString("fr-FR"),p&&(0,Lx.jsxs)("div",{className:"api-error",children:[(0,Lx.jsx)(KG,{size:12}),p]})]}),(0,Lx.jsxs)("button",{className:"btn-refresh ".concat(d?"loading":""),onClick:async()=>{await N()},disabled:d,children:[(0,Lx.jsx)(AG,{size:18,className:d?"spinning":""}),p?"R\xe9essayer":"Actualiser"]})]})]}),(0,Lx.jsxs)("div",{className:"market-overview",children:[(0,Lx.jsxs)("div",{className:"overview-card",children:[(0,Lx.jsx)("div",{className:"overview-icon",children:(0,Lx.jsx)(Yx,{size:24})}),(0,Lx.jsxs)("div",{className:"overview-content",children:[(0,Lx.jsx)("span",{className:"overview-value",children:"+2.4%"}),(0,Lx.jsx)("span",{className:"overview-label",children:"March\xe9s Globaux"})]})]}),(0,Lx.jsxs)("div",{className:"overview-card",children:[(0,Lx.jsx)("div",{className:"overview-icon",children:(0,Lx.jsx)(JK,{size:24})}),(0,Lx.jsxs)("div",{className:"overview-content",children:[(0,Lx.jsx)("span",{className:"overview-value",children:"+0.8%"}),(0,Lx.jsx)("span",{className:"overview-label",children:"Immobilier"})]})]}),(0,Lx.jsxs)("div",{className:"overview-card",children:[(0,Lx.jsx)("div",{className:"overview-icon",children:(0,Lx.jsx)(Rx,{size:24})}),(0,Lx.jsxs)("div",{className:"overview-content",children:[(0,Lx.jsx)("span",{className:"overview-value",children:"+1.2%"}),(0,Lx.jsx)("span",{className:"overview-label",children:"Tech Stocks"})]})]}),(0,Lx.jsxs)("div",{className:"overview-card",children:[(0,Lx.jsx)("div",{className:"overview-icon",children:(0,Lx.jsx)(KG,{size:24})}),(0,Lx.jsxs)("div",{className:"overview-content",children:[(0,Lx.jsx)("span",{className:"overview-value",children:"High"}),(0,Lx.jsx)("span",{className:"overview-label",children:"Volatilit\xe9"})]})]})]}),(0,Lx.jsxs)("div",{className:"trade-grid",children:[(0,Lx.jsxs)("div",{className:"left-column",children:[(0,Lx.jsxs)("div",{className:"trade-section news-section",children:[(0,Lx.jsxs)("div",{className:"section-header",children:[(0,Lx.jsxs)("h2",{children:[(0,Lx.jsx)(GG,{size:24}),"Actualit\xe9s Financi\xe8res"]}),(0,Lx.jsx)("span",{className:"section-subtitle",children:"Derni\xe8res nouvelles des march\xe9s"})]}),(0,Lx.jsx)("div",{className:"news-grid",children:o.slice(0,4).map(e=>(0,Lx.jsxs)("div",{className:"news-card",onClick:()=>{var t;(t=e).url&&"#"!==t.url&&window.open(t.url,"_blank","noopener,noreferrer")},style:{cursor:e.url&&"#"!==e.url?"pointer":"default"},children:[(0,Lx.jsxs)("div",{className:"news-card-header",children:[(0,Lx.jsx)("div",{className:"news-category",style:{backgroundColor:"".concat(I(e.category),"20"),color:I(e.category)},children:P(e.category)}),(0,Lx.jsxs)("div",{className:"news-impact ".concat(e.impact),children:["positive"===e.impact&&(0,Lx.jsx)(Yx,{size:12}),"negative"===e.impact&&(0,Lx.jsx)(VK,{size:12}),"neutral"===e.impact&&(0,Lx.jsx)(KG,{size:12})]})]}),(0,Lx.jsx)("h3",{className:"news-card-title",children:e.title}),(0,Lx.jsx)("p",{className:"news-card-summary",children:e.summary}),(0,Lx.jsxs)("div",{className:"news-card-footer",children:[(0,Lx.jsxs)("div",{className:"news-meta",children:[(0,Lx.jsx)(SG,{size:12}),(0,Lx.jsx)("span",{children:A(e.timestamp)}),(0,Lx.jsx)("span",{className:"news-source",children:e.source})]}),e.url&&"#"!==e.url&&(0,Lx.jsx)(YG,{size:12,className:"news-link"})]})]},e.id))})]}),(0,Lx.jsxs)("div",{className:"trade-section company-section",children:[(0,Lx.jsxs)("div",{className:"section-header",children:[(0,Lx.jsxs)("h2",{children:[(0,Lx.jsx)(JK,{size:24}),"March\xe9s Immobiliers Mondiaux"]}),(0,Lx.jsx)("span",{className:"section-subtitle",children:"Donn\xe9es globales du secteur immobilier"})]}),(0,Lx.jsx)("div",{className:"company-grid",children:a.map((e,t)=>(0,Lx.jsxs)("div",{className:"company-card",children:[(0,Lx.jsxs)("div",{className:"company-header",children:[(0,Lx.jsx)("div",{className:"company-name",children:e.name}),(0,Lx.jsx)("div",{className:"market-trend ".concat(e.trend),children:"up"===e.trend?(0,Lx.jsx)(Yx,{size:12}):"down"===e.trend?(0,Lx.jsx)(VK,{size:12}):(0,Lx.jsx)(KG,{size:12})})]}),(0,Lx.jsx)("div",{className:"company-sector",children:e.region}),(0,Lx.jsxs)("div",{className:"company-metrics",children:[(0,Lx.jsxs)("div",{className:"metric",children:[(0,Lx.jsx)("span",{className:"metric-label",children:"Valeur March\xe9"}),(0,Lx.jsx)("span",{className:"metric-value",children:e.marketValue})]}),(0,Lx.jsxs)("div",{className:"metric",children:[(0,Lx.jsx)("span",{className:"metric-label",children:"Croissance"}),(0,Lx.jsxs)("span",{className:"metric-value ".concat(e.growth>=0?"positive":"negative"),children:[e.growth>=0?"+":"",e.growth.toFixed(1),"%"]})]})]})]},t))})]})]}),(0,Lx.jsxs)("div",{className:"right-column",children:[(0,Lx.jsxs)("div",{className:"trade-section compact stock-section",children:[(0,Lx.jsx)("div",{className:"section-header",children:(0,Lx.jsxs)("h2",{children:[(0,Lx.jsx)(Rx,{size:20}),"Bourse & Actions"]})}),(0,Lx.jsx)("div",{className:"stock-grid",children:e.slice(0,8).map(e=>(0,Lx.jsxs)("div",{className:"stock-card",children:[(0,Lx.jsxs)("div",{className:"stock-header",children:[(0,Lx.jsx)("span",{className:"stock-symbol",children:e.symbol}),(0,Lx.jsxs)("span",{className:"stock-price",children:["$",e.price.toFixed(2)]})]}),(0,Lx.jsxs)("div",{className:"stock-change ".concat(e.change>=0?"positive":"negative"),children:[e.change>=0?(0,Lx.jsx)(QG,{size:12}):(0,Lx.jsx)(XG,{size:12}),e.changePercent.toFixed(2),"%"]})]},e.symbol))})]}),(0,Lx.jsxs)("div",{className:"trade-section compact realestate-section",children:[(0,Lx.jsx)("div",{className:"section-header",children:(0,Lx.jsxs)("h2",{children:[(0,Lx.jsx)(JK,{size:20}),"Indices Immobiliers"]})}),(0,Lx.jsx)("div",{className:"realestate-grid",children:n.slice(0,6).map((e,t)=>(0,Lx.jsxs)("div",{className:"realestate-card",children:[(0,Lx.jsxs)("div",{className:"realestate-header",children:[(0,Lx.jsx)("span",{className:"realestate-city",children:e.name.split(" ")[0]}),(0,Lx.jsx)("span",{className:"realestate-value",children:e.value.toFixed(0)})]}),(0,Lx.jsxs)("div",{className:"realestate-change ".concat(e.change>=0?"positive":"negative"),children:["up"===e.trend?(0,Lx.jsx)(Yx,{size:12}):(0,Lx.jsx)(VK,{size:12}),e.changePercent.toFixed(2),"%"]})]},t))})]})]})]})]})}const $G=Px("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);function ZG(e){let{quote:t,onSave:n,onCancel:i}=e;const[a,s]=(0,r.useState)({clientName:"",clientEmail:"",clientPhone:"",clientAddress:"",projectTitle:"",items:[{description:"",quantity:1,unitPrice:0,total:0}],taxRate:20,validityDays:30,notes:""}),[o,l]=(0,r.useState)({subtotal:0,taxAmount:0,total:0});(0,r.useEffect)(()=>{t&&s({clientName:t.clientName||"",clientEmail:t.clientEmail||"",clientPhone:t.clientPhone||"",clientAddress:t.clientAddress||"",projectTitle:t.projectTitle||"",items:t.items||[{description:"",quantity:1,unitPrice:0,total:0}],taxRate:t.taxRate||20,validityDays:t.validityDays||30,notes:t.notes||""})},[t]),(0,r.useEffect)(()=>{c()},[a.items,a.taxRate]);const c=()=>{const e=a.items.reduce((e,t)=>e+t.total,0),t=e*a.taxRate/100;l({subtotal:e,taxAmount:t,total:e+t})},u=(e,t,n)=>{const r=[...a.items];r[e]=Me(Me({},r[e]),{},{[t]:n}),"quantity"!==t&&"unitPrice"!==t||(r[e].total=r[e].quantity*r[e].unitPrice),s(Me(Me({},a),{},{items:r}))};return(0,Lx.jsx)("div",{className:"quote-form-overlay",children:(0,Lx.jsxs)("div",{className:"quote-form-container",children:[(0,Lx.jsxs)("div",{className:"quote-form-header",children:[(0,Lx.jsx)("h2",{children:t?"Modifier le devis":"Nouveau devis"}),(0,Lx.jsx)("button",{className:"close-btn",onClick:i,children:(0,Lx.jsx)(HK,{size:24})})]}),(0,Lx.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(Me(Me({},a),o))},className:"quote-form",children:[(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsx)("h3",{children:"Informations client"}),(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Nom du client *"}),(0,Lx.jsx)("input",{type:"text",value:a.clientName,onChange:e=>s(Me(Me({},a),{},{clientName:e.target.value})),required:!0})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Email"}),(0,Lx.jsx)("input",{type:"email",value:a.clientEmail,onChange:e=>s(Me(Me({},a),{},{clientEmail:e.target.value}))})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"T\xe9l\xe9phone"}),(0,Lx.jsx)("input",{type:"tel",value:a.clientPhone,onChange:e=>s(Me(Me({},a),{},{clientPhone:e.target.value}))})]}),(0,Lx.jsxs)("div",{className:"form-group full-width",children:[(0,Lx.jsx)("label",{children:"Adresse"}),(0,Lx.jsx)("textarea",{value:a.clientAddress,onChange:e=>s(Me(Me({},a),{},{clientAddress:e.target.value})),rows:2})]})]})]}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsx)("h3",{children:"Projet"}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Titre du projet *"}),(0,Lx.jsx)("input",{type:"text",value:a.projectTitle,onChange:e=>s(Me(Me({},a),{},{projectTitle:e.target.value})),required:!0})]})]}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsxs)("div",{className:"section-header",children:[(0,Lx.jsx)("h3",{children:"Articles"}),(0,Lx.jsxs)("button",{type:"button",className:"add-item-btn",onClick:()=>{s(Me(Me({},a),{},{items:[...a.items,{description:"",quantity:1,unitPrice:0,total:0}]}))},children:[(0,Lx.jsx)(Hx,{size:16}),"Ajouter un article"]})]}),(0,Lx.jsxs)("div",{className:"items-table",children:[(0,Lx.jsxs)("div",{className:"table-header",children:[(0,Lx.jsx)("div",{className:"col-description",children:"Description"}),(0,Lx.jsx)("div",{className:"col-quantity",children:"Quantit\xe9"}),(0,Lx.jsx)("div",{className:"col-price",children:"Prix unitaire"}),(0,Lx.jsx)("div",{className:"col-total",children:"Total"}),(0,Lx.jsx)("div",{className:"col-actions",children:"Actions"})]}),a.items.map((e,t)=>(0,Lx.jsxs)("div",{className:"table-row",children:[(0,Lx.jsx)("div",{className:"col-description",children:(0,Lx.jsx)("input",{type:"text",value:e.description,onChange:e=>u(t,"description",e.target.value),placeholder:"Description de l'article",required:!0})}),(0,Lx.jsx)("div",{className:"col-quantity",children:(0,Lx.jsx)("input",{type:"number",value:e.quantity,onChange:e=>u(t,"quantity",parseFloat(e.target.value)||0),min:"0",step:"0.01",required:!0})}),(0,Lx.jsx)("div",{className:"col-price",children:(0,Lx.jsx)("input",{type:"number",value:e.unitPrice,onChange:e=>u(t,"unitPrice",parseFloat(e.target.value)||0),min:"0",step:"0.01",required:!0})}),(0,Lx.jsx)("div",{className:"col-total",children:(0,Lx.jsxs)("span",{className:"total-amount",children:[e.total.toFixed(2)," \u20ac"]})}),(0,Lx.jsx)("div",{className:"col-actions",children:(0,Lx.jsx)("button",{type:"button",className:"remove-item-btn",onClick:()=>(e=>{if(a.items.length>1){const t=a.items.filter((t,n)=>n!==e);s(Me(Me({},a),{},{items:t}))}})(t),disabled:1===a.items.length,children:(0,Lx.jsx)(eG,{size:16})})})]},t))]})]}),(0,Lx.jsx)("div",{className:"form-section",children:(0,Lx.jsxs)("div",{className:"calculations-section",children:[(0,Lx.jsxs)("div",{className:"tax-rate-input",children:[(0,Lx.jsx)("label",{children:"Taux de TVA (%)"}),(0,Lx.jsx)("input",{type:"number",value:a.taxRate,onChange:e=>s(Me(Me({},a),{},{taxRate:parseFloat(e.target.value)||0})),min:"0",max:"100",step:"0.01"})]}),(0,Lx.jsxs)("div",{className:"calculations-summary",children:[(0,Lx.jsxs)("div",{className:"calc-row",children:[(0,Lx.jsx)("span",{children:"Sous-total HT:"}),(0,Lx.jsxs)("span",{children:[o.subtotal.toFixed(2)," \u20ac"]})]}),(0,Lx.jsxs)("div",{className:"calc-row",children:[(0,Lx.jsxs)("span",{children:["TVA (",a.taxRate,"%):"]}),(0,Lx.jsxs)("span",{children:[o.taxAmount.toFixed(2)," \u20ac"]})]}),(0,Lx.jsxs)("div",{className:"calc-row total-row",children:[(0,Lx.jsx)("span",{children:"Total TTC:"}),(0,Lx.jsxs)("span",{children:[o.total.toFixed(2)," \u20ac"]})]})]})]})}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsx)("h3",{children:"Options"}),(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Validit\xe9 (jours)"}),(0,Lx.jsx)("input",{type:"number",value:a.validityDays,onChange:e=>s(Me(Me({},a),{},{validityDays:parseInt(e.target.value)||30})),min:"1"})]}),(0,Lx.jsxs)("div",{className:"form-group full-width",children:[(0,Lx.jsx)("label",{children:"Notes"}),(0,Lx.jsx)("textarea",{value:a.notes,onChange:e=>s(Me(Me({},a),{},{notes:e.target.value})),rows:3,placeholder:"Notes ou conditions particuli\xe8res..."})]})]})]}),(0,Lx.jsxs)("div",{className:"form-actions",children:[(0,Lx.jsx)("button",{type:"button",className:"cancel-btn",onClick:i,children:"Annuler"}),(0,Lx.jsxs)("button",{type:"submit",className:"save-btn",children:[(0,Lx.jsx)($G,{size:16}),t?"Mettre \xe0 jour":"Cr\xe9er le devis"]})]})]})]})})}function eY(){const{user:e}=Sx(),[t,n]=(0,r.useState)([]),[i,a]=(0,r.useState)(!1),[s,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)("all");(0,r.useEffect)(()=>{h()},[e]);const h=async()=>{const e=[{id:"1",quoteNumber:"DEV-2024-001",clientName:"Jean Dupont",clientEmail:"jean.dupont@email.com",clientPhone:"01 23 45 67 89",clientAddress:"123 Rue de la Paix, 75001 Paris",projectTitle:"R\xe9novation appartement",items:[{description:"Peinture salon",quantity:1,unitPrice:800,total:800},{description:"Parquet chambre",quantity:20,unitPrice:45,total:900}],subtotal:1700,taxRate:20,taxAmount:340,total:2040,validityDays:30,notes:"Devis valable 30 jours",status:"draft",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}];n(e)},p=()=>{o(null),a(!0)},m=t.filter(e=>{const t=e.clientName.toLowerCase().includes(l.toLowerCase())||e.projectTitle.toLowerCase().includes(l.toLowerCase())||e.quoteNumber.toLowerCase().includes(l.toLowerCase()),n="all"===u||e.status===u;return t&&n}),f=e=>{switch(e){case"draft":default:return"#6b7280";case"sent":return"#3b82f6";case"accepted":return"#10b981";case"rejected":return"#ef4444"}},g=e=>{switch(e){case"draft":return"Brouillon";case"sent":return"Envoy\xe9";case"accepted":return"Accept\xe9";case"rejected":return"Refus\xe9";default:return e}};return e?(0,Lx.jsxs)("div",{className:"quotes-page",children:[(0,Lx.jsxs)("div",{className:"quotes-header",children:[(0,Lx.jsxs)("div",{className:"header-content",children:[(0,Lx.jsx)("h1",{children:"Gestion des Devis"}),(0,Lx.jsxs)("button",{className:"create-quote-btn",onClick:p,children:[(0,Lx.jsx)(Hx,{size:20}),"Nouveau Devis"]})]}),(0,Lx.jsxs)("div",{className:"quotes-filters",children:[(0,Lx.jsxs)("div",{className:"search-box",children:[(0,Lx.jsx)(BG,{size:20}),(0,Lx.jsx)("input",{type:"text",placeholder:"Rechercher par client, projet ou num\xe9ro...",value:l,onChange:e=>c(e.target.value)})]}),(0,Lx.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"status-filter",children:[(0,Lx.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,Lx.jsx)("option",{value:"draft",children:"Brouillon"}),(0,Lx.jsx)("option",{value:"sent",children:"Envoy\xe9"}),(0,Lx.jsx)("option",{value:"accepted",children:"Accept\xe9"}),(0,Lx.jsx)("option",{value:"rejected",children:"Refus\xe9"})]})]})]}),(0,Lx.jsx)("div",{className:"quotes-list",children:0===m.length?(0,Lx.jsxs)("div",{className:"empty-state",children:[(0,Lx.jsx)(GK,{size:48}),(0,Lx.jsx)("h3",{children:"Aucun devis trouv\xe9"}),(0,Lx.jsx)("p",{children:"Cr\xe9ez votre premier devis pour commencer."}),(0,Lx.jsx)("button",{className:"create-first-quote-btn",onClick:p,children:"Cr\xe9er un devis"})]}):(0,Lx.jsx)("div",{className:"quotes-grid",children:m.map(e=>(0,Lx.jsxs)("div",{className:"quote-card",children:[(0,Lx.jsxs)("div",{className:"quote-header",children:[(0,Lx.jsxs)("div",{className:"quote-info",children:[(0,Lx.jsx)("h3",{children:e.quoteNumber}),(0,Lx.jsx)("p",{className:"client-name",children:e.clientName}),(0,Lx.jsx)("p",{className:"project-title",children:e.projectTitle})]}),(0,Lx.jsx)("div",{className:"quote-status",children:(0,Lx.jsx)("span",{className:"status-badge",style:{backgroundColor:f(e.status)},children:g(e.status)})})]}),(0,Lx.jsxs)("div",{className:"quote-details",children:[(0,Lx.jsxs)("div",{className:"quote-amount",children:[(0,Lx.jsxs)("span",{className:"amount",children:[e.total.toLocaleString("fr-FR")," \u20ac"]}),(0,Lx.jsx)("span",{className:"tax-info",children:"TTC"})]}),(0,Lx.jsxs)("div",{className:"quote-date",children:["Cr\xe9\xe9 le ",e.createdAt.toLocaleDateString("fr-FR")]})]}),(0,Lx.jsxs)("div",{className:"quote-actions",children:[(0,Lx.jsx)("button",{className:"action-btn view-btn",title:"Voir",children:(0,Lx.jsx)(PG,{size:16})}),(0,Lx.jsx)("button",{className:"action-btn edit-btn",onClick:()=>(e=>{o(e),a(!0)})(e),title:"Modifier",children:(0,Lx.jsx)(DG,{size:16})}),(0,Lx.jsx)("button",{className:"action-btn download-btn",title:"T\xe9l\xe9charger PDF",children:(0,Lx.jsx)(IG,{size:16})}),(0,Lx.jsx)("button",{className:"action-btn delete-btn",onClick:()=>(async e=>{window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce devis ?")&&n(t.filter(t=>t.id!==e))})(e.id),title:"Supprimer",children:(0,Lx.jsx)(eG,{size:16})})]})]},e.id))})}),i&&(0,Lx.jsx)(ZG,{quote:s,onSave:async e=>{if(s){const r=Me(Me(Me({},s),e),{},{updatedAt:new Date});n(t.map(e=>e.id===s.id?r:e))}else{const r=Me({id:Date.now().toString(),quoteNumber:"DEV-".concat((new Date).getFullYear(),"-").concat(String(t.length+1).padStart(3,"0")),createdAt:new Date,updatedAt:new Date,status:"draft"},e);n([...t,r])}a(!1)},onCancel:()=>a(!1)})]}):(0,Lx.jsx)("div",{className:"quotes-page",children:(0,Lx.jsxs)("div",{className:"auth-required",children:[(0,Lx.jsx)("h2",{children:"Connexion requise"}),(0,Lx.jsx)("p",{children:"Veuillez vous connecter pour acc\xe9der \xe0 la gestion des devis."})]})})}const tY={Peinture:25,Sol:35,Mur:30,"\xc9lectricit\xe9":45,Plomberie:50,Menuiserie:40,Autre:30};function nY(e){let{project:t,materials:n,roomTypes:i,workCategories:a,onSave:s,onCancel:o}=e;const[l,c]=(0,r.useState)({id:"",name:"",propertyType:"Appartement",totalSurface:0,rooms:[],workItems:[],totalMaterials:0,totalLabor:0,totalCost:0,margin:20,finalPrice:0,createdAt:new Date,updatedAt:new Date}),[u,d]=(0,r.useState)("");(0,r.useEffect)(()=>{t&&c(t)},[t]),(0,r.useEffect)(()=>{h()},[l.workItems,l.margin]);const h=()=>{const e=l.workItems.reduce((e,t)=>e+t.totalMaterial,0),t=l.workItems.reduce((e,t)=>e+t.totalLabor,0),n=e+t,r=n*(1+l.margin/100);c(i=>Me(Me({},i),{},{totalMaterials:e,totalLabor:t,totalCost:n,finalPrice:r}))},p=(e,t,r)=>{const i=[...l.workItems];i[e]=Me(Me({},i[e]),{},{[t]:r});const a=i[e];if("materialId"===t){const e=n.find(e=>e.id===r);e&&(a.materialPrice=e.pricePerUnit)}if("category"===t){a.laborRate=tY[r]||30;const e=n.filter(e=>e.category===r);e.length>0&&(a.materialId=e[0].id,a.materialPrice=e[0].pricePerUnit)}a.totalMaterial=a.surface*a.materialPrice,a.totalLabor=a.laborHours*a.laborRate,a.total=a.totalMaterial+a.totalLabor,c(e=>Me(Me({},e),{},{workItems:i}))};return(0,Lx.jsx)("div",{className:"work-calculator-overlay",children:(0,Lx.jsxs)("div",{className:"work-calculator-container",children:[(0,Lx.jsxs)("div",{className:"calculator-header",children:[(0,Lx.jsx)("h2",{children:t?"Modifier le projet":"Nouveau projet"}),(0,Lx.jsx)("button",{className:"close-btn",onClick:o,children:(0,Lx.jsx)(HK,{size:24})})]}),(0,Lx.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(l)},className:"calculator-form",children:[(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsx)("h3",{children:"Informations g\xe9n\xe9rales"}),(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Nom du projet *"}),(0,Lx.jsx)("input",{type:"text",value:l.name,onChange:e=>c(t=>Me(Me({},t),{},{name:e.target.value})),required:!0})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Type de bien"}),(0,Lx.jsxs)("select",{value:l.propertyType,onChange:e=>c(t=>Me(Me({},t),{},{propertyType:e.target.value})),children:[(0,Lx.jsx)("option",{value:"Appartement",children:"Appartement"}),(0,Lx.jsx)("option",{value:"Maison",children:"Maison"}),(0,Lx.jsx)("option",{value:"Studio",children:"Studio"}),(0,Lx.jsx)("option",{value:"Loft",children:"Loft"}),(0,Lx.jsx)("option",{value:"Bureau",children:"Bureau"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Surface totale (m\xb2)"}),(0,Lx.jsx)("input",{type:"number",value:l.totalSurface,onChange:e=>c(t=>Me(Me({},t),{},{totalSurface:parseFloat(e.target.value)||0})),min:"0",step:"0.1"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Marge (%)"}),(0,Lx.jsx)("input",{type:"number",value:l.margin,onChange:e=>c(t=>Me(Me({},t),{},{margin:parseFloat(e.target.value)||0})),min:"0",max:"100",step:"0.1"})]})]})]}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsxs)("div",{className:"section-header",children:[(0,Lx.jsx)("h3",{children:"Pi\xe8ces"}),(0,Lx.jsxs)("div",{className:"add-room-controls",children:[(0,Lx.jsxs)("select",{value:u,onChange:e=>d(e.target.value),children:[(0,Lx.jsx)("option",{value:"",children:"S\xe9lectionner une pi\xe8ce"}),i.map(e=>(0,Lx.jsx)("option",{value:e,children:e},e))]}),(0,Lx.jsxs)("button",{type:"button",className:"add-room-btn",onClick:()=>{u&&!l.rooms.includes(u)&&(c(e=>Me(Me({},e),{},{rooms:[...e.rooms,u]})),d(""))},children:[(0,Lx.jsx)(Hx,{size:16}),"Ajouter"]})]})]}),(0,Lx.jsx)("div",{className:"rooms-list",children:l.rooms.map((e,t)=>(0,Lx.jsxs)("div",{className:"room-item",children:[(0,Lx.jsx)(Bx,{size:16}),(0,Lx.jsx)("span",{children:e}),(0,Lx.jsx)("button",{type:"button",className:"remove-room-btn",onClick:()=>(e=>{c(t=>Me(Me({},t),{},{rooms:t.rooms.filter(t=>t!==e),workItems:t.workItems.filter(t=>t.room!==e)}))})(e),children:(0,Lx.jsx)(eG,{size:14})})]},t))})]}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsxs)("div",{className:"section-header",children:[(0,Lx.jsx)("h3",{children:"Travaux"}),(0,Lx.jsxs)("button",{type:"button",className:"add-work-btn",onClick:()=>{var e;const t={id:Date.now().toString(),room:l.rooms[0]||"",category:"Peinture",description:"",surface:0,materialId:(null===(e=n.find(e=>"Peinture"===e.category))||void 0===e?void 0:e.id)||"",materialPrice:0,laborHours:0,laborRate:tY.Peinture,totalMaterial:0,totalLabor:0,total:0};c(e=>Me(Me({},e),{},{workItems:[...e.workItems,t]}))},children:[(0,Lx.jsx)(Hx,{size:16}),"Ajouter un poste"]})]}),(0,Lx.jsxs)("div",{className:"work-items-table",children:[(0,Lx.jsxs)("div",{className:"table-header",children:[(0,Lx.jsx)("div",{className:"col-room",children:"Pi\xe8ce"}),(0,Lx.jsx)("div",{className:"col-category",children:"Cat\xe9gorie"}),(0,Lx.jsx)("div",{className:"col-description",children:"Description"}),(0,Lx.jsx)("div",{className:"col-surface",children:"Surface"}),(0,Lx.jsx)("div",{className:"col-material",children:"Mat\xe9riau"}),(0,Lx.jsx)("div",{className:"col-labor",children:"Main d'\u0153uvre"}),(0,Lx.jsx)("div",{className:"col-total",children:"Total"}),(0,Lx.jsx)("div",{className:"col-actions",children:"Actions"})]}),l.workItems.map((e,t)=>{return(0,Lx.jsxs)("div",{className:"table-row",children:[(0,Lx.jsx)("div",{className:"col-room",children:(0,Lx.jsx)("select",{value:e.room,onChange:e=>p(t,"room",e.target.value),children:l.rooms.map(e=>(0,Lx.jsx)("option",{value:e,children:e},e))})}),(0,Lx.jsx)("div",{className:"col-category",children:(0,Lx.jsx)("select",{value:e.category,onChange:e=>p(t,"category",e.target.value),children:a.map(e=>(0,Lx.jsx)("option",{value:e,children:e},e))})}),(0,Lx.jsx)("div",{className:"col-description",children:(0,Lx.jsx)("input",{type:"text",value:e.description,onChange:e=>p(t,"description",e.target.value),placeholder:"Description du travail"})}),(0,Lx.jsx)("div",{className:"col-surface",children:(0,Lx.jsx)("input",{type:"number",value:e.surface,onChange:e=>p(t,"surface",parseFloat(e.target.value)||0),min:"0",step:"0.1",placeholder:"m\xb2"})}),(0,Lx.jsxs)("div",{className:"col-material",children:[(0,Lx.jsx)("select",{value:e.materialId,onChange:e=>p(t,"materialId",e.target.value),children:(r=e.category,n.filter(e=>e.category===r)).map(e=>(0,Lx.jsxs)("option",{value:e.id,children:[e.name," (",e.pricePerUnit,"\u20ac/",e.unit,")"]},e.id))}),(0,Lx.jsxs)("div",{className:"material-cost",children:[e.totalMaterial.toFixed(2)," \u20ac"]})]}),(0,Lx.jsxs)("div",{className:"col-labor",children:[(0,Lx.jsxs)("div",{className:"labor-inputs",children:[(0,Lx.jsx)("input",{type:"number",value:e.laborHours,onChange:e=>p(t,"laborHours",parseFloat(e.target.value)||0),min:"0",step:"0.5",placeholder:"Heures"}),(0,Lx.jsxs)("span",{children:["h \xd7 ",e.laborRate,"\u20ac/h"]})]}),(0,Lx.jsxs)("div",{className:"labor-cost",children:[e.totalLabor.toFixed(2)," \u20ac"]})]}),(0,Lx.jsx)("div",{className:"col-total",children:(0,Lx.jsxs)("strong",{children:[e.total.toFixed(2)," \u20ac"]})}),(0,Lx.jsx)("div",{className:"col-actions",children:(0,Lx.jsx)("button",{type:"button",className:"remove-item-btn",onClick:()=>(e=>{c(t=>Me(Me({},t),{},{workItems:t.workItems.filter((t,n)=>n!==e)}))})(t),children:(0,Lx.jsx)(eG,{size:16})})})]},e.id);var r})]})]}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsx)("h3",{children:"R\xe9capitulatif des co\xfbts"}),(0,Lx.jsxs)("div",{className:"cost-summary",children:[(0,Lx.jsxs)("div",{className:"cost-breakdown",children:[(0,Lx.jsxs)("div",{className:"cost-row",children:[(0,Lx.jsx)("span",{children:"Mat\xe9riaux:"}),(0,Lx.jsxs)("span",{children:[l.totalMaterials.toFixed(2)," \u20ac"]})]}),(0,Lx.jsxs)("div",{className:"cost-row",children:[(0,Lx.jsx)("span",{children:"Main d'\u0153uvre:"}),(0,Lx.jsxs)("span",{children:[l.totalLabor.toFixed(2)," \u20ac"]})]}),(0,Lx.jsxs)("div",{className:"cost-row subtotal",children:[(0,Lx.jsx)("span",{children:"Sous-total:"}),(0,Lx.jsxs)("span",{children:[l.totalCost.toFixed(2)," \u20ac"]})]}),(0,Lx.jsxs)("div",{className:"cost-row",children:[(0,Lx.jsxs)("span",{children:["Marge (",l.margin,"%):"]}),(0,Lx.jsxs)("span",{children:[(l.finalPrice-l.totalCost).toFixed(2)," \u20ac"]})]}),(0,Lx.jsxs)("div",{className:"cost-row total",children:[(0,Lx.jsx)("span",{children:"Prix final:"}),(0,Lx.jsxs)("span",{children:[l.finalPrice.toFixed(2)," \u20ac"]})]})]}),(0,Lx.jsx)("div",{className:"cost-per-sqm",children:l.totalSurface>0&&(0,Lx.jsxs)("div",{className:"sqm-cost",children:[(0,Lx.jsx)("span",{children:"Co\xfbt au m\xb2:"}),(0,Lx.jsxs)("span",{children:[(l.finalPrice/l.totalSurface).toFixed(2)," \u20ac/m\xb2"]})]})})]})]}),(0,Lx.jsxs)("div",{className:"form-actions",children:[(0,Lx.jsx)("button",{type:"button",className:"cancel-btn",onClick:o,children:"Annuler"}),(0,Lx.jsxs)("button",{type:"submit",className:"save-btn",children:[(0,Lx.jsx)($K,{size:16}),t?"Mettre \xe0 jour":"Cr\xe9er le projet"]})]})]})]})})}const rY=[{id:"1",name:"Peinture acrylique standard",category:"Peinture",unit:"m\xb2",pricePerUnit:8.5,description:"Peinture murale blanche ou couleur"},{id:"2",name:"Peinture glyc\xe9ro haut de gamme",category:"Peinture",unit:"m\xb2",pricePerUnit:12,description:"Peinture lessivable premium"},{id:"3",name:"Sous-couche universelle",category:"Peinture",unit:"m\xb2",pricePerUnit:6,description:"Pr\xe9paration avant peinture"},{id:"4",name:"Peinture magn\xe9tique",category:"Peinture",unit:"m\xb2",pricePerUnit:18.5,description:"Peinture aimant\xe9e pour murs cr\xe9atifs"},{id:"5",name:"Peinture ardoise",category:"Peinture",unit:"m\xb2",pricePerUnit:16,description:"Peinture tableau noir"},{id:"6",name:"Peinture anti-humidit\xe9",category:"Peinture",unit:"m\xb2",pricePerUnit:14.5,description:"Peinture sp\xe9ciale pi\xe8ces humides"},{id:"7",name:"Parquet stratifi\xe9",category:"Sol",unit:"m\xb2",pricePerUnit:25,description:"Stratifi\xe9 aspect bois"},{id:"8",name:"Parquet massif ch\xeane",category:"Sol",unit:"m\xb2",pricePerUnit:65,description:"Parquet massif premium"},{id:"9",name:"Parquet contrecoll\xe9",category:"Sol",unit:"m\xb2",pricePerUnit:45,description:"Parquet 3 plis qualit\xe9"},{id:"10",name:"Carrelage standard",category:"Sol",unit:"m\xb2",pricePerUnit:30,description:"Carrelage gr\xe8s c\xe9rame"},{id:"11",name:"Carrelage haut de gamme",category:"Sol",unit:"m\xb2",pricePerUnit:55,description:"Carrelage grand format"},{id:"12",name:"Carrelage imitation parquet",category:"Sol",unit:"m\xb2",pricePerUnit:42,description:"Carrelage effet bois"},{id:"13",name:"Moquette r\xe9sidentielle",category:"Sol",unit:"m\xb2",pricePerUnit:18,description:"Moquette standard"},{id:"14",name:"Moquette haut de gamme",category:"Sol",unit:"m\xb2",pricePerUnit:35,description:"Moquette \xe9paisse premium"},{id:"15",name:"Sol PVC clipsable",category:"Sol",unit:"m\xb2",pricePerUnit:22,description:"Lames PVC clipsables"},{id:"16",name:"B\xe9ton cir\xe9",category:"Sol",unit:"m\xb2",pricePerUnit:85,description:"B\xe9ton cir\xe9 d\xe9coratif"},{id:"17",name:"R\xe9sine \xe9poxy",category:"Sol",unit:"m\xb2",pricePerUnit:75,description:"Sol r\xe9sine moderne"},{id:"18",name:"Papier peint standard",category:"Mur",unit:"m\xb2",pricePerUnit:15,description:"Papier peint d\xe9coratif"},{id:"19",name:"Papier peint premium",category:"Mur",unit:"m\xb2",pricePerUnit:35,description:"Papier peint textur\xe9"},{id:"20",name:"Papier peint panoramique",category:"Mur",unit:"m\xb2",pricePerUnit:65,description:"Papier peint sur mesure"},{id:"21",name:"Carrelage mural",category:"Mur",unit:"m\xb2",pricePerUnit:25,description:"Fa\xefence salle de bain"},{id:"22",name:"Carrelage m\xe9tro",category:"Mur",unit:"m\xb2",pricePerUnit:32,description:"Carrelage style m\xe9tro parisien"},{id:"23",name:"Lambris bois",category:"Mur",unit:"m\xb2",pricePerUnit:28,description:"Lambris pin ou sapin"},{id:"24",name:"Parement pierre",category:"Mur",unit:"m\xb2",pricePerUnit:45,description:"Plaquettes de parement"},{id:"25",name:"Enduit d\xe9coratif",category:"Mur",unit:"m\xb2",pricePerUnit:22,description:"Enduit \xe0 effet"},{id:"26",name:"Point luminaire",category:"\xc9lectricit\xe9",unit:"unit\xe9",pricePerUnit:45,description:"Installation point \xe9clairage"},{id:"27",name:"Prise \xe9lectrique",category:"\xc9lectricit\xe9",unit:"unit\xe9",pricePerUnit:35,description:"Prise 16A standard"},{id:"28",name:"Prise USB",category:"\xc9lectricit\xe9",unit:"unit\xe9",pricePerUnit:55,description:"Prise avec ports USB"},{id:"29",name:"Interrupteur simple",category:"\xc9lectricit\xe9",unit:"unit\xe9",pricePerUnit:25,description:"Interrupteur va-et-vient"},{id:"30",name:"Interrupteur connect\xe9",category:"\xc9lectricit\xe9",unit:"unit\xe9",pricePerUnit:85,description:"Interrupteur domotique"},{id:"31",name:"Variateur LED",category:"\xc9lectricit\xe9",unit:"unit\xe9",pricePerUnit:65,description:"Variateur pour LED"},{id:"32",name:"Spot encastrable",category:"\xc9lectricit\xe9",unit:"unit\xe9",pricePerUnit:38,description:"Spot LED encastr\xe9"},{id:"33",name:"Bandeau LED",category:"\xc9lectricit\xe9",unit:"m\xe8tre",pricePerUnit:25,description:"\xc9clairage LED d\xe9coratif"},{id:"34",name:"Robinetterie standard",category:"Plomberie",unit:"unit\xe9",pricePerUnit:85,description:"Mitigeur lavabo/\xe9vier"},{id:"35",name:"Robinetterie haut de gamme",category:"Plomberie",unit:"unit\xe9",pricePerUnit:180,description:"Mitigeur design"},{id:"36",name:"Robinetterie thermostatique",category:"Plomberie",unit:"unit\xe9",pricePerUnit:220,description:"Mitigeur thermostatique douche"},{id:"37",name:"\xc9vacuation douche",category:"Plomberie",unit:"unit\xe9",pricePerUnit:125,description:"Bonde et siphon douche"},{id:"38",name:"WC suspendu",category:"Plomberie",unit:"unit\xe9",pricePerUnit:350,description:"WC suspendu avec b\xe2ti"},{id:"39",name:"Lavabo design",category:"Plomberie",unit:"unit\xe9",pricePerUnit:280,description:"Vasque moderne"},{id:"40",name:"Porte int\xe9rieure standard",category:"Menuiserie",unit:"unit\xe9",pricePerUnit:120,description:"Porte postform\xe9e"},{id:"41",name:"Porte int\xe9rieure premium",category:"Menuiserie",unit:"unit\xe9",pricePerUnit:280,description:"Porte bois massif"},{id:"42",name:"Porte coulissante",category:"Menuiserie",unit:"unit\xe9",pricePerUnit:320,description:"Porte \xe0 galandage"},{id:"43",name:"Cloison amovible",category:"Menuiserie",unit:"m\xb2",pricePerUnit:85,description:"Cloison modulaire"},{id:"44",name:"Fen\xeatre PVC",category:"Menuiserie",unit:"m\xb2",pricePerUnit:250,description:"Fen\xeatre double vitrage"},{id:"45",name:"Fen\xeatre aluminium",category:"Menuiserie",unit:"m\xb2",pricePerUnit:380,description:"Fen\xeatre alu haut de gamme"},{id:"46",name:"Volet roulant",category:"Menuiserie",unit:"m\xb2",pricePerUnit:180,description:"Volet roulant \xe9lectrique"},{id:"47",name:"Placard sur mesure",category:"Menuiserie",unit:"m\xb2",pricePerUnit:450,description:"Placard int\xe9gr\xe9"},{id:"48",name:"Isolation laine de verre",category:"Isolation",unit:"m\xb2",pricePerUnit:12,description:"Isolation thermique standard"},{id:"49",name:"Isolation laine de roche",category:"Isolation",unit:"m\xb2",pricePerUnit:15,description:"Isolation phonique renforc\xe9e"},{id:"50",name:"Isolation \xe9cologique",category:"Isolation",unit:"m\xb2",pricePerUnit:22,description:"Isolation chanvre/lin"},{id:"51",name:"Cloison placo",category:"Isolation",unit:"m\xb2",pricePerUnit:35,description:"Cloison BA13 standard"},{id:"52",name:"Cloison phonique",category:"Isolation",unit:"m\xb2",pricePerUnit:55,description:"Cloison isolation acoustique"},{id:"53",name:"Radiateur \xe9lectrique",category:"Chauffage",unit:"unit\xe9",pricePerUnit:180,description:"Radiateur inertie"},{id:"54",name:"Radiateur design",category:"Chauffage",unit:"unit\xe9",pricePerUnit:350,description:"Radiateur d\xe9coratif"},{id:"55",name:"Plancher chauffant",category:"Chauffage",unit:"m\xb2",pricePerUnit:65,description:"Chauffage au sol \xe9lectrique"},{id:"56",name:"S\xe8che-serviettes",category:"Chauffage",unit:"unit\xe9",pricePerUnit:220,description:"Radiateur salle de bain"},{id:"57",name:"Syst\xe8me domotique",category:"Domotique",unit:"unit\xe9",pricePerUnit:450,description:"Box domotique compl\xe8te"},{id:"58",name:"D\xe9tecteur mouvement",category:"Domotique",unit:"unit\xe9",pricePerUnit:85,description:"Capteur de pr\xe9sence"},{id:"59",name:"Thermostat connect\xe9",category:"Domotique",unit:"unit\xe9",pricePerUnit:180,description:"Thermostat intelligent"},{id:"60",name:"Cam\xe9ra s\xe9curit\xe9",category:"Domotique",unit:"unit\xe9",pricePerUnit:120,description:"Cam\xe9ra IP int\xe9rieure"}],iY=["Salon","Cuisine","Chambre","Salle de bain","WC","Entr\xe9e","Couloir","Bureau","Dressing","Buanderie","Cave","Garage"],aY=["Peinture","Sol","Mur","\xc9lectricit\xe9","Plomberie","Menuiserie","Isolation","Chauffage","Domotique","Autre"],sY={Studio:{defaultRooms:["Studio","Salle de bain","Entr\xe9e"],averageSize:25,commonWorks:[{category:"Peinture",description:"Peinture murs et plafond",estimatedHours:8},{category:"Sol",description:"Rev\xeatement sol principal",estimatedHours:6},{category:"\xc9lectricit\xe9",description:"Points luminaires",estimatedHours:4}]},T2:{defaultRooms:["Salon","Chambre","Cuisine","Salle de bain","Entr\xe9e"],averageSize:45,commonWorks:[{category:"Peinture",description:"Peinture compl\xe8te",estimatedHours:16},{category:"Sol",description:"Parquet salon/chambre",estimatedHours:12},{category:"Sol",description:"Carrelage salle de bain",estimatedHours:8},{category:"\xc9lectricit\xe9",description:"\xc9clairage moderne",estimatedHours:8}]},T3:{defaultRooms:["Salon","Chambre 1","Chambre 2","Cuisine","Salle de bain","WC","Entr\xe9e"],averageSize:65,commonWorks:[{category:"Peinture",description:"Peinture toutes pi\xe8ces",estimatedHours:24},{category:"Sol",description:"Parquet pi\xe8ces principales",estimatedHours:18},{category:"Sol",description:"Carrelage pi\xe8ces d'eau",estimatedHours:12},{category:"\xc9lectricit\xe9",description:"Modernisation \xe9lectrique",estimatedHours:12},{category:"Plomberie",description:"Robinetterie moderne",estimatedHours:6}]},Maison:{defaultRooms:["Salon","Cuisine","Chambre 1","Chambre 2","Chambre 3","Salle de bain","WC","Entr\xe9e","Couloir"],averageSize:120,commonWorks:[{category:"Peinture",description:"Peinture int\xe9rieure compl\xe8te",estimatedHours:40},{category:"Sol",description:"Parquet \xe9tage",estimatedHours:25},{category:"Sol",description:"Carrelage RDC",estimatedHours:20},{category:"\xc9lectricit\xe9",description:"Mise aux normes \xe9lectrique",estimatedHours:20},{category:"Plomberie",description:"R\xe9novation sanitaires",estimatedHours:12},{category:"Chauffage",description:"Radiateurs modernes",estimatedHours:8}]}},oY={Salon:1,Chambre:1,Cuisine:1.3,"Salle de bain":1.5,WC:1.2,"Entr\xe9e":1.1,Couloir:1.1,Bureau:1,Dressing:1.2,Buanderie:1.3,Cave:.8,Garage:.7,Studio:1},lY={Peinture:{spring:0,summer:5,autumn:0,winter:-5},Sol:{spring:0,summer:0,autumn:0,winter:0},Mur:{spring:0,summer:0,autumn:0,winter:0},"\xc9lectricit\xe9":{spring:0,summer:0,autumn:0,winter:0},Plomberie:{spring:0,summer:0,autumn:0,winter:10},Menuiserie:{spring:0,summer:0,autumn:0,winter:0},Isolation:{spring:0,summer:-10,autumn:5,winter:15},Chauffage:{spring:-15,summer:-20,autumn:10,winter:20},Domotique:{spring:0,summer:0,autumn:0,winter:0}},cY=e=>{var t;const n=(new Date).getMonth();return(null===(t=lY[e])||void 0===t?void 0:t[n>=2&&n<=4?"spring":n>=5&&n<=7?"summer":n>=8&&n<=10?"autumn":"winter"])||0};function uY(){const{user:e}=Sx(),[t,n]=(0,r.useState)([]),[i,a]=(0,r.useState)(null),[s,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)("");(0,r.useEffect)(()=>{u()},[e]);const u=async()=>{const e=[{id:"1",name:"Appartement T3 - R\xe9novation compl\xe8te",propertyType:"Appartement",totalSurface:75,rooms:["Salon","Cuisine","Chambre 1","Chambre 2","Salle de bain"],workItems:[],totalMaterials:0,totalLabor:0,totalCost:0,margin:20,finalPrice:0,createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}];n(e)},d=()=>{const e={id:Date.now().toString(),name:"Nouveau projet",propertyType:"Appartement",totalSurface:0,rooms:[],workItems:[],totalMaterials:0,totalLabor:0,totalCost:0,margin:20,finalPrice:0,createdAt:new Date,updatedAt:new Date};a(e),o(!0)};return e?(0,Lx.jsxs)("div",{className:"homestaging-page",children:[(0,Lx.jsxs)("div",{className:"homestaging-header",children:[(0,Lx.jsxs)("div",{className:"header-content",children:[(0,Lx.jsxs)("div",{className:"header-info",children:[(0,Lx.jsx)("h1",{children:"Calculateur Home Staging"}),(0,Lx.jsx)("p",{children:"Estimez pr\xe9cis\xe9ment vos co\xfbts de travaux et mat\xe9riaux"})]}),(0,Lx.jsx)("div",{className:"header-actions",children:(0,Lx.jsxs)("button",{className:"create-project-btn",onClick:d,children:[(0,Lx.jsx)(Hx,{size:20}),"Nouveau Projet"]})})]}),(0,Lx.jsxs)("div",{className:"project-templates",children:[(0,Lx.jsx)("h3",{children:"Cr\xe9er \xe0 partir d'un mod\xe8le"}),(0,Lx.jsx)("div",{className:"templates-grid",children:Object.keys(sY).map(e=>{const t=sY[e];return(0,Lx.jsxs)("div",{className:"template-card",onClick:()=>(e=>{const t=sY[e];if(!t)return;const n={id:Date.now().toString(),name:"".concat(e," - ").concat((new Date).toLocaleDateString("fr-FR")),propertyType:e,totalSurface:t.averageSize,rooms:[...t.defaultRooms],workItems:t.commonWorks.map((e,n)=>{var r,i;return{id:"".concat(Date.now(),"-").concat(n),room:t.defaultRooms[0],category:e.category,description:e.description,surface:Math.floor(t.averageSize/t.defaultRooms.length),materialId:(null===(r=rY.find(t=>t.category===e.category))||void 0===r?void 0:r.id)||"",materialPrice:(null===(i=rY.find(t=>t.category===e.category))||void 0===i?void 0:i.pricePerUnit)||0,laborHours:e.estimatedHours,laborRate:30,totalMaterial:0,totalLabor:0,total:0}}),totalMaterials:0,totalLabor:0,totalCost:0,margin:20,finalPrice:0,createdAt:new Date,updatedAt:new Date};a(n),o(!0)})(e),children:[(0,Lx.jsxs)("div",{className:"template-info",children:[(0,Lx.jsx)("h4",{children:e}),(0,Lx.jsxs)("p",{children:[t.averageSize,"m\xb2 \u2022 ",t.defaultRooms.length," pi\xe8ces"]}),(0,Lx.jsxs)("span",{className:"template-works",children:[t.commonWorks.length," postes de travaux"]})]}),(0,Lx.jsx)("div",{className:"template-action",children:(0,Lx.jsx)(Hx,{size:16})})]},e)})})]})]}),(0,Lx.jsxs)("div",{className:"projects-section",children:[(0,Lx.jsx)("h2",{children:"Mes Projets"}),0===t.length?(0,Lx.jsxs)("div",{className:"empty-projects",children:[(0,Lx.jsx)($G,{size:48}),(0,Lx.jsx)("h3",{children:"Aucun projet cr\xe9\xe9"}),(0,Lx.jsx)("p",{children:"Cr\xe9ez votre premier projet pour commencer \xe0 calculer vos co\xfbts de home staging."}),(0,Lx.jsxs)("button",{className:"create-first-project-btn",onClick:d,children:[(0,Lx.jsx)(Hx,{size:16}),"Cr\xe9er mon premier projet"]})]}):(0,Lx.jsx)("div",{className:"projects-grid",children:t.map(e=>(0,Lx.jsxs)("div",{className:"project-card",children:[(0,Lx.jsxs)("div",{className:"project-header",children:[(0,Lx.jsxs)("div",{className:"project-info",children:[(0,Lx.jsx)("h3",{children:e.name}),(0,Lx.jsxs)("p",{className:"project-type",children:[e.propertyType," - ",e.totalSurface,"m\xb2"]}),(0,Lx.jsxs)("p",{className:"project-rooms",children:[e.rooms.length," pi\xe8ces"]})]}),(0,Lx.jsxs)("div",{className:"project-cost",children:[(0,Lx.jsxs)("span",{className:"cost-amount",children:[e.finalPrice.toLocaleString("fr-FR")," \u20ac"]}),(0,Lx.jsx)("span",{className:"cost-label",children:"Prix final"})]})]}),(0,Lx.jsxs)("div",{className:"project-details",children:[(0,Lx.jsxs)("div",{className:"cost-breakdown",children:[(0,Lx.jsxs)("div",{className:"cost-item",children:[(0,Lx.jsx)("span",{className:"cost-type",children:"Mat\xe9riaux:"}),(0,Lx.jsxs)("span",{className:"cost-value",children:[e.totalMaterials.toLocaleString("fr-FR")," \u20ac"]})]}),(0,Lx.jsxs)("div",{className:"cost-item",children:[(0,Lx.jsx)("span",{className:"cost-type",children:"Main d'\u0153uvre:"}),(0,Lx.jsxs)("span",{className:"cost-value",children:[e.totalLabor.toLocaleString("fr-FR")," \u20ac"]})]}),(0,Lx.jsxs)("div",{className:"cost-item",children:[(0,Lx.jsxs)("span",{className:"cost-type",children:["Marge (",e.margin,"%):"]}),(0,Lx.jsxs)("span",{className:"cost-value",children:[(e.finalPrice-e.totalCost).toLocaleString("fr-FR")," \u20ac"]})]})]}),(0,Lx.jsxs)("div",{className:"project-date",children:["Modifi\xe9 le ",e.updatedAt.toLocaleDateString("fr-FR")]})]}),(0,Lx.jsxs)("div",{className:"project-actions",children:[(0,Lx.jsxs)("button",{className:"action-btn edit-btn",onClick:()=>(e=>{a(e),o(!0)})(e),title:"Modifier",children:[(0,Lx.jsx)($G,{size:16}),"Calculer"]}),(0,Lx.jsx)("button",{className:"action-btn export-btn",onClick:()=>(e=>{console.log("Export project:",e)})(e),title:"Exporter",children:(0,Lx.jsx)(IG,{size:16})}),(0,Lx.jsx)("button",{className:"action-btn save-btn",title:"Sauvegarder",children:(0,Lx.jsx)($K,{size:16})}),(0,Lx.jsx)("button",{className:"action-btn delete-btn",onClick:()=>{return r=e.id,void(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce projet ?")&&n(t.filter(e=>e.id!==r)));var r},title:"Supprimer",children:(0,Lx.jsx)(eG,{size:16})})]})]},e.id))})]}),(0,Lx.jsxs)("div",{className:"materials-reference",children:[(0,Lx.jsx)("h2",{children:"R\xe9f\xe9rentiel des Prix"}),(0,Lx.jsx)("div",{className:"seasonal-info",children:(0,Lx.jsxs)("p",{children:[" ",(0,Lx.jsx)("strong",{children:"Variations saisonni\xe8res actives"})," - Les prix affich\xe9s incluent les variations de saison en cours"]})}),(0,Lx.jsx)("div",{className:"materials-categories",children:aY.filter(e=>"Autre"!==e).map(e=>(0,Lx.jsxs)("div",{className:"material-category",children:[(0,Lx.jsxs)("div",{className:"category-header",children:[(0,Lx.jsx)("h3",{children:e}),0!==cY(e)&&(0,Lx.jsxs)("span",{className:"seasonal-badge ".concat(cY(e)>0?"increase":"decrease"),children:[cY(e)>0?"+":"",cY(e),"%"]})]}),(0,Lx.jsx)("div",{className:"materials-list",children:rY.filter(t=>t.category===e).map(e=>{const t=(e=>{const t=cY(e.category);return e.pricePerUnit*(1+t/100)})(e),n=t!==e.pricePerUnit;return(0,Lx.jsxs)("div",{className:"material-item",children:[(0,Lx.jsxs)("div",{className:"material-info",children:[(0,Lx.jsx)("span",{className:"material-name",children:e.name}),(0,Lx.jsx)("span",{className:"material-description",children:e.description})]}),(0,Lx.jsxs)("div",{className:"material-price",children:[n&&(0,Lx.jsxs)("span",{className:"original-price",children:[e.pricePerUnit.toFixed(2)," \u20ac"]}),(0,Lx.jsxs)("span",{className:n?"adjusted-price":"",children:[t.toFixed(2)," \u20ac/",e.unit]})]})]},e.id)})})]},e))}),(0,Lx.jsxs)("div",{className:"difficulty-coefficients",children:[(0,Lx.jsx)("h3",{children:"Coefficients de difficult\xe9 par pi\xe8ce"}),(0,Lx.jsx)("div",{className:"coefficients-grid",children:Object.entries(oY).map(e=>{let[t,n]=e;return(0,Lx.jsxs)("div",{className:"coefficient-item",children:[(0,Lx.jsx)("span",{className:"room-name",children:t}),(0,Lx.jsxs)("span",{className:"coefficient ".concat(n>1?"difficult":n<1?"easy":"normal"),children:["\xd7",n]})]},t)})}),(0,Lx.jsx)("p",{className:"coefficient-note",children:"Ces coefficients s'appliquent automatiquement au temps de main d'\u0153uvre selon la complexit\xe9 de chaque pi\xe8ce."})]})]}),s&&(0,Lx.jsx)(nY,{project:i,materials:rY,roomTypes:iY,workCategories:aY,onSave:e=>{t.find(t=>t.id===e.id)?n(t.map(t=>t.id===e.id?Me(Me({},e),{},{updatedAt:new Date}):t)):n([...t,e]),o(!1),a(null)},onCancel:()=>{o(!1),a(null)}})]}):(0,Lx.jsx)("div",{className:"homestaging-page",children:(0,Lx.jsxs)("div",{className:"auth-required",children:[(0,Lx.jsx)(Bx,{size:48}),(0,Lx.jsx)("h2",{children:"Connexion requise"}),(0,Lx.jsx)("p",{children:"Veuillez vous connecter pour acc\xe9der au calculateur de home staging."})]})})}const dY=Px("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),hY=Px("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),pY=Px("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),mY=Px("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),fY=Px("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);function gY(e){let{images:t,currentIndex:n,isOpen:i,onClose:a,onNavigate:s}=e;const[o,l]=(0,r.useState)(1),[c,u]=(0,r.useState)(0),[d,h]=(0,r.useState)({x:0,y:0}),[p,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)({x:0,y:0}),v=t[n];(0,r.useEffect)(()=>{l(1),u(0),h({x:0,y:0})},[n]);const y=(0,r.useCallback)(e=>{if(i)switch(e.key){case"Escape":a();break;case"ArrowLeft":n>0&&s(n-1);break;case"ArrowRight":n<t.length-1&&s(n+1);break;case"+":case"=":l(e=>Math.min(e+.25,3));break;case"-":l(e=>Math.max(e-.25,.25));break;case"0":l(1),h({x:0,y:0}),u(0)}},[i,n,t.length,a,s]);(0,r.useEffect)(()=>(document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)),[y]);const x=()=>{m(!1)};return i&&v?(0,Lx.jsx)("div",{className:"image-viewer-overlay",onClick:a,children:(0,Lx.jsxs)("div",{className:"image-viewer-container",onClick:e=>e.stopPropagation(),children:[(0,Lx.jsxs)("div",{className:"image-viewer-header",children:[(0,Lx.jsxs)("div",{className:"image-info",children:[(0,Lx.jsx)("h3",{children:v.name}),(0,Lx.jsxs)("span",{className:"image-counter",children:[n+1," / ",t.length]})]}),(0,Lx.jsxs)("div",{className:"image-controls",children:[(0,Lx.jsx)("button",{onClick:()=>l(e=>Math.max(e-.25,.25)),title:"Zoom arri\xe8re (-)",children:(0,Lx.jsx)(pY,{size:20})}),(0,Lx.jsxs)("span",{className:"zoom-level",children:[Math.round(100*o),"%"]}),(0,Lx.jsx)("button",{onClick:()=>l(e=>Math.min(e+.25,3)),title:"Zoom avant (+)",children:(0,Lx.jsx)(mY,{size:20})}),(0,Lx.jsx)("button",{onClick:()=>u(e=>(e+90)%360),title:"Rotation",children:(0,Lx.jsx)(fY,{size:20})}),(0,Lx.jsx)("button",{onClick:async()=>{if(v)try{const e=await fetch(v.url),t=await e.blob(),n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=v.name,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)}catch(e){console.error("Erreur lors du t\xe9l\xe9chargement:",e)}},title:"T\xe9l\xe9charger",children:(0,Lx.jsx)(IG,{size:20})}),(0,Lx.jsx)("button",{onClick:()=>{l(1),u(0),h({x:0,y:0})},title:"R\xe9initialiser (0)",children:"R\xe9initialiser"}),(0,Lx.jsx)("button",{onClick:a,className:"close-btn",title:"Fermer (\xc9chap)",children:(0,Lx.jsx)(HK,{size:24})})]})]}),n>0&&(0,Lx.jsx)("button",{className:"nav-btn nav-prev",onClick:()=>{n>0&&s(n-1)},title:"Image pr\xe9c\xe9dente (\u2190)",children:(0,Lx.jsx)(gG,{size:32})}),n<t.length-1&&(0,Lx.jsx)("button",{className:"nav-btn nav-next",onClick:()=>{n<t.length-1&&s(n+1)},title:"Image suivante (\u2192)",children:(0,Lx.jsx)(hG,{size:32})}),(0,Lx.jsx)("div",{className:"image-viewer-content",onWheel:e=>{e.preventDefault();const t=e.deltaY>0?-.1:.1;l(e=>Math.max(.25,Math.min(3,e+t)))},onMouseDown:e=>{o>1&&(m(!0),g({x:e.clientX-d.x,y:e.clientY-d.y}))},onMouseMove:e=>{p&&o>1&&h({x:e.clientX-f.x,y:e.clientY-f.y})},onMouseUp:x,onMouseLeave:x,style:{cursor:o>1?p?"grabbing":"grab":"default"},children:(0,Lx.jsx)("img",{src:v.url,alt:v.name,className:"viewer-image",style:{transform:"translate(".concat(d.x,"px, ").concat(d.y,"px) scale(").concat(o,") rotate(").concat(c,"deg)"),transition:p?"none":"transform 0.2s ease"},draggable:!1})}),(0,Lx.jsxs)("div",{className:"image-viewer-footer",children:[(0,Lx.jsxs)("div",{className:"image-metadata",children:[(0,Lx.jsxs)("span",{className:"metadata-item",children:["Type: ",v.type]}),(0,Lx.jsxs)("span",{className:"metadata-item",children:["Date: ",v.uploadDate.toLocaleDateString("fr-FR")]}),v.description&&(0,Lx.jsxs)("span",{className:"metadata-item",children:["Description: ",v.description]})]}),(0,Lx.jsx)("div",{className:"keyboard-shortcuts",children:(0,Lx.jsx)("small",{children:"Raccourcis: \u2190 \u2192 (navigation) | + - (zoom) | 0 (r\xe9initialiser) | \xc9chap (fermer)"})})]}),(0,Lx.jsx)("div",{className:"image-thumbnails",children:t.map((e,t)=>(0,Lx.jsx)("div",{className:"thumbnail ".concat(t===n?"active":""),onClick:()=>s(t),children:(0,Lx.jsx)("img",{src:e.url,alt:e.name})},e.id))})]})}):null}const vY=[{id:"all",label:"Tous",icon:qG},{id:"Architecture",label:"Architecture",icon:Bx},{id:"Design",label:"Design",icon:dY},{id:"Motion",label:"Motion",icon:RG},{id:"Photos",label:"Photos",icon:jG},{id:"Plans",label:"Plans",icon:GK},{id:"Home staging",label:"Home staging",icon:Bx}];function yY(){const{user:e}=Sx(),[t,n]=(0,r.useState)([]),[i,a]=(0,r.useState)([]),[s,o]=(0,r.useState)("all"),[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)({}),[m,f]=(0,r.useState)(!1),[g,v]=(0,r.useState)([]),y=(0,r.useRef)(null),[x,b]=(0,r.useState)(!1),[j,w]=(0,r.useState)(0);(0,r.useEffect)(()=>{N()},[e]),(0,r.useEffect)(()=>{a("all"===s?t:t.filter(e=>e.type===s))},[t,s]);const N=async()=>{if(e)try{const t=Ah(Fd(kx,"media"),Ph("userId","==",e.uid)),r=(await Yh(t)).docs.map(e=>{var t;return Me(Me({id:e.id},e.data()),{},{uploadDate:(null===(t=e.data().uploadDate)||void 0===t?void 0:t.toDate())||new Date})});n(r)}catch(t){console.error("Erreur lors du chargement des m\xe9dias:",t)}finally{c(!1)}},k=e=>{switch(e){case"video":return hY;case"document":return GK;default:return jG}},C=e=>e.type.startsWith("image/")?"image":e.type.startsWith("video/")?"video":"document",S=()=>{var e;null===(e=y.current)||void 0===e||e.click()},E=()=>{g.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)}),v([]),f(!1)},T=i.filter(e=>"image"===e.fileType);return l?(0,Lx.jsxs)("div",{className:"page-container",children:[(0,Lx.jsx)("h1",{className:"page-title",children:"M\xe9dia"}),(0,Lx.jsx)("div",{className:"loading",children:"Chargement de la galerie..."})]}):(0,Lx.jsxs)("div",{className:"page-container",children:[(0,Lx.jsx)("h1",{className:"page-title",children:"M\xe9dia"}),(0,Lx.jsxs)("div",{className:"media-header",children:[(0,Lx.jsxs)("div",{className:"media-stats",children:[(0,Lx.jsxs)("div",{className:"stat",children:[(0,Lx.jsx)("span",{className:"stat-value",children:t.length}),(0,Lx.jsx)("span",{className:"stat-label",children:"Fichiers total"})]}),(0,Lx.jsxs)("div",{className:"stat",children:[(0,Lx.jsx)("span",{className:"stat-value",children:i.length}),(0,Lx.jsx)("span",{className:"stat-label",children:"Affich\xe9s"})]})]}),(0,Lx.jsxs)("button",{className:"upload-btn",onClick:S,disabled:u,children:[(0,Lx.jsx)(VG,{size:20}),u?"Upload en cours...":"Ajouter des m\xe9dias"]})]}),(0,Lx.jsx)("div",{className:"media-filters",children:vY.map(e=>{const n=e.icon,r="all"===e.id?t.length:t.filter(t=>t.type===e.id).length;return(0,Lx.jsxs)("button",{className:"filter-btn ".concat(s===e.id?"active":""),onClick:()=>o(e.id),children:[(0,Lx.jsx)(n,{size:18}),(0,Lx.jsx)("span",{children:e.label}),(0,Lx.jsx)("span",{className:"filter-count",children:r})]},e.id)})}),(0,Lx.jsx)("div",{className:"media-gallery",children:0===i.length?(0,Lx.jsxs)("div",{className:"empty-state",children:[(0,Lx.jsx)("div",{className:"empty-icon",children:(0,Lx.jsx)(jG,{size:64})}),(0,Lx.jsx)("h3",{children:"Aucun m\xe9dia trouv\xe9"}),(0,Lx.jsx)("p",{children:"all"===s?"Commencez par ajouter vos premiers m\xe9dias \xe0 la galerie.":'Aucun m\xe9dia de type "'.concat(s,'" trouv\xe9.')}),(0,Lx.jsxs)("button",{className:"upload-btn",onClick:S,disabled:u,children:[(0,Lx.jsx)(VG,{size:20}),u?"Upload en cours...":"Ajouter des m\xe9dias"]})]}):(0,Lx.jsx)("div",{className:"gallery-grid",children:i.map((e,t)=>{const n=k(e.fileType);return(0,Lx.jsxs)("div",{className:"media-card",children:[(0,Lx.jsxs)("div",{className:"media-preview",onClick:()=>"image"===e.fileType?(e=>{const t=i.filter(e=>"image"===e.fileType).findIndex(t=>t.id===i[e].id);-1!==t&&(w(t),b(!0))})(t):void 0,style:{cursor:"image"===e.fileType?"pointer":"default"},children:["image"===e.fileType?(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsx)("img",{src:e.url,alt:e.name}),(0,Lx.jsx)("div",{className:"image-overlay-icon",children:(0,Lx.jsx)(PG,{size:24})})]}):(0,Lx.jsx)("div",{className:"file-placeholder",children:(0,Lx.jsx)(n,{size:32})}),(0,Lx.jsx)("div",{className:"media-overlay",children:(0,Lx.jsx)("span",{className:"media-type",children:e.type})})]}),(0,Lx.jsxs)("div",{className:"media-info",children:[(0,Lx.jsx)("h4",{className:"media-name",children:e.name}),e.description&&(0,Lx.jsx)("p",{className:"media-description",children:e.description}),(0,Lx.jsx)("div",{className:"media-meta",children:(0,Lx.jsx)("span",{className:"upload-date",children:e.uploadDate.toLocaleDateString("fr-FR")})})]})]},e.id)})})}),x&&T.length>0&&(0,Lx.jsx)(gY,{images:T,currentIndex:j,isOpen:x,onClose:()=>{b(!1)},onNavigate:e=>{w(e)}}),(0,Lx.jsx)("input",{ref:y,type:"file",multiple:!0,accept:"image/*,video/*,.pdf,.doc,.docx,.txt",onChange:async t=>{const n=t.target.files;if(!n||!e)return;const r=[];for(const e of Array.from(n)){const t=e.type.startsWith("image/")?URL.createObjectURL(e):"";r.push({file:e,preview:t,type:"Photos"})}v(r),f(!0),y.current&&(y.current.value="")},style:{display:"none"}}),m&&(0,Lx.jsx)("div",{className:"upload-modal-overlay",children:(0,Lx.jsxs)("div",{className:"upload-modal",children:[(0,Lx.jsxs)("div",{className:"upload-modal-header",children:[(0,Lx.jsxs)("h3",{children:["Confirmer l'import de ",g.length," fichier(s)"]}),(0,Lx.jsx)("button",{className:"close-btn",onClick:E,children:(0,Lx.jsx)(HK,{size:20})})]}),(0,Lx.jsx)("div",{className:"upload-modal-content",children:g.map((e,t)=>(0,Lx.jsxs)("div",{className:"pending-file-item",children:[(0,Lx.jsx)("div",{className:"file-preview",children:e.preview?(0,Lx.jsx)("img",{src:e.preview,alt:e.file.name}):(0,Lx.jsx)("div",{className:"file-placeholder",children:r.createElement(k(C(e.file)),{size:32})})}),(0,Lx.jsxs)("div",{className:"file-info",children:[(0,Lx.jsx)("h4",{children:e.file.name}),(0,Lx.jsxs)("p",{children:[(e.file.size/1024/1024).toFixed(2)," MB"]}),(0,Lx.jsxs)("div",{className:"file-type-selector",children:[(0,Lx.jsx)("label",{children:"Type:"}),(0,Lx.jsxs)("select",{value:e.type,onChange:e=>((e,t)=>{v(n=>n.map((n,r)=>r===e?Me(Me({},n),{},{type:t}):n))})(t,e.target.value),children:[(0,Lx.jsx)("option",{value:"Architecture",children:"Architecture"}),(0,Lx.jsx)("option",{value:"Design",children:"Design"}),(0,Lx.jsx)("option",{value:"Motion",children:"Motion"}),(0,Lx.jsx)("option",{value:"Photos",children:"Photos"}),(0,Lx.jsx)("option",{value:"Plans",children:"Plans"}),(0,Lx.jsx)("option",{value:"Home staging",children:"Home staging"})]})]})]})]},t))}),(0,Lx.jsxs)("div",{className:"upload-modal-actions",children:[(0,Lx.jsxs)("button",{className:"cancel-btn",onClick:E,children:[(0,Lx.jsx)(HK,{size:18}),"Annuler"]}),(0,Lx.jsxs)("button",{className:"confirm-btn",onClick:async()=>{if(!e||0===g.length)return;d(!0),f(!1);const t=g.map(async t=>{try{const n="".concat(Date.now(),"_").concat(t.file.name),r=bx(Cx,"media/".concat(e.uid,"/").concat(n)),i=await yx(r,t.file),a=await xx(i.ref),s={name:t.file.name,type:t.type,url:a,fileType:C(t.file),userId:e.uid,uploadDate:new ch("serverTimestamp"),size:t.file.size,fileName:n};return await $h(Fd(kx,"media"),s),Me(Me({id:n},s),{},{uploadDate:new Date})}catch(n){throw console.error("Erreur lors de l'upload:",n),n}});try{await Promise.all(t),await N()}catch(n){console.error("Erreur lors de l'upload des fichiers:",n)}finally{d(!1),v([]),g.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)})}},children:[(0,Lx.jsx)(qK,{size:18}),"Confirmer l'import"]})]})]})})]})}const xY=Px("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),bY=Px("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),jY=Px("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),wY=Px("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),NY=Px("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),kY=Px("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),CY=Px("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),SY=Px("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),EY=Px("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),TY=Px("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);function _Y(e){let{isOpen:t,onClose:n,platform:i,existingAccount:a,onAccountUpdated:s}=e;const{user:o}=Sx(),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[m,f]=(0,r.useState)({username:(null===a||void 0===a?void 0:a.username)||"",accessToken:"",refreshToken:""});if(!t||!i)return null;const g=async()=>{if(o&&m.username.trim()){c(!0),d("");try{const e=Math.floor(1e4*Math.random())+100,t={userId:o.uid,platform:i.id,username:m.username,followers:e,isConnected:!0,accessToken:m.accessToken||"mock_access_token",refreshToken:m.refreshToken||"mock_refresh_token",connectedAt:new Date,lastSync:new Date};a?(await Xh(Ud(kx,"socialAccounts",a.id),t),p("Compte ".concat(i.name," mis \xe0 jour avec succ\xe8s !"))):(await $h(Fd(kx,"socialAccounts"),t),p("Compte ".concat(i.name," connect\xe9 avec succ\xe8s !"))),setTimeout(()=>{s(),n(),p(""),f({username:"",accessToken:"",refreshToken:""})},2e3)}catch(u){console.error("Erreur lors de la connexion:",u),d("Erreur lors de la connexion. Veuillez r\xe9essayer.")}finally{c(!1)}}else d("Veuillez renseigner le nom d'utilisateur")},v=i.icon;return(0,Lx.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,Lx.jsxs)("div",{className:"social-connect-modal",onClick:e=>e.stopPropagation(),children:[(0,Lx.jsxs)("div",{className:"modal-header",children:[(0,Lx.jsxs)("div",{className:"platform-info",children:[(0,Lx.jsx)(v,{size:32,style:{color:i.color}}),(0,Lx.jsxs)("div",{children:[(0,Lx.jsxs)("h2",{children:[a?"G\xe9rer":"Connecter"," ",i.name]}),(0,Lx.jsx)("p",{children:a?"Modifiez ou d\xe9connectez votre compte":"Connectez votre compte ".concat(i.name," pour commencer \xe0 publier")})]})]}),(0,Lx.jsx)("button",{className:"close-btn",onClick:n,children:(0,Lx.jsx)(HK,{size:24})})]}),(0,Lx.jsxs)("div",{className:"modal-content",children:[u&&(0,Lx.jsxs)("div",{className:"alert error",children:[(0,Lx.jsx)(EY,{size:20}),(0,Lx.jsx)("span",{children:u})]}),h&&(0,Lx.jsxs)("div",{className:"alert success",children:[(0,Lx.jsx)(LG,{size:20}),(0,Lx.jsx)("span",{children:h})]}),a&&(0,Lx.jsxs)("div",{className:"current-account",children:[(0,Lx.jsx)("h3",{children:"Compte actuel"}),(0,Lx.jsxs)("div",{className:"account-details",children:[(0,Lx.jsx)("p",{children:(0,Lx.jsxs)("strong",{children:["@",a.username]})}),(0,Lx.jsxs)("p",{children:[a.followers.toLocaleString()," abonn\xe9s"]}),(0,Lx.jsx)("span",{className:"status connected",children:"Connect\xe9"})]})]}),(0,Lx.jsxs)("div",{className:"connect-methods",children:[(0,Lx.jsxs)("div",{className:"oauth-section",children:[(0,Lx.jsx)("h3",{children:"Connexion OAuth (Recommand\xe9e)"}),(0,Lx.jsxs)("p",{children:["Connectez-vous de mani\xe8re s\xe9curis\xe9e via ",i.name]}),(0,Lx.jsx)("button",{className:"oauth-btn",onClick:()=>{d(""),c(!0),setTimeout(()=>{const e="user_".concat(Math.random().toString(36).substr(2,8));f(t=>Me(Me({},t),{},{username:e,accessToken:"oauth_access_token_"+Date.now(),refreshToken:"oauth_refresh_token_"+Date.now()})),c(!1),p("Authentification OAuth r\xe9ussie ! Vous pouvez maintenant connecter le compte.")},2e3)},disabled:l,style:{backgroundColor:i.color},children:l?(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsx)(TY,{size:20,className:"spinning"}),"Connexion en cours..."]}):(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsx)(v,{size:20}),"Se connecter avec ",i.name]})})]}),(0,Lx.jsx)("div",{className:"divider",children:(0,Lx.jsx)("span",{children:"ou"})}),(0,Lx.jsxs)("div",{className:"manual-section",children:[(0,Lx.jsx)("h3",{children:"Connexion manuelle"}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"username",children:"Nom d'utilisateur"}),(0,Lx.jsx)("input",{id:"username",type:"text",value:m.username,onChange:e=>f(t=>Me(Me({},t),{},{username:e.target.value})),placeholder:"Votre nom d'utilisateur ".concat(i.name),disabled:l})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"accessToken",children:"Token d'acc\xe8s (optionnel)"}),(0,Lx.jsx)("input",{id:"accessToken",type:"password",value:m.accessToken,onChange:e=>f(t=>Me(Me({},t),{},{accessToken:e.target.value})),placeholder:"Token d'acc\xe8s API",disabled:l})]}),(0,Lx.jsx)("div",{className:"api-info",children:(0,Lx.jsxs)("p",{children:[(0,Lx.jsx)("strong",{children:"Note :"})," Pour une int\xe9gration compl\xe8te, vous devrez obtenir un token d'acc\xe8s depuis les param\xe8tres d\xe9veloppeur de ",i.name,"."]})})]})]})]}),(0,Lx.jsx)("div",{className:"modal-actions",children:a?(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsx)("button",{className:"disconnect-btn",onClick:async()=>{if(a){c(!0),d("");try{await Jh(Ud(kx,"socialAccounts",a.id)),p("Compte ".concat(i.name," d\xe9connect\xe9 avec succ\xe8s !")),setTimeout(()=>{s(),n(),p("")},2e3)}catch(u){console.error("Erreur lors de la d\xe9connexion:",u),d("Erreur lors de la d\xe9connexion. Veuillez r\xe9essayer.")}finally{c(!1)}}},disabled:l,children:l?(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsx)(TY,{size:18,className:"spinning"}),"D\xe9connexion..."]}):"D\xe9connecter"}),(0,Lx.jsx)("button",{className:"update-btn",onClick:g,disabled:l||!m.username.trim(),children:l?(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsx)(TY,{size:18,className:"spinning"}),"Mise \xe0 jour..."]}):"Mettre \xe0 jour"})]}):(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsx)("button",{className:"cancel-btn",onClick:n,disabled:l,children:"Annuler"}),(0,Lx.jsx)("button",{className:"connect-btn",onClick:g,disabled:l||!m.username.trim(),children:l?(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsx)(TY,{size:18,className:"spinning"}),"Connexion..."]}):"Connecter"})]})})]})})}const AY=Px("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),IY=[{id:"facebook",name:"Facebook",icon:bY,color:"#1877F2",emoji:"\ud83d\udcd8",formats:[{name:"Photo de profil",dimensions:"320 \xd7 320",safeZone:"280 \xd7 280",description:"Zone centrale visible"},{name:"Photo de couverture (page)",dimensions:"1200 \xd7 630",safeZone:"1080 \xd7 540",description:"\xc9viter les bords"},{name:"Publication carr\xe9e",dimensions:"1080 \xd7 1080",performance:"good"},{name:"Publication horizontale",dimensions:"1200 \xd7 630",performance:"standard"},{name:"Story",dimensions:"1080 \xd7 1920",safeZone:"1080 \xd7 1680",description:"Zone de s\xe9curit\xe9 haut/bas"},{name:"Vid\xe9o Reels",dimensions:"1080 \xd7 1920",performance:"best"}],tips:["Privil\xe9gier le format vertical pour plus d'engagement","Texte important dans la zone de s\xe9curit\xe9","Ratio 9:16 optimal pour les Reels"]},{id:"instagram",name:"Instagram",icon:xY,color:"#E4405F",emoji:"\ud83d\udcf8",formats:[{name:"Photo de profil",dimensions:"320 \xd7 320",safeZone:"280 \xd7 280",description:"Cercle visible"},{name:"Publication carr\xe9e",dimensions:"1080 \xd7 1080",performance:"good"},{name:"Publication portrait",dimensions:"1080 \xd7 1350",performance:"best",description:"Le plus performant en 2025 \ud83d\ude80"},{name:"Publication paysage",dimensions:"1080 \xd7 608",performance:"standard"},{name:"Stories & Reels",dimensions:"1080 \xd7 1920",safeZone:"1080 \xd7 1680",performance:"best"}],tips:["Format portrait 4:5 recommand\xe9 pour plus de visibilit\xe9","Stories : zone de s\xe9curit\xe9 120px haut/bas","Reels : contenu principal au centre"]},{id:"twitter",name:"X (ex-Twitter)",icon:jY,color:"#1DA1F2",emoji:"\ud83d\udc26",formats:[{name:"Photo de profil",dimensions:"400 \xd7 400",safeZone:"360 \xd7 360",description:"Cercle de recadrage"},{name:"Image dans un post",dimensions:"1200 \xd7 675",performance:"good"},{name:"Image carr\xe9e",dimensions:"1200 \xd7 1200",performance:"good"},{name:"Image verticale",dimensions:"1080 \xd7 1350",performance:"best",description:"Mieux affich\xe9e en 2025"},{name:"Banni\xe8re de profil",dimensions:"1500 \xd7 500",safeZone:"1350 \xd7 450",description:"Zone centrale visible"}],tips:["Format vertical prend plus de place dans le feed","\xc9viter le texte important sur les bords de la banni\xe8re","Ratio 16:9 pour les vid\xe9os"]},{id:"linkedin",name:"LinkedIn",icon:wY,color:"#0A66C2",emoji:"\ud83d\udcbc",formats:[{name:"Photo de profil",dimensions:"400 \xd7 400",safeZone:"360 \xd7 360",description:"Cercle professionnel"},{name:"Photo de couverture (profil)",dimensions:"1584 \xd7 396",safeZone:"1400 \xd7 300",description:"Zone centrale"},{name:"Image post carr\xe9e",dimensions:"1200 \xd7 1200",performance:"best"},{name:"Image post paysage",dimensions:"1200 \xd7 627",performance:"good"},{name:"Banni\xe8re entreprise",dimensions:"1128 \xd7 191",safeZone:"1000 \xd7 150",description:"Logo au centre"}],tips:["Format carr\xe9 privil\xe9gi\xe9 pour les posts","Contenu professionnel et \xe9pur\xe9","\xc9viter les \xe9l\xe9ments d\xe9coratifs excessifs"]},{id:"youtube",name:"YouTube",icon:NY,color:"#FF0000",emoji:"\u25b6\ufe0f",formats:[{name:"Photo de profil",dimensions:"800 \xd7 800",safeZone:"720 \xd7 720",description:"Cercle visible"},{name:"Banni\xe8re de cha\xeene",dimensions:"2560 \xd7 1440",safeZone:"1546 \xd7 423",description:"Zone mobile visible"},{name:"Miniature vid\xe9o",dimensions:"1280 \xd7 720",safeZone:"1200 \xd7 680",description:"Ratio 16:9 obligatoire"}],tips:["Miniatures : texte lisible m\xeame en petit","Banni\xe8re : zone de s\xe9curit\xe9 mobile cruciale","Contraste \xe9lev\xe9 pour les miniatures"]}],PY=[{name:"TikTok",emoji:"\ud83c\udfb5",formats:[{name:"Photo de profil",dimensions:"200 \xd7 200"},{name:"Vid\xe9o / Post",dimensions:"1080 \xd7 1920",performance:"best"},{name:"Image carrousel",dimensions:"1080 \xd7 1920"},{name:"Miniature vid\xe9o",dimensions:"1080 \xd7 1920"}]},{name:"Pinterest",emoji:"\ud83d\udccc",formats:[{name:"Photo de profil",dimensions:"240 \xd7 240"},{name:"\xc9pingles",dimensions:"1000 \xd7 1500",description:"Ratio 2:3 recommand\xe9",performance:"best"},{name:"\xc9pingles vid\xe9o",dimensions:"1080 \xd7 1920"},{name:"Banni\xe8re de profil",dimensions:"800 \xd7 450"}]}];function OY(){const[e,t]=(0,r.useState)("instagram"),[n,i]=(0,r.useState)(""),a=(e,t)=>{navigator.clipboard.writeText(e),i(t),setTimeout(()=>i(""),2e3)},s=IY.find(t=>t.id===e);return(0,Lx.jsxs)("div",{className:"formats-guide",children:[(0,Lx.jsx)("div",{className:"guide-header",children:(0,Lx.jsxs)("div",{className:"header-content",children:[(0,Lx.jsx)(kY,{size:24}),(0,Lx.jsxs)("div",{children:[(0,Lx.jsx)("h2",{children:"Guide des formats r\xe9seaux sociaux"}),(0,Lx.jsx)("p",{children:"Dimensions optimales avec marges de s\xe9curit\xe9 pour graphistes"})]})]})}),(0,Lx.jsx)("div",{className:"platform-selector",children:IY.map(n=>{const r=n.icon;return(0,Lx.jsxs)("button",{className:"platform-tab ".concat(e===n.id?"active":""),onClick:()=>t(n.id),style:{"--platform-color":n.color},children:[(0,Lx.jsx)("span",{className:"platform-emoji",children:n.emoji}),(0,Lx.jsx)(r,{size:20}),(0,Lx.jsx)("span",{children:n.name})]},n.id)})}),s&&(0,Lx.jsxs)("div",{className:"platform-details",children:[(0,Lx.jsx)("div",{className:"platform-header",children:(0,Lx.jsxs)("div",{className:"platform-title",children:[(0,Lx.jsx)("span",{className:"platform-emoji-large",children:s.emoji}),(0,Lx.jsx)("h3",{children:s.name})]})}),(0,Lx.jsx)("div",{className:"formats-grid",children:s.formats.map((e,t)=>(0,Lx.jsxs)("div",{className:"format-card",children:[(0,Lx.jsxs)("div",{className:"format-header",children:[(0,Lx.jsx)("h4",{children:e.name}),e.performance&&(0,Lx.jsxs)("span",{className:"performance-badge ".concat(e.performance),children:["best"===e.performance&&"\ud83d\ude80 Top","good"===e.performance&&"\ud83d\udc4d Bon","standard"===e.performance&&"\ud83d\udcca Standard"]})]}),(0,Lx.jsxs)("div",{className:"dimensions-section",children:[(0,Lx.jsxs)("div",{className:"dimension-item",children:[(0,Lx.jsx)("span",{className:"dimension-label",children:"Dimensions"}),(0,Lx.jsxs)("div",{className:"dimension-value",children:[(0,Lx.jsx)("span",{className:"dimension-text",children:e.dimensions}),(0,Lx.jsx)("button",{className:"copy-btn",onClick:()=>a(e.dimensions,e.name),title:"Copier les dimensions",children:n===e.name?(0,Lx.jsx)(LG,{size:16}):(0,Lx.jsx)(AY,{size:16})})]})]}),e.safeZone&&(0,Lx.jsxs)("div",{className:"dimension-item safe-zone",children:[(0,Lx.jsx)("span",{className:"dimension-label",children:"Zone de s\xe9curit\xe9"}),(0,Lx.jsxs)("div",{className:"dimension-value",children:[(0,Lx.jsx)("span",{className:"dimension-text",children:e.safeZone}),(0,Lx.jsx)("button",{className:"copy-btn",onClick:()=>a(e.safeZone,"".concat(e.name," - Zone")),title:"Copier la zone de s\xe9curit\xe9",children:n==="".concat(e.name," - Zone")?(0,Lx.jsx)(LG,{size:16}):(0,Lx.jsx)(AY,{size:16})})]})]})]}),e.description&&(0,Lx.jsxs)("div",{className:"format-description",children:[(0,Lx.jsx)(bG,{size:14}),(0,Lx.jsx)("span",{children:e.description})]})]},t))}),s.tips&&(0,Lx.jsxs)("div",{className:"platform-tips",children:[(0,Lx.jsxs)("h4",{children:["\ud83d\udca1 Conseils pour ",s.name]}),(0,Lx.jsx)("ul",{children:s.tips.map((e,t)=>(0,Lx.jsx)("li",{children:e},t))})]})]}),(0,Lx.jsxs)("div",{className:"additional-platforms",children:[(0,Lx.jsx)("h3",{children:"Autres plateformes"}),(0,Lx.jsx)("div",{className:"additional-grid",children:PY.map((e,t)=>(0,Lx.jsxs)("div",{className:"additional-platform",children:[(0,Lx.jsxs)("div",{className:"additional-header",children:[(0,Lx.jsx)("span",{className:"platform-emoji",children:e.emoji}),(0,Lx.jsx)("h4",{children:e.name})]}),(0,Lx.jsx)("div",{className:"additional-formats",children:e.formats.map((t,r)=>(0,Lx.jsxs)("div",{className:"additional-format",children:[(0,Lx.jsx)("span",{className:"format-name",children:t.name}),(0,Lx.jsxs)("div",{className:"format-dimensions",children:[(0,Lx.jsx)("span",{children:t.dimensions}),(0,Lx.jsx)("button",{className:"copy-btn small",onClick:()=>a(t.dimensions,"".concat(e.name," - ").concat(t.name)),children:n==="".concat(e.name," - ").concat(t.name)?(0,Lx.jsx)(LG,{size:12}):(0,Lx.jsx)(AY,{size:12})})]}),t.description&&(0,Lx.jsx)("span",{className:"format-note",children:t.description})]},r))})]},t))})]}),(0,Lx.jsxs)("div",{className:"golden-rules",children:[(0,Lx.jsx)("h3",{children:"\ud83d\udc49 R\xe8gles d'or 2025"}),(0,Lx.jsxs)("div",{className:"rules-grid",children:[(0,Lx.jsxs)("div",{className:"rule-card",children:[(0,Lx.jsx)("h4",{children:"\ud83d\udcf1 Format vertical"}),(0,Lx.jsxs)("p",{children:["Toujours privil\xe9gier le ",(0,Lx.jsx)("strong",{children:"1080 \xd7 1920"})," pour Stories, Reels, Shorts et TikToks."]})]}),(0,Lx.jsxs)("div",{className:"rule-card",children:[(0,Lx.jsx)("h4",{children:"\u2b1c Format carr\xe9"}),(0,Lx.jsxs)("p",{children:["Le ",(0,Lx.jsx)("strong",{children:"1080 \xd7 1080"})," reste une valeur s\xfbre pour tous les r\xe9seaux."]})]}),(0,Lx.jsxs)("div",{className:"rule-card",children:[(0,Lx.jsx)("h4",{children:"\ud83d\udcca Format portrait"}),(0,Lx.jsxs)("p",{children:["Le ",(0,Lx.jsx)("strong",{children:"1080 \xd7 1350"})," sur Instagram et X donne plus de visibilit\xe9."]})]}),(0,Lx.jsxs)("div",{className:"rule-card",children:[(0,Lx.jsx)("h4",{children:"\ud83d\udee1\ufe0f Zones de s\xe9curit\xe9"}),(0,Lx.jsx)("p",{children:"Toujours respecter les marges pour \xe9viter les recadrages automatiques."})]})]})]})]})}const DY=[{id:"instagram",name:"Instagram",icon:xY,color:"#E4405F"},{id:"facebook",name:"Facebook",icon:bY,color:"#1877F2"},{id:"twitter",name:"Twitter",icon:jY,color:"#1DA1F2"},{id:"linkedin",name:"LinkedIn",icon:wY,color:"#0A66C2"},{id:"youtube",name:"YouTube",icon:NY,color:"#FF0000"}];function MY(){const{user:e}=Sx(),[t,n]=(0,r.useState)([]),[i,a]=(0,r.useState)([]),[s,o]=(0,r.useState)("overview"),[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[m,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{g()},[e]);const g=async()=>{if(e)try{const t=Ah(Fd(kx,"socialPosts"),Ph("userId","==",e.uid)),r=(await Yh(t)).docs.map(e=>{var t,n;return Me(Me({id:e.id},e.data()),{},{scheduledDate:null===(t=e.data().scheduledDate)||void 0===t?void 0:t.toDate(),publishedDate:null===(n=e.data().publishedDate)||void 0===n?void 0:n.toDate()})}),i=Ah(Fd(kx,"socialAccounts"),Ph("userId","==",e.uid)),s=(await Yh(i)).docs.map(e=>Me({id:e.id},e.data()));n(r),a(s)}catch(t){console.error("Erreur lors du chargement des donn\xe9es sociales:",t)}finally{c(!1)}},v=e=>{const t=DY.find(t=>t.id===e),n=i.find(t=>t.platform===e);p(t||null),f(n||null),d(!0)};if(l)return(0,Lx.jsxs)("div",{className:"page-container",children:[(0,Lx.jsx)("h1",{className:"page-title",children:"R\xe9seaux Sociaux"}),(0,Lx.jsx)("div",{className:"loading",children:"Chargement des donn\xe9es sociales..."})]});const y=(()=>{const e=i.reduce((e,t)=>e+t.followers,0),n=t.length,r=t.filter(e=>"published"===e.status).reduce((e,t)=>{const n=t.metrics||{};return e+(n.likes||0)+(n.comments||0)+(n.shares||0)},0);return{totalFollowers:e,totalPosts:n,totalEngagement:r}})();return(0,Lx.jsxs)("div",{className:"page-container",children:[(0,Lx.jsx)("h1",{className:"page-title",children:"R\xe9seaux Sociaux"}),(0,Lx.jsxs)("div",{className:"social-tabs",children:[(0,Lx.jsxs)("button",{className:"tab-btn ".concat("overview"===s?"active":""),onClick:()=>o("overview"),children:[(0,Lx.jsx)(Rx,{size:18}),"Vue d'ensemble"]}),(0,Lx.jsxs)("button",{className:"tab-btn ".concat("posts"===s?"active":""),onClick:()=>o("posts"),children:[(0,Lx.jsx)(Ox,{size:18}),"Publications"]}),(0,Lx.jsxs)("button",{className:"tab-btn ".concat("analytics"===s?"active":""),onClick:()=>o("analytics"),children:[(0,Lx.jsx)(Yx,{size:18}),"Analytiques"]}),(0,Lx.jsxs)("button",{className:"tab-btn ".concat("accounts"===s?"active":""),onClick:()=>o("accounts"),children:[(0,Lx.jsx)(Wx,{size:18}),"Comptes"]}),(0,Lx.jsxs)("button",{className:"tab-btn ".concat("formats"===s?"active":""),onClick:()=>o("formats"),children:[(0,Lx.jsx)(kY,{size:18}),"Formats"]})]}),"overview"===s&&(0,Lx.jsxs)("div",{className:"overview-section",children:[(0,Lx.jsxs)("div",{className:"metrics-grid",children:[(0,Lx.jsxs)("div",{className:"metric-card",children:[(0,Lx.jsx)("div",{className:"metric-icon",children:(0,Lx.jsx)(Wx,{size:24})}),(0,Lx.jsxs)("div",{className:"metric-content",children:[(0,Lx.jsx)("span",{className:"metric-value",children:y.totalFollowers.toLocaleString()}),(0,Lx.jsx)("span",{className:"metric-label",children:"Abonn\xe9s total"})]})]}),(0,Lx.jsxs)("div",{className:"metric-card",children:[(0,Lx.jsx)("div",{className:"metric-icon",children:(0,Lx.jsx)(Ox,{size:24})}),(0,Lx.jsxs)("div",{className:"metric-content",children:[(0,Lx.jsx)("span",{className:"metric-value",children:y.totalPosts}),(0,Lx.jsx)("span",{className:"metric-label",children:"Publications"})]})]}),(0,Lx.jsxs)("div",{className:"metric-card",children:[(0,Lx.jsx)("div",{className:"metric-icon",children:(0,Lx.jsx)(CY,{size:24})}),(0,Lx.jsxs)("div",{className:"metric-content",children:[(0,Lx.jsx)("span",{className:"metric-value",children:y.totalEngagement.toLocaleString()}),(0,Lx.jsx)("span",{className:"metric-label",children:"Engagement total"})]})]}),(0,Lx.jsxs)("div",{className:"metric-card",children:[(0,Lx.jsx)("div",{className:"metric-icon",children:(0,Lx.jsx)(Mx,{size:24})}),(0,Lx.jsxs)("div",{className:"metric-content",children:[(0,Lx.jsx)("span",{className:"metric-value",children:t.filter(e=>"scheduled"===e.status).length}),(0,Lx.jsx)("span",{className:"metric-label",children:"Posts programm\xe9s"})]})]})]}),(0,Lx.jsxs)("div",{className:"platforms-overview",children:[(0,Lx.jsx)("h3",{children:"Comptes connect\xe9s"}),(0,Lx.jsx)("div",{className:"platforms-grid",children:DY.map(e=>{const t=i.find(t=>t.platform===e.id),n=e.icon;return(0,Lx.jsxs)("div",{className:"platform-card",children:[(0,Lx.jsxs)("div",{className:"platform-header",children:[(0,Lx.jsx)(n,{size:24,style:{color:e.color}}),(0,Lx.jsx)("span",{className:"platform-name",children:e.name})]}),t?(0,Lx.jsxs)("div",{className:"platform-stats",children:[(0,Lx.jsxs)("span",{className:"username",children:["@",t.username]}),(0,Lx.jsxs)("span",{className:"followers",children:[t.followers.toLocaleString()," abonn\xe9s"]}),(0,Lx.jsx)("button",{className:"disconnect-btn-small",onClick:()=>(async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer cette connexion ?"))try{await Jh(Ud(kx,"socialAccounts",e)),g()}catch(t){console.error("Erreur lors de la suppression:",t),alert("Erreur lors de la suppression de la connexion")}})(t.id),title:"Supprimer la connexion",children:"\xd7"})]}):(0,Lx.jsxs)("div",{className:"platform-disconnected",children:[(0,Lx.jsx)("span",{children:"Non connect\xe9"}),(0,Lx.jsx)("button",{className:"connect-btn",onClick:()=>v(e.id),children:"Connecter"})]})]},e.id)})})]})]}),"posts"===s&&(0,Lx.jsxs)("div",{className:"posts-section",children:[(0,Lx.jsxs)("div",{className:"posts-header",children:[(0,Lx.jsx)("h3",{children:"Gestion des publications"}),(0,Lx.jsxs)("button",{className:"create-post-btn",children:[(0,Lx.jsx)(Hx,{size:20}),"Nouvelle publication"]})]}),0===t.length?(0,Lx.jsxs)("div",{className:"empty-state",children:[(0,Lx.jsx)(Ox,{size:64}),(0,Lx.jsx)("h3",{children:"Aucune publication"}),(0,Lx.jsx)("p",{children:"Commencez par cr\xe9er votre premi\xe8re publication sur les r\xe9seaux sociaux."}),(0,Lx.jsxs)("button",{className:"create-post-btn",children:[(0,Lx.jsx)(Hx,{size:20}),"Cr\xe9er une publication"]})]}):(0,Lx.jsx)("div",{className:"posts-grid",children:t.map(e=>{var t;const n=(e=>{const t=DY.find(t=>t.id===e);return t?t.icon:Ox})(e.platform),r=(e=>{const t=DY.find(t=>t.id===e);return t?t.color:"#666"})(e.platform);return(0,Lx.jsxs)("div",{className:"post-card",children:[(0,Lx.jsxs)("div",{className:"post-header",children:[(0,Lx.jsxs)("div",{className:"post-platform",children:[(0,Lx.jsx)(n,{size:18,style:{color:r}}),(0,Lx.jsx)("span",{children:null===(t=DY.find(t=>t.id===e.platform))||void 0===t?void 0:t.name})]}),(0,Lx.jsxs)("span",{className:"post-status ".concat(e.status),children:["draft"===e.status&&"Brouillon","scheduled"===e.status&&"Programm\xe9","published"===e.status&&"Publi\xe9"]})]}),(0,Lx.jsx)("div",{className:"post-content",children:(0,Lx.jsx)("p",{children:e.content})}),e.metrics&&(0,Lx.jsxs)("div",{className:"post-metrics",children:[(0,Lx.jsxs)("div",{className:"metric",children:[(0,Lx.jsx)(PG,{size:14}),(0,Lx.jsx)("span",{children:e.metrics.views||0})]}),(0,Lx.jsxs)("div",{className:"metric",children:[(0,Lx.jsx)(CY,{size:14}),(0,Lx.jsx)("span",{children:e.metrics.likes||0})]}),(0,Lx.jsxs)("div",{className:"metric",children:[(0,Lx.jsx)(SY,{size:14}),(0,Lx.jsx)("span",{children:e.metrics.comments||0})]})]})]},e.id)})})]}),"analytics"===s&&(0,Lx.jsxs)("div",{className:"analytics-section",children:[(0,Lx.jsx)("h3",{children:"Analytiques des r\xe9seaux sociaux"}),(0,Lx.jsxs)("div",{className:"analytics-placeholder",children:[(0,Lx.jsx)(Yx,{size:64}),(0,Lx.jsx)("h4",{children:"Analytiques d\xe9taill\xe9es"}),(0,Lx.jsx)("p",{children:"Les graphiques et analyses d\xe9taill\xe9es de vos performances sur les r\xe9seaux sociaux appara\xeetront ici."})]})]}),"accounts"===s&&(0,Lx.jsxs)("div",{className:"accounts-section",children:[(0,Lx.jsx)("h3",{children:"Gestion des comptes"}),(0,Lx.jsx)("div",{className:"accounts-grid",children:DY.map(e=>{const t=i.find(t=>t.platform===e.id),n=e.icon;return(0,Lx.jsxs)("div",{className:"account-card",children:[(0,Lx.jsxs)("div",{className:"account-header",children:[(0,Lx.jsx)(n,{size:32,style:{color:e.color}}),(0,Lx.jsxs)("div",{className:"account-info",children:[(0,Lx.jsx)("h4",{children:e.name}),t?(0,Lx.jsx)("span",{className:"connected",children:"Connect\xe9"}):(0,Lx.jsx)("span",{className:"disconnected",children:"Non connect\xe9"})]})]}),t?(0,Lx.jsxs)("div",{className:"account-details",children:[(0,Lx.jsx)("p",{children:(0,Lx.jsxs)("strong",{children:["@",t.username]})}),(0,Lx.jsxs)("p",{children:[t.followers.toLocaleString()," abonn\xe9s"]}),(0,Lx.jsx)("button",{className:"disconnect-btn",onClick:()=>v(e.id),children:"G\xe9rer"})]}):(0,Lx.jsxs)("div",{className:"account-connect",children:[(0,Lx.jsxs)("p",{children:["Connectez votre compte ",e.name," pour commencer \xe0 publier."]}),(0,Lx.jsx)("button",{className:"connect-btn",onClick:()=>v(e.id),children:"Connecter"})]})]},e.id)})})]}),"formats"===s&&(0,Lx.jsx)("div",{className:"formats-section",children:(0,Lx.jsx)(OY,{})}),(0,Lx.jsx)(_Y,{isOpen:u,onClose:()=>d(!1),platform:h,existingAccount:m,onAccountUpdated:()=>{g()}})]})}function RY(){const{user:e}=Sx(),{categories:t,loading:n,error:i,addCategory:a,updateCategory:s,deleteCategory:o}=NG(),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)({name:"",icon:"\ud83d\udcdd",value:""}),[m,f]=(0,r.useState)(!1),g=r.useRef(!1);(0,r.useEffect)(()=>{if(e&&!n&&t.length>0){v()&&!g.current&&(g.current=!0,console.log("Doublons d\xe9tect\xe9s, nettoyage en cours..."),setTimeout(()=>{y()},300))}},[e,n,t]);const v=()=>{const e=new Set,n=new Set;for(const r of t){const t=r.value.toLowerCase().trim(),i=r.name.toLowerCase().trim();if(e.has(t)||n.has(i))return!0;e.add(t),n.add(i)}return!1},y=async()=>{try{console.log("Nettoyage automatique: ".concat(t.length," cat\xe9gories trouv\xe9es"));const n=new Set,r=new Set,i=[],a=[...t].sort((e,t)=>{var n,r;return((null===(n=e.createdAt)||void 0===n?void 0:n.seconds)||0)-((null===(r=t.createdAt)||void 0===r?void 0:r.seconds)||0)});if(a.forEach(e=>{const t=e.value.toLowerCase().trim(),a=e.name.toLowerCase().trim(),s=n.has(t),o=r.has(a);s||o?(i.push(e.id),console.log("Doublon automatique d\xe9tect\xe9: ".concat(e.name," (").concat(e.value,") - ID: ").concat(e.id))):(n.add(t),r.add(a))}),console.log("".concat(i.length," doublons automatiques \xe0 supprimer")),i.length>0){for(const t of i)try{await o(t),await new Promise(e=>setTimeout(e,100))}catch(e){console.error("Erreur suppression automatique ".concat(t,":"),e)}console.log("Nettoyage automatique termin\xe9: ".concat(i.length," doublons supprim\xe9s"))}}catch(i){console.error("Erreur lors du nettoyage automatique:",i)}};return e?(0,Lx.jsxs)("div",{className:"category-manager",children:[(0,Lx.jsxs)("div",{className:"category-header",children:[(0,Lx.jsxs)("button",{className:"add-category-btn",onClick:()=>c(!0),children:[(0,Lx.jsx)(Hx,{size:16}),"Ajouter une cat\xe9gorie"]}),(0,Lx.jsxs)("button",{className:"cleanup-btn",onClick:async()=>{if(!e||m)return;if(window.confirm("ATTENTION: Cette action va supprimer TOUTES les cat\xe9gories existantes et les recr\xe9er. Tous les \xe9v\xe9nements existants pourraient \xeatre affect\xe9s. Continuer ?")){f(!0);try{console.log("D\xe9marrage du nettoyage drastique...");const e=t.map(e=>o(e.id));await Promise.all(e),console.log("Toutes les cat\xe9gories supprim\xe9es, attente..."),await new Promise(e=>setTimeout(e,1e3)),g.current=!1,alert("Toutes les cat\xe9gories ont \xe9t\xe9 supprim\xe9es. La page va se recharger pour recr\xe9er les cat\xe9gories par d\xe9faut."),window.location.reload()}catch(i){console.error("Erreur lors du nettoyage drastique:",i),alert("Erreur lors du nettoyage drastique.")}finally{f(!1)}}},disabled:m,style:{marginLeft:"10px",backgroundColor:"#dc2626",color:"white",border:"none",padding:"8px 12px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",cursor:m?"not-allowed":"pointer",opacity:m?.6:1},children:[(0,Lx.jsx)(AG,{size:16,className:m?"rotating":""}),m?"Nettoyage...":"NETTOYER TOUT"]})]}),n&&(0,Lx.jsx)("div",{className:"loading",children:"Chargement des cat\xe9gories..."}),i&&(0,Lx.jsxs)("div",{className:"error",children:["Erreur: ",i]}),(0,Lx.jsxs)("div",{className:"categories-list",children:[t.map(t=>(0,Lx.jsx)(LY,{category:t,isEditing:u===t.id,onEdit:()=>d(t.id),onSave:n=>(async(t,n)=>{if(e)try{await s(t,n),d(null)}catch(i){console.error("Erreur lors de la modification de la cat\xe9gorie:",i)}})(t.id,n),onCancel:()=>d(null),onDelete:()=>(async t=>{if(e&&window.confirm("\xcates-vous s\xfbr de vouloir supprimer cette cat\xe9gorie ?"))try{await o(t)}catch(i){console.error("Erreur lors de la suppression de la cat\xe9gorie:",i)}})(t.id)},t.id)),l&&(0,Lx.jsxs)("div",{className:"category-item editing",children:[(0,Lx.jsxs)("div",{className:"category-form",children:[(0,Lx.jsx)("input",{type:"text",placeholder:"Ic\xf4ne (emoji)",value:h.icon,onChange:e=>p(t=>Me(Me({},t),{},{icon:e.target.value})),className:"icon-input",maxLength:2}),(0,Lx.jsx)("input",{type:"text",placeholder:"Nom de la cat\xe9gorie",value:h.name,onChange:e=>p(t=>Me(Me({},t),{},{name:e.target.value})),className:"name-input",autoFocus:!0}),(0,Lx.jsx)("input",{type:"text",placeholder:"Valeur (optionnel)",value:h.value,onChange:e=>p(t=>Me(Me({},t),{},{value:e.target.value})),className:"value-input"})]}),(0,Lx.jsxs)("div",{className:"category-actions",children:[(0,Lx.jsx)("button",{onClick:async()=>{if(e&&h.name.trim())try{const e=h.value.trim()||h.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");if(t.find(t=>t.value===e||t.name.toLowerCase()===h.name.toLowerCase()))return void alert("Une cat\xe9gorie avec ce nom ou cette valeur existe d\xe9j\xe0.");await a({name:h.name.trim(),icon:h.icon,value:e}),p({name:"",icon:"\ud83d\udcdd",value:""}),c(!1)}catch(i){console.error("Erreur lors de l'ajout de la cat\xe9gorie:",i)}},className:"save-btn",children:(0,Lx.jsx)($K,{size:14})}),(0,Lx.jsx)("button",{onClick:()=>c(!1),className:"cancel-btn",children:(0,Lx.jsx)(HK,{size:14})})]})]})]})]}):(0,Lx.jsxs)("div",{className:"category-manager",children:[(0,Lx.jsx)("h3",{children:"Gestion des cat\xe9gories d'\xe9v\xe9nements"}),(0,Lx.jsx)("p",{children:"Veuillez vous connecter pour g\xe9rer les cat\xe9gories d'\xe9v\xe9nements."})]})}function LY(e){let{category:t,isEditing:n,onEdit:i,onSave:a,onCancel:s,onDelete:o}=e;const[l,c]=(0,r.useState)({name:t.name,icon:t.icon,value:t.value});(0,r.useEffect)(()=>{c({name:t.name,icon:t.icon,value:t.value})},[t]);const u=()=>{a(l)};return n?(0,Lx.jsxs)("div",{className:"category-item editing",children:[(0,Lx.jsxs)("div",{className:"category-form",children:[(0,Lx.jsx)("input",{type:"text",value:l.icon,onChange:e=>c(t=>Me(Me({},t),{},{icon:e.target.value})),className:"icon-input",maxLength:2}),(0,Lx.jsx)("input",{type:"text",value:l.name,onChange:e=>c(t=>Me(Me({},t),{},{name:e.target.value})),className:"name-input"}),(0,Lx.jsx)("input",{type:"text",value:l.value,onChange:e=>c(t=>Me(Me({},t),{},{value:e.target.value})),className:"value-input"})]}),(0,Lx.jsxs)("div",{className:"category-actions",children:[(0,Lx.jsx)("button",{onClick:u,className:"save-btn",children:(0,Lx.jsx)($K,{size:14})}),(0,Lx.jsx)("button",{onClick:s,className:"cancel-btn",children:(0,Lx.jsx)(HK,{size:14})})]})]}):(0,Lx.jsxs)("div",{className:"category-item",children:[(0,Lx.jsxs)("div",{className:"category-info",children:[(0,Lx.jsx)("span",{className:"category-icon",children:t.icon}),(0,Lx.jsx)("span",{className:"category-name",children:t.name}),(0,Lx.jsxs)("span",{className:"category-value",children:["(",t.value,")"]})]}),(0,Lx.jsxs)("div",{className:"category-actions",children:[(0,Lx.jsx)("button",{onClick:i,className:"edit-btn",children:(0,Lx.jsx)(ZK,{size:14})}),(0,Lx.jsx)("button",{onClick:o,className:"delete-btn",children:(0,Lx.jsx)(eG,{size:14})})]})]})}function zY(){const{user:e}=Sx(),{categories:t,loading:n,error:i,addCategory:a,updateCategory:s,deleteCategory:o}=FK(),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)({name:"",color:"#3b82f6",allocated:0});return e?(0,Lx.jsxs)("div",{className:"budget-category-manager",children:[(0,Lx.jsx)("div",{className:"category-header",children:(0,Lx.jsxs)("button",{className:"add-category-btn",onClick:()=>c(!0),children:[(0,Lx.jsx)(Hx,{size:16}),"Ajouter une cat\xe9gorie de budget"]})}),n&&(0,Lx.jsx)("div",{className:"loading",children:"Chargement des cat\xe9gories..."}),i&&(0,Lx.jsxs)("div",{className:"error",children:["Erreur: ",i]}),(0,Lx.jsxs)("div",{className:"categories-list",children:[t.map(t=>(0,Lx.jsx)(FY,{category:t,isEditing:u===t.id,onEdit:()=>d(t.id),onSave:n=>(async(t,n)=>{if(e)try{await s(t,n),d(null)}catch(i){console.error("Erreur lors de la modification de la cat\xe9gorie:",i)}})(t.id,n),onCancel:()=>d(null),onDelete:()=>(async t=>{if(e&&window.confirm("\xcates-vous s\xfbr de vouloir supprimer cette cat\xe9gorie de budget ?"))try{await o(t)}catch(i){console.error("Erreur lors de la suppression de la cat\xe9gorie:",i)}})(t.id)},t.id)),l&&(0,Lx.jsxs)("div",{className:"budget-category-item editing",children:[(0,Lx.jsxs)("div",{className:"category-form",children:[(0,Lx.jsx)("input",{type:"text",placeholder:"Nom de la cat\xe9gorie",value:h.name,onChange:e=>p(t=>Me(Me({},t),{},{name:e.target.value})),className:"name-input",autoFocus:!0}),(0,Lx.jsx)("input",{type:"color",value:h.color,onChange:e=>p(t=>Me(Me({},t),{},{color:e.target.value})),className:"color-input"}),(0,Lx.jsx)("input",{type:"number",placeholder:"Budget allou\xe9",value:h.allocated,onChange:e=>p(t=>Me(Me({},t),{},{allocated:Number(e.target.value)})),className:"budget-input",min:"0",step:"50"})]}),(0,Lx.jsxs)("div",{className:"category-actions",children:[(0,Lx.jsx)("button",{onClick:async()=>{if(e&&h.name.trim())try{await a({name:h.name,color:h.color,allocated:h.allocated}),p({name:"",color:"#3b82f6",allocated:0}),c(!1)}catch(i){console.error("Erreur lors de l'ajout de la cat\xe9gorie:",i)}},className:"save-btn",children:(0,Lx.jsx)($K,{size:14})}),(0,Lx.jsx)("button",{onClick:()=>c(!1),className:"cancel-btn",children:(0,Lx.jsx)(HK,{size:14})})]})]})]})]}):(0,Lx.jsxs)("div",{className:"budget-category-manager",children:[(0,Lx.jsx)("h3",{children:"Gestion des cat\xe9gories de budget"}),(0,Lx.jsx)("p",{children:"Veuillez vous connecter pour g\xe9rer les cat\xe9gories de budget."})]})}function FY(e){let{category:t,isEditing:n,onEdit:i,onSave:a,onCancel:s,onDelete:o}=e;const[l,c]=(0,r.useState)({name:t.name,color:t.color,allocated:t.allocated});(0,r.useEffect)(()=>{c({name:t.name,color:t.color,allocated:t.allocated})},[t]);const u=()=>{a(l)},d=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e);return n?(0,Lx.jsxs)("div",{className:"budget-category-item editing",children:[(0,Lx.jsxs)("div",{className:"category-form",children:[(0,Lx.jsx)("input",{type:"text",value:l.name,onChange:e=>c(t=>Me(Me({},t),{},{name:e.target.value})),className:"name-input"}),(0,Lx.jsx)("input",{type:"color",value:l.color,onChange:e=>c(t=>Me(Me({},t),{},{color:e.target.value})),className:"color-input"}),(0,Lx.jsx)("input",{type:"number",value:l.allocated,onChange:e=>c(t=>Me(Me({},t),{},{allocated:Number(e.target.value)})),className:"budget-input",min:"0",step:"50"})]}),(0,Lx.jsxs)("div",{className:"category-actions",children:[(0,Lx.jsx)("button",{onClick:u,className:"save-btn",children:(0,Lx.jsx)($K,{size:14})}),(0,Lx.jsx)("button",{onClick:s,className:"cancel-btn",children:(0,Lx.jsx)(HK,{size:14})})]})]}):(0,Lx.jsxs)("div",{className:"budget-category-item",children:[(0,Lx.jsxs)("div",{className:"category-info",children:[(0,Lx.jsx)("div",{className:"category-color",style:{backgroundColor:t.color}}),(0,Lx.jsx)("span",{className:"category-name",children:t.name}),(0,Lx.jsxs)("span",{className:"category-budget",children:[d(t.spent)," / ",d(t.allocated)]})]}),(0,Lx.jsxs)("div",{className:"category-actions",children:[(0,Lx.jsx)("button",{onClick:i,className:"edit-btn",children:(0,Lx.jsx)(ZK,{size:14})}),(0,Lx.jsx)("button",{onClick:o,className:"delete-btn",children:(0,Lx.jsx)(eG,{size:14})})]})]})}function UY(e){let{title:t,children:n,defaultExpanded:i=!1,headerAction:a}=e;const[s,o]=(0,r.useState)(i);return(0,Lx.jsxs)("div",{className:"collapsible-section",children:[(0,Lx.jsxs)("div",{className:"collapsible-header-container",children:[(0,Lx.jsx)("button",{className:"collapsible-header",onClick:()=>o(!s),children:(0,Lx.jsxs)("div",{className:"collapsible-title",children:[s?(0,Lx.jsx)(dG,{size:20}):(0,Lx.jsx)(hG,{size:20}),(0,Lx.jsx)("h3",{children:t})]})}),a&&(0,Lx.jsx)("div",{className:"collapsible-header-action",children:a})]}),(0,Lx.jsx)("div",{className:"collapsible-content",style:{display:s?"block":"none"},children:n})]})}function VY(){return(0,Lx.jsxs)("div",{className:"page-container",children:[(0,Lx.jsx)("h1",{className:"page-title",children:"Param\xe8tres"}),(0,Lx.jsx)(UY,{title:"Cat\xe9gories d'\xe9v\xe9nements",defaultExpanded:!0,children:(0,Lx.jsx)(RY,{})}),(0,Lx.jsx)(UY,{title:"Cat\xe9gories de budget",defaultExpanded:!1,children:(0,Lx.jsx)(zY,{})}),(0,Lx.jsx)(UY,{title:"Autres param\xe8tres",children:(0,Lx.jsx)("p",{children:"Autres options de configuration \xe0 venir..."})})]})}const BY=Px("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),qY=Px("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),HY=()=>{const{user:e}=Sx(),{tasks:t,addTask:n,updateTask:i,deleteTask:a,completeTask:s,loading:o,error:l}=(()=>{const{user:e}=Sx(),[t,n]=(0,r.useState)([]),[i,a]=(0,r.useState)(!0),[s,o]=(0,r.useState)(null),l=async(t,r,i)=>{if(!e)return console.log("useAgendaTasks: No user authenticated"),n([]),void a(!1);try{a(!0),console.log("useAgendaTasks: Fetching tasks for user ".concat(e.uid));const s=Fd(kx,"agendaTasks");let l;l=t?Ah(s,Ph("userId","==",e.uid),Ph("projectId","==",t),Mh("dueDate","asc")):Ah(s,Ph("userId","==",e.uid),Mh("dueDate","asc"));const c=await Yh(l);console.log("useAgendaTasks: Found ".concat(c.docs.length," tasks"));let u=c.docs.map(e=>{var t,n,r,i,a;const s=e.data();return Me(Me({id:e.id},s),{},{dueDate:(null===(t=s.dueDate)||void 0===t?void 0:t.toDate())||new Date,completedAt:(null===(n=s.completedAt)||void 0===n?void 0:n.toDate())||void 0,createdAt:(null===(r=s.createdAt)||void 0===r?void 0:r.toDate())||new Date,updatedAt:(null===(i=s.updatedAt)||void 0===i?void 0:i.toDate())||new Date,recurrence:s.recurrence?Me(Me({},s.recurrence),{},{endDate:(null===(a=s.recurrence.endDate)||void 0===a?void 0:a.toDate())||void 0}):void 0})});r&&i&&(u=u.filter(e=>e.dueDate>=r&&e.dueDate<=i)),n(u),o(null),console.log("useAgendaTasks: Tasks loaded successfully:",u)}catch(s){console.error("Error fetching tasks:",s),o("Erreur lors du chargement des t\xe2ches: ".concat(s instanceof Error?s.message:"Unknown error"))}finally{a(!1)}},c=async(t,n)=>{if(!e)throw new Error("Utilisateur non authentifi\xe9");try{var r;console.log("useAgendaTasks: Updating task:",t,n);const e=Ud(kx,"agendaTasks",t),i=Me(Me({},n),{},{updatedAt:ri.now()});n.dueDate&&(i.dueDate=ri.fromDate(n.dueDate)),n.completedAt&&(i.completedAt=ri.fromDate(n.completedAt)),null!==(r=n.recurrence)&&void 0!==r&&r.endDate&&(i.recurrence=Me(Me({},n.recurrence),{},{endDate:ri.fromDate(n.recurrence.endDate)})),await Xh(e,i),console.log("useAgendaTasks: Task updated successfully"),await l()}catch(i){throw console.error("Error updating task:",i),new Error("Erreur lors de la mise \xe0 jour de la t\xe2che: ".concat(i instanceof Error?i.message:"Unknown error"))}};return(0,r.useEffect)(()=>{l()},[e]),{tasks:t,loading:i,error:s,addTask:async t=>{if(!e)throw new Error("Utilisateur non authentifi\xe9");try{if(console.log("useAgendaTasks: Adding new task:",t),!t.title||!t.dueDate)throw new Error("Le titre et la date sont obligatoires");const n=Object.fromEntries(Object.entries(t).filter(e=>{let[t,n]=e;return void 0!==n&&""!==n})),r=Me(Me({},n),{},{userId:e.uid,dueDate:ri.fromDate(t.dueDate),createdAt:ri.now(),updatedAt:ri.now()});t.completedAt&&(r.completedAt=ri.fromDate(t.completedAt)),t.recurrence&&t.recurrence.endDate?r.recurrence=Me(Me({},t.recurrence),{},{endDate:ri.fromDate(t.recurrence.endDate)}):t.recurrence&&(r.recurrence={frequency:t.recurrence.frequency,interval:t.recurrence.interval}),console.log("useAgendaTasks: Processed task data for Firestore:",r);const i=await $h(Fd(kx,"agendaTasks"),r);return console.log("useAgendaTasks: Task added with ID:",i.id),await l(),i.id}catch(n){throw console.error("useAgendaTasks: Error adding task:",n),console.error("useAgendaTasks: Error details:",n),new Error("Erreur lors de l'ajout de la t\xe2che: ".concat(n instanceof Error?n.message:"Unknown error"))}},updateTask:c,deleteTask:async t=>{if(!e)throw new Error("Utilisateur non authentifi\xe9");try{console.log("useAgendaTasks: Deleting task:",t),await Jh(Ud(kx,"agendaTasks",t)),console.log("useAgendaTasks: Task deleted successfully"),await l()}catch(n){throw console.error("Error deleting task:",n),new Error("Erreur lors de la suppression de la t\xe2che: ".concat(n instanceof Error?n.message:"Unknown error"))}},completeTask:async t=>{if(!e)throw new Error("Utilisateur non authentifi\xe9");await c(t,{status:"completed",completedAt:new Date,completedBy:e.displayName||e.email||"Utilisateur"})},fetchTasks:l,getTodayTasks:()=>{const e=new Date;e.setHours(0,0,0,0);const n=new Date(e);return n.setDate(n.getDate()+1),t.filter(t=>t.dueDate>=e&&t.dueDate<n)},getOverdueTasks:()=>{const e=new Date;return t.filter(t=>t.dueDate<e&&"completed"!==t.status&&"cancelled"!==t.status)},getUpcomingTasks:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;const n=new Date,r=new Date;return r.setDate(r.getDate()+e),t.filter(e=>e.dueDate>=n&&e.dueDate<=r&&"completed"!==e.status&&"cancelled"!==e.status)},getTasksByStatus:e=>t.filter(t=>t.status===e),getTasksByType:e=>t.filter(t=>t.type===e),getTasksByPriority:e=>t.filter(t=>t.priority===e),getTasksByProject:e=>t.filter(t=>t.projectId===e),searchTasks:e=>{const n=e.toLowerCase();return t.filter(e=>{var t,r,i,a;return e.title.toLowerCase().includes(n)||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(r=e.location)||void 0===r?void 0:r.toLowerCase().includes(n))||(null===(i=e.clientName)||void 0===i?void 0:i.toLowerCase().includes(n))||(null===(a=e.tags)||void 0===a?void 0:a.some(e=>e.toLowerCase().includes(n)))})}}})(),[c,u]=(0,r.useState)("dashboard"),[d,h]=(0,r.useState)([]),[p,m]=(0,r.useState)([]),[f,g]=(0,r.useState)([]),[v,y]=(0,r.useState)([]),[x,b]=(0,r.useState)([]),[j,w]=(0,r.useState)(!1),[N,k]=(0,r.useState)(null),[C,S]=(0,r.useState)({title:"",description:"",type:"visit",priority:"medium",dueDate:"",dueTime:"",location:"",clientName:"",clientPhone:"",clientEmail:"",notes:"",estimatedDuration:60});(0,r.useEffect)(()=>{h([{id:"1",name:"R\xe9sidence Les Jardins",address:"15 Rue de la Paix, 75001 Paris",status:"active",apartments:24,lastInspection:"2024-01-15"},{id:"2",name:"Immeuble Haussmann",address:"42 Boulevard Saint-Germain, 75005 Paris",status:"maintenance",apartments:18,lastInspection:"2024-01-10"}]),m([{id:"1",title:"Visite appartement 3A",type:"visit",date:"2024-01-25",time:"14:00",property:"R\xe9sidence Les Jardins",status:"pending"},{id:"2",title:"AG Copropri\xe9t\xe9",type:"meeting",date:"2024-01-28",time:"18:00",property:"Immeuble Haussmann",status:"pending"}]),g([{id:"1",from:"M. Dupont",to:"Gestionnaire",subject:"Probl\xe8me chauffage apt 2B",content:"Le chauffage ne fonctionne plus depuis hier...",date:"2024-01-20",read:!1,priority:"high"}]),y([{id:"1",name:"Contrat_Location_3A.pdf",type:"contract",uploadDate:"2024-01-15",size:"2.3 MB",property:"R\xe9sidence Les Jardins"}]),b([{id:"1",name:"Entreprise Martin",type:"contractor",contact:"Jean Martin",email:"contact@martin-btp.fr",phone:"01 23 45 67 89",rating:4.5,activeProjects:2}])},[]);const E=e=>{switch(e){case"active":case"completed":return"#28a745";case"maintenance":return"#ffc107";case"vacant":return"#dc3545";case"pending":return"#007bff";default:return"#6c757d"}},T=e=>{switch(e){case"high":return"#dc3545";case"medium":return"#ffc107";case"low":return"#28a745";default:return"#6c757d"}};(0,r.useEffect)(()=>{S(N?{title:N.title||"",description:N.description||"",type:N.type||"visit",priority:N.priority||"medium",dueDate:N.dueDate?N.dueDate.toISOString().split("T")[0]:"",dueTime:N.dueTime||"",location:N.location||"",clientName:N.clientName||"",clientPhone:N.clientPhone||"",clientEmail:N.clientEmail||"",notes:N.notes||"",estimatedDuration:N.estimatedDuration||60}:{title:"",description:"",type:"visit",priority:"medium",dueDate:"",dueTime:"",location:"",clientName:"",clientPhone:"",clientEmail:"",notes:"",estimatedDuration:60})},[N]);return(0,Lx.jsxs)("div",{className:"gestion-page",children:[(0,Lx.jsxs)("div",{className:"page-header",children:[(0,Lx.jsx)("h1",{children:"Gestion"}),(0,Lx.jsx)("p",{children:"Gestion interne & communication quotidienne"})]}),(0,Lx.jsxs)("div",{className:"gestion-tabs",children:[(0,Lx.jsx)("button",{className:"tab-button ".concat("dashboard"===c?"active":""),onClick:()=>u("dashboard"),children:"Tableau de bord"}),(0,Lx.jsx)("button",{className:"tab-button ".concat("agenda"===c?"active":""),onClick:()=>u("agenda"),children:"Agenda"}),(0,Lx.jsx)("button",{className:"tab-button ".concat("messages"===c?"active":""),onClick:()=>u("messages"),children:"Messagerie"}),(0,Lx.jsx)("button",{className:"tab-button ".concat("documents"===c?"active":""),onClick:()=>u("documents"),children:"Documents"}),(0,Lx.jsx)("button",{className:"tab-button ".concat("providers"===c?"active":""),onClick:()=>u("providers"),children:"Prestataires"})]}),(0,Lx.jsxs)("div",{className:"gestion-content",children:["dashboard"===c&&(0,Lx.jsxs)("div",{className:"dashboard-content",children:[(0,Lx.jsxs)("div",{className:"dashboard-stats",children:[(0,Lx.jsxs)("div",{className:"stat-card",children:[(0,Lx.jsx)("h3",{children:"Propri\xe9t\xe9s"}),(0,Lx.jsx)("div",{className:"stat-number",children:d.length}),(0,Lx.jsxs)("div",{className:"stat-detail",children:[d.filter(e=>"active"===e.status).length," actives"]})]}),(0,Lx.jsxs)("div",{className:"stat-card",children:[(0,Lx.jsx)("h3",{children:"T\xe2ches en cours"}),(0,Lx.jsx)("div",{className:"stat-number",children:p.filter(e=>"pending"===e.status).length}),(0,Lx.jsx)("div",{className:"stat-detail",children:"\xc0 traiter aujourd'hui"})]}),(0,Lx.jsxs)("div",{className:"stat-card",children:[(0,Lx.jsx)("h3",{children:"Messages non lus"}),(0,Lx.jsx)("div",{className:"stat-number",children:f.filter(e=>!e.read).length}),(0,Lx.jsx)("div",{className:"stat-detail",children:"Nouveaux messages"})]}),(0,Lx.jsxs)("div",{className:"stat-card",children:[(0,Lx.jsx)("h3",{children:"Prestataires actifs"}),(0,Lx.jsx)("div",{className:"stat-number",children:x.filter(e=>e.activeProjects>0).length}),(0,Lx.jsx)("div",{className:"stat-detail",children:"En mission"})]})]}),(0,Lx.jsxs)("div",{className:"dashboard-grid",children:[(0,Lx.jsxs)("div",{className:"dashboard-section",children:[(0,Lx.jsx)("h3",{children:"\xc9tat des propri\xe9t\xe9s"}),(0,Lx.jsx)("div",{className:"properties-list",children:d.map(e=>(0,Lx.jsxs)("div",{className:"property-item",children:[(0,Lx.jsxs)("div",{className:"property-info",children:[(0,Lx.jsx)("h4",{children:e.name}),(0,Lx.jsx)("p",{children:e.address}),(0,Lx.jsxs)("span",{className:"apartment-count",children:[e.apartments," appartements"]})]}),(0,Lx.jsx)("div",{className:"property-status",children:(0,Lx.jsx)("span",{className:"status-badge",style:{backgroundColor:E(e.status)},children:e.status})})]},e.id))})]}),(0,Lx.jsxs)("div",{className:"dashboard-section",children:[(0,Lx.jsx)("h3",{children:"T\xe2ches urgentes"}),(0,Lx.jsx)("div",{className:"tasks-list",children:p.filter(e=>"pending"===e.status).slice(0,5).map(e=>(0,Lx.jsxs)("div",{className:"task-item",children:[(0,Lx.jsxs)("div",{className:"task-info",children:[(0,Lx.jsx)("h4",{children:e.title}),(0,Lx.jsxs)("p",{children:[e.date," \xe0 ",e.time]}),e.property&&(0,Lx.jsx)("span",{className:"task-property",children:e.property})]}),(0,Lx.jsx)("div",{className:"task-type",children:(0,Lx.jsx)("span",{className:"type-badge ".concat(e.type),children:e.type})})]},e.id))})]})]})]}),"agenda"===c&&(0,Lx.jsxs)("div",{className:"agenda-content",children:[(0,Lx.jsxs)("div",{className:"agenda-header",children:[(0,Lx.jsx)("h3",{children:"Planning centralis\xe9"}),(0,Lx.jsxs)("button",{className:"btn-primary",onClick:()=>{k(null),w(!0)},children:[(0,Lx.jsx)(Hx,{size:16}),"Ajouter une t\xe2che"]})]}),(0,Lx.jsxs)("div",{className:"agenda-filters",children:[(0,Lx.jsxs)("select",{children:[(0,Lx.jsx)("option",{value:"all",children:"Tous les types"}),(0,Lx.jsx)("option",{value:"visit",children:"Visites"}),(0,Lx.jsx)("option",{value:"meeting",children:"R\xe9unions"}),(0,Lx.jsx)("option",{value:"inspection",children:"Inspections"}),(0,Lx.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,Lx.jsx)("option",{value:"call",children:"Appels"}),(0,Lx.jsx)("option",{value:"document",children:"Documents"}),(0,Lx.jsx)("option",{value:"other",children:"Autre"})]}),(0,Lx.jsx)("input",{type:"date"})]}),o&&(0,Lx.jsx)("div",{className:"loading",children:"Chargement des t\xe2ches..."}),l&&(0,Lx.jsx)("div",{className:"error",children:l}),(0,Lx.jsxs)("div",{className:"agenda-grid",children:[t.map(e=>(0,Lx.jsxs)("div",{className:"agenda-item",children:[(0,Lx.jsxs)("div",{className:"agenda-time",children:[(0,Lx.jsxs)("div",{className:"date-info",children:[(0,Lx.jsx)(Mx,{size:16}),(0,Lx.jsx)("span",{className:"date",children:e.dueDate.toLocaleDateString("fr-FR")})]}),e.dueTime&&(0,Lx.jsxs)("div",{className:"time-info",children:[(0,Lx.jsx)(SG,{size:16}),(0,Lx.jsx)("span",{className:"time",children:e.dueTime})]})]}),(0,Lx.jsxs)("div",{className:"agenda-details",children:[(0,Lx.jsxs)("div",{className:"task-header",children:[(0,Lx.jsx)("h4",{children:e.title}),(0,Lx.jsx)("span",{className:"type-badge ".concat(e.type),children:e.type})]}),e.description&&(0,Lx.jsx)("p",{className:"description",children:e.description}),e.location&&(0,Lx.jsxs)("div",{className:"location-info",children:[(0,Lx.jsx)(Gx,{size:14}),(0,Lx.jsx)("span",{children:e.location})]}),e.clientName&&(0,Lx.jsxs)("div",{className:"client-info",children:[(0,Lx.jsx)(BY,{size:14}),(0,Lx.jsx)("span",{children:e.clientName}),e.clientPhone&&(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsx)(qY,{size:12}),(0,Lx.jsx)("span",{children:e.clientPhone})]})]}),(0,Lx.jsxs)("div",{className:"task-meta",children:[(0,Lx.jsx)("span",{className:"status-badge ".concat(e.status),style:{backgroundColor:E(e.status)},children:e.status}),(0,Lx.jsx)("span",{className:"priority-badge ".concat(e.priority),style:{backgroundColor:T(e.priority)},children:e.priority}),e.estimatedDuration&&(0,Lx.jsxs)("span",{className:"duration",children:[e.estimatedDuration,"min"]})]})]}),(0,Lx.jsxs)("div",{className:"agenda-actions",children:[(0,Lx.jsx)("button",{className:"btn-edit",onClick:()=>{k(e),w(!0)},children:"Modifier"}),"completed"!==e.status&&(0,Lx.jsx)("button",{className:"btn-complete",onClick:()=>s(e.id),children:"Terminer"}),(0,Lx.jsx)("button",{className:"btn-delete",onClick:()=>{confirm("Supprimer cette t\xe2che ?")&&a(e.id)},children:"Supprimer"})]})]},e.id)),0===t.length&&!o&&(0,Lx.jsxs)("div",{className:"empty-state",children:[(0,Lx.jsx)(Mx,{size:48}),(0,Lx.jsx)("h3",{children:"Aucune t\xe2che planifi\xe9e"}),(0,Lx.jsx)("p",{children:"Commencez par ajouter votre premi\xe8re t\xe2che"}),(0,Lx.jsxs)("button",{className:"btn-primary",onClick:()=>{k(null),w(!0)},children:[(0,Lx.jsx)(Hx,{size:16}),"Cr\xe9er une t\xe2che"]})]})]}),j&&(0,Lx.jsx)("div",{className:"modal-overlay",onClick:()=>w(!1),children:(0,Lx.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Lx.jsxs)("div",{className:"modal-header",children:[(0,Lx.jsx)("h2",{children:N?"Modifier la t\xe2che":"Nouvelle t\xe2che"}),(0,Lx.jsx)("button",{className:"modal-close",onClick:()=>w(!1),children:"\xd7"})]}),(0,Lx.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{console.log("Gestion: Submitting task with data:",C);const e=Me(Me({},C),{},{dueDate:new Date(C.dueDate),status:"pending",isRecurring:!1});console.log("Gestion: Processed task data:",e),N?(console.log("Gestion: Updating existing task:",N.id),await i(N.id,e)):(console.log("Gestion: Creating new task"),await n(e)),console.log("Gestion: Task saved successfully"),w(!1),k(null)}catch(t){console.error("Gestion: Erreur lors de la sauvegarde:",t),alert("Erreur lors de la sauvegarde: ".concat(t instanceof Error?t.message:"Erreur inconnue"))}},className:"task-form",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Titre *"}),(0,Lx.jsx)("input",{type:"text",value:C.title,onChange:e=>S(Me(Me({},C),{},{title:e.target.value})),required:!0})]}),(0,Lx.jsxs)("div",{className:"form-row",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Type"}),(0,Lx.jsxs)("select",{value:C.type,onChange:e=>S(Me(Me({},C),{},{type:e.target.value})),children:[(0,Lx.jsx)("option",{value:"visit",children:"Visite"}),(0,Lx.jsx)("option",{value:"meeting",children:"R\xe9union"}),(0,Lx.jsx)("option",{value:"inspection",children:"Inspection"}),(0,Lx.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,Lx.jsx)("option",{value:"call",children:"Appel"}),(0,Lx.jsx)("option",{value:"document",children:"Document"}),(0,Lx.jsx)("option",{value:"other",children:"Autre"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Priorit\xe9"}),(0,Lx.jsxs)("select",{value:C.priority,onChange:e=>S(Me(Me({},C),{},{priority:e.target.value})),children:[(0,Lx.jsx)("option",{value:"low",children:"Basse"}),(0,Lx.jsx)("option",{value:"medium",children:"Moyenne"}),(0,Lx.jsx)("option",{value:"high",children:"Haute"}),(0,Lx.jsx)("option",{value:"urgent",children:"Urgente"})]})]})]}),(0,Lx.jsxs)("div",{className:"form-row",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Date *"}),(0,Lx.jsx)("input",{type:"date",value:C.dueDate,onChange:e=>S(Me(Me({},C),{},{dueDate:e.target.value})),required:!0})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Heure"}),(0,Lx.jsx)("input",{type:"time",value:C.dueTime,onChange:e=>S(Me(Me({},C),{},{dueTime:e.target.value}))})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Dur\xe9e (min)"}),(0,Lx.jsx)("input",{type:"number",value:C.estimatedDuration,onChange:e=>S(Me(Me({},C),{},{estimatedDuration:parseInt(e.target.value)})),min:"15",step:"15"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Lieu"}),(0,Lx.jsx)("input",{type:"text",value:C.location,onChange:e=>S(Me(Me({},C),{},{location:e.target.value})),placeholder:"Adresse du rendez-vous"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Description"}),(0,Lx.jsx)("textarea",{value:C.description,onChange:e=>S(Me(Me({},C),{},{description:e.target.value})),rows:3,placeholder:"D\xe9tails de la t\xe2che..."})]}),(0,Lx.jsxs)("div",{className:"client-section",children:[(0,Lx.jsx)("h4",{children:"Informations client (optionnel)"}),(0,Lx.jsxs)("div",{className:"form-row",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Nom du client"}),(0,Lx.jsx)("input",{type:"text",value:C.clientName,onChange:e=>S(Me(Me({},C),{},{clientName:e.target.value}))})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"T\xe9l\xe9phone"}),(0,Lx.jsx)("input",{type:"tel",value:C.clientPhone,onChange:e=>S(Me(Me({},C),{},{clientPhone:e.target.value}))})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Email"}),(0,Lx.jsx)("input",{type:"email",value:C.clientEmail,onChange:e=>S(Me(Me({},C),{},{clientEmail:e.target.value}))})]})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Notes"}),(0,Lx.jsx)("textarea",{value:C.notes,onChange:e=>S(Me(Me({},C),{},{notes:e.target.value})),rows:2,placeholder:"Notes suppl\xe9mentaires..."})]}),(0,Lx.jsxs)("div",{className:"modal-actions",children:[(0,Lx.jsx)("button",{type:"button",onClick:()=>w(!1),children:"Annuler"}),(0,Lx.jsx)("button",{type:"submit",className:"btn-primary",disabled:!C.title||!C.dueDate,children:N?"Modifier":"Cr\xe9er"})]})]})]})})]}),"messages"===c&&(0,Lx.jsxs)("div",{className:"messages-content",children:[(0,Lx.jsxs)("div",{className:"messages-header",children:[(0,Lx.jsx)("h3",{children:"Messagerie interne"}),(0,Lx.jsx)("button",{className:"btn-primary",children:"Nouveau message"})]}),(0,Lx.jsx)("div",{className:"messages-filters",children:(0,Lx.jsxs)("select",{children:[(0,Lx.jsx)("option",{value:"all",children:"Tous les messages"}),(0,Lx.jsx)("option",{value:"unread",children:"Non lus"}),(0,Lx.jsx)("option",{value:"high",children:"Priorit\xe9 haute"})]})}),(0,Lx.jsx)("div",{className:"messages-list",children:f.map(e=>(0,Lx.jsxs)("div",{className:"message-item ".concat(e.read?"":"unread"),children:[(0,Lx.jsxs)("div",{className:"message-header",children:[(0,Lx.jsxs)("div",{className:"message-from",children:[(0,Lx.jsx)("strong",{children:e.from}),(0,Lx.jsx)("span",{className:"message-date",children:new Date(e.date).toLocaleDateString()})]}),(0,Lx.jsx)("div",{className:"message-priority",children:(0,Lx.jsx)("span",{className:"priority-badge",style:{backgroundColor:T(e.priority)},children:e.priority})})]}),(0,Lx.jsx)("div",{className:"message-subject",children:(0,Lx.jsx)("h4",{children:e.subject})}),(0,Lx.jsx)("div",{className:"message-preview",children:(0,Lx.jsxs)("p",{children:[e.content.substring(0,100),"..."]})}),(0,Lx.jsxs)("div",{className:"message-actions",children:[(0,Lx.jsx)("button",{className:"btn-reply",children:"R\xe9pondre"}),(0,Lx.jsx)("button",{className:"btn-archive",children:"Archiver"})]})]},e.id))})]}),"documents"===c&&(0,Lx.jsxs)("div",{className:"documents-content",children:[(0,Lx.jsxs)("div",{className:"documents-header",children:[(0,Lx.jsx)("h3",{children:"Documents centralis\xe9s"}),(0,Lx.jsx)("button",{className:"btn-primary",children:"T\xe9l\xe9charger un document"})]}),(0,Lx.jsxs)("div",{className:"documents-filters",children:[(0,Lx.jsxs)("select",{children:[(0,Lx.jsx)("option",{value:"all",children:"Tous les types"}),(0,Lx.jsx)("option",{value:"contract",children:"Contrats"}),(0,Lx.jsx)("option",{value:"invoice",children:"Factures"}),(0,Lx.jsx)("option",{value:"report",children:"Rapports"}),(0,Lx.jsx)("option",{value:"meeting_minutes",children:"PV de r\xe9union"})]}),(0,Lx.jsxs)("select",{children:[(0,Lx.jsx)("option",{value:"all",children:"Toutes les propri\xe9t\xe9s"}),d.map(e=>(0,Lx.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Lx.jsx)("div",{className:"documents-grid",children:v.map(e=>(0,Lx.jsxs)("div",{className:"document-item",children:[(0,Lx.jsx)("div",{className:"document-icon",children:"\ud83d\udcc4"}),(0,Lx.jsxs)("div",{className:"document-info",children:[(0,Lx.jsx)("h4",{children:e.name}),(0,Lx.jsxs)("p",{children:["Type: ",e.type]}),(0,Lx.jsxs)("p",{children:["Taille: ",e.size]}),(0,Lx.jsxs)("p",{children:["Ajout\xe9 le: ",new Date(e.uploadDate).toLocaleDateString()]}),e.property&&(0,Lx.jsxs)("p",{children:["Propri\xe9t\xe9: ",e.property]})]}),(0,Lx.jsxs)("div",{className:"document-actions",children:[(0,Lx.jsx)("button",{className:"btn-download",children:"T\xe9l\xe9charger"}),(0,Lx.jsx)("button",{className:"btn-share",children:"Partager"}),(0,Lx.jsx)("button",{className:"btn-delete",children:"Supprimer"})]})]},e.id))})]}),"providers"===c&&(0,Lx.jsxs)("div",{className:"providers-content",children:[(0,Lx.jsxs)("div",{className:"providers-header",children:[(0,Lx.jsx)("h3",{children:"Gestion des prestataires"}),(0,Lx.jsx)("button",{className:"btn-primary",children:"Ajouter un prestataire"})]}),(0,Lx.jsx)("div",{className:"providers-filters",children:(0,Lx.jsxs)("select",{children:[(0,Lx.jsx)("option",{value:"all",children:"Tous les types"}),(0,Lx.jsx)("option",{value:"contractor",children:"Entrepreneurs"}),(0,Lx.jsx)("option",{value:"architect",children:"Architectes"}),(0,Lx.jsx)("option",{value:"cleaning",children:"Nettoyage"}),(0,Lx.jsx)("option",{value:"security",children:"Gardiennage"}),(0,Lx.jsx)("option",{value:"maintenance",children:"Maintenance"})]})}),(0,Lx.jsx)("div",{className:"providers-grid",children:x.map(e=>(0,Lx.jsxs)("div",{className:"provider-item",children:[(0,Lx.jsxs)("div",{className:"provider-header",children:[(0,Lx.jsx)("h4",{children:e.name}),(0,Lx.jsx)("span",{className:"type-badge ".concat(e.type),children:e.type})]}),(0,Lx.jsxs)("div",{className:"provider-info",children:[(0,Lx.jsxs)("p",{children:[(0,Lx.jsx)("strong",{children:"Contact:"})," ",e.contact]}),(0,Lx.jsxs)("p",{children:[(0,Lx.jsx)("strong",{children:"Email:"})," ",e.email]}),(0,Lx.jsxs)("p",{children:[(0,Lx.jsx)("strong",{children:"T\xe9l\xe9phone:"})," ",e.phone]}),(0,Lx.jsx)("div",{className:"provider-rating",children:(0,Lx.jsxs)("span",{children:["Note: ",e.rating,"/5 \u2b50"]})}),(0,Lx.jsx)("div",{className:"provider-projects",children:(0,Lx.jsxs)("span",{children:[e.activeProjects," projets actifs"]})})]}),(0,Lx.jsxs)("div",{className:"provider-actions",children:[(0,Lx.jsx)("button",{className:"btn-contact",children:"Contacter"}),(0,Lx.jsx)("button",{className:"btn-edit",children:"Modifier"}),(0,Lx.jsx)("button",{className:"btn-history",children:"Historique"})]})]},e.id))})]})]})]})},WY=Px("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),KY=async(e,t,n)=>{try{const r=n||"".concat(Date.now(),"_").concat(e.name),i="".concat(t,"/").concat(r),a=bx(Cx,i),s=await yx(a,e);return await xx(s.ref)}catch(r){throw console.error("Error uploading image:",r),new Error("Erreur lors du t\xe9l\xe9chargement de l'image")}},GY=async(e,t)=>KY(e,"projects/".concat(t,"/gallery"),"gallery_".concat(Date.now(),".jpg")),YY=e=>{let{value:t,onChange:n,onRemove:i,placeholder:a="Ajouter une image",projectId:s,unitId:o,isGallery:l=!1}=e;const[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(""),[p,m]=(0,r.useState)(!1),f=(0,r.useRef)(null),g=async e=>{if(e&&e.type.startsWith("image/"))try{if(s){const t=l?await GY(e,s):await(async(e,t)=>KY(e,"projects/".concat(t,"/main"),"main_".concat(Date.now(),".jpg")))(e,s);n(t)}else if(o){const t=l?await(async(e,t)=>KY(e,"units/".concat(t,"/gallery"),"gallery_".concat(Date.now(),".jpg")))(e,o):await(async(e,t)=>KY(e,"units/".concat(t,"/main"),"main_".concat(Date.now(),".jpg")))(e,o);n(t)}else{const t=new FileReader;t.onload=e=>{var t;const r=null===(t=e.target)||void 0===t?void 0:t.result;n(r)},t.readAsDataURL(e)}}catch(t){console.error("Error uploading image:",t),alert("Erreur lors du t\xe9l\xe9chargement de l'image")}},v=()=>{d.trim()&&(n(d.trim()),h(""),u(!1))};return t?(0,Lx.jsxs)("div",{className:"image-upload-preview",children:[(0,Lx.jsx)("img",{src:t,alt:"Project",className:"preview-image"}),(0,Lx.jsx)("button",{type:"button",onClick:i,className:"remove-image-btn",title:"Supprimer l'image",children:(0,Lx.jsx)(HK,{size:16})})]}):(0,Lx.jsxs)("div",{className:"image-upload-container",children:[c?(0,Lx.jsxs)("div",{className:"url-input-container",children:[(0,Lx.jsx)("input",{type:"url",value:d,onChange:e=>h(e.target.value),onKeyPress:e=>{"Enter"===e.key&&v()},placeholder:"https://exemple.com/image.jpg",className:"url-input",autoFocus:!0}),(0,Lx.jsxs)("div",{className:"url-actions",children:[(0,Lx.jsx)("button",{type:"button",onClick:v,className:"url-submit-btn",disabled:!d.trim(),children:"Ajouter"}),(0,Lx.jsx)("button",{type:"button",onClick:()=>{u(!1),h("")},className:"url-cancel-btn",children:"Annuler"})]})]}):(0,Lx.jsxs)("div",{className:"image-upload-zone ".concat(p?"drag-over":""),onDrop:e=>{e.preventDefault(),m(!1);const t=e.dataTransfer.files[0];t&&g(t)},onDragOver:e=>{e.preventDefault(),m(!0)},onDragLeave:e=>{e.preventDefault(),m(!1)},onClick:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.click()},children:[(0,Lx.jsxs)("div",{className:"upload-content",children:[(0,Lx.jsx)(jG,{size:48,className:"upload-icon"}),(0,Lx.jsx)("p",{className:"upload-text",children:a}),(0,Lx.jsx)("p",{className:"upload-subtext",children:"Glissez une image ou cliquez pour parcourir"})]}),(0,Lx.jsx)("input",{ref:f,type:"file",accept:"image/*",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&g(n)},style:{display:"none"}})]}),(0,Lx.jsxs)("div",{className:"upload-options",children:[(0,Lx.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.click()},className:"upload-option-btn",title:"Importer depuis l'ordinateur",children:[(0,Lx.jsx)(VG,{size:16}),"Importer"]}),(0,Lx.jsxs)("button",{type:"button",onClick:()=>u(!0),className:"upload-option-btn",title:"Ajouter par URL",children:[(0,Lx.jsx)(WY,{size:16}),"URL"]})]})]})},QY=Px("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),XY=()=>{const e=te(),{user:t}=Sx(),{projects:n,loading:i,addProject:a,updateProject:s,deleteProject:o}=Fx(),{units:l,loading:c}=Ux(),[u,d]=(0,r.useState)("grid"),[h,p]=(0,r.useState)(""),[m,f]=(0,r.useState)("date"),[g,v]=(0,r.useState)("desc"),[y,x]=(0,r.useState)(!1),[b,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)(null),[k,C]=(0,r.useState)(!1),[S,E]=(0,r.useState)(null),[T,_]=(0,r.useState)({name:"",description:"",type:"building",address:"",city:"",postalCode:"",totalUnits:0,budget:0,startDate:"",endDate:"",mainImage:""}),A=(0,r.useMemo)(()=>n.map(e=>{const t=l.filter(t=>t.projectId===e.id),n=t.filter(e=>"available"===e.availability).length,r=t.reduce((e,t)=>e+(t.price||0),0),i=t.length>0?r/t.length:0,a=t.length>0?(t.length-n)/t.length*100:0;return Me(Me({},e),{},{unitsCount:t.length,availableUnits:n,occupancyRate:a,totalValue:r,averagePrice:i})}),[n,l]),I=(0,r.useMemo)(()=>{const e=l.length,t=l.filter(e=>"available"===e.availability).length,r=l.reduce((e,t)=>e+(t.price||0),0),i=e>0?(e-t)/e*100:0;return{totalProjects:n.length,totalUnits:e,totalValue:r,availableUnits:t,occupancyRate:i}},[n,l]),P=(0,r.useMemo)(()=>{let e=A;return h&&(e=e.filter(e=>{var t,n;return e.name.toLowerCase().includes(h.toLowerCase())||(null===(t=e.address)||void 0===t?void 0:t.toLowerCase().includes(h.toLowerCase()))||(null===(n=e.city)||void 0===n?void 0:n.toLowerCase().includes(h.toLowerCase()))})),e.sort((e,t)=>{let n,r;switch(m){case"name":n=e.name.toLowerCase(),r=t.name.toLowerCase();break;case"date":n=e.createdAt||new Date(0),r=t.createdAt||new Date(0);break;case"units":n=e.unitsCount,r=t.unitsCount;break;case"value":n=e.totalValue,r=t.totalValue;break;default:return 0}return n<r?"asc"===g?-1:1:n>r?"asc"===g?1:-1:0}),e},[A,h,m,g]),O=()=>{_({name:"",description:"",type:"building",address:"",city:"",postalCode:"",totalUnits:0,budget:0,startDate:"",endDate:"",mainImage:""}),N(null),j(!0)};return i||c?(0,Lx.jsxs)("div",{className:"projects-loading",children:[(0,Lx.jsx)("div",{className:"loading-spinner"}),(0,Lx.jsx)("p",{children:"Chargement des projets..."})]}):(0,Lx.jsxs)("div",{className:"projects-new",children:[(0,Lx.jsxs)("div",{className:"projects-header",children:[(0,Lx.jsxs)("div",{className:"header-content",children:[(0,Lx.jsxs)("div",{className:"header-text",children:[(0,Lx.jsx)("h1",{children:"Gestion des Projets"}),(0,Lx.jsx)("p",{children:"G\xe9rez et suivez tous vos projets immobiliers"})]}),(0,Lx.jsxs)("button",{className:"btn-primary",onClick:O,children:[(0,Lx.jsx)(Hx,{size:20}),"Nouveau projet"]})]}),(0,Lx.jsxs)("div",{className:"global-stats",children:[(0,Lx.jsxs)("div",{className:"stat-card",children:[(0,Lx.jsx)("div",{className:"stat-icon projects",children:(0,Lx.jsx)(Vx,{size:24})}),(0,Lx.jsxs)("div",{className:"stat-content",children:[(0,Lx.jsx)("span",{className:"stat-value",children:I.totalProjects}),(0,Lx.jsx)("span",{className:"stat-label",children:"Projets"})]})]}),(0,Lx.jsxs)("div",{className:"stat-card",children:[(0,Lx.jsx)("div",{className:"stat-icon units",children:(0,Lx.jsx)(Bx,{size:24})}),(0,Lx.jsxs)("div",{className:"stat-content",children:[(0,Lx.jsx)("span",{className:"stat-value",children:I.totalUnits}),(0,Lx.jsx)("span",{className:"stat-label",children:"Unit\xe9s totales"})]})]}),(0,Lx.jsxs)("div",{className:"stat-card",children:[(0,Lx.jsx)("div",{className:"stat-icon available",children:(0,Lx.jsx)(Wx,{size:24})}),(0,Lx.jsxs)("div",{className:"stat-content",children:[(0,Lx.jsx)("span",{className:"stat-value",children:I.availableUnits}),(0,Lx.jsx)("span",{className:"stat-label",children:"Disponibles"})]})]}),(0,Lx.jsxs)("div",{className:"stat-card",children:[(0,Lx.jsx)("div",{className:"stat-icon value",children:(0,Lx.jsx)(Kx,{size:24})}),(0,Lx.jsxs)("div",{className:"stat-content",children:[(0,Lx.jsxs)("span",{className:"stat-value",children:[(I.totalValue/1e6).toFixed(1),"M\u20ac"]}),(0,Lx.jsx)("span",{className:"stat-label",children:"Valeur totale"})]})]}),(0,Lx.jsxs)("div",{className:"stat-card",children:[(0,Lx.jsx)("div",{className:"stat-icon occupancy",children:(0,Lx.jsx)(Yx,{size:24})}),(0,Lx.jsxs)("div",{className:"stat-content",children:[(0,Lx.jsxs)("span",{className:"stat-value",children:[I.occupancyRate.toFixed(1),"%"]}),(0,Lx.jsx)("span",{className:"stat-label",children:"Taux d'occupation"})]})]})]})]}),(0,Lx.jsxs)("div",{className:"projects-controls",children:[(0,Lx.jsxs)("div",{className:"controls-left",children:[(0,Lx.jsxs)("div",{className:"search-box",children:[(0,Lx.jsx)(BG,{size:20}),(0,Lx.jsx)("input",{type:"text",placeholder:"Rechercher un projet...",value:h,onChange:e=>p(e.target.value)})]}),(0,Lx.jsxs)("button",{className:"filter-btn ".concat(y?"active":""),onClick:()=>x(!y),children:[(0,Lx.jsx)(qG,{size:18}),"Filtres"]})]}),(0,Lx.jsxs)("div",{className:"controls-right",children:[(0,Lx.jsxs)("div",{className:"sort-controls",children:[(0,Lx.jsxs)("select",{value:m,onChange:e=>f(e.target.value),className:"sort-select",children:[(0,Lx.jsx)("option",{value:"date",children:"Date de cr\xe9ation"}),(0,Lx.jsx)("option",{value:"name",children:"Nom"}),(0,Lx.jsx)("option",{value:"units",children:"Nombre d'unit\xe9s"}),(0,Lx.jsx)("option",{value:"value",children:"Valeur"})]}),(0,Lx.jsx)("button",{className:"sort-order-btn",onClick:()=>v("asc"===g?"desc":"asc"),children:(0,Lx.jsx)(QY,{size:18})})]}),(0,Lx.jsxs)("div",{className:"view-toggle",children:[(0,Lx.jsx)("button",{className:"view-btn ".concat("grid"===u?"active":""),onClick:()=>d("grid"),children:(0,Lx.jsx)(vG,{size:18})}),(0,Lx.jsx)("button",{className:"view-btn ".concat("list"===u?"active":""),onClick:()=>d("list"),children:(0,Lx.jsx)(yG,{size:18})})]})]})]}),y&&(0,Lx.jsx)("div",{className:"filters-panel"}),(0,Lx.jsx)("div",{className:"projects-container ".concat(u),children:0===P.length?(0,Lx.jsxs)("div",{className:"empty-state",children:[(0,Lx.jsx)(Vx,{size:64}),(0,Lx.jsx)("h3",{children:"Aucun projet trouv\xe9"}),(0,Lx.jsx)("p",{children:h?"Aucun projet ne correspond \xe0 vos crit\xe8res de recherche.":"Commencez par cr\xe9er votre premier projet immobilier."}),!h&&(0,Lx.jsxs)("button",{className:"btn-primary",onClick:O,children:[(0,Lx.jsx)(Hx,{size:20}),"Cr\xe9er un projet"]})]}):(0,Lx.jsx)("div",{className:"projects-".concat(u),children:P.map(t=>(0,Lx.jsxs)("div",{className:"project-card",children:[t.mainImage&&(0,Lx.jsx)("div",{className:"project-card-image",children:(0,Lx.jsx)("img",{src:t.mainImage,alt:t.name})}),(0,Lx.jsx)("div",{className:"project-card-header",children:(0,Lx.jsxs)("div",{className:"project-actions",children:[(0,Lx.jsx)("button",{className:"action-btn",onClick:()=>e("/projects/".concat(t.id)),title:"Voir les d\xe9tails",children:(0,Lx.jsx)(PG,{size:18})}),(0,Lx.jsx)("button",{className:"action-btn",onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("Edit button clicked for project:",t),(e=>{console.log("Editing project:",e),_({name:e.name,description:e.description||"",type:e.type||"building",address:e.address||"",city:e.city||"",postalCode:e.postalCode||"",totalUnits:e.totalUnits||0,budget:e.budget||0,startDate:e.startDate?e.startDate instanceof Date?e.startDate.toISOString().split("T")[0]:new Date(e.startDate).toISOString().split("T")[0]:"",endDate:e.endDate?e.endDate instanceof Date?e.endDate.toISOString().split("T")[0]:new Date(e.endDate).toISOString().split("T")[0]:"",mainImage:e.mainImage||""}),N(e),j(!0)})(t)},title:"Modifier",children:(0,Lx.jsx)(DG,{size:18})}),(0,Lx.jsx)("button",{className:"action-btn danger",onClick:()=>(e=>{E(e),C(!0)})(t),title:"Supprimer",children:(0,Lx.jsx)(eG,{size:18})})]})}),(0,Lx.jsxs)("div",{className:"project-card-content",children:[(0,Lx.jsxs)("div",{className:"project-main-info",children:[(0,Lx.jsx)("h3",{className:"project-name",children:t.name}),(0,Lx.jsxs)("div",{className:"project-location",children:[(0,Lx.jsx)(Gx,{size:16}),(0,Lx.jsxs)("span",{children:[t.address,", ",t.city]})]}),t.description&&(0,Lx.jsx)("p",{className:"project-description",children:t.description.length>120?"".concat(t.description.substring(0,120),"..."):t.description})]}),(0,Lx.jsxs)("div",{className:"project-stats-grid",children:[(0,Lx.jsxs)("div",{className:"stat-item",children:[(0,Lx.jsx)(Bx,{size:16}),(0,Lx.jsx)("span",{className:"stat-number",children:t.unitsCount}),(0,Lx.jsx)("span",{className:"stat-text",children:"Unit\xe9s"})]}),(0,Lx.jsxs)("div",{className:"stat-item",children:[(0,Lx.jsx)(Wx,{size:16}),(0,Lx.jsx)("span",{className:"stat-number",children:t.availableUnits}),(0,Lx.jsx)("span",{className:"stat-text",children:"Disponibles"})]}),(0,Lx.jsxs)("div",{className:"stat-item",children:[(0,Lx.jsx)(Kx,{size:16}),(0,Lx.jsxs)("span",{className:"stat-number",children:[(t.totalValue/1e6).toFixed(1),"M\u20ac"]}),(0,Lx.jsx)("span",{className:"stat-text",children:"Valeur"})]}),(0,Lx.jsxs)("div",{className:"stat-item",children:[(0,Lx.jsx)(Yx,{size:16}),(0,Lx.jsxs)("span",{className:"stat-number",children:[t.occupancyRate.toFixed(0),"%"]}),(0,Lx.jsx)("span",{className:"stat-text",children:"Occupation"})]})]}),(t.startDate||t.endDate)&&(0,Lx.jsxs)("div",{className:"project-dates",children:[t.startDate&&(0,Lx.jsxs)("div",{className:"date-item",children:[(0,Lx.jsx)(Mx,{size:14}),(0,Lx.jsxs)("span",{children:["D\xe9but: ",new Date(t.startDate).toLocaleDateString()]})]}),t.endDate&&(0,Lx.jsxs)("div",{className:"date-item",children:[(0,Lx.jsx)(Mx,{size:14}),(0,Lx.jsxs)("span",{children:["Fin: ",new Date(t.endDate).toLocaleDateString()]})]})]})]}),(0,Lx.jsx)("div",{className:"project-card-footer",children:(0,Lx.jsx)("button",{className:"btn-view-project",onClick:()=>e("/projects/".concat(t.id)),children:"Voir le projet"})})]},t.id))})}),b&&(0,Lx.jsx)("div",{className:"modal-overlay",onClick:()=>j(!1),children:(0,Lx.jsxs)("div",{className:"modal-content large",onClick:e=>e.stopPropagation(),children:[(0,Lx.jsxs)("div",{className:"modal-header",children:[(0,Lx.jsx)("h2",{children:w?"Modifier le projet":"Nouveau projet"}),(0,Lx.jsx)("button",{className:"modal-close",onClick:()=>j(!1),children:(0,Lx.jsx)(HK,{size:20})})]}),(0,Lx.jsx)("div",{className:"modal-body",children:(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Nom du projet *"}),(0,Lx.jsx)("input",{type:"text",value:T.name,onChange:e=>_(t=>Me(Me({},t),{},{name:e.target.value})),placeholder:"Nom du projet"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Type de projet"}),(0,Lx.jsxs)("select",{value:T.type,onChange:e=>_(t=>Me(Me({},t),{},{type:e.target.value})),children:[(0,Lx.jsx)("option",{value:"building",children:"Immeuble"}),(0,Lx.jsx)("option",{value:"house",children:"Maison"}),(0,Lx.jsx)("option",{value:"commercial",children:"Commercial"}),(0,Lx.jsx)("option",{value:"mixed",children:"Mixte"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Adresse *"}),(0,Lx.jsx)("input",{type:"text",value:T.address,onChange:e=>_(t=>Me(Me({},t),{},{address:e.target.value})),placeholder:"Adresse du projet"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Ville"}),(0,Lx.jsx)("input",{type:"text",value:T.city,onChange:e=>_(t=>Me(Me({},t),{},{city:e.target.value})),placeholder:"Ville"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Code postal"}),(0,Lx.jsx)("input",{type:"text",value:T.postalCode,onChange:e=>_(t=>Me(Me({},t),{},{postalCode:e.target.value})),placeholder:"Code postal"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Nombre d'unit\xe9s pr\xe9vues"}),(0,Lx.jsx)("input",{type:"number",value:T.totalUnits,onChange:e=>_(t=>Me(Me({},t),{},{totalUnits:parseInt(e.target.value)||0})),min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Budget (\u20ac)"}),(0,Lx.jsx)("input",{type:"number",value:T.budget,onChange:e=>_(t=>Me(Me({},t),{},{budget:parseFloat(e.target.value)||0})),min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group full-width",children:[(0,Lx.jsx)("label",{children:"Image du projet"}),(0,Lx.jsx)(YY,{value:T.mainImage,onChange:e=>_(t=>Me(Me({},t),{},{mainImage:e})),onRemove:()=>_(e=>Me(Me({},e),{},{mainImage:""})),placeholder:"Ajouter une image pour illustrer le projet",projectId:null===w||void 0===w?void 0:w.id,isGallery:!1})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Date de d\xe9but"}),(0,Lx.jsx)("input",{type:"date",value:T.startDate,onChange:e=>_(t=>Me(Me({},t),{},{startDate:e.target.value}))})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Date de fin pr\xe9vue"}),(0,Lx.jsx)("input",{type:"date",value:T.endDate,onChange:e=>_(t=>Me(Me({},t),{},{endDate:e.target.value}))})]}),(0,Lx.jsxs)("div",{className:"form-group full-width",children:[(0,Lx.jsx)("label",{children:"Description"}),(0,Lx.jsx)("textarea",{value:T.description,onChange:e=>_(t=>Me(Me({},t),{},{description:e.target.value})),placeholder:"Description du projet...",rows:4})]})]})}),(0,Lx.jsxs)("div",{className:"modal-footer",children:[(0,Lx.jsx)("button",{className:"btn-secondary",onClick:()=>j(!1),children:"Annuler"}),(0,Lx.jsx)("button",{className:"btn-primary",onClick:async()=>{if(T.name.trim()&&T.address.trim())try{const e=Me(Me({},T),{},{status:"planning",startDate:T.startDate?new Date(T.startDate):void 0,endDate:T.endDate?new Date(T.endDate):void 0,totalValue:0,images:[],documents:[]});if(w){const t=Me(Me({},e),{},{mainImage:T.mainImage});await s(w.id,t)}else{const t=Me(Me({},e),{},{mainImage:T.mainImage});await a(t)}j(!1),N(null)}catch(e){console.error("Error saving project:",e),alert("Erreur lors de la sauvegarde du projet")}else alert("Veuillez remplir au moins le nom et l'adresse du projet")},children:w?"Modifier":"Cr\xe9er"})]})]})}),k&&S&&(0,Lx.jsx)("div",{className:"modal-overlay",onClick:()=>C(!1),children:(0,Lx.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Lx.jsxs)("div",{className:"modal-header",children:[(0,Lx.jsx)("h2",{children:"Confirmer la suppression"}),(0,Lx.jsx)("button",{className:"modal-close",onClick:()=>C(!1),children:(0,Lx.jsx)(HK,{size:20})})]}),(0,Lx.jsxs)("div",{className:"modal-body",children:[(0,Lx.jsxs)("p",{children:["\xcates-vous s\xfbr de vouloir supprimer le projet ",(0,Lx.jsx)("strong",{children:S.name})," ?"]}),(0,Lx.jsx)("p",{className:"warning-text",children:"Cette action est irr\xe9versible et supprimera \xe9galement toutes les unit\xe9s associ\xe9es."})]}),(0,Lx.jsxs)("div",{className:"modal-footer",children:[(0,Lx.jsx)("button",{className:"btn-secondary",onClick:()=>C(!1),children:"Annuler"}),(0,Lx.jsx)("button",{className:"btn-danger",onClick:async()=>{if(S)try{await o(S.id),C(!1),E(null)}catch(e){console.error("Error deleting project:",e),alert("Erreur lors de la suppression du projet")}},children:"Supprimer"})]})]})})]})},JY=async(e,t)=>{try{const n=Ud(kx,"projects",e);await Xh(n,{images:np(t),updatedAt:new Date})}catch(n){throw console.error("Error adding image to project:",n),new Error("Erreur lors de l'ajout de l'image au projet")}},$Y=Px("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ZY=Px("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]),eQ=Px("Bath",[["path",{d:"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"1r8yf5"}],["line",{x1:"10",x2:"8",y1:"5",y2:"7",key:"h5g8z4"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"7",x2:"7",y1:"19",y2:"21",key:"16jp00"}],["line",{x1:"17",x2:"17",y1:"19",y2:"21",key:"1pxrnk"}]]),tQ=Px("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]),nQ=()=>{var e,t,n,i,a,s,o,l,c,u,d;const{id:h}=ne(),p=te(),{user:m}=Sx(),{projects:f,loading:g,updateProject:v}=Fx(),{units:y,loading:x,fetchUnits:b,addUnit:j,updateUnit:w,deleteUnit:N}=Ux(),[k,C]=(0,r.useState)(null),[S,E]=(0,r.useState)("units"),[T,_]=(0,r.useState)(!1),[A,I]=(0,r.useState)(null),[P,O]=(0,r.useState)({}),[D,M]=(0,r.useState)([]),[R,L]=(0,r.useState)(!1),[z,F]=(0,r.useState)(null),[U,V]=(0,r.useState)([]),[B,q]=(0,r.useState)(!1),[H,W]=(0,r.useState)(!1),[K,G]=(0,r.useState)({name:"",description:"",type:"building",address:"",city:"",postalCode:"",status:"planning",totalUnits:0,budget:0,startDate:"",endDate:"",mainImage:""}),Y=r.useMemo(()=>y&&h?y.filter(e=>e.projectId===h):[],[y,h]);(0,r.useEffect)(()=>{if(h&&f.length>0){console.log("ProjectDetail: Loading project with id:",h),console.log("ProjectDetail: Available projects:",f);const e=f.find(e=>e.id===h);console.log("ProjectDetail: Found project:",e),C(e||null),null!==e&&void 0!==e&&e.images&&M(e.images)}},[h,f]),(0,r.useEffect)(()=>{null!==m&&void 0!==m&&m.uid&&(console.log("ProjectDetail: Loading data for user:",m.uid,"project:",h),b())},[null===m||void 0===m?void 0:m.uid]);const Q=e=>{switch(e){case"available":return"status-available";case"reserved":return"status-reserved";case"sold":return"status-sold";case"rented":return"status-rented";default:return"status-default"}},X=()=>{O({name:"",type:"apartment",surface:0,rooms:1,bedrooms:1,bathrooms:1,floor:0,price:0,description:"",availability:"available",condition:"good",orientation:"south",projectId:h||"",images:[],documents:[],fullAddress:"",country:"",destination:"habitation",hasElevator:!1,propertyTitle:"",energyCertificate:"",electricalCompliance:!1,gasCompliance:!1,urbanisticInfo:"",soilAttestation:!1,asbestosCertificate:!1,heatingCertificate:!1,cadastralPlan:"",mortgageStatus:"",leaseType:"residential",leaseDuration:"",securityDeposit:0,leaseRegistered:!1,energyClass:"not_specified",ghgEmissions:"not_specified",heatingType:"gas",hotWaterSystem:"gas",constructionYear:void 0,renovationYear:void 0,buildingMaterials:"",roofType:"",isolation:{walls:!1,roof:!1,doubleGlazing:!1},balcony:!1,balconyArea:0,terrace:!1,terraceArea:0,garden:!1,gardenArea:0,cellar:!1,attic:!1,elevator:!1,parking:!1,parkingSpaces:0,garage:!1,furnished:!1,kitchenType:"none",internetFiber:!1,airConditioning:!1,fireplace:!1,swimmingPool:!1,securitySystem:!1,intercom:!1,accessControl:!1,concierge:!1,commercialLicense:!1,shopWindow:!1,storageRoom:!1,loadingDock:!1,pricePerSqm:0,charges:0,propertyTax:0,coOwnershipFees:0,rentalYield:0,cadastralIncome:0,registrationFees:0,notaryFees:0,permits:[],servitudes:"",zoning:"residential",leadDiagnostic:!1,termitesDiagnostic:!1,noiseDiagnostic:!1,accessibility:{publicTransport:"",schools:"",shops:""},neighborhood:"",valueAppreciationPotential:"",buildingName:"",floorDescription:"",exposureDetails:"",noiseLevel:"quiet",proximityDetails:{metro:"",shops:"",schools:"",parks:""},uniqueFeatures:"",renovationNeeds:"",investmentPotential:"",targetTenant:"",managementCompany:"",buildingAge:0,lastRenovation:0,futureWorks:"",virtualTourUrl:"",plans:[]})};if(!m)return(0,Lx.jsx)("div",{className:"project-detail",children:(0,Lx.jsxs)("div",{className:"error-container",children:[(0,Lx.jsx)("h2",{children:"Authentification requise"}),(0,Lx.jsx)("p",{children:"Vous devez \xeatre connect\xe9 pour acc\xe9der aux d\xe9tails du projet."}),(0,Lx.jsx)("button",{onClick:()=>p("/login"),className:"btn-primary",children:"Se connecter"})]})});if(g)return(0,Lx.jsx)("div",{className:"project-detail",children:(0,Lx.jsxs)("div",{className:"loading-container",children:[(0,Lx.jsx)("div",{className:"loading-spinner"}),(0,Lx.jsx)("p",{children:"Chargement du projet..."})]})});if(!k&&!g)return(0,Lx.jsx)("div",{className:"project-detail",children:(0,Lx.jsxs)("div",{className:"error-container",children:[(0,Lx.jsx)("h2",{children:"Projet non trouv\xe9"}),(0,Lx.jsx)("p",{children:"Le projet demand\xe9 n'existe pas ou vous n'avez pas les permissions pour y acc\xe9der."}),(0,Lx.jsx)("button",{onClick:()=>p("/projets"),className:"btn-primary",children:"Retour aux projets"})]})});const J=e=>{switch(e){case"available":return"Disponible";case"reserved":return"R\xe9serv\xe9";case"sold":return"Vendu";case"rented":return"Lou\xe9";default:return e}},$=Y.filter(e=>"available"===e.availability).length,Z=Y.reduce((e,t)=>e+(t.price||0),0),ee=Y.length>0?Z/Y.length:0,re=()=>{X(),O(e=>Me(Me({},e),{},{projectId:h,name:"",type:"apartment",surface:0,rooms:1,bedrooms:1,bathrooms:1,floor:0,price:0,description:"",availability:"available",condition:"good",orientation:"south",images:[],documents:[]})),I(null),_(!0),console.log("Creating new unit for project:",h)},ie=async e=>{if(confirm("Supprimer cette image ?"))try{const t=D[e];await(async(e,t)=>{try{const n=Ud(kx,"projects",e);await Xh(n,{images:rp(t),updatedAt:new Date})}catch(n){throw console.error("Error removing image from project:",n),new Error("Erreur lors de la suppression de l'image du projet")}})(k.id,t),M(t=>t.filter((t,n)=>n!==e)),console.log("Image deleted successfully:",t)}catch(t){console.error("Error deleting image:",t),alert("Erreur lors de la suppression de l'image")}};return g||x?(0,Lx.jsx)("div",{className:"project-detail",children:(0,Lx.jsx)("div",{className:"loading-state",children:(0,Lx.jsx)("p",{children:"Chargement du projet..."})})}):(0,Lx.jsxs)("div",{className:"project-detail",children:[(0,Lx.jsxs)("div",{className:"project-detail-header",children:[(0,Lx.jsxs)("div",{className:"header-top",children:[(0,Lx.jsxs)("button",{className:"back-button",onClick:()=>p("/projets"),children:[(0,Lx.jsx)($Y,{size:20}),"Retour aux projets"]}),(0,Lx.jsxs)("div",{className:"header-actions",children:[(0,Lx.jsxs)("button",{className:"btn-secondary",onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("Button clicked!"),console.log("handleEditProject called, project:",k),console.log("Current isProjectModalOpen:",H),k?(console.log("Setting project form with data:",k),G({name:k.name,description:k.description||"",type:k.type||"building",address:k.address||"",city:k.city||"",postalCode:k.postalCode||"",status:k.status||"planning",totalUnits:k.totalUnits||0,budget:k.budget||0,startDate:k.startDate?k.startDate instanceof Date?k.startDate.toISOString().split("T")[0]:new Date(k.startDate).toISOString().split("T")[0]:"",endDate:k.endDate?k.endDate instanceof Date?k.endDate.toISOString().split("T")[0]:new Date(k.endDate).toISOString().split("T")[0]:"",mainImage:k.mainImage||""}),console.log("Opening modal..."),W(!0),console.log("Modal should be open now")):console.log("No project found")},children:[(0,Lx.jsx)(DG,{size:16}),"Modifier le projet"]}),(0,Lx.jsxs)("button",{className:"btn-primary",onClick:re,children:[(0,Lx.jsx)(Hx,{size:16}),"Ajouter unit\xe9"]})]})]}),(0,Lx.jsxs)("div",{className:"project-hero",children:[null!==k&&void 0!==k&&k.mainImage?(0,Lx.jsx)("div",{className:"project-hero-image",children:(0,Lx.jsx)("img",{src:k.mainImage,alt:k.name})}):(0,Lx.jsx)("div",{className:"project-icon",children:(0,Lx.jsx)(Vx,{size:40})}),(0,Lx.jsxs)("div",{className:"project-main-info",children:[(0,Lx.jsx)("h1",{children:(null===k||void 0===k?void 0:k.name)||"Projet sans nom"}),(0,Lx.jsxs)("div",{className:"project-meta",children:[(0,Lx.jsxs)("div",{className:"project-location",children:[(0,Lx.jsx)(Gx,{size:18}),(0,Lx.jsxs)("span",{children:[(null===k||void 0===k?void 0:k.address)||"Adresse non d\xe9finie",", ",(null===k||void 0===k?void 0:k.city)||"Ville non d\xe9finie"]})]}),(0,Lx.jsx)("div",{className:"project-status",children:(0,Lx.jsx)("span",{className:"status-badge-large ".concat((e=>{switch(e){case"planning":return"project-status-planning";case"construction":return"project-status-construction";case"completed":return"project-status-completed";case"on_hold":return"project-status-hold";default:return"project-status-default"}})((null===k||void 0===k?void 0:k.status)||"planning")),children:(e=>{switch(e){case"planning":return"Planification";case"construction":return"Construction";case"completed":return"Termin\xe9";case"on_hold":return"En attente";default:return e}})((null===k||void 0===k?void 0:k.status)||"planning")})})]}),(null===k||void 0===k?void 0:k.description)&&(0,Lx.jsx)("p",{className:"project-description",children:k.description})]})]})]}),(0,Lx.jsxs)("div",{className:"project-quick-stats",children:[(0,Lx.jsxs)("div",{className:"quick-stat",children:[(0,Lx.jsx)("div",{className:"quick-stat-icon home",children:(0,Lx.jsx)(Bx,{size:20})}),(0,Lx.jsxs)("div",{className:"quick-stat-content",children:[(0,Lx.jsx)("span",{className:"quick-stat-value",children:Y.length}),(0,Lx.jsx)("span",{className:"quick-stat-label",children:"Unit\xe9s"})]})]}),(0,Lx.jsxs)("div",{className:"quick-stat",children:[(0,Lx.jsx)("div",{className:"quick-stat-icon available",children:(0,Lx.jsx)(Wx,{size:20})}),(0,Lx.jsxs)("div",{className:"quick-stat-content",children:[(0,Lx.jsx)("span",{className:"quick-stat-value",children:$}),(0,Lx.jsx)("span",{className:"quick-stat-label",children:"Disponibles"})]})]}),(0,Lx.jsxs)("div",{className:"quick-stat",children:[(0,Lx.jsx)("div",{className:"quick-stat-icon value",children:(0,Lx.jsx)(Kx,{size:20})}),(0,Lx.jsxs)("div",{className:"quick-stat-content",children:[(0,Lx.jsxs)("span",{className:"quick-stat-value",children:[(Z/1e6).toFixed(1),"M\u20ac"]}),(0,Lx.jsx)("span",{className:"quick-stat-label",children:"Valeur totale"})]})]}),(0,Lx.jsxs)("div",{className:"quick-stat",children:[(0,Lx.jsx)("div",{className:"quick-stat-icon average",children:(0,Lx.jsx)(Mx,{size:20})}),(0,Lx.jsxs)("div",{className:"quick-stat-content",children:[(0,Lx.jsxs)("span",{className:"quick-stat-value",children:[(ee/1e3).toFixed(0),"k\u20ac"]}),(0,Lx.jsx)("span",{className:"quick-stat-label",children:"Prix moyen"})]})]})]}),(0,Lx.jsx)("div",{className:"project-navigation",children:(0,Lx.jsxs)("div",{className:"nav-tabs",children:[(0,Lx.jsxs)("button",{className:"nav-tab ".concat("units"===S?"active":""),onClick:()=>E("units"),children:[(0,Lx.jsx)(Bx,{size:18}),(0,Lx.jsx)("span",{children:"Unit\xe9s"}),(0,Lx.jsx)("span",{className:"tab-count",children:Y.length})]}),(0,Lx.jsxs)("button",{className:"nav-tab ".concat("overview"===S?"active":""),onClick:()=>E("overview"),children:[(0,Lx.jsx)(Vx,{size:18}),(0,Lx.jsx)("span",{children:"Vue d'ensemble"})]}),(0,Lx.jsxs)("button",{className:"nav-tab ".concat("gallery"===S?"active":""),onClick:()=>E("gallery"),children:[(0,Lx.jsx)(jG,{size:18}),(0,Lx.jsx)("span",{children:"Galerie"}),(0,Lx.jsx)("span",{className:"tab-count",children:D.length})]}),(0,Lx.jsxs)("button",{className:"nav-tab ".concat("documents"===S?"active":""),onClick:()=>E("documents"),children:[(0,Lx.jsx)(GK,{size:18}),(0,Lx.jsx)("span",{children:"Documents"}),(0,Lx.jsx)("span",{className:"tab-count",children:U.length})]})]})}),(0,Lx.jsxs)("div",{className:"tab-content",children:["overview"===S&&(0,Lx.jsx)("div",{className:"overview-content",children:(0,Lx.jsxs)("div",{className:"overview-grid",children:[(0,Lx.jsxs)("div",{className:"overview-section",children:[(0,Lx.jsx)("h3",{children:"Description du projet"}),(0,Lx.jsx)("p",{children:(null===k||void 0===k?void 0:k.description)||"Aucune description disponible."}),(0,Lx.jsx)("h3",{children:"Informations g\xe9n\xe9rales"}),(0,Lx.jsxs)("div",{className:"info-grid",children:[(0,Lx.jsxs)("div",{className:"info-item",children:[(0,Lx.jsx)("label",{children:"Type de projet"}),(0,Lx.jsx)("span",{children:"building"===(null===k||void 0===k?void 0:k.type)?"Immeuble":(null===k||void 0===k?void 0:k.type)||"Non sp\xe9cifi\xe9"})]}),(0,Lx.jsxs)("div",{className:"info-item",children:[(0,Lx.jsx)("label",{children:"Nombre d'unit\xe9s pr\xe9vues"}),(0,Lx.jsx)("span",{children:(null===k||void 0===k?void 0:k.totalUnits)||Y.length||"Non sp\xe9cifi\xe9"})]}),(0,Lx.jsxs)("div",{className:"info-item",children:[(0,Lx.jsx)("label",{children:"Date de d\xe9but"}),(0,Lx.jsx)("span",{children:null!==k&&void 0!==k&&k.startDate?k.startDate.toDate?new Date(k.startDate.toDate()).toLocaleDateString():new Date(k.startDate).toLocaleDateString():"Non d\xe9finie"})]}),(0,Lx.jsxs)("div",{className:"info-item",children:[(0,Lx.jsx)("label",{children:"Date de fin pr\xe9vue"}),(0,Lx.jsx)("span",{children:null!==k&&void 0!==k&&k.endDate?k.endDate.toDate?new Date(k.endDate.toDate()).toLocaleDateString():new Date(k.endDate).toLocaleDateString():"Non d\xe9finie"})]}),(0,Lx.jsxs)("div",{className:"info-item",children:[(0,Lx.jsx)("label",{children:"Budget total"}),(0,Lx.jsx)("span",{children:null!==k&&void 0!==k&&k.budget?"".concat(k.budget.toLocaleString()," \u20ac"):"Non d\xe9fini"})]}),(0,Lx.jsxs)("div",{className:"info-item",children:[(0,Lx.jsx)("label",{children:"Surface totale"}),(0,Lx.jsx)("span",{children:null!==k&&void 0!==k&&k.totalSurface?"".concat(k.totalSurface," m\xb2"):Y.reduce((e,t)=>e+(t.surface||0),0)>0?"".concat(Y.reduce((e,t)=>e+(t.surface||0),0)," m\xb2"):"Non d\xe9finie"})]})]})]}),(0,Lx.jsxs)("div",{className:"overview-section",children:[(0,Lx.jsx)("h3",{children:"R\xe9partition des unit\xe9s"}),(0,Lx.jsxs)("div",{className:"units-breakdown",children:[(0,Lx.jsxs)("div",{className:"breakdown-item",children:[(0,Lx.jsx)("span",{className:"breakdown-label",children:"Disponibles"}),(0,Lx.jsx)("span",{className:"breakdown-value available",children:$})]}),(0,Lx.jsxs)("div",{className:"breakdown-item",children:[(0,Lx.jsx)("span",{className:"breakdown-label",children:"R\xe9serv\xe9es"}),(0,Lx.jsx)("span",{className:"breakdown-value reserved",children:Y.filter(e=>"reserved"===e.availability).length})]}),(0,Lx.jsxs)("div",{className:"breakdown-item",children:[(0,Lx.jsx)("span",{className:"breakdown-label",children:"Vendues"}),(0,Lx.jsx)("span",{className:"breakdown-value sold",children:Y.filter(e=>"sold"===e.availability).length})]}),(0,Lx.jsxs)("div",{className:"breakdown-item",children:[(0,Lx.jsx)("span",{className:"breakdown-label",children:"Lou\xe9es"}),(0,Lx.jsx)("span",{className:"breakdown-value rented",children:Y.filter(e=>"rented"===e.availability).length})]})]})]})]})}),"units"===S&&(0,Lx.jsxs)("div",{className:"units-content",children:[(0,Lx.jsxs)("div",{className:"units-header",children:[(0,Lx.jsxs)("div",{className:"units-title-section",children:[(0,Lx.jsxs)("h3",{children:["Unit\xe9s du projet (",Y.length,")"]}),(0,Lx.jsxs)("div",{className:"units-summary",children:[(0,Lx.jsxs)("span",{className:"summary-item available",children:[(0,Lx.jsx)("span",{className:"summary-dot"}),$," disponibles"]}),(0,Lx.jsxs)("span",{className:"summary-item reserved",children:[(0,Lx.jsx)("span",{className:"summary-dot"}),Y.filter(e=>"reserved"===e.availability).length," r\xe9serv\xe9es"]}),(0,Lx.jsxs)("span",{className:"summary-item sold",children:[(0,Lx.jsx)("span",{className:"summary-dot"}),Y.filter(e=>"sold"===e.availability).length," vendues"]})]})]}),(0,Lx.jsxs)("button",{className:"btn-primary",onClick:re,children:[(0,Lx.jsx)(Hx,{size:16}),"Ajouter une unit\xe9"]})]}),x?(0,Lx.jsxs)("div",{className:"loading-container",children:[(0,Lx.jsx)("div",{className:"loading-spinner"}),(0,Lx.jsx)("p",{children:"Chargement des unit\xe9s..."})]}):0===Y.length?(0,Lx.jsxs)("div",{className:"empty-state",children:[(0,Lx.jsx)("div",{className:"empty-icon",children:(0,Lx.jsx)(Bx,{size:48})}),(0,Lx.jsx)("h3",{children:"Aucune unit\xe9 dans ce projet"}),(0,Lx.jsx)("p",{children:"Commencez par ajouter votre premi\xe8re unit\xe9 \xe0 ce projet."}),(0,Lx.jsxs)("button",{className:"btn-primary",onClick:re,children:[(0,Lx.jsx)(Hx,{size:16}),"Ajouter une unit\xe9"]})]}):(0,Lx.jsx)("div",{className:"units-showcase",children:(0,Lx.jsx)("div",{className:"units-grid-enhanced",children:Y.map(e=>{var t;return(0,Lx.jsxs)("div",{className:"unit-block",children:[(0,Lx.jsxs)("div",{className:"unit-block-header",children:[e.images&&e.images.length>0?(0,Lx.jsx)("div",{className:"unit-image",children:(0,Lx.jsx)("img",{src:e.images[0],alt:e.name})}):(0,Lx.jsx)("div",{className:"unit-image-placeholder",children:(0,Lx.jsx)("div",{className:"unit-type-badge",children:"apartment"===e.type?"\ud83c\udfe0":"house"===e.type?"\ud83c\udfe1":"commercial"===e.type||"office"===e.type?"\ud83c\udfe2":"retail"===e.type?"\ud83c\udfea":"storage"===e.type?"\ud83d\udce6":"parking"===e.type?"\ud83d\ude97":"land"===e.type?"\ud83c\udf0d":"\ud83c\udfe0"})}),(0,Lx.jsx)("div",{className:"unit-status-indicator",children:(0,Lx.jsx)("span",{className:"status-dot ".concat(Q(e.availability))})})]}),(0,Lx.jsxs)("div",{className:"unit-block-content",children:[(0,Lx.jsxs)("div",{className:"unit-title",children:[(0,Lx.jsx)("h4",{children:e.name}),(0,Lx.jsx)("span",{className:"status-badge-modern ".concat(Q(e.availability)),children:J(e.availability)})]}),(0,Lx.jsx)("div",{className:"unit-type-label",children:"apartment"===e.type?"Appartement":"house"===e.type?"Maison":"commercial"===e.type?"Commercial":"office"===e.type?"Bureau":"retail"===e.type?"Commerce":"storage"===e.type?"Stockage":"parking"===e.type?"Parking":"land"===e.type?"Terrain":e.type}),(0,Lx.jsxs)("div",{className:"unit-price-section",children:[(0,Lx.jsxs)("div",{className:"main-price",children:[null===(t=e.price)||void 0===t?void 0:t.toLocaleString(),"\u20ac"]}),(0,Lx.jsx)("div",{className:"price-per-sqm",children:e.surface&&e.price?"".concat(Math.round(e.price/e.surface).toLocaleString(),"\u20ac/m\xb2"):""})]}),(0,Lx.jsxs)("div",{className:"unit-specs-modern",children:[(0,Lx.jsxs)("div",{className:"spec-item-modern",children:[(0,Lx.jsx)(Bx,{size:18}),(0,Lx.jsxs)("span",{children:[e.surface,"m\xb2"]})]}),e.rooms&&(0,Lx.jsxs)("div",{className:"spec-item-modern",children:[(0,Lx.jsx)("span",{className:"spec-icon",children:"\ud83c\udfe0"}),(0,Lx.jsxs)("span",{children:[e.rooms,"P"]})]}),e.bedrooms&&(0,Lx.jsxs)("div",{className:"spec-item-modern",children:[(0,Lx.jsx)(ZY,{size:18}),(0,Lx.jsx)("span",{children:e.bedrooms})]}),e.bathrooms&&(0,Lx.jsxs)("div",{className:"spec-item-modern",children:[(0,Lx.jsx)(eQ,{size:18}),(0,Lx.jsx)("span",{children:e.bathrooms})]})]}),(0,Lx.jsxs)("div",{className:"unit-details-row",children:[void 0!==e.floor&&(0,Lx.jsxs)("div",{className:"detail-item",children:[(0,Lx.jsx)(Vx,{size:14}),(0,Lx.jsxs)("span",{children:["\xc9tage ",e.floor]})]}),e.orientation&&(0,Lx.jsxs)("div",{className:"detail-item",children:[(0,Lx.jsx)(tQ,{size:14}),(0,Lx.jsx)("span",{children:e.orientation})]})]}),e.description&&(0,Lx.jsx)("div",{className:"unit-description-preview",children:(0,Lx.jsx)("p",{children:e.description.length>80?"".concat(e.description.substring(0,80),"..."):e.description})})]}),(0,Lx.jsxs)("div",{className:"unit-block-actions",children:[(0,Lx.jsxs)("button",{className:"btn-view-details",onClick:()=>p("/units/".concat(e.id)),children:[(0,Lx.jsx)(PG,{size:16}),"Voir d\xe9tails"]}),(0,Lx.jsxs)("div",{className:"action-buttons",children:[(0,Lx.jsx)("button",{className:"btn-icon",onClick:()=>(e=>{I(e),O({name:e.name,type:e.type,surface:e.surface,rooms:e.rooms,bedrooms:e.bedrooms,bathrooms:e.bathrooms,floor:e.floor,price:e.price,description:e.description||"",availability:e.availability,condition:e.condition,orientation:e.orientation,fullAddress:e.fullAddress||"",country:e.country||"",destination:e.destination||"habitation",hasElevator:e.hasElevator||!1,propertyTitle:e.propertyTitle||"",energyCertificate:e.energyCertificate||"",electricalCompliance:e.electricalCompliance||!1,gasCompliance:e.gasCompliance||!1,urbanisticInfo:e.urbanisticInfo||"",soilAttestation:e.soilAttestation||!1,asbestosCertificate:e.asbestosCertificate||!1,heatingCertificate:e.heatingCertificate||!1,cadastralPlan:e.cadastralPlan||"",mortgageStatus:e.mortgageStatus||"",leaseType:e.leaseType||"residential",leaseDuration:e.leaseDuration||"",securityDeposit:e.securityDeposit||0,leaseRegistered:e.leaseRegistered||!1,energyClass:e.energyClass||"not_specified",ghgEmissions:e.ghgEmissions||"not_specified",heatingType:e.heatingType||"gas",hotWaterSystem:e.hotWaterSystem||"gas",constructionYear:e.constructionYear,renovationYear:e.renovationYear,buildingMaterials:e.buildingMaterials||"",roofType:e.roofType||"",isolation:e.isolation||{walls:!1,roof:!1,doubleGlazing:!1},balcony:e.balcony||!1,balconyArea:e.balconyArea||0,terrace:e.terrace||!1,terraceArea:e.terraceArea||0,garden:e.garden||!1,gardenArea:e.gardenArea||0,cellar:e.cellar||!1,attic:e.attic||!1,elevator:e.elevator||!1,parking:e.parking||!1,parkingSpaces:e.parkingSpaces||0,garage:e.garage||!1,furnished:e.furnished||!1,kitchenType:e.kitchenType||"none",internetFiber:e.internetFiber||!1,airConditioning:e.airConditioning||!1,fireplace:e.fireplace||!1,swimmingPool:e.swimmingPool||!1,securitySystem:e.securitySystem||!1,intercom:e.intercom||!1,accessControl:e.accessControl||!1,concierge:e.concierge||!1,commercialLicense:e.commercialLicense||!1,shopWindow:e.shopWindow||!1,storageRoom:e.storageRoom||!1,loadingDock:e.loadingDock||!1,pricePerSqm:e.pricePerSqm||0,charges:e.charges||0,propertyTax:e.propertyTax||0,coOwnershipFees:e.coOwnershipFees||0,rentalYield:e.rentalYield||0,cadastralIncome:e.cadastralIncome||0,registrationFees:e.registrationFees||0,notaryFees:e.notaryFees||0,permits:e.permits||[],servitudes:e.servitudes||"",zoning:e.zoning||"residential",leadDiagnostic:e.leadDiagnostic||!1,termitesDiagnostic:e.termitesDiagnostic||!1,noiseDiagnostic:e.noiseDiagnostic||!1,accessibility:e.accessibility||{publicTransport:"",schools:"",shops:""},neighborhood:e.neighborhood||"",valueAppreciationPotential:e.valueAppreciationPotential||"",images:e.images||[],documents:e.documents||[],virtualTourUrl:e.virtualTourUrl||"",plans:e.plans||[]}),_(!0)})(e),title:"Modifier",children:(0,Lx.jsx)(ZK,{size:16})}),(0,Lx.jsx)("button",{className:"btn-icon danger",onClick:()=>(async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer cette unit\xe9 ?"))try{await N(e)}catch(t){console.error("Error deleting unit:",t),alert("Erreur lors de la suppression")}})(e.id),title:"Supprimer",children:(0,Lx.jsx)(eG,{size:16})})]})]})]},e.id)})})})]}),"gallery"===S&&(0,Lx.jsxs)("div",{className:"gallery-content",children:[(0,Lx.jsxs)("div",{className:"gallery-header",children:[(0,Lx.jsxs)("h3",{children:["Galerie photos (",D.length,")"]}),(0,Lx.jsxs)("div",{className:"gallery-actions",children:[(0,Lx.jsx)("input",{type:"file",id:"image-upload",multiple:!0,accept:"image/*",onChange:async e=>{const t=e.target.files;if(t&&null!==k&&void 0!==k&&k.id)try{const e=Array.from(t).map(e=>GY(e,k.id)),n=await Promise.all(e);for(const t of n)await JY(k.id,t);M(e=>[...e,...n]),console.log("Images uploaded and saved successfully:",n)}catch(n){console.error("Error uploading images:",n),alert("Erreur lors du t\xe9l\xe9chargement des images")}},style:{display:"none"}}),(0,Lx.jsxs)("button",{className:"btn-primary",onClick:()=>{var e;return null===(e=document.getElementById("image-upload"))||void 0===e?void 0:e.click()},children:[(0,Lx.jsx)(Hx,{size:16}),"Ajouter des photos"]})]})]}),0===D.length?(0,Lx.jsxs)("div",{className:"gallery-placeholder",children:[(0,Lx.jsx)(jG,{size:48}),(0,Lx.jsx)("h3",{children:"Aucune photo"}),(0,Lx.jsx)("p",{children:"Ajoutez des photos pour pr\xe9senter votre projet."})]}):(0,Lx.jsx)("div",{className:"gallery-grid",children:D.map((e,t)=>(0,Lx.jsxs)("div",{className:"gallery-item",children:[(0,Lx.jsx)("img",{src:e,alt:"Photo ".concat(t+1),onClick:()=>{F(e),L(!0)}}),(0,Lx.jsx)("div",{className:"gallery-item-overlay",children:(0,Lx.jsx)("button",{className:"btn-danger btn-sm",onClick:()=>ie(t),children:(0,Lx.jsx)(eG,{size:14})})})]},t))})]}),"documents"===S&&(0,Lx.jsxs)("div",{className:"documents-content",children:[(0,Lx.jsxs)("div",{className:"documents-header",children:[(0,Lx.jsxs)("h3",{children:["Documents du projet (",U.length,")"]}),(0,Lx.jsxs)("div",{className:"documents-actions",children:[(0,Lx.jsx)("input",{type:"file",id:"document-upload",multiple:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.txt,.jpg,.jpeg,.png",onChange:e=>{const t=e.target.files;t&&Array.from(t).forEach(e=>{const t={id:Date.now()+Math.random(),name:e.name,type:e.type,size:e.size,uploadDate:new Date,url:URL.createObjectURL(e)};V(e=>[...e,t])})},style:{display:"none"}}),(0,Lx.jsxs)("button",{className:"btn-primary",onClick:()=>{var e;return null===(e=document.getElementById("document-upload"))||void 0===e?void 0:e.click()},children:[(0,Lx.jsx)(Hx,{size:16}),"Ajouter des documents"]})]})]}),0===U.length?(0,Lx.jsxs)("div",{className:"documents-placeholder",children:[(0,Lx.jsx)(GK,{size:48}),(0,Lx.jsx)("h3",{children:"Aucun document"}),(0,Lx.jsx)("p",{children:"Ajoutez des documents (plans, contrats, etc.) pour ce projet."})]}):(0,Lx.jsx)("div",{className:"documents-list",children:U.map(e=>(0,Lx.jsxs)("div",{className:"document-item",children:[(0,Lx.jsx)("div",{className:"document-icon",children:(0,Lx.jsx)(GK,{size:24})}),(0,Lx.jsxs)("div",{className:"document-info",children:[(0,Lx.jsx)("h4",{children:e.name}),(0,Lx.jsxs)("div",{className:"document-meta",children:[(0,Lx.jsxs)("span",{children:[(e.size/1024).toFixed(1)," KB"]}),(0,Lx.jsx)("span",{children:"\u2022"}),(0,Lx.jsx)("span",{children:e.uploadDate.toLocaleDateString()})]})]}),(0,Lx.jsxs)("div",{className:"document-actions",children:[(0,Lx.jsx)("button",{className:"btn-secondary btn-sm",onClick:()=>window.open(e.url,"_blank"),children:"Ouvrir"}),(0,Lx.jsx)("button",{className:"btn-danger btn-sm",onClick:()=>{return t=e.id,void(confirm("Supprimer ce document ?")&&V(e=>e.filter(e=>e.id!==t)));var t},children:(0,Lx.jsx)(eG,{size:14})})]})]},e.id))})]})]}),H&&(0,Lx.jsx)("div",{className:"modal-overlay",onClick:()=>W(!1),children:(0,Lx.jsxs)("div",{className:"modal-content large-modal",onClick:e=>e.stopPropagation(),children:[(0,Lx.jsxs)("div",{className:"modal-header",children:[(0,Lx.jsx)("h3",{children:"Modifier le projet"}),(0,Lx.jsx)("button",{className:"modal-close",onClick:()=>W(!1),children:(0,Lx.jsx)(HK,{size:20})})]}),(0,Lx.jsx)("div",{className:"modal-body",children:(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Nom du projet *"}),(0,Lx.jsx)("input",{type:"text",value:K.name,onChange:e=>G(t=>Me(Me({},t),{},{name:e.target.value})),placeholder:"Nom du projet"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Type de projet"}),(0,Lx.jsxs)("select",{value:K.type,onChange:e=>G(t=>Me(Me({},t),{},{type:e.target.value})),children:[(0,Lx.jsx)("option",{value:"building",children:"Immeuble"}),(0,Lx.jsx)("option",{value:"house",children:"Maison"}),(0,Lx.jsx)("option",{value:"complex",children:"Complexe"}),(0,Lx.jsx)("option",{value:"land",children:"Terrain"}),(0,Lx.jsx)("option",{value:"commercial",children:"Commercial"}),(0,Lx.jsx)("option",{value:"mixed",children:"Mixte"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Adresse *"}),(0,Lx.jsx)("input",{type:"text",value:K.address,onChange:e=>G(t=>Me(Me({},t),{},{address:e.target.value})),placeholder:"Adresse"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Ville"}),(0,Lx.jsx)("input",{type:"text",value:K.city,onChange:e=>G(t=>Me(Me({},t),{},{city:e.target.value})),placeholder:"Ville"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Code postal"}),(0,Lx.jsx)("input",{type:"text",value:K.postalCode,onChange:e=>G(t=>Me(Me({},t),{},{postalCode:e.target.value})),placeholder:"Code postal"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Statut"}),(0,Lx.jsxs)("select",{value:K.status,onChange:e=>G(t=>Me(Me({},t),{},{status:e.target.value})),children:[(0,Lx.jsx)("option",{value:"planning",children:"Planification"}),(0,Lx.jsx)("option",{value:"construction",children:"Construction"}),(0,Lx.jsx)("option",{value:"completed",children:"Termin\xe9"}),(0,Lx.jsx)("option",{value:"on_hold",children:"En attente"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Nombre d'unit\xe9s pr\xe9vues"}),(0,Lx.jsx)("input",{type:"number",value:K.totalUnits,onChange:e=>G(t=>Me(Me({},t),{},{totalUnits:Number(e.target.value)})),placeholder:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Budget (\u20ac)"}),(0,Lx.jsx)("input",{type:"number",value:K.budget,onChange:e=>G(t=>Me(Me({},t),{},{budget:Number(e.target.value)})),placeholder:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group full-width",children:[(0,Lx.jsx)("label",{children:"Image du projet"}),(0,Lx.jsx)(YY,{value:K.mainImage,onChange:e=>G(t=>Me(Me({},t),{},{mainImage:e})),onRemove:()=>G(e=>Me(Me({},e),{},{mainImage:""})),projectId:null===k||void 0===k?void 0:k.id})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Date de d\xe9but"}),(0,Lx.jsx)("input",{type:"date",value:K.startDate,onChange:e=>G(t=>Me(Me({},t),{},{startDate:e.target.value}))})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Date de fin pr\xe9vue"}),(0,Lx.jsx)("input",{type:"date",value:K.endDate,onChange:e=>G(t=>Me(Me({},t),{},{endDate:e.target.value}))})]}),(0,Lx.jsxs)("div",{className:"form-group full-width",children:[(0,Lx.jsx)("label",{children:"Description"}),(0,Lx.jsx)("textarea",{value:K.description,onChange:e=>G(t=>Me(Me({},t),{},{description:e.target.value})),placeholder:"Description du projet...",rows:4})]})]})}),(0,Lx.jsxs)("div",{className:"modal-footer",children:[(0,Lx.jsx)("button",{className:"btn-secondary",onClick:()=>W(!1),children:"Annuler"}),(0,Lx.jsx)("button",{className:"btn-primary",onClick:async()=>{if(K.name.trim()&&K.address.trim())try{const e=Me(Me({},K),{},{startDate:K.startDate?new Date(K.startDate):void 0,endDate:K.endDate?new Date(K.endDate):void 0,mainImage:K.mainImage});await v(k.id,e),W(!1);const t=f.find(e=>e.id===k.id);t&&C(t)}catch(e){console.error("Error saving project:",e),alert("Erreur lors de la sauvegarde du projet")}else alert("Veuillez remplir au moins le nom et l'adresse du projet")},children:"Modifier"})]})]})}),T&&(0,Lx.jsx)("div",{className:"modal-overlay",onClick:()=>_(!1),children:(0,Lx.jsxs)("div",{className:"modal-content large-modal",onClick:e=>e.stopPropagation(),children:[(0,Lx.jsxs)("div",{className:"modal-header",children:[(0,Lx.jsx)("h3",{children:A?"Modifier l'unit\xe9":"Nouvelle unit\xe9"}),(0,Lx.jsx)("button",{className:"modal-close",onClick:()=>{_(!1),I(null),X()},children:(0,Lx.jsx)(HK,{size:20})})]}),(0,Lx.jsx)("div",{className:"modal-body",children:(0,Lx.jsxs)("div",{className:"form-sections",children:[(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsx)("h4",{children:"Informations de base"}),(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Nom de l'unit\xe9 *"}),(0,Lx.jsx)("input",{type:"text",value:P.name||"",onChange:e=>O(t=>Me(Me({},t),{},{name:e.target.value})),placeholder:"Ex: Appartement A1",required:!0})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Type"}),(0,Lx.jsxs)("select",{value:P.type||"apartment",onChange:e=>O(t=>Me(Me({},t),{},{type:e.target.value})),children:[(0,Lx.jsx)("option",{value:"apartment",children:"Appartement"}),(0,Lx.jsx)("option",{value:"house",children:"Maison"}),(0,Lx.jsx)("option",{value:"commercial",children:"Commercial"}),(0,Lx.jsx)("option",{value:"office",children:"Bureau"}),(0,Lx.jsx)("option",{value:"retail",children:"Commerce"}),(0,Lx.jsx)("option",{value:"storage",children:"Stockage"}),(0,Lx.jsx)("option",{value:"parking",children:"Parking"}),(0,Lx.jsx)("option",{value:"land",children:"Terrain"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Destination"}),(0,Lx.jsxs)("select",{value:P.destination||"habitation",onChange:e=>O(t=>Me(Me({},t),{},{destination:e.target.value})),children:[(0,Lx.jsx)("option",{value:"habitation",children:"Habitation"}),(0,Lx.jsx)("option",{value:"commerce",children:"Commerce"}),(0,Lx.jsx)("option",{value:"mixte",children:"Mixte"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Adresse compl\xe8te"}),(0,Lx.jsx)("input",{type:"text",value:P.fullAddress||"",onChange:e=>O(t=>Me(Me({},t),{},{fullAddress:e.target.value})),placeholder:"Adresse compl\xe8te de l'unit\xe9"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Pays"}),(0,Lx.jsx)("input",{type:"text",value:P.country||"",onChange:e=>O(t=>Me(Me({},t),{},{country:e.target.value})),placeholder:"Belgique"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Surface (m\xb2) *"}),(0,Lx.jsx)("input",{type:"number",value:P.surface||0,onChange:e=>O(t=>Me(Me({},t),{},{surface:parseFloat(e.target.value)||0})),min:"0",step:"0.1",required:!0})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Nombre de pi\xe8ces"}),(0,Lx.jsx)("input",{type:"number",value:P.rooms||1,onChange:e=>O(t=>Me(Me({},t),{},{rooms:parseInt(e.target.value)||1})),min:"1"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Chambres"}),(0,Lx.jsx)("input",{type:"number",value:P.bedrooms||1,onChange:e=>O(t=>Me(Me({},t),{},{bedrooms:parseInt(e.target.value)||1})),min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Salles de bain"}),(0,Lx.jsx)("input",{type:"number",value:P.bathrooms||1,onChange:e=>O(t=>Me(Me({},t),{},{bathrooms:parseInt(e.target.value)||1})),min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"\xc9tage"}),(0,Lx.jsx)("input",{type:"number",value:P.floor||0,onChange:e=>O(t=>Me(Me({},t),{},{floor:parseInt(e.target.value)||0}))})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Disponibilit\xe9"}),(0,Lx.jsxs)("select",{value:P.availability||"available",onChange:e=>O(t=>Me(Me({},t),{},{availability:e.target.value})),children:[(0,Lx.jsx)("option",{value:"available",children:"Disponible"}),(0,Lx.jsx)("option",{value:"reserved",children:"R\xe9serv\xe9"}),(0,Lx.jsx)("option",{value:"sold",children:"Vendu"}),(0,Lx.jsx)("option",{value:"rented",children:"Lou\xe9"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"\xc9tat"}),(0,Lx.jsxs)("select",{value:P.condition||"good",onChange:e=>O(t=>Me(Me({},t),{},{condition:e.target.value})),children:[(0,Lx.jsx)("option",{value:"new",children:"Neuf"}),(0,Lx.jsx)("option",{value:"excellent",children:"Excellent"}),(0,Lx.jsx)("option",{value:"good",children:"Bon"}),(0,Lx.jsx)("option",{value:"to_renovate",children:"\xc0 r\xe9nover"}),(0,Lx.jsx)("option",{value:"to_demolish",children:"\xc0 d\xe9molir"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Ann\xe9e de construction"}),(0,Lx.jsx)("input",{type:"number",value:P.constructionYear||"",onChange:e=>O(t=>Me(Me({},t),{},{constructionYear:parseInt(e.target.value)||void 0})),min:"1800",max:"2030"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Ann\xe9e de r\xe9novation"}),(0,Lx.jsx)("input",{type:"number",value:P.renovationYear||"",onChange:e=>O(t=>Me(Me({},t),{},{renovationYear:parseInt(e.target.value)||void 0})),min:"1800",max:"2030"})]}),(0,Lx.jsxs)("div",{className:"form-group full-width",children:[(0,Lx.jsx)("label",{children:"Description"}),(0,Lx.jsx)("textarea",{value:P.description||"",onChange:e=>O(t=>Me(Me({},t),{},{description:e.target.value})),placeholder:"Description d\xe9taill\xe9e du bien...",rows:4})]})]})]}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsx)("h4",{children:"Informations l\xe9gales obligatoires"}),(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Titre de propri\xe9t\xe9"}),(0,Lx.jsx)("input",{type:"text",value:P.propertyTitle||"",onChange:e=>O(t=>Me(Me({},t),{},{propertyTitle:e.target.value})),placeholder:"R\xe9f\xe9rence du titre de propri\xe9t\xe9"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Certificat \xe9nerg\xe9tique (PEB/DPE)"}),(0,Lx.jsx)("input",{type:"text",value:P.energyCertificate||"",onChange:e=>O(t=>Me(Me({},t),{},{energyCertificate:e.target.value})),placeholder:"R\xe9f\xe9rence du certificat"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Classe \xe9nerg\xe9tique"}),(0,Lx.jsxs)("select",{value:P.energyClass||"not_specified",onChange:e=>O(t=>Me(Me({},t),{},{energyClass:e.target.value})),children:[(0,Lx.jsx)("option",{value:"not_specified",children:"Non sp\xe9cifi\xe9"}),(0,Lx.jsx)("option",{value:"A",children:"A"}),(0,Lx.jsx)("option",{value:"B",children:"B"}),(0,Lx.jsx)("option",{value:"C",children:"C"}),(0,Lx.jsx)("option",{value:"D",children:"D"}),(0,Lx.jsx)("option",{value:"E",children:"E"}),(0,Lx.jsx)("option",{value:"F",children:"F"}),(0,Lx.jsx)("option",{value:"G",children:"G"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"\xc9missions GES"}),(0,Lx.jsxs)("select",{value:P.ghgEmissions||"not_specified",onChange:e=>O(t=>Me(Me({},t),{},{ghgEmissions:e.target.value})),children:[(0,Lx.jsx)("option",{value:"not_specified",children:"Non sp\xe9cifi\xe9"}),(0,Lx.jsx)("option",{value:"A",children:"A"}),(0,Lx.jsx)("option",{value:"B",children:"B"}),(0,Lx.jsx)("option",{value:"C",children:"C"}),(0,Lx.jsx)("option",{value:"D",children:"D"}),(0,Lx.jsx)("option",{value:"E",children:"E"}),(0,Lx.jsx)("option",{value:"F",children:"F"}),(0,Lx.jsx)("option",{value:"G",children:"G"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Renseignements urbanistiques"}),(0,Lx.jsx)("input",{type:"text",value:P.urbanisticInfo||"",onChange:e=>O(t=>Me(Me({},t),{},{urbanisticInfo:e.target.value})),placeholder:"Informations urbanistiques"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Zonage"}),(0,Lx.jsxs)("select",{value:P.zoning||"residential",onChange:e=>O(t=>Me(Me({},t),{},{zoning:e.target.value})),children:[(0,Lx.jsx)("option",{value:"residential",children:"R\xe9sidentiel"}),(0,Lx.jsx)("option",{value:"commercial",children:"Commercial"}),(0,Lx.jsx)("option",{value:"mixed",children:"Mixte"}),(0,Lx.jsx)("option",{value:"industrial",children:"Industriel"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Plan cadastral"}),(0,Lx.jsx)("input",{type:"text",value:P.cadastralPlan||"",onChange:e=>O(t=>Me(Me({},t),{},{cadastralPlan:e.target.value})),placeholder:"R\xe9f\xe9rence du plan cadastral"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"\xc9tat des hypoth\xe8ques"}),(0,Lx.jsx)("input",{type:"text",value:P.mortgageStatus||"",onChange:e=>O(t=>Me(Me({},t),{},{mortgageStatus:e.target.value})),placeholder:"\xc9tat des hypoth\xe8ques"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Servitudes"}),(0,Lx.jsx)("textarea",{value:P.servitudes||"",onChange:e=>O(t=>Me(Me({},t),{},{servitudes:e.target.value})),placeholder:"Servitudes \xe9ventuelles",rows:2})]}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.electricalCompliance||!1,onChange:e=>O(t=>Me(Me({},t),{},{electricalCompliance:e.target.checked}))}),"Conformit\xe9 \xe9lectrique"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.gasCompliance||!1,onChange:e=>O(t=>Me(Me({},t),{},{gasCompliance:e.target.checked}))}),"Conformit\xe9 gaz"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.heatingCertificate||!1,onChange:e=>O(t=>Me(Me({},t),{},{heatingCertificate:e.target.checked}))}),"Certificat installation chauffage"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.soilAttestation||!1,onChange:e=>O(t=>Me(Me({},t),{},{soilAttestation:e.target.checked}))}),"Attestation du sol"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.asbestosCertificate||!1,onChange:e=>O(t=>Me(Me({},t),{},{asbestosCertificate:e.target.checked}))}),"Certificat d'amiante"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.leadDiagnostic||!1,onChange:e=>O(t=>Me(Me({},t),{},{leadDiagnostic:e.target.checked}))}),"Diagnostic plomb"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.termitesDiagnostic||!1,onChange:e=>O(t=>Me(Me({},t),{},{termitesDiagnostic:e.target.checked}))}),"Diagnostic termites"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.noiseDiagnostic||!1,onChange:e=>O(t=>Me(Me({},t),{},{noiseDiagnostic:e.target.checked}))}),"Diagnostic bruit"]})})]})]}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsx)("h4",{children:"Caract\xe9ristiques techniques"}),(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Type de chauffage"}),(0,Lx.jsxs)("select",{value:P.heatingType||"gas",onChange:e=>O(t=>Me(Me({},t),{},{heatingType:e.target.value})),children:[(0,Lx.jsx)("option",{value:"gas",children:"Gaz"}),(0,Lx.jsx)("option",{value:"oil",children:"Mazout"}),(0,Lx.jsx)("option",{value:"electric",children:"\xc9lectrique"}),(0,Lx.jsx)("option",{value:"heat_pump",children:"Pompe \xe0 chaleur"}),(0,Lx.jsx)("option",{value:"solar",children:"Solaire"}),(0,Lx.jsx)("option",{value:"wood",children:"Bois"}),(0,Lx.jsx)("option",{value:"other",children:"Autre"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Syst\xe8me eau chaude"}),(0,Lx.jsxs)("select",{value:P.hotWaterSystem||"gas",onChange:e=>O(t=>Me(Me({},t),{},{hotWaterSystem:e.target.value})),children:[(0,Lx.jsx)("option",{value:"gas",children:"Gaz"}),(0,Lx.jsx)("option",{value:"electric",children:"\xc9lectrique"}),(0,Lx.jsx)("option",{value:"solar",children:"Solaire"}),(0,Lx.jsx)("option",{value:"heat_pump",children:"Pompe \xe0 chaleur"}),(0,Lx.jsx)("option",{value:"other",children:"Autre"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Orientation"}),(0,Lx.jsxs)("select",{value:P.orientation||"south",onChange:e=>O(t=>Me(Me({},t),{},{orientation:e.target.value})),children:[(0,Lx.jsx)("option",{value:"north",children:"Nord"}),(0,Lx.jsx)("option",{value:"south",children:"Sud"}),(0,Lx.jsx)("option",{value:"east",children:"Est"}),(0,Lx.jsx)("option",{value:"west",children:"Ouest"}),(0,Lx.jsx)("option",{value:"north_south",children:"Nord-Sud"}),(0,Lx.jsx)("option",{value:"east_west",children:"Est-Ouest"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Mat\xe9riaux de construction"}),(0,Lx.jsx)("input",{type:"text",value:P.buildingMaterials||"",onChange:e=>O(t=>Me(Me({},t),{},{buildingMaterials:e.target.value})),placeholder:"Brique, b\xe9ton, bois..."})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Type de toiture"}),(0,Lx.jsx)("input",{type:"text",value:P.roofType||"",onChange:e=>O(t=>Me(Me({},t),{},{roofType:e.target.value})),placeholder:"Tuiles, ardoises, t\xf4le..."})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Type de cuisine"}),(0,Lx.jsxs)("select",{value:P.kitchenType||"none",onChange:e=>O(t=>Me(Me({},t),{},{kitchenType:e.target.value})),children:[(0,Lx.jsx)("option",{value:"none",children:"Aucune"}),(0,Lx.jsx)("option",{value:"kitchenette",children:"Kitchenette"}),(0,Lx.jsx)("option",{value:"open",children:"Ouverte"}),(0,Lx.jsx)("option",{value:"closed",children:"Ferm\xe9e"}),(0,Lx.jsx)("option",{value:"american",children:"Am\xe9ricaine"})]})]}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:(null===(e=P.isolation)||void 0===e?void 0:e.walls)||!1,onChange:e=>O(t=>Me(Me({},t),{},{isolation:Me(Me({},t.isolation),{},{walls:e.target.checked})}))}),"Isolation des murs"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:(null===(t=P.isolation)||void 0===t?void 0:t.roof)||!1,onChange:e=>O(t=>Me(Me({},t),{},{isolation:Me(Me({},t.isolation),{},{roof:e.target.checked})}))}),"Isolation de la toiture"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:(null===(n=P.isolation)||void 0===n?void 0:n.doubleGlazing)||!1,onChange:e=>O(t=>Me(Me({},t),{},{isolation:Me(Me({},t.isolation),{},{doubleGlazing:e.target.checked})}))}),"Double vitrage"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.hasElevator||!1,onChange:e=>O(t=>Me(Me({},t),{},{hasElevator:e.target.checked}))}),"Ascenseur dans l'immeuble"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.internetFiber||!1,onChange:e=>O(t=>Me(Me({},t),{},{internetFiber:e.target.checked}))}),"Fibre optique"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.airConditioning||!1,onChange:e=>O(t=>Me(Me({},t),{},{airConditioning:e.target.checked}))}),"Climatisation"]})})]})]}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsx)("h4",{children:"Informations financi\xe8res"}),(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Prix (\u20ac) *"}),(0,Lx.jsx)("input",{type:"number",value:P.price||0,onChange:e=>O(t=>Me(Me({},t),{},{price:parseFloat(e.target.value)||0})),min:"0",required:!0})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Prix au m\xb2 (\u20ac)"}),(0,Lx.jsx)("input",{type:"number",value:P.pricePerSqm||0,onChange:e=>O(t=>Me(Me({},t),{},{pricePerSqm:parseFloat(e.target.value)||0})),min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Charges (\u20ac/mois)"}),(0,Lx.jsx)("input",{type:"number",value:P.charges||0,onChange:e=>O(t=>Me(Me({},t),{},{charges:parseFloat(e.target.value)||0})),min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Taxe fonci\xe8re (\u20ac/an)"}),(0,Lx.jsx)("input",{type:"number",value:P.propertyTax||0,onChange:e=>O(t=>Me(Me({},t),{},{propertyTax:parseFloat(e.target.value)||0})),min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Charges copropri\xe9t\xe9 (\u20ac/mois)"}),(0,Lx.jsx)("input",{type:"number",value:P.coOwnershipFees||0,onChange:e=>O(t=>Me(Me({},t),{},{coOwnershipFees:parseFloat(e.target.value)||0})),min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Rendement locatif (%)"}),(0,Lx.jsx)("input",{type:"number",value:P.rentalYield||0,onChange:e=>O(t=>Me(Me({},t),{},{rentalYield:parseFloat(e.target.value)||0})),min:"0",step:"0.1"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Revenu cadastral (\u20ac)"}),(0,Lx.jsx)("input",{type:"number",value:P.cadastralIncome||0,onChange:e=>O(t=>Me(Me({},t),{},{cadastralIncome:parseFloat(e.target.value)||0})),min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Droits d'enregistrement (\u20ac)"}),(0,Lx.jsx)("input",{type:"number",value:P.registrationFees||0,onChange:e=>O(t=>Me(Me({},t),{},{registrationFees:parseFloat(e.target.value)||0})),min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Frais de notaire (\u20ac)"}),(0,Lx.jsx)("input",{type:"number",value:P.notaryFees||0,onChange:e=>O(t=>Me(Me({},t),{},{notaryFees:parseFloat(e.target.value)||0})),min:"0"})]})]})]}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsx)("h4",{children:"Caract\xe9ristiques et \xe9quipements"}),(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.balcony||!1,onChange:e=>O(t=>Me(Me({},t),{},{balcony:e.target.checked}))}),"Balcon"]})}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Surface balcon (m\xb2)"}),(0,Lx.jsx)("input",{type:"number",value:P.balconyArea||0,onChange:e=>O(t=>Me(Me({},t),{},{balconyArea:parseFloat(e.target.value)||0})),min:"0",step:"0.1",disabled:!P.balcony})]}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.terrace||!1,onChange:e=>O(t=>Me(Me({},t),{},{terrace:e.target.checked}))}),"Terrasse"]})}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Surface terrasse (m\xb2)"}),(0,Lx.jsx)("input",{type:"number",value:P.terraceArea||0,onChange:e=>O(t=>Me(Me({},t),{},{terraceArea:parseFloat(e.target.value)||0})),min:"0",step:"0.1",disabled:!P.terrace})]}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.garden||!1,onChange:e=>O(t=>Me(Me({},t),{},{garden:e.target.checked}))}),"Jardin"]})}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Surface jardin (m\xb2)"}),(0,Lx.jsx)("input",{type:"number",value:P.gardenArea||0,onChange:e=>O(t=>Me(Me({},t),{},{gardenArea:parseFloat(e.target.value)||0})),min:"0",step:"0.1",disabled:!P.garden})]}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.parking||!1,onChange:e=>O(t=>Me(Me({},t),{},{parking:e.target.checked}))}),"Parking"]})}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Nombre de places de parking"}),(0,Lx.jsx)("input",{type:"number",value:P.parkingSpaces||0,onChange:e=>O(t=>Me(Me({},t),{},{parkingSpaces:parseInt(e.target.value)||0})),min:"0",disabled:!P.parking})]}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.garage||!1,onChange:e=>O(t=>Me(Me({},t),{},{garage:e.target.checked}))}),"Garage"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.cellar||!1,onChange:e=>O(t=>Me(Me({},t),{},{cellar:e.target.checked}))}),"Cave"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.attic||!1,onChange:e=>O(t=>Me(Me({},t),{},{attic:e.target.checked}))}),"Grenier"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.furnished||!1,onChange:e=>O(t=>Me(Me({},t),{},{furnished:e.target.checked}))}),"Meubl\xe9"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.fireplace||!1,onChange:e=>O(t=>Me(Me({},t),{},{fireplace:e.target.checked}))}),"Chemin\xe9e"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.swimmingPool||!1,onChange:e=>O(t=>Me(Me({},t),{},{swimmingPool:e.target.checked}))}),"Piscine"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.securitySystem||!1,onChange:e=>O(t=>Me(Me({},t),{},{securitySystem:e.target.checked}))}),"Syst\xe8me de s\xe9curit\xe9"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.intercom||!1,onChange:e=>O(t=>Me(Me({},t),{},{intercom:e.target.checked}))}),"Interphone"]})}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.concierge||!1,onChange:e=>O(t=>Me(Me({},t),{},{concierge:e.target.checked}))}),"Concierge"]})})]})]}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsx)("h4",{children:"Informations pour location"}),(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Type de bail"}),(0,Lx.jsxs)("select",{value:P.leaseType||"residential",onChange:e=>O(t=>Me(Me({},t),{},{leaseType:e.target.value})),children:[(0,Lx.jsx)("option",{value:"residential",children:"R\xe9sidentiel"}),(0,Lx.jsx)("option",{value:"student",children:"\xc9tudiant"}),(0,Lx.jsx)("option",{value:"commercial",children:"Commercial"}),(0,Lx.jsx)("option",{value:"short_term",children:"Court terme"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Dur\xe9e du bail"}),(0,Lx.jsx)("input",{type:"text",value:P.leaseDuration||"",onChange:e=>O(t=>Me(Me({},t),{},{leaseDuration:e.target.value})),placeholder:"Ex: 3 ans, 9 ans"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Garantie locative (\u20ac)"}),(0,Lx.jsx)("input",{type:"number",value:P.securityDeposit||0,onChange:e=>O(t=>Me(Me({},t),{},{securityDeposit:parseFloat(e.target.value)||0})),min:"0"})]}),(0,Lx.jsx)("div",{className:"form-group checkbox-group",children:(0,Lx.jsxs)("label",{children:[(0,Lx.jsx)("input",{type:"checkbox",checked:P.leaseRegistered||!1,onChange:e=>O(t=>Me(Me({},t),{},{leaseRegistered:e.target.checked}))}),"Bail enregistr\xe9"]})})]})]}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsx)("h4",{children:"Informations pratiques"}),(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Type de quartier"}),(0,Lx.jsx)("input",{type:"text",value:P.neighborhood||"",onChange:e=>O(t=>Me(Me({},t),{},{neighborhood:e.target.value})),placeholder:"R\xe9sidentiel, commercial, mixte..."})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Transports publics"}),(0,Lx.jsx)("input",{type:"text",value:(null===(i=P.accessibility)||void 0===i?void 0:i.publicTransport)||"",onChange:e=>O(t=>Me(Me({},t),{},{accessibility:Me(Me({},t.accessibility),{},{publicTransport:e.target.value})})),placeholder:"M\xe9tro, bus, tram \xe0 proximit\xe9"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"\xc9coles"}),(0,Lx.jsx)("input",{type:"text",value:(null===(a=P.accessibility)||void 0===a?void 0:a.schools)||"",onChange:e=>O(t=>Me(Me({},t),{},{accessibility:Me(Me({},t.accessibility),{},{schools:e.target.value})})),placeholder:"\xc9coles \xe0 proximit\xe9"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Commerces"}),(0,Lx.jsx)("input",{type:"text",value:(null===(s=P.accessibility)||void 0===s?void 0:s.shops)||"",onChange:e=>O(t=>Me(Me({},t),{},{accessibility:Me(Me({},t.accessibility),{},{shops:e.target.value})})),placeholder:"Commerces et services \xe0 proximit\xe9"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Potentiel de valorisation"}),(0,Lx.jsx)("textarea",{value:P.valueAppreciationPotential||"",onChange:e=>O(t=>Me(Me({},t),{},{valueAppreciationPotential:e.target.value})),placeholder:"Projets urbains, d\xe9veloppements futurs...",rows:2})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"URL visite virtuelle"}),(0,Lx.jsx)("input",{type:"url",value:P.virtualTourUrl||"",onChange:e=>O(t=>Me(Me({},t),{},{virtualTourUrl:e.target.value})),placeholder:"https://..."})]})]})]}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsx)("h4",{children:"Informations suppl\xe9mentaires"}),(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Nom de l'immeuble/r\xe9sidence"}),(0,Lx.jsx)("input",{type:"text",value:P.buildingName||"",onChange:e=>O(t=>Me(Me({},t),{},{buildingName:e.target.value})),placeholder:"R\xe9sidence Les Jardins"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Description de l'\xe9tage"}),(0,Lx.jsx)("input",{type:"text",value:P.floorDescription||"",onChange:e=>O(t=>Me(Me({},t),{},{floorDescription:e.target.value})),placeholder:"Rez-de-chauss\xe9e, 1er \xe9tage, dernier \xe9tage..."})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Niveau sonore"}),(0,Lx.jsxs)("select",{value:P.noiseLevel||"quiet",onChange:e=>O(t=>Me(Me({},t),{},{noiseLevel:e.target.value})),children:[(0,Lx.jsx)("option",{value:"very_quiet",children:"Tr\xe8s calme"}),(0,Lx.jsx)("option",{value:"quiet",children:"Calme"}),(0,Lx.jsx)("option",{value:"moderate",children:"Mod\xe9r\xe9"}),(0,Lx.jsx)("option",{value:"noisy",children:"Bruyant"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"\xc2ge du b\xe2timent (ann\xe9es)"}),(0,Lx.jsx)("input",{type:"number",value:P.buildingAge||"",onChange:e=>O(t=>Me(Me({},t),{},{buildingAge:parseInt(e.target.value)||0})),min:"0",placeholder:"15"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Derni\xe8re r\xe9novation"}),(0,Lx.jsx)("input",{type:"number",value:P.lastRenovation||"",onChange:e=>O(t=>Me(Me({},t),{},{lastRenovation:parseInt(e.target.value)||0})),min:"1900",max:(new Date).getFullYear(),placeholder:"2020"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Soci\xe9t\xe9 de gestion/Syndic"}),(0,Lx.jsx)("input",{type:"text",value:P.managementCompany||"",onChange:e=>O(t=>Me(Me({},t),{},{managementCompany:e.target.value})),placeholder:"Nom du syndic"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Distance m\xe9tro/tram"}),(0,Lx.jsx)("input",{type:"text",value:(null===(o=P.proximityDetails)||void 0===o?void 0:o.metro)||"",onChange:e=>O(t=>Me(Me({},t),{},{proximityDetails:Me(Me({},t.proximityDetails),{},{metro:e.target.value})})),placeholder:"5 min \xe0 pied"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Commerces \xe0 proximit\xe9"}),(0,Lx.jsx)("input",{type:"text",value:(null===(l=P.proximityDetails)||void 0===l?void 0:l.shops)||"",onChange:e=>O(t=>Me(Me({},t),{},{proximityDetails:Me(Me({},t.proximityDetails),{},{shops:e.target.value})})),placeholder:"Supermarch\xe9, pharmacie..."})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"\xc9coles proches"}),(0,Lx.jsx)("input",{type:"text",value:(null===(c=P.proximityDetails)||void 0===c?void 0:c.schools)||"",onChange:e=>O(t=>Me(Me({},t),{},{proximityDetails:Me(Me({},t.proximityDetails),{},{schools:e.target.value})})),placeholder:"\xc9cole primaire \xe0 200m"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Parcs et espaces verts"}),(0,Lx.jsx)("input",{type:"text",value:(null===(u=P.proximityDetails)||void 0===u?void 0:u.parks)||"",onChange:e=>O(t=>Me(Me({},t),{},{proximityDetails:Me(Me({},t.proximityDetails),{},{parks:e.target.value})})),placeholder:"Parc municipal \xe0 300m"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{children:"Locataire type vis\xe9"}),(0,Lx.jsx)("input",{type:"text",value:P.targetTenant||"",onChange:e=>O(t=>Me(Me({},t),{},{targetTenant:e.target.value})),placeholder:"Famille, \xe9tudiant, professionnel..."})]}),(0,Lx.jsxs)("div",{className:"form-group full-width",children:[(0,Lx.jsx)("label",{children:"D\xe9tails exposition (vue, luminosit\xe9)"}),(0,Lx.jsx)("textarea",{value:P.exposureDetails||"",onChange:e=>O(t=>Me(Me({},t),{},{exposureDetails:e.target.value})),placeholder:"Vue sur jardin, tr\xe8s lumineux, exposition sud...",rows:2})]}),(0,Lx.jsxs)("div",{className:"form-group full-width",children:[(0,Lx.jsx)("label",{children:"Caract\xe9ristiques uniques"}),(0,Lx.jsx)("textarea",{value:P.uniqueFeatures||"",onChange:e=>O(t=>Me(Me({},t),{},{uniqueFeatures:e.target.value})),placeholder:"Plafonds hauts, poutres apparentes, chemin\xe9e d'\xe9poque...",rows:2})]}),(0,Lx.jsxs)("div",{className:"form-group full-width",children:[(0,Lx.jsx)("label",{children:"Travaux n\xe9cessaires"}),(0,Lx.jsx)("textarea",{value:P.renovationNeeds||"",onChange:e=>O(t=>Me(Me({},t),{},{renovationNeeds:e.target.value})),placeholder:"Rafra\xeechissement peinture, r\xe9novation salle de bain...",rows:2})]}),(0,Lx.jsxs)("div",{className:"form-group full-width",children:[(0,Lx.jsx)("label",{children:"Potentiel d'investissement"}),(0,Lx.jsx)("textarea",{value:P.investmentPotential||"",onChange:e=>O(t=>Me(Me({},t),{},{investmentPotential:e.target.value})),placeholder:"Quartier en d\xe9veloppement, plus-value attendue...",rows:2})]}),(0,Lx.jsxs)("div",{className:"form-group full-width",children:[(0,Lx.jsx)("label",{children:"Travaux pr\xe9vus dans l'immeuble"}),(0,Lx.jsx)("textarea",{value:P.futureWorks||"",onChange:e=>O(t=>Me(Me({},t),{},{futureWorks:e.target.value})),placeholder:"R\xe9novation fa\xe7ade pr\xe9vue en 2025...",rows:2})]})]})]}),(0,Lx.jsxs)("div",{className:"form-group full-width",children:[(0,Lx.jsx)("label",{children:"Images de l'unit\xe9"}),(0,Lx.jsxs)("div",{className:"image-gallery",children:[null===(d=P.images)||void 0===d?void 0:d.map((e,t)=>(0,Lx.jsxs)("div",{className:"image-item",children:[(0,Lx.jsx)("img",{src:e,alt:"Unit\xe9 ".concat(t+1)}),(0,Lx.jsx)("button",{type:"button",className:"remove-image",onClick:async()=>{var e,n;const r=null===(e=P.images)||void 0===e?void 0:e[t],i=(null===(n=P.images)||void 0===n?void 0:n.filter((e,n)=>n!==t))||[];if(O(e=>Me(Me({},e),{},{images:i})),null!==A&&void 0!==A&&A.id&&r)try{await(async(e,t)=>{try{const n=Ud(kx,"units",e);await Xh(n,{images:rp(t),updatedAt:new Date})}catch(n){throw console.error("Error removing image from unit:",n),new Error("Erreur lors de la suppression de l'image de l'unit\xe9")}})(A.id,r)}catch(a){console.error("Error removing image from unit:",a)}},children:(0,Lx.jsx)(HK,{size:16})})]},t)),(0,Lx.jsx)(YY,{onChange:async e=>{const t=[...P.images||[],e];if(O(e=>Me(Me({},e),{},{images:t})),null!==A&&void 0!==A&&A.id)try{await(async(e,t)=>{try{const n=Ud(kx,"units",e);await Xh(n,{images:np(t),updatedAt:new Date})}catch(n){throw console.error("Error adding image to unit:",n),new Error("Erreur lors de l'ajout de l'image \xe0 l'unit\xe9")}})(A.id,e)}catch(n){console.error("Error adding image to unit:",n)}},onRemove:()=>{},placeholder:"Ajouter une image",unitId:(null===A||void 0===A?void 0:A.id)||"temp",isGallery:!0})]})]})]})}),(0,Lx.jsxs)("div",{className:"modal-footer",children:[(0,Lx.jsx)("button",{className:"btn-cancel",onClick:()=>{_(!1),I(null),X()},children:"Annuler"}),(0,Lx.jsx)("button",{className:"btn-primary",onClick:async()=>{if(!m||!h)return console.error("Missing user or project ID"),void alert("Erreur: utilisateur ou projet non identifi\xe9");if(P.name&&P.surface&&P.price)try{const e={projectId:h,surface:Number(P.surface)||0,price:Number(P.price)||0,rooms:Number(P.rooms)||1,bedrooms:Number(P.bedrooms)||1,bathrooms:Number(P.bathrooms)||1,floor:Number(P.floor)||0,name:P.name,type:P.type||"apartment",availability:P.availability||"available",condition:P.condition||"good",orientation:P.orientation||"south",description:P.description||"",images:P.images||[],documents:P.documents||[],fullAddress:P.fullAddress||"",country:P.country||"",destination:P.destination||"habitation",hasElevator:P.hasElevator||!1,propertyTitle:P.propertyTitle||"",energyCertificate:P.energyCertificate||"",electricalCompliance:P.electricalCompliance||!1,gasCompliance:P.gasCompliance||!1,urbanisticInfo:P.urbanisticInfo||"",soilAttestation:P.soilAttestation||!1,asbestosCertificate:P.asbestosCertificate||!1,heatingCertificate:P.heatingCertificate||!1,cadastralPlan:P.cadastralPlan||"",mortgageStatus:P.mortgageStatus||"",leaseType:P.leaseType||"residential",leaseDuration:P.leaseDuration||"",securityDeposit:Number(P.securityDeposit)||0,leaseRegistered:P.leaseRegistered||!1,energyClass:P.energyClass||"not_specified",ghgEmissions:P.ghgEmissions||"not_specified",heatingType:P.heatingType||"gas",hotWaterSystem:P.hotWaterSystem||"gas",constructionYear:Number(P.constructionYear)||0,renovationYear:Number(P.renovationYear)||0,buildingMaterials:P.buildingMaterials||"",roofType:P.roofType||"",isolation:P.isolation||{walls:!1,roof:!1,doubleGlazing:!1},balcony:P.balcony||!1,balconyArea:Number(P.balconyArea)||0,terrace:P.terrace||!1,terraceArea:Number(P.terraceArea)||0,garden:P.garden||!1,gardenArea:Number(P.gardenArea)||0,cellar:P.cellar||!1,attic:P.attic||!1,elevator:P.elevator||!1,parking:P.parking||!1,parkingSpaces:Number(P.parkingSpaces)||0,garage:P.garage||!1,furnished:P.furnished||!1,kitchenType:P.kitchenType||"none",internetFiber:P.internetFiber||!1,airConditioning:P.airConditioning||!1,fireplace:P.fireplace||!1,swimmingPool:P.swimmingPool||!1,securitySystem:P.securitySystem||!1,intercom:P.intercom||!1,accessControl:P.accessControl||!1,concierge:P.concierge||!1,commercialLicense:P.commercialLicense||!1,shopWindow:P.shopWindow||!1,storageRoom:P.storageRoom||!1,loadingDock:P.loadingDock||!1,propertyTax:Number(P.propertyTax)||0,coOwnershipFees:Number(P.coOwnershipFees)||0,rentalYield:Number(P.rentalYield)||0,cadastralIncome:Number(P.cadastralIncome)||0,registrationFees:Number(P.registrationFees)||0,notaryFees:Number(P.notaryFees)||0,permits:P.permits||[],servitudes:P.servitudes||"",zoning:P.zoning||"residential",leadDiagnostic:P.leadDiagnostic||!1,termitesDiagnostic:P.termitesDiagnostic||!1,noiseDiagnostic:P.noiseDiagnostic||!1,accessibility:P.accessibility||{publicTransport:"",schools:"",shops:""},neighborhood:P.neighborhood||"",valueAppreciationPotential:P.valueAppreciationPotential||"",buildingName:P.buildingName||"",floorDescription:P.floorDescription||"",exposureDetails:P.exposureDetails||"",noiseLevel:P.noiseLevel||"quiet",proximityDetails:P.proximityDetails||{metro:"",shops:"",schools:"",parks:""},uniqueFeatures:P.uniqueFeatures||"",renovationNeeds:P.renovationNeeds||"",investmentPotential:P.investmentPotential||"",targetTenant:P.targetTenant||"",managementCompany:P.managementCompany||"",buildingAge:Number(P.buildingAge)||0,lastRenovation:Number(P.lastRenovation)||0,futureWorks:P.futureWorks||"",virtualTourUrl:P.virtualTourUrl||"",plans:P.plans||[]};if(console.log("Saving unit with data:",e),console.log("Project ID being used:",h),A)await w(A.id,e),console.log("Unit updated successfully");else{const t=await j(e);console.log("New unit created with ID:",t)}_(!1),X(),I(null),setTimeout(()=>{b()},500)}catch(e){console.error("Error saving unit:",e),alert("Erreur lors de la sauvegarde de l'unit\xe9: ".concat(e instanceof Error?e.message:"Erreur inconnue"))}else alert("Veuillez remplir au moins le nom, la surface et le prix de l'unit\xe9")},children:A?"Modifier":"Cr\xe9er"})]})]})}),R&&z&&(0,Lx.jsx)("div",{className:"modal-overlay",onClick:()=>L(!1),children:(0,Lx.jsxs)("div",{className:"modal-content image-modal",onClick:e=>e.stopPropagation(),children:[(0,Lx.jsxs)("div",{className:"modal-header",children:[(0,Lx.jsx)("h3",{children:"Aper\xe7u de l'image"}),(0,Lx.jsx)("button",{className:"modal-close",onClick:()=>L(!1),children:(0,Lx.jsx)(HK,{size:20})})]}),(0,Lx.jsx)("div",{className:"modal-body",children:(0,Lx.jsx)("img",{src:z,alt:"Aper\xe7u",className:"modal-image"})})]})})]})},rQ=Px("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),iQ=Px("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),aQ=Px("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),sQ=Px("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function oQ(e){let{isOpen:t,onClose:n,unit:i,onSave:a}=e;const{updateUnit:s}=Ux(),[o,l]=(0,r.useState)({name:"",type:"apartment",destination:"habitation",fullAddress:"",country:"",surface:"",rooms:"",bedrooms:"",bathrooms:"",floor:"",availability:"available",condition:"good",constructionYear:"",renovationYear:"",description:"",propertyTitle:"",energyCertificate:"",energyClass:"not_specified",ghgEmissions:"not_specified",urbanisticInfo:"",zoning:"residential",cadastralPlan:"",mortgageStatus:"",servitudes:"",electricalCompliance:!1,gasCompliance:!1,heatingCertificate:!1,soilAttestation:!1,asbestosCertificate:!1,leadDiagnostic:!1,termitesDiagnostic:!1,noiseDiagnostic:!1,heatingType:"gas",hotWaterSystem:"gas",orientation:"south",buildingMaterials:"",roofType:"",kitchenType:"none",isolationWalls:!1,isolationRoof:!1,doubleGlazing:!1,hasElevator:!1,internetFiber:!1,airConditioning:!1,price:"",pricePerSqm:"",charges:"",propertyTax:"",coOwnershipFees:"",rentalYield:"",cadastralIncome:"",registrationFees:"",notaryFees:"",balcony:!1,balconyArea:"",terrace:!1,terraceArea:"",garden:!1,gardenArea:"",cellar:!1,attic:!1,parking:!1,parkingSpaces:"",garage:!1,furnished:!1,fireplace:!1,swimmingPool:!1,securitySystem:!1,intercom:!1,accessControl:!1,concierge:!1}),[c,u]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{var e,t,n,r,a,s,o,c,u,d,h,p,m,f,g,v,y,x,b,j,w,N,k;i&&l({name:i.name||"",type:i.type||"apartment",destination:i.destination||"habitation",fullAddress:i.fullAddress||"",country:i.country||"",surface:(null===(e=i.surface)||void 0===e?void 0:e.toString())||"",rooms:(null===(t=i.rooms)||void 0===t?void 0:t.toString())||"",bedrooms:(null===(n=i.bedrooms)||void 0===n?void 0:n.toString())||"",bathrooms:(null===(r=i.bathrooms)||void 0===r?void 0:r.toString())||"",floor:(null===(a=i.floor)||void 0===a?void 0:a.toString())||"",availability:i.availability||"available",condition:i.condition||"good",constructionYear:(null===(s=i.constructionYear)||void 0===s?void 0:s.toString())||"",renovationYear:(null===(o=i.renovationYear)||void 0===o?void 0:o.toString())||"",description:i.description||"",propertyTitle:i.propertyTitle||"",energyCertificate:i.energyCertificate||"",energyClass:i.energyClass||"not_specified",ghgEmissions:i.ghgEmissions||"not_specified",urbanisticInfo:i.urbanisticInfo||"",zoning:i.zoning||"residential",cadastralPlan:i.cadastralPlan||"",mortgageStatus:i.mortgageStatus||"",servitudes:i.servitudes||"",electricalCompliance:i.electricalCompliance||!1,gasCompliance:i.gasCompliance||!1,heatingCertificate:i.heatingCertificate||!1,soilAttestation:i.soilAttestation||!1,asbestosCertificate:i.asbestosCertificate||!1,leadDiagnostic:i.leadDiagnostic||!1,termitesDiagnostic:i.termitesDiagnostic||!1,noiseDiagnostic:i.noiseDiagnostic||!1,heatingType:i.heatingType||"gas",hotWaterSystem:i.hotWaterSystem||"gas",orientation:i.orientation||"south",buildingMaterials:i.buildingMaterials||"",roofType:i.roofType||"",kitchenType:i.kitchenType||"none",isolationWalls:(null===(c=i.isolation)||void 0===c?void 0:c.walls)||!1,isolationRoof:(null===(u=i.isolation)||void 0===u?void 0:u.roof)||!1,doubleGlazing:(null===(d=i.isolation)||void 0===d?void 0:d.doubleGlazing)||!1,hasElevator:i.hasElevator||!1,internetFiber:i.internetFiber||!1,airConditioning:i.airConditioning||!1,price:(null===(h=i.price)||void 0===h?void 0:h.toString())||"",pricePerSqm:(null===(p=i.pricePerSqm)||void 0===p?void 0:p.toString())||"",charges:(null===(m=i.charges)||void 0===m?void 0:m.toString())||"",propertyTax:(null===(f=i.propertyTax)||void 0===f?void 0:f.toString())||"",coOwnershipFees:(null===(g=i.coOwnershipFees)||void 0===g?void 0:g.toString())||"",rentalYield:(null===(v=i.rentalYield)||void 0===v?void 0:v.toString())||"",cadastralIncome:(null===(y=i.cadastralIncome)||void 0===y?void 0:y.toString())||"",registrationFees:(null===(x=i.registrationFees)||void 0===x?void 0:x.toString())||"",notaryFees:(null===(b=i.notaryFees)||void 0===b?void 0:b.toString())||"",balcony:i.balcony||!1,balconyArea:(null===(j=i.balconyArea)||void 0===j?void 0:j.toString())||"",terrace:i.terrace||!1,terraceArea:(null===(w=i.terraceArea)||void 0===w?void 0:w.toString())||"",garden:i.garden||!1,gardenArea:(null===(N=i.gardenArea)||void 0===N?void 0:N.toString())||"",cellar:i.cellar||!1,attic:i.attic||!1,parking:i.parking||!1,parkingSpaces:(null===(k=i.parkingSpaces)||void 0===k?void 0:k.toString())||"",garage:i.garage||!1,furnished:i.furnished||!1,fireplace:i.fireplace||!1,swimmingPool:i.swimmingPool||!1,securitySystem:i.securitySystem||!1,intercom:i.intercom||!1,accessControl:i.accessControl||!1,concierge:i.concierge||!1})},[i]),!t)return null;const d=e=>{const{name:t,value:n}=e.target;l(e=>Me(Me({},e),{},{[t]:n}))},h=e=>{const{name:t,checked:n}=e.target;l(e=>Me(Me({},e),{},{[t]:n}))};return(0,Lx.jsx)("div",{className:"modal-overlay",children:(0,Lx.jsxs)("div",{className:"unit-edit-modal",children:[(0,Lx.jsxs)("div",{className:"modal-header",children:[(0,Lx.jsx)("h2",{children:"Modifier l'unit\xe9"}),(0,Lx.jsx)("button",{className:"close-button",onClick:n,children:(0,Lx.jsx)(HK,{size:24})})]}),(0,Lx.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0);try{const e=t=>{const n={};for(const[r,i]of Object.entries(t))if(void 0!==i&&null!==i&&""!==i)if("object"!==typeof i||Array.isArray(i))n[r]=i;else{const t=e(i);Object.keys(t).length>0&&(n[r]=t)}return n},t={name:o.name,type:o.type,destination:o.destination,fullAddress:o.fullAddress,country:o.country,surface:Number(o.surface)||0,rooms:Number(o.rooms)||1,bedrooms:Number(o.bedrooms)||1,bathrooms:Number(o.bathrooms)||1,floor:Number(o.floor)||0,availability:o.availability,condition:o.condition,constructionYear:o.constructionYear?Number(o.constructionYear):null,renovationYear:o.renovationYear?Number(o.renovationYear):null,description:o.description,propertyTitle:o.propertyTitle,energyCertificate:o.energyCertificate,energyClass:o.energyClass,ghgEmissions:o.ghgEmissions,urbanisticInfo:o.urbanisticInfo,zoning:o.zoning,cadastralPlan:o.cadastralPlan,mortgageStatus:o.mortgageStatus,servitudes:o.servitudes,electricalCompliance:o.electricalCompliance,gasCompliance:o.gasCompliance,heatingCertificate:o.heatingCertificate,soilAttestation:o.soilAttestation,asbestosCertificate:o.asbestosCertificate,leadDiagnostic:o.leadDiagnostic,termitesDiagnostic:o.termitesDiagnostic,noiseDiagnostic:o.noiseDiagnostic,heatingType:o.heatingType,hotWaterSystem:o.hotWaterSystem,orientation:o.orientation,buildingMaterials:o.buildingMaterials,roofType:o.roofType,kitchenType:o.kitchenType,isolation:{walls:o.isolationWalls,roof:o.isolationRoof,doubleGlazing:o.doubleGlazing},hasElevator:o.hasElevator,internetFiber:o.internetFiber,airConditioning:o.airConditioning,price:Number(o.price)||0,pricePerSqm:o.pricePerSqm?Number(o.pricePerSqm):null,charges:o.charges?Number(o.charges):null,propertyTax:o.propertyTax?Number(o.propertyTax):null,coOwnershipFees:o.coOwnershipFees?Number(o.coOwnershipFees):null,rentalYield:o.rentalYield?Number(o.rentalYield):null,cadastralIncome:o.cadastralIncome?Number(o.cadastralIncome):null,registrationFees:o.registrationFees?Number(o.registrationFees):null,notaryFees:o.notaryFees?Number(o.notaryFees):null,balcony:o.balcony,balconyArea:o.balconyArea?Number(o.balconyArea):null,terrace:o.terrace,terraceArea:o.terraceArea?Number(o.terraceArea):null,garden:o.garden,gardenArea:o.gardenArea?Number(o.gardenArea):null,cellar:o.cellar,attic:o.attic,parking:o.parking,parkingSpaces:o.parkingSpaces?Number(o.parkingSpaces):null,garage:o.garage,furnished:o.furnished,fireplace:o.fireplace,swimmingPool:o.swimmingPool,securitySystem:o.securitySystem,intercom:o.intercom,accessControl:o.accessControl,concierge:o.concierge},r=e(t);await s(i.id,r);const l=Me(Me({},i),r);a(l),n()}catch(t){console.error("Erreur lors de la mise \xe0 jour de l'unit\xe9:",t),alert("Erreur lors de la sauvegarde")}finally{u(!1)}},className:"modal-form",children:[(0,Lx.jsxs)("div",{className:"form-sections",children:[(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsxs)("div",{className:"section-header",children:[(0,Lx.jsx)(Bx,{className:"section-icon",size:20}),(0,Lx.jsx)("h4",{children:"Informations de base"})]}),(0,Lx.jsxs)("div",{className:"form-cards",children:[(0,Lx.jsxs)("div",{className:"form-card",children:[(0,Lx.jsxs)("h5",{children:[(0,Lx.jsx)(JK,{size:16})," Identification"]}),(0,Lx.jsxs)("div",{className:"form-grid compact",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"name",children:"Nom de l'unit\xe9 *"}),(0,Lx.jsx)("input",{type:"text",id:"name",name:"name",value:o.name,onChange:d,required:!0})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"type",children:"Type"}),(0,Lx.jsxs)("select",{id:"type",name:"type",value:o.type,onChange:d,children:[(0,Lx.jsx)("option",{value:"apartment",children:"Appartement"}),(0,Lx.jsx)("option",{value:"house",children:"Maison"}),(0,Lx.jsx)("option",{value:"commercial",children:"Commercial"}),(0,Lx.jsx)("option",{value:"office",children:"Bureau"}),(0,Lx.jsx)("option",{value:"retail",children:"Commerce"}),(0,Lx.jsx)("option",{value:"storage",children:"Stockage"}),(0,Lx.jsx)("option",{value:"parking",children:"Parking"}),(0,Lx.jsx)("option",{value:"land",children:"Terrain"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"destination",children:"Destination"}),(0,Lx.jsxs)("select",{id:"destination",name:"destination",value:o.destination,onChange:d,children:[(0,Lx.jsx)("option",{value:"habitation",children:"Habitation"}),(0,Lx.jsx)("option",{value:"commercial",children:"Commercial"}),(0,Lx.jsx)("option",{value:"mixte",children:"Mixte"}),(0,Lx.jsx)("option",{value:"industriel",children:"Industriel"})]})]})]})]}),(0,Lx.jsxs)("div",{className:"form-card",children:[(0,Lx.jsxs)("h5",{children:[(0,Lx.jsx)(Gx,{size:16})," Localisation"]}),(0,Lx.jsxs)("div",{className:"form-grid compact",children:[(0,Lx.jsxs)("div",{className:"form-group full-width",children:[(0,Lx.jsx)("label",{htmlFor:"fullAddress",children:"Adresse compl\xe8te"}),(0,Lx.jsx)("input",{type:"text",id:"fullAddress",name:"fullAddress",value:o.fullAddress,onChange:d})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"country",children:"Pays"}),(0,Lx.jsx)("input",{type:"text",id:"country",name:"country",value:o.country,onChange:d})]})]})]}),(0,Lx.jsxs)("div",{className:"form-card",children:[(0,Lx.jsxs)("h5",{children:[(0,Lx.jsx)(JK,{size:16})," Caract\xe9ristiques"]}),(0,Lx.jsxs)("div",{className:"form-grid compact",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"surface",children:"Surface (m\xb2) *"}),(0,Lx.jsx)("input",{type:"number",id:"surface",name:"surface",value:o.surface,onChange:d,min:"1",required:!0})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"rooms",children:"Pi\xe8ces"}),(0,Lx.jsx)("input",{type:"number",id:"rooms",name:"rooms",value:o.rooms,onChange:d,min:"1"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"bedrooms",children:"Chambres"}),(0,Lx.jsx)("input",{type:"number",id:"bedrooms",name:"bedrooms",value:o.bedrooms,onChange:d,min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"bathrooms",children:"SdB"}),(0,Lx.jsx)("input",{type:"number",id:"bathrooms",name:"bathrooms",value:o.bathrooms,onChange:d,min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"floor",children:"\xc9tage"}),(0,Lx.jsx)("input",{type:"number",id:"floor",name:"floor",value:o.floor,onChange:d,min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"availability",children:"Disponibilit\xe9"}),(0,Lx.jsxs)("select",{id:"availability",name:"availability",value:o.availability,onChange:d,children:[(0,Lx.jsx)("option",{value:"available",children:"Disponible"}),(0,Lx.jsx)("option",{value:"reserved",children:"R\xe9serv\xe9"}),(0,Lx.jsx)("option",{value:"sold",children:"Vendu"}),(0,Lx.jsx)("option",{value:"rented",children:"Lou\xe9"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"condition",children:"\xc9tat"}),(0,Lx.jsxs)("select",{id:"condition",name:"condition",value:o.condition,onChange:d,children:[(0,Lx.jsx)("option",{value:"new",children:"Neuf"}),(0,Lx.jsx)("option",{value:"excellent",children:"Excellent"}),(0,Lx.jsx)("option",{value:"good",children:"Bon"}),(0,Lx.jsx)("option",{value:"to_renovate",children:"\xc0 r\xe9nover"}),(0,Lx.jsx)("option",{value:"to_demolish",children:"\xc0 d\xe9molir"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"constructionYear",children:"Construction"}),(0,Lx.jsx)("input",{type:"number",id:"constructionYear",name:"constructionYear",value:o.constructionYear,onChange:d,min:"1800",max:"2030",placeholder:"Ann\xe9e"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"renovationYear",children:"R\xe9novation"}),(0,Lx.jsx)("input",{type:"number",id:"renovationYear",name:"renovationYear",value:o.renovationYear,onChange:d,min:"1800",max:"2030",placeholder:"Ann\xe9e"})]})]})]}),(0,Lx.jsxs)("div",{className:"form-card full-width",children:[(0,Lx.jsxs)("h5",{children:[(0,Lx.jsx)(GK,{size:16})," Description"]}),(0,Lx.jsx)("textarea",{id:"description",name:"description",value:o.description,onChange:d,rows:3,placeholder:"Description d\xe9taill\xe9e de l'unit\xe9..."})]})]})]}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsxs)("div",{className:"section-header",children:[(0,Lx.jsx)(rQ,{className:"section-icon",size:20}),(0,Lx.jsx)("h4",{children:"Informations l\xe9gales"})]}),(0,Lx.jsxs)("div",{className:"form-cards",children:[(0,Lx.jsxs)("div",{className:"form-card",children:[(0,Lx.jsxs)("h5",{children:[(0,Lx.jsx)(iQ,{size:16})," Certifications"]}),(0,Lx.jsxs)("div",{className:"form-grid compact",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"propertyTitle",children:"Titre de propri\xe9t\xe9"}),(0,Lx.jsx)("input",{type:"text",id:"propertyTitle",name:"propertyTitle",value:o.propertyTitle,onChange:d})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"energyCertificate",children:"Certificat \xe9nerg\xe9tique"}),(0,Lx.jsx)("input",{type:"text",id:"energyCertificate",name:"energyCertificate",value:o.energyCertificate,onChange:d})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"energyClass",children:"Classe \xe9nerg\xe9tique"}),(0,Lx.jsxs)("select",{id:"energyClass",name:"energyClass",value:o.energyClass,onChange:d,children:[(0,Lx.jsx)("option",{value:"not_specified",children:"Non sp\xe9cifi\xe9"}),(0,Lx.jsx)("option",{value:"A++",children:"A++"}),(0,Lx.jsx)("option",{value:"A+",children:"A+"}),(0,Lx.jsx)("option",{value:"A",children:"A"}),(0,Lx.jsx)("option",{value:"B",children:"B"}),(0,Lx.jsx)("option",{value:"C",children:"C"}),(0,Lx.jsx)("option",{value:"D",children:"D"}),(0,Lx.jsx)("option",{value:"E",children:"E"}),(0,Lx.jsx)("option",{value:"F",children:"F"}),(0,Lx.jsx)("option",{value:"G",children:"G"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"ghgEmissions",children:"\xc9missions GES"}),(0,Lx.jsxs)("select",{id:"ghgEmissions",name:"ghgEmissions",value:o.ghgEmissions,onChange:d,children:[(0,Lx.jsx)("option",{value:"not_specified",children:"Non sp\xe9cifi\xe9"}),(0,Lx.jsx)("option",{value:"A",children:"A"}),(0,Lx.jsx)("option",{value:"B",children:"B"}),(0,Lx.jsx)("option",{value:"C",children:"C"}),(0,Lx.jsx)("option",{value:"D",children:"D"}),(0,Lx.jsx)("option",{value:"E",children:"E"}),(0,Lx.jsx)("option",{value:"F",children:"F"}),(0,Lx.jsx)("option",{value:"G",children:"G"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"urbanisticInfo",children:"Informations urbanistiques"}),(0,Lx.jsx)("input",{type:"text",id:"urbanisticInfo",name:"urbanisticInfo",value:o.urbanisticInfo,onChange:d})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"zoning",children:"Zonage"}),(0,Lx.jsxs)("select",{id:"zoning",name:"zoning",value:o.zoning,onChange:d,children:[(0,Lx.jsx)("option",{value:"residential",children:"R\xe9sidentiel"}),(0,Lx.jsx)("option",{value:"commercial",children:"Commercial"}),(0,Lx.jsx)("option",{value:"industrial",children:"Industriel"}),(0,Lx.jsx)("option",{value:"mixed",children:"Mixte"}),(0,Lx.jsx)("option",{value:"agricultural",children:"Agricole"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"cadastralPlan",children:"Plan cadastral"}),(0,Lx.jsx)("input",{type:"text",id:"cadastralPlan",name:"cadastralPlan",value:o.cadastralPlan,onChange:d})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"mortgageStatus",children:"Statut hypoth\xe9caire"}),(0,Lx.jsx)("input",{type:"text",id:"mortgageStatus",name:"mortgageStatus",value:o.mortgageStatus,onChange:d})]})]})]}),(0,Lx.jsxs)("div",{className:"form-card full-width",children:[(0,Lx.jsxs)("h5",{children:[(0,Lx.jsx)(GK,{size:16})," Servitudes"]}),(0,Lx.jsx)("textarea",{id:"servitudes",name:"servitudes",value:o.servitudes,onChange:d,rows:3,placeholder:"Servitudes et restrictions..."})]}),(0,Lx.jsxs)("div",{className:"form-card",children:[(0,Lx.jsxs)("h5",{children:[(0,Lx.jsx)(rQ,{size:16})," Conformit\xe9s"]}),(0,Lx.jsxs)("div",{className:"checkbox-grid",children:[(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"electricalCompliance",checked:o.electricalCompliance,onChange:h}),"Conformit\xe9 \xe9lectrique"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"gasCompliance",checked:o.gasCompliance,onChange:h}),"Conformit\xe9 gaz"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"electricalCompliance",checked:o.electricalCompliance,onChange:h}),"Conformit\xe9 \xe9lectrique"]})]})]})]})]}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsxs)("div",{className:"section-header",children:[(0,Lx.jsx)(aQ,{className:"section-icon",size:20}),(0,Lx.jsx)("h4",{children:"Caract\xe9ristiques techniques"})]}),(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"heatingType",children:"Type de chauffage"}),(0,Lx.jsxs)("select",{id:"heatingType",name:"heatingType",value:o.heatingType,onChange:d,children:[(0,Lx.jsx)("option",{value:"central",children:"Central"}),(0,Lx.jsx)("option",{value:"individual",children:"Individuel"}),(0,Lx.jsx)("option",{value:"electric",children:"\xc9lectrique"}),(0,Lx.jsx)("option",{value:"gas",children:"Gaz"}),(0,Lx.jsx)("option",{value:"oil",children:"Fioul"}),(0,Lx.jsx)("option",{value:"heat_pump",children:"Pompe \xe0 chaleur"}),(0,Lx.jsx)("option",{value:"wood",children:"Bois"}),(0,Lx.jsx)("option",{value:"solar",children:"Solaire"}),(0,Lx.jsx)("option",{value:"none",children:"Aucun"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"hotWaterSystem",children:"Syst\xe8me eau chaude"}),(0,Lx.jsxs)("select",{id:"hotWaterSystem",name:"hotWaterSystem",value:o.hotWaterSystem,onChange:d,children:[(0,Lx.jsx)("option",{value:"central",children:"Central"}),(0,Lx.jsx)("option",{value:"individual",children:"Individuel"}),(0,Lx.jsx)("option",{value:"electric",children:"\xc9lectrique"}),(0,Lx.jsx)("option",{value:"gas",children:"Gaz"}),(0,Lx.jsx)("option",{value:"solar",children:"Solaire"}),(0,Lx.jsx)("option",{value:"heat_pump",children:"Pompe \xe0 chaleur"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"orientation",children:"Orientation"}),(0,Lx.jsxs)("select",{id:"orientation",name:"orientation",value:o.orientation,onChange:d,children:[(0,Lx.jsx)("option",{value:"north",children:"Nord"}),(0,Lx.jsx)("option",{value:"south",children:"Sud"}),(0,Lx.jsx)("option",{value:"east",children:"Est"}),(0,Lx.jsx)("option",{value:"west",children:"Ouest"}),(0,Lx.jsx)("option",{value:"north_south",children:"Nord-Sud"}),(0,Lx.jsx)("option",{value:"east_west",children:"Est-Ouest"})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"buildingMaterials",children:"Mat\xe9riaux de construction"}),(0,Lx.jsx)("input",{type:"text",id:"buildingMaterials",name:"buildingMaterials",value:o.buildingMaterials,onChange:d})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"roofType",children:"Type de toiture"}),(0,Lx.jsx)("input",{type:"text",id:"roofType",name:"roofType",value:o.roofType,onChange:d})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"kitchenType",children:"Type de cuisine"}),(0,Lx.jsxs)("select",{id:"kitchenType",name:"kitchenType",value:o.kitchenType,onChange:d,children:[(0,Lx.jsx)("option",{value:"equipped",children:"\xc9quip\xe9e"}),(0,Lx.jsx)("option",{value:"fitted",children:"Am\xe9nag\xe9e"}),(0,Lx.jsx)("option",{value:"open",children:"Ouverte"}),(0,Lx.jsx)("option",{value:"separate",children:"S\xe9par\xe9e"}),(0,Lx.jsx)("option",{value:"none",children:"Aucune"})]})]})]}),(0,Lx.jsxs)("div",{className:"checkbox-grid",children:[(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"isolationWalls",checked:o.isolationWalls,onChange:h}),"Isolation murs"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"isolationRoof",checked:o.isolationRoof,onChange:h}),"Isolation toiture"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"doubleGlazing",checked:o.doubleGlazing,onChange:h}),"Double vitrage"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"hasElevator",checked:o.hasElevator,onChange:h}),"Ascenseur"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"internetFiber",checked:o.internetFiber,onChange:h}),"Fibre optique"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"airConditioning",checked:o.airConditioning,onChange:h}),"Climatisation"]})]})]}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsxs)("div",{className:"section-header",children:[(0,Lx.jsx)(Kx,{className:"section-icon",size:20}),(0,Lx.jsx)("h4",{children:"Informations financi\xe8res"})]}),(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"price",children:"Prix (\u20ac) *"}),(0,Lx.jsx)("input",{type:"number",id:"price",name:"price",value:o.price,onChange:d,min:"0",required:!0})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"pricePerSqm",children:"Prix au m\xb2 (\u20ac)"}),(0,Lx.jsx)("input",{type:"number",id:"pricePerSqm",name:"pricePerSqm",value:o.pricePerSqm,onChange:d,min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"charges",children:"Charges (\u20ac/mois)"}),(0,Lx.jsx)("input",{type:"number",id:"charges",name:"charges",value:o.charges,onChange:d,min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"propertyTax",children:"Taxe fonci\xe8re (\u20ac/an)"}),(0,Lx.jsx)("input",{type:"number",id:"propertyTax",name:"propertyTax",value:o.propertyTax,onChange:d,min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"coOwnershipFees",children:"Charges copropri\xe9t\xe9 (\u20ac/mois)"}),(0,Lx.jsx)("input",{type:"number",id:"coOwnershipFees",name:"coOwnershipFees",value:o.coOwnershipFees,onChange:d,min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"rentalYield",children:"Rendement locatif (%)"}),(0,Lx.jsx)("input",{type:"number",id:"rentalYield",name:"rentalYield",value:o.rentalYield,onChange:d,min:"0",step:"0.1"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"cadastralIncome",children:"Revenu cadastral (\u20ac)"}),(0,Lx.jsx)("input",{type:"number",id:"cadastralIncome",name:"cadastralIncome",value:o.cadastralIncome,onChange:d,min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"registrationFees",children:"Frais d'enregistrement (\u20ac)"}),(0,Lx.jsx)("input",{type:"number",id:"registrationFees",name:"registrationFees",value:o.registrationFees,onChange:d,min:"0"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"notaryFees",children:"Frais de notaire (\u20ac)"}),(0,Lx.jsx)("input",{type:"number",id:"notaryFees",name:"notaryFees",value:o.notaryFees,onChange:d,min:"0"})]})]})]}),(0,Lx.jsxs)("div",{className:"form-section",children:[(0,Lx.jsxs)("div",{className:"section-header",children:[(0,Lx.jsx)(sQ,{className:"section-icon",size:20}),(0,Lx.jsx)("h4",{children:"\xc9quipements et caract\xe9ristiques"})]}),(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"balconyArea",children:"Surface balcon (m\xb2)"}),(0,Lx.jsx)("input",{type:"number",id:"balconyArea",name:"balconyArea",value:o.balconyArea,onChange:d,min:"0",step:"0.1"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"terraceArea",children:"Surface terrasse (m\xb2)"}),(0,Lx.jsx)("input",{type:"number",id:"terraceArea",name:"terraceArea",value:o.terraceArea,onChange:d,min:"0",step:"0.1"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"gardenArea",children:"Surface jardin (m\xb2)"}),(0,Lx.jsx)("input",{type:"number",id:"gardenArea",name:"gardenArea",value:o.gardenArea,onChange:d,min:"0",step:"0.1"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"parkingSpaces",children:"Nombre de places de parking"}),(0,Lx.jsx)("input",{type:"number",id:"parkingSpaces",name:"parkingSpaces",value:o.parkingSpaces,onChange:d,min:"0"})]})]}),(0,Lx.jsxs)("div",{className:"checkbox-grid",children:[(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"balcony",checked:o.balcony,onChange:h}),"Balcon"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"terrace",checked:o.terrace,onChange:h}),"Terrasse"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"garden",checked:o.garden,onChange:h}),"Jardin"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"cellar",checked:o.cellar,onChange:h}),"Cave"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"attic",checked:o.attic,onChange:h}),"Grenier"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"parking",checked:o.parking,onChange:h}),"Parking"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"garage",checked:o.garage,onChange:h}),"Garage"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"furnished",checked:o.furnished,onChange:h}),"Meubl\xe9"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"fireplace",checked:o.fireplace,onChange:h}),"Chemin\xe9e"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"swimmingPool",checked:o.swimmingPool,onChange:h}),"Piscine"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"securitySystem",checked:o.securitySystem,onChange:h}),"Syst\xe8me s\xe9curit\xe9"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"intercom",checked:o.intercom,onChange:h}),"Interphone"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"accessControl",checked:o.accessControl,onChange:h}),"Contr\xf4le d'acc\xe8s"]}),(0,Lx.jsxs)("label",{className:"checkbox-item",children:[(0,Lx.jsx)("input",{type:"checkbox",name:"concierge",checked:o.concierge,onChange:h}),"Concierge"]})]})]})]}),(0,Lx.jsxs)("div",{className:"modal-actions",children:[(0,Lx.jsx)("button",{type:"button",className:"btn-secondary",onClick:n,children:"Annuler"}),(0,Lx.jsxs)("button",{type:"submit",className:"btn-primary",disabled:c,children:[(0,Lx.jsx)($K,{size:16}),c?"Sauvegarde...":"Sauvegarder"]})]})]})]})})}const lQ=()=>{const{id:e}=ne(),t=te(),{units:n,loading:i}=Ux(),{projects:a,loading:s}=Fx(),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)("overview"),[p,m]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{if(e&&n.length>0){const t=n.find(t=>t.id===e);if(l(t),t&&a.length>0){const e=a.find(e=>e.id===t.projectId);u(e)}}},[e,n,a]),i||s)return(0,Lx.jsxs)("div",{className:"loading-container",children:[(0,Lx.jsx)("div",{className:"loading-spinner"}),(0,Lx.jsx)("p",{children:"Chargement de l'unit\xe9..."})]});if(!o)return(0,Lx.jsxs)("div",{className:"error-container",children:[(0,Lx.jsx)("p",{children:"Unit\xe9 non trouv\xe9e"}),(0,Lx.jsx)("button",{onClick:()=>t("/projets"),className:"btn-primary",children:"Retour aux projets"})]});const f=e=>{switch(e){case"available":return"status-available";case"reserved":return"status-reserved";case"sold":return"status-sold";case"rented":return"status-rented";default:return"status-default"}},g=e=>{switch(e){case"available":return"Disponible";case"reserved":return"R\xe9serv\xe9";case"sold":return"Vendu";case"rented":return"Lou\xe9";default:return e}};return(0,Lx.jsxs)("div",{className:"unit-detail",children:[(0,Lx.jsxs)("div",{className:"unit-detail-header",children:[(0,Lx.jsxs)("button",{className:"back-button",onClick:()=>t(c?"/projects/".concat(c.id):"/projets"),children:[(0,Lx.jsx)($Y,{size:20}),c?"Retour au projet ".concat(c.name):"Retour aux projets"]}),(0,Lx.jsxs)("div",{className:"unit-title-section",children:[(0,Lx.jsx)("div",{className:"unit-icon",children:(0,Lx.jsx)(Bx,{size:32})}),(0,Lx.jsxs)("div",{className:"unit-title-info",children:[(0,Lx.jsx)("h1",{children:o.name}),c&&(0,Lx.jsxs)("div",{className:"unit-project",children:[(0,Lx.jsx)(Vx,{size:16}),(0,Lx.jsx)("span",{children:c.name})]}),(0,Lx.jsxs)("div",{className:"unit-location",children:[(0,Lx.jsx)(Gx,{size:16}),(0,Lx.jsxs)("span",{children:[null===c||void 0===c?void 0:c.address,", ",null===c||void 0===c?void 0:c.city]})]}),(0,Lx.jsx)("div",{className:"unit-status",children:(0,Lx.jsx)("span",{className:"status-badge ".concat(f(o.availability)),children:g(o.availability)})})]})]}),(0,Lx.jsx)("div",{className:"unit-actions",children:(0,Lx.jsxs)("button",{className:"btn-secondary",onClick:()=>m(!0),children:[(0,Lx.jsx)(DG,{size:16}),"Modifier"]})})]}),(0,Lx.jsxs)("div",{className:"unit-main-info",children:[(0,Lx.jsx)("div",{className:"price-card",children:(0,Lx.jsxs)("div",{className:"price-main",children:[(0,Lx.jsx)(Kx,{size:24}),(0,Lx.jsxs)("div",{className:"price-content",children:[(0,Lx.jsxs)("div",{className:"price-value",children:[o.price.toLocaleString(),"\u20ac"]}),o.pricePerSqm&&(0,Lx.jsxs)("div",{className:"price-per-sqm",children:[o.pricePerSqm.toLocaleString(),"\u20ac/m\xb2"]})]})]})}),(0,Lx.jsx)("div",{className:"specs-card",children:(0,Lx.jsxs)("div",{className:"specs-grid",children:[(0,Lx.jsxs)("div",{className:"spec-item",children:[(0,Lx.jsx)(Bx,{size:20}),(0,Lx.jsxs)("div",{className:"spec-content",children:[(0,Lx.jsxs)("div",{className:"spec-value",children:[o.surface,"m\xb2"]}),(0,Lx.jsx)("div",{className:"spec-label",children:"Surface"})]})]}),(0,Lx.jsxs)("div",{className:"spec-item",children:[(0,Lx.jsx)(ZY,{size:20}),(0,Lx.jsxs)("div",{className:"spec-content",children:[(0,Lx.jsx)("div",{className:"spec-value",children:o.rooms}),(0,Lx.jsx)("div",{className:"spec-label",children:"Pi\xe8ces"})]})]}),o.bedrooms&&(0,Lx.jsx)("div",{className:"spec-item",children:(0,Lx.jsxs)("div",{className:"spec-content",children:[(0,Lx.jsx)("div",{className:"spec-value",children:o.bedrooms}),(0,Lx.jsx)("div",{className:"spec-label",children:"Chambres"})]})}),o.bathrooms&&(0,Lx.jsxs)("div",{className:"spec-item",children:[(0,Lx.jsx)(eQ,{size:20}),(0,Lx.jsxs)("div",{className:"spec-content",children:[(0,Lx.jsx)("div",{className:"spec-value",children:o.bathrooms}),(0,Lx.jsx)("div",{className:"spec-label",children:"Salles de bain"})]})]})]})})]}),(0,Lx.jsxs)("div",{className:"unit-tabs",children:[(0,Lx.jsx)("button",{className:"tab ".concat("overview"===d?"active":""),onClick:()=>h("overview"),children:"Vue d'ensemble"}),(0,Lx.jsxs)("button",{className:"tab ".concat("gallery"===d?"active":""),onClick:()=>h("gallery"),children:[(0,Lx.jsx)(jG,{size:16}),"Galerie"]}),(0,Lx.jsxs)("button",{className:"tab ".concat("documents"===d?"active":""),onClick:()=>h("documents"),children:[(0,Lx.jsx)(GK,{size:16}),"Documents"]}),(0,Lx.jsxs)("button",{className:"tab ".concat("history"===d?"active":""),onClick:()=>h("history"),children:[(0,Lx.jsx)(Mx,{size:16}),"Historique"]})]}),(0,Lx.jsxs)("div",{className:"tab-content",children:["overview"===d&&(0,Lx.jsx)("div",{className:"overview-content",children:(0,Lx.jsxs)("div",{className:"overview-grid",children:[(0,Lx.jsxs)("div",{className:"overview-section",children:[(0,Lx.jsx)("h3",{children:"Description"}),(0,Lx.jsx)("p",{children:o.description||"Aucune description disponible."}),(0,Lx.jsx)("h3",{children:"Caract\xe9ristiques d\xe9taill\xe9es"}),(0,Lx.jsxs)("div",{className:"details-grid",children:[(0,Lx.jsxs)("div",{className:"detail-item",children:[(0,Lx.jsx)("label",{children:"Type de bien"}),(0,Lx.jsx)("span",{children:(e=>{switch(e){case"apartment":return"Appartement";case"house":return"Maison";case"commercial":return"Commercial";case"office":return"Bureau";case"retail":return"Commerce";case"storage":return"Stockage";case"parking":return"Parking";case"land":return"Terrain";default:return e}})(o.type)})]}),(0,Lx.jsxs)("div",{className:"detail-item",children:[(0,Lx.jsx)("label",{children:"Surface habitable"}),(0,Lx.jsxs)("span",{children:[o.surface,"m\xb2"]})]}),(0,Lx.jsxs)("div",{className:"detail-item",children:[(0,Lx.jsx)("label",{children:"Nombre de pi\xe8ces"}),(0,Lx.jsx)("span",{children:o.rooms})]}),o.bedrooms&&(0,Lx.jsxs)("div",{className:"detail-item",children:[(0,Lx.jsx)("label",{children:"Chambres"}),(0,Lx.jsx)("span",{children:o.bedrooms})]}),o.bathrooms&&(0,Lx.jsxs)("div",{className:"detail-item",children:[(0,Lx.jsx)("label",{children:"Salles de bain"}),(0,Lx.jsx)("span",{children:o.bathrooms})]}),void 0!==o.floor&&(0,Lx.jsxs)("div",{className:"detail-item",children:[(0,Lx.jsx)("label",{children:"\xc9tage"}),(0,Lx.jsx)("span",{children:0===o.floor?"Rez-de-chauss\xe9e":"".concat(o.floor,"e \xe9tage")})]}),o.orientation&&(0,Lx.jsxs)("div",{className:"detail-item",children:[(0,Lx.jsx)("label",{children:"Orientation"}),(0,Lx.jsx)("span",{children:(e=>{switch(e){case"north":return"Nord";case"south":return"Sud";case"east":return"Est";case"west":return"Ouest";case"north_south":return"Nord-Sud";case"east_west":return"Est-Ouest";default:return e}})(o.orientation)})]}),o.condition&&(0,Lx.jsxs)("div",{className:"detail-item",children:[(0,Lx.jsx)("label",{children:"\xc9tat du bien"}),(0,Lx.jsx)("span",{children:(e=>{switch(e){case"new":return"Neuf";case"excellent":return"Excellent";case"good":return"Bon";case"to_renovate":return"\xc0 r\xe9nover";case"to_demolish":return"\xc0 d\xe9molir";default:return e}})(o.condition)})]})]})]}),(0,Lx.jsxs)("div",{className:"overview-section",children:[(0,Lx.jsx)("h3",{children:"Informations financi\xe8res"}),(0,Lx.jsxs)("div",{className:"financial-info",children:[(0,Lx.jsxs)("div",{className:"financial-item",children:[(0,Lx.jsx)("label",{children:"Prix de vente"}),(0,Lx.jsxs)("span",{className:"price-highlight",children:[o.price.toLocaleString(),"\u20ac"]})]}),o.pricePerSqm&&(0,Lx.jsxs)("div",{className:"financial-item",children:[(0,Lx.jsx)("label",{children:"Prix au m\xb2"}),(0,Lx.jsxs)("span",{children:[o.pricePerSqm.toLocaleString(),"\u20ac/m\xb2"]})]}),(0,Lx.jsxs)("div",{className:"financial-item",children:[(0,Lx.jsx)("label",{children:"Statut"}),(0,Lx.jsx)("span",{className:"status-badge ".concat(f(o.availability)),children:g(o.availability)})]})]}),(0,Lx.jsx)("h3",{children:"Dates importantes"}),(0,Lx.jsxs)("div",{className:"dates-info",children:[(0,Lx.jsxs)("div",{className:"date-item",children:[(0,Lx.jsx)("label",{children:"Cr\xe9\xe9 le"}),(0,Lx.jsx)("span",{children:o.createdAt?new Date(o.createdAt).toLocaleDateString():"Non d\xe9fini"})]}),(0,Lx.jsxs)("div",{className:"date-item",children:[(0,Lx.jsx)("label",{children:"Derni\xe8re modification"}),(0,Lx.jsx)("span",{children:o.updatedAt?new Date(o.updatedAt).toLocaleDateString():"Non d\xe9fini"})]})]})]})]})}),"gallery"===d&&(0,Lx.jsx)("div",{className:"gallery-content",children:(0,Lx.jsxs)("div",{className:"gallery-placeholder",children:[(0,Lx.jsx)(jG,{size:48}),(0,Lx.jsx)("h3",{children:"Galerie photos"}),(0,Lx.jsx)("p",{children:"Aucune image disponible pour cette unit\xe9."}),(0,Lx.jsxs)("button",{className:"btn-primary",children:[(0,Lx.jsx)(Hx,{size:16}),"Ajouter des photos"]})]})}),"documents"===d&&(0,Lx.jsx)("div",{className:"documents-content",children:(0,Lx.jsxs)("div",{className:"documents-placeholder",children:[(0,Lx.jsx)(GK,{size:48}),(0,Lx.jsx)("h3",{children:"Documents de l'unit\xe9"}),(0,Lx.jsx)("p",{children:"Aucun document disponible pour cette unit\xe9."}),(0,Lx.jsxs)("button",{className:"btn-primary",children:[(0,Lx.jsx)(Hx,{size:16}),"Ajouter des documents"]})]})}),"history"===d&&(0,Lx.jsx)("div",{className:"history-content",children:(0,Lx.jsxs)("div",{className:"history-placeholder",children:[(0,Lx.jsx)(Mx,{size:48}),(0,Lx.jsx)("h3",{children:"Historique des modifications"}),(0,Lx.jsx)("p",{children:"Aucun historique disponible pour cette unit\xe9."})]})})]}),p&&(0,Lx.jsx)(oQ,{isOpen:p,onClose:()=>m(!1),unit:o,onSave:e=>{l(e),m(!1)}})]})},cQ=Px("Hammer",[["path",{d:"m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9",key:"1afvon"}],["path",{d:"M17.64 15 22 10.64",key:"zsji6s"}],["path",{d:"m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91",key:"lehyy1"}]]),uQ=Px("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),dQ=Px("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),hQ=Px("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),pQ=Px("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),mQ=Px("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),fQ=Px("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),gQ=Px("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);function vQ(e){let{isOpen:t,onClose:n,mode:i,onModeChange:a}=e;const[s,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1),[m,f]=(0,r.useState)(!1),{signIn:g,signUp:v,signInWithGoogle:y,error:x}=Sx();if(!t)return null;return(0,Lx.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,Lx.jsxs)("div",{className:"auth-modal",onClick:e=>e.stopPropagation(),children:[(0,Lx.jsxs)("div",{className:"auth-header",children:[(0,Lx.jsx)("h2",{children:"login"===i?"Connexion":"Inscription"}),(0,Lx.jsx)("button",{className:"close-button",onClick:n,children:(0,Lx.jsx)(HK,{size:20})})]}),(0,Lx.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),f(!0);try{"login"===i?await g(s,l):await v(s,l,u),n(),o(""),c(""),d("")}catch(x){console.error("Auth error:",x)}finally{f(!1)}},className:"auth-form",children:["register"===i&&(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"displayName",children:"Nom complet"}),(0,Lx.jsxs)("div",{className:"input-wrapper",children:[(0,Lx.jsx)(BY,{size:18,className:"input-icon"}),(0,Lx.jsx)("input",{type:"text",id:"displayName",value:u,onChange:e=>d(e.target.value),placeholder:"Votre nom complet",required:!0})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"email",children:"Email"}),(0,Lx.jsxs)("div",{className:"input-wrapper",children:[(0,Lx.jsx)(mQ,{size:18,className:"input-icon"}),(0,Lx.jsx)("input",{type:"email",id:"email",value:s,onChange:e=>o(e.target.value),placeholder:"votre@email.com",required:!0})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"password",children:"Mot de passe"}),(0,Lx.jsxs)("div",{className:"input-wrapper",children:[(0,Lx.jsx)(fQ,{size:18,className:"input-icon"}),(0,Lx.jsx)("input",{type:h?"text":"password",id:"password",value:l,onChange:e=>c(e.target.value),placeholder:"Votre mot de passe",required:!0,minLength:6}),(0,Lx.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>p(!h),children:h?(0,Lx.jsx)(gQ,{size:18}):(0,Lx.jsx)(PG,{size:18})})]})]}),x&&(0,Lx.jsx)("div",{className:"error-message",children:x}),(0,Lx.jsx)("button",{type:"submit",className:"auth-button",disabled:m,children:m?"Chargement...":"login"===i?"Se connecter":"S'inscrire"})]}),(0,Lx.jsx)("div",{className:"auth-divider",children:(0,Lx.jsx)("span",{children:"ou"})}),(0,Lx.jsxs)("button",{type:"button",className:"google-auth-button",onClick:async()=>{f(!0);try{await y(),n(),o(""),c(""),d("")}catch(x){console.error("Google auth error:",x)}finally{f(!1)}},disabled:m,children:[(0,Lx.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",className:"google-icon",children:[(0,Lx.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Lx.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Lx.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Lx.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"login"===i?"Se connecter avec Google":"S'inscrire avec Google"]}),(0,Lx.jsx)("div",{className:"auth-footer",children:(0,Lx.jsxs)("p",{children:["login"===i?"Pas encore de compte ?":"D\xe9j\xe0 un compte ?",(0,Lx.jsx)("button",{type:"button",className:"mode-switch",onClick:()=>{a("login"===i?"register":"login"),o(""),c(""),d("")},children:"login"===i?"S'inscrire":"Se connecter"})]})})]})})}function yQ(e){let{isOpen:t,onClose:n}=e;const{user:i}=Sx(),[a,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[p,m]=(0,r.useState)("profile"),[f,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1),[j,w]=(0,r.useState)({firstName:"David",lastName:"Meynet",email:(null===i||void 0===i?void 0:i.email)||"",phone:"",company:"",position:"",bio:""}),[N,k]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,r.useEffect)(()=>{t&&i&&C()},[t,i]);const C=async()=>{if(i){s(!0);try{const e=await Kh(Ud(kx,"users",i.uid));if(e.exists()){const t=e.data();w({firstName:t.firstName||"David",lastName:t.lastName||"Meynet",email:i.email||"",phone:t.phone||"",company:t.company||"",position:t.position||"",bio:t.bio||""})}}catch(c){console.error("Erreur lors du chargement du profil:",c),u("Erreur lors du chargement du profil")}finally{s(!1)}}};return t?(0,Lx.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,Lx.jsxs)("div",{className:"profile-modal",onClick:e=>e.stopPropagation(),children:[(0,Lx.jsxs)("div",{className:"modal-header",children:[(0,Lx.jsxs)("div",{className:"header-content",children:[(0,Lx.jsx)(BY,{size:24}),(0,Lx.jsx)("h2",{children:"Gestion du profil"})]}),(0,Lx.jsx)("button",{className:"close-btn",onClick:n,children:(0,Lx.jsx)(HK,{size:24})})]}),(0,Lx.jsxs)("div",{className:"modal-tabs",children:[(0,Lx.jsxs)("button",{className:"tab-btn ".concat("profile"===p?"active":""),onClick:()=>m("profile"),children:[(0,Lx.jsx)(BY,{size:18}),"Profil"]}),(0,Lx.jsxs)("button",{className:"tab-btn ".concat("security"===p?"active":""),onClick:()=>m("security"),children:[(0,Lx.jsx)(fQ,{size:18}),"S\xe9curit\xe9"]})]}),(0,Lx.jsxs)("div",{className:"modal-content",children:[c&&(0,Lx.jsxs)("div",{className:"alert error",children:[(0,Lx.jsx)(EY,{size:20}),(0,Lx.jsx)("span",{children:c})]}),d&&(0,Lx.jsxs)("div",{className:"alert success",children:[(0,Lx.jsx)(LG,{size:20}),(0,Lx.jsx)("span",{children:d})]}),a?(0,Lx.jsxs)("div",{className:"loading-state",children:[(0,Lx.jsx)(TY,{size:32,className:"spinning"}),(0,Lx.jsx)("p",{children:"Chargement du profil..."})]}):(0,Lx.jsxs)(Lx.Fragment,{children:["profile"===p&&(0,Lx.jsxs)("div",{className:"profile-section",children:[(0,Lx.jsxs)("div",{className:"profile-avatar",children:[(0,Lx.jsx)("div",{className:"avatar-placeholder",children:(0,Lx.jsx)(BY,{size:48})}),(0,Lx.jsxs)("button",{className:"avatar-upload",children:[(0,Lx.jsx)(XK,{size:16}),"Changer la photo"]})]}),(0,Lx.jsxs)("div",{className:"form-grid",children:[(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"firstName",children:"Pr\xe9nom"}),(0,Lx.jsx)("input",{id:"firstName",type:"text",value:j.firstName,onChange:e=>w(t=>Me(Me({},t),{},{firstName:e.target.value})),placeholder:"Votre pr\xe9nom"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"lastName",children:"Nom"}),(0,Lx.jsx)("input",{id:"lastName",type:"text",value:j.lastName,onChange:e=>w(t=>Me(Me({},t),{},{lastName:e.target.value})),placeholder:"Votre nom"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"email",children:"Email"}),(0,Lx.jsx)("input",{id:"email",type:"email",value:j.email,disabled:!0,className:"disabled"}),(0,Lx.jsx)("span",{className:"field-note",children:"L'email ne peut pas \xeatre modifi\xe9"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"phone",children:"T\xe9l\xe9phone"}),(0,Lx.jsx)("input",{id:"phone",type:"tel",value:j.phone,onChange:e=>w(t=>Me(Me({},t),{},{phone:e.target.value})),placeholder:"Votre num\xe9ro de t\xe9l\xe9phone"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"company",children:"Entreprise"}),(0,Lx.jsx)("input",{id:"company",type:"text",value:j.company,onChange:e=>w(t=>Me(Me({},t),{},{company:e.target.value})),placeholder:"Nom de votre entreprise"})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"position",children:"Poste"}),(0,Lx.jsx)("input",{id:"position",type:"text",value:j.position,onChange:e=>w(t=>Me(Me({},t),{},{position:e.target.value})),placeholder:"Votre poste"})]}),(0,Lx.jsxs)("div",{className:"form-group full-width",children:[(0,Lx.jsx)("label",{htmlFor:"bio",children:"Biographie"}),(0,Lx.jsx)("textarea",{id:"bio",value:j.bio,onChange:e=>w(t=>Me(Me({},t),{},{bio:e.target.value})),placeholder:"Parlez-nous de vous...",rows:4})]})]})]}),"security"===p&&(0,Lx.jsxs)("div",{className:"security-section",children:[(0,Lx.jsx)("h3",{children:"Changer le mot de passe"}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"currentPassword",children:"Mot de passe actuel"}),(0,Lx.jsxs)("div",{className:"password-input",children:[(0,Lx.jsx)("input",{id:"currentPassword",type:f?"text":"password",value:N.currentPassword,onChange:e=>k(t=>Me(Me({},t),{},{currentPassword:e.target.value})),placeholder:"Votre mot de passe actuel"}),(0,Lx.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>g(!f),children:f?(0,Lx.jsx)(gQ,{size:16}):(0,Lx.jsx)(PG,{size:16})})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"newPassword",children:"Nouveau mot de passe"}),(0,Lx.jsxs)("div",{className:"password-input",children:[(0,Lx.jsx)("input",{id:"newPassword",type:v?"text":"password",value:N.newPassword,onChange:e=>k(t=>Me(Me({},t),{},{newPassword:e.target.value})),placeholder:"Votre nouveau mot de passe"}),(0,Lx.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>y(!v),children:v?(0,Lx.jsx)(gQ,{size:16}):(0,Lx.jsx)(PG,{size:16})})]})]}),(0,Lx.jsxs)("div",{className:"form-group",children:[(0,Lx.jsx)("label",{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),(0,Lx.jsxs)("div",{className:"password-input",children:[(0,Lx.jsx)("input",{id:"confirmPassword",type:x?"text":"password",value:N.confirmPassword,onChange:e=>k(t=>Me(Me({},t),{},{confirmPassword:e.target.value})),placeholder:"Confirmez votre nouveau mot de passe"}),(0,Lx.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>b(!x),children:x?(0,Lx.jsx)(gQ,{size:16}):(0,Lx.jsx)(PG,{size:16})})]})]}),(0,Lx.jsxs)("div",{className:"password-requirements",children:[(0,Lx.jsx)("h4",{children:"Exigences du mot de passe :"}),(0,Lx.jsxs)("ul",{children:[(0,Lx.jsx)("li",{children:"Au moins 6 caract\xe8res"}),(0,Lx.jsx)("li",{children:"Recommand\xe9 : m\xe9lange de lettres, chiffres et symboles"})]})]})]})]})]}),(0,Lx.jsxs)("div",{className:"modal-actions",children:[(0,Lx.jsx)("button",{className:"cancel-btn",onClick:n,disabled:o,children:"Annuler"}),"profile"===p?(0,Lx.jsx)("button",{className:"save-btn",onClick:async()=>{if(i){l(!0),u(""),h("");try{await Dg(i,{displayName:"".concat(j.firstName," ").concat(j.lastName)}),await Xh(Ud(kx,"users",i.uid),{firstName:j.firstName,lastName:j.lastName,phone:j.phone,company:j.company,position:j.position,bio:j.bio,updatedAt:new Date}),h("Profil mis \xe0 jour avec succ\xe8s !"),setTimeout(()=>h(""),3e3)}catch(c){console.error("Erreur lors de la sauvegarde:",c),u("Erreur lors de la sauvegarde du profil")}finally{l(!1)}}},disabled:o,children:o?(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsx)(TY,{size:18,className:"spinning"}),"Sauvegarde..."]}):(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsx)($K,{size:18}),"Sauvegarder"]})}):(0,Lx.jsx)("button",{className:"save-btn",onClick:async()=>{if(i)if(N.newPassword===N.confirmPassword)if(N.newPassword.length<6)u("Le mot de passe doit contenir au moins 6 caract\xe8res");else{l(!0),u(""),h("");try{const e=fg.credential(i.email,N.currentPassword);await Ig(i,e),await function(e,t){return Mg(vt(e),null,t)}(i,N.newPassword),h("Mot de passe mis \xe0 jour avec succ\xe8s !"),k({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>h(""),3e3)}catch(c){console.error("Erreur lors du changement de mot de passe:",c),"auth/wrong-password"===c.code?u("Mot de passe actuel incorrect"):u("Erreur lors du changement de mot de passe")}finally{l(!1)}}else u("Les mots de passe ne correspondent pas")},disabled:o||!N.currentPassword||!N.newPassword||!N.confirmPassword,children:o?(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsx)(TY,{size:18,className:"spinning"}),"Mise \xe0 jour..."]}):(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsx)(fQ,{size:18}),"Changer le mot de passe"]})})]})]})}):null}function xQ(){var e;const t=Z(),n=te(),{user:i,logout:a}=Sx(),[s,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)("login"),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)("marketing"),[m,f]=(0,r.useState)(!1),g=[{path:"/analytics",icon:Rx,label:"Analytics"},{path:"/budget",icon:BK,label:"Budget"},{path:"/campaigns",icon:Yx,label:"Campagnes"},{path:"/calendar",icon:Mx,label:"Calendrier"},{path:"/homestaging",icon:cQ,label:"Home Staging"},{path:"/media",icon:jG,label:"M\xe9dia"},{path:"/social",icon:Ox,label:"R\xe9seaux Sociaux"}],v=[{path:"/projets",icon:JK,label:"Projets"},{path:"/gestion",icon:Vx,label:"Gestion"},{path:"/quotes",icon:GK,label:"Devis"},{path:"/settings",icon:uQ,label:"Param\xe8tres"}],y=[{path:"/supports",icon:UG,label:"Supports"}],x=[{path:"/globaltrade",icon:YK,label:"Global Trade"}];r.useEffect(()=>{const e=g.map(e=>e.path),n=v.map(e=>e.path),r=y.map(e=>e.path),i=x.map(e=>e.path);e.includes(t.pathname)?p("marketing"):n.includes(t.pathname)?p("immobilier"):r.includes(t.pathname)?p("stock"):i.includes(t.pathname)&&p("market")},[t.pathname]);const b=()=>{i?a():(c("login"),o(!0))},j=e=>{p(e),localStorage.setItem("activeSection",e),"marketing"===e||"immobilier"===e?n("/"):"stock"===e?n("/supports"):"market"===e&&n("/globaltrade"),window.dispatchEvent(new CustomEvent("sectionChanged",{detail:e}))},w=()=>{f(!1)};return(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsx)("div",{className:"mobile-overlay ".concat(m?"active":""),onClick:w}),(0,Lx.jsxs)("aside",{className:"sidebar ".concat(m?"mobile-open":""),children:[(0,Lx.jsxs)("div",{className:"sidebar-brand",children:[(0,Lx.jsx)("img",{src:"/immoteplogo.png",alt:"Immotep Logo",className:"sidebar-logo"}),(0,Lx.jsx)("h1",{children:"Immotep"})]}),(0,Lx.jsx)("div",{className:"sidebar-home",children:(0,Lx.jsxs)(Te,{to:"/",className:"sidebar-link ".concat("/"===t.pathname?"active":""),onClick:w,children:[(0,Lx.jsx)(Bx,{size:20}),(0,Lx.jsx)("span",{children:"Accueil"})]})}),(0,Lx.jsx)("div",{className:"sidebar-links",children:("marketing"===h?g:"immobilier"===h?v:"stock"===h?y:"market"===h?x:g).map(e=>{let{path:n,icon:r,label:i}=e;return(0,Lx.jsxs)(Te,{to:n,className:"sidebar-link ".concat(t.pathname===n?"active":""),onClick:w,children:[(0,Lx.jsx)(r,{size:20}),(0,Lx.jsx)("span",{children:i})]},n)})})]}),(0,Lx.jsxs)("header",{className:"top-header",children:[(0,Lx.jsx)("button",{className:"mobile-menu-btn",onClick:()=>{f(!m)},children:m?(0,Lx.jsx)(HK,{size:20}):(0,Lx.jsx)(dQ,{size:20})}),(0,Lx.jsxs)("div",{className:"section-tabs",children:[(0,Lx.jsxs)("button",{className:"section-tab ".concat("marketing"===h?"active":""),onClick:()=>j("marketing"),children:[(0,Lx.jsx)(Yx,{size:18}),(0,Lx.jsx)("span",{children:"Marketing"})]}),(0,Lx.jsxs)("button",{className:"section-tab ".concat("immobilier"===h?"active":""),onClick:()=>j("immobilier"),children:[(0,Lx.jsx)(JK,{size:18}),(0,Lx.jsx)("span",{children:"Immobilier"})]}),(0,Lx.jsxs)("button",{className:"section-tab ".concat("stock"===h?"active":""),onClick:()=>j("stock"),children:[(0,Lx.jsx)(UG,{size:18}),(0,Lx.jsx)("span",{children:"Stock"})]}),(0,Lx.jsxs)("button",{className:"section-tab ".concat("market"===h?"active":""),onClick:()=>j("market"),children:[(0,Lx.jsx)(YK,{size:18}),(0,Lx.jsx)("span",{children:"Market"})]})]}),(0,Lx.jsx)("div",{className:"header-user",children:i?(0,Lx.jsxs)("div",{className:"header-user-menu",children:[(0,Lx.jsxs)("div",{className:"header-user-info",onClick:()=>d(!0),children:[(0,Lx.jsx)(BY,{size:18}),(0,Lx.jsx)("span",{className:"header-user-name",children:i.displayName?i.displayName.split(" ")[0]:null===(e=i.email)||void 0===e?void 0:e.split("@")[0]})]}),(0,Lx.jsx)("button",{className:"header-logout-btn",onClick:b,children:(0,Lx.jsx)(hQ,{size:18})})]}):(0,Lx.jsxs)("button",{className:"header-auth-btn",onClick:b,children:[(0,Lx.jsx)(pQ,{size:18}),(0,Lx.jsx)("span",{children:"Connexion"})]})})]}),(0,Lx.jsx)(vQ,{isOpen:s,onClose:()=>o(!1),mode:l,onModeChange:c}),(0,Lx.jsx)(yQ,{isOpen:u,onClose:()=>d(!1)})]})}const bQ=Px("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),jQ=[{keywords:["bonjour","salut","hello","bonsoir"],response:"Bonjour ! Je suis votre assistant virtuel. Comment puis-je vous aider aujourd'hui ?"},{keywords:["aide","help","assistance"],response:"Je peux vous aider avec les fonctionnalit\xe9s de l'application : analytics, budget, calendrier, devis, home staging, m\xe9dias et gestion de projets. Que souhaitez-vous savoir ?"},{keywords:["analytics","analyse","statistiques"],response:"La section Analytics vous permet de visualiser les performances de vos projets avec des graphiques et des m\xe9triques d\xe9taill\xe9es."},{keywords:["budget","co\xfbt","prix","finance"],response:"Dans la section Budget, vous pouvez g\xe9rer vos finances, suivre les d\xe9penses et planifier les co\xfbts de vos projets immobiliers."},{keywords:["calendrier","planning","rendez-vous"],response:"Le calendrier vous permet de planifier vos rendez-vous, visites et \xe9ch\xe9ances importantes pour vos projets."},{keywords:["devis","quote","estimation"],response:"La section Devis vous aide \xe0 cr\xe9er et g\xe9rer des estimations pour vos clients et projets."},{keywords:["home staging","staging","d\xe9coration"],response:"Home Staging vous offre des outils pour planifier et visualiser l'am\xe9nagement et la d\xe9coration de vos biens immobiliers."},{keywords:["m\xe9dia","media","photo","image"],response:"La section M\xe9dias vous permet de g\xe9rer toutes vos photos, vid\xe9os et documents li\xe9s \xe0 vos projets immobiliers."},{keywords:["projet","gestion","management"],response:"La gestion de projets vous aide \xe0 organiser, suivre et coordonner tous vos projets immobiliers en cours."},{keywords:["merci","thanks","thank you"],response:"De rien ! N'h\xe9sitez pas si vous avez d'autres questions."},{keywords:["au revoir","bye","goodbye","\xe0 bient\xf4t"],response:"Au revoir ! \xc0 bient\xf4t pour de nouveaux projets !"}],wQ=()=>{const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)([{id:1,text:"Bonjour ! Je suis votre assistant virtuel. Comment puis-je vous aider ?",isUser:!1,timestamp:new Date}]),[a,s]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),c=(0,r.useRef)(null);(0,r.useEffect)(()=>{(()=>{var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()},[n]);const u=e=>{const t=e.toLowerCase();for(const n of jQ)if(n.keywords.some(e=>t.includes(e)))return n.response;return"Je ne suis pas s\xfbr de comprendre votre question. Pouvez-vous me demander des informations sur les analytics, le budget, le calendrier, les devis, le home staging, les m\xe9dias ou la gestion de projets ?"},d=async()=>{if(!a.trim())return;const e={id:Date.now(),text:a,isUser:!0,timestamp:new Date};i(t=>[...t,e]),s(""),l(!0),setTimeout(()=>{const e={id:Date.now()+1,text:u(a),isUser:!1,timestamp:new Date};i(t=>[...t,e]),l(!1)},1e3)},h=e=>e.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});return(0,Lx.jsxs)(Lx.Fragment,{children:[(0,Lx.jsx)("button",{className:"chatbot-toggle ".concat(e?"open":""),onClick:()=>t(!e),"aria-label":"Ouvrir le chatbot",children:e?(0,Lx.jsx)(HK,{size:24}):(0,Lx.jsx)(SY,{size:24})}),e&&(0,Lx.jsxs)("div",{className:"chatbot-window",children:[(0,Lx.jsxs)("div",{className:"chatbot-header",children:[(0,Lx.jsx)("h3",{children:"Assistant virtuel"}),(0,Lx.jsx)("button",{className:"chatbot-close",onClick:()=>t(!1),"aria-label":"Fermer le chatbot",children:(0,Lx.jsx)(HK,{size:20})})]}),(0,Lx.jsxs)("div",{className:"chatbot-messages",children:[n.map(e=>(0,Lx.jsx)("div",{className:"message ".concat(e.isUser?"user":"bot"),children:(0,Lx.jsxs)("div",{className:"message-content",children:[(0,Lx.jsx)("p",{children:e.text}),(0,Lx.jsx)("span",{className:"message-time",children:h(e.timestamp)})]})},e.id)),o&&(0,Lx.jsx)("div",{className:"message bot",children:(0,Lx.jsx)("div",{className:"message-content",children:(0,Lx.jsxs)("div",{className:"typing-indicator",children:[(0,Lx.jsx)("span",{}),(0,Lx.jsx)("span",{}),(0,Lx.jsx)("span",{})]})})}),(0,Lx.jsx)("div",{ref:c})]}),(0,Lx.jsxs)("div",{className:"chatbot-input",children:[(0,Lx.jsx)("input",{type:"text",value:a,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),d())},placeholder:"Tapez votre message...",disabled:o}),(0,Lx.jsx)("button",{onClick:d,disabled:!a.trim()||o,"aria-label":"Envoyer le message",children:(0,Lx.jsx)(bQ,{size:20})})]})]})]})},NQ=(0,r.createContext)(void 0),kQ=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(()=>localStorage.getItem("theme")||"light");(0,r.useEffect)(()=>{localStorage.setItem("theme",n),document.body.className="dark"===n?"dark-theme":"light-theme"},[n]);return(0,Lx.jsx)(NQ.Provider,{value:{theme:n,toggleTheme:()=>{i(e=>"light"===e?"dark":"light")}},children:t})},CQ=()=>{const{theme:e,toggleTheme:t}=(()=>{const e=(0,r.useContext)(NQ);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e})();return(0,Lx.jsx)("button",{className:"theme-toggle",onClick:t,"aria-label":"Basculer vers le mode ".concat("light"===e?"sombre":"clair"),title:"Mode ".concat("light"===e?"sombre":"clair"),children:(0,Lx.jsx)("div",{className:"theme-toggle-icon",children:"light"===e?(0,Lx.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Lx.jsx)("path",{d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.752-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}):(0,Lx.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Lx.jsx)("circle",{cx:"12",cy:"12",r:"5",stroke:"currentColor",strokeWidth:"1.5"}),(0,Lx.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,Lx.jsx)("line",{x1:"12",y1:"21",x2:"12",y2:"23",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,Lx.jsx)("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,Lx.jsx)("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,Lx.jsx)("line",{x1:"1",y1:"12",x2:"3",y2:"12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,Lx.jsx)("line",{x1:"21",y1:"12",x2:"23",y2:"12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,Lx.jsx)("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,Lx.jsx)("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})})})},SQ=(0,r.createContext)(void 0),EQ=[{id:"welcome",target:"nav",title:"Bienvenue dans ImmoApp ! \ud83c\udfe0",content:"D\xe9couvrons ensemble les fonctionnalit\xe9s principales de votre application immobili\xe8re.",placement:"bottom"},{id:"navigation",target:"nav",title:"Navigation principale",content:"Acc\xe9dez facilement \xe0 toutes les sections : Accueil, Analytics, Budget, Calendrier et plus encore.",placement:"right"},{id:"dashboard",target:".home-stats",title:"Tableau de bord",content:"Visualisez vos m\xe9triques cl\xe9s : revenus, d\xe9penses, projets actifs et performances.",placement:"bottom",page:"/"},{id:"projects",target:".projects-container",title:"Gestion des projets",content:"Cr\xe9ez et g\xe9rez vos projets immobiliers avec un suivi d\xe9taill\xe9.",placement:"top",page:"/projets"},{id:"budget",target:".budget-overview",title:"Suivi budg\xe9taire",content:"Contr\xf4lez vos finances avec des graphiques et analyses d\xe9taill\xe9es.",placement:"bottom",page:"/budget"},{id:"theme-toggle",target:".theme-toggle",title:"Mode sombre/clair",content:"Basculez entre le th\xe8me clair et sombre selon vos pr\xe9f\xe9rences.",placement:"top"},{id:"complete",target:"main",title:"F\xe9licitations ! \ud83c\udf89",content:"Vous \xeates maintenant pr\xeat \xe0 utiliser ImmoApp. Explorez les fonctionnalit\xe9s \xe0 votre rythme !",placement:"bottom"}];function TQ(e){let{children:t}=e;const[n,i]=(0,r.useState)(!1),[a,s]=(0,r.useState)(0),[o,l]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=localStorage.getItem("immoapp-tour-completed"),t=localStorage.getItem("immoapp-tour-skipped");if(!e&&!t){l(!0);const e=setTimeout(()=>{i(!0)},1e3);return()=>clearTimeout(e)}},[]);const c=()=>{i(!1),s(0),localStorage.setItem("immoapp-tour-completed","true")};return(0,Lx.jsx)(SQ.Provider,{value:{isActive:n,currentStep:a,steps:EQ,startTour:()=>{s(0),i(!0)},nextStep:()=>{a<EQ.length-1?s(e=>e+1):c()},prevStep:()=>{a>0&&s(e=>e-1)},skipTour:()=>{i(!1),localStorage.setItem("immoapp-tour-skipped","true")},completeTour:c,isFirstVisit:o},children:t})}function _Q(){const e=(0,r.useContext)(SQ);if(void 0===e)throw new Error("useTour must be used within a TourProvider");return e}function AQ(){const{isActive:e,currentStep:t,steps:n,nextStep:i,prevStep:a,skipTour:s,completeTour:o}=_Q(),[l,c]=(0,r.useState)(null),u=te(),d=Z(),h=n[t];(0,r.useEffect)(()=>{if(!e||!h)return;if(h.page&&d.pathname!==h.page)return void u(h.page);const t=()=>{const e=document.querySelector(h.target);e&&(c(e),e.scrollIntoView({behavior:"smooth",block:"center"}))};t();const n=setTimeout(t,500),r=()=>{l&&c(l)};return window.addEventListener("scroll",r),window.addEventListener("resize",r),()=>{clearTimeout(n),window.removeEventListener("scroll",r),window.removeEventListener("resize",r)}},[e,t,h,d.pathname,u,l]);const p=()=>{document.querySelectorAll(".tour-highlight").forEach(e=>{e.classList.remove("tour-highlight")}),s()};if(!e||!h)return null;const m=t===n.length-1,f=0===t;return(0,Lx.jsxs)(Lx.Fragment,{children:[l&&(()=>{const e=l.getBoundingClientRect();return(0,Lx.jsx)("div",{className:"tour-spotlight",style:{position:"fixed",top:e.top,left:e.left,width:e.width,height:e.height,pointerEvents:"none",zIndex:9999}})})(),(0,Lx.jsxs)("div",{className:"tour-tooltip","data-placement":h.placement||"bottom",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e4},children:[(0,Lx.jsx)("div",{className:"tour-arrow"}),(0,Lx.jsxs)("div",{className:"tour-content",children:[(0,Lx.jsxs)("div",{className:"tour-header",children:[(0,Lx.jsx)("h3",{className:"tour-title",children:h.title}),(0,Lx.jsx)("button",{className:"tour-close",onClick:p,"aria-label":"Fermer le tour",children:"\xd7"})]}),(0,Lx.jsx)("div",{className:"tour-body",children:(0,Lx.jsx)("p",{className:"tour-description",children:h.content})}),(0,Lx.jsxs)("div",{className:"tour-footer",children:[(0,Lx.jsxs)("div",{className:"tour-progress",children:[(0,Lx.jsxs)("span",{className:"tour-step-counter",children:[t+1," / ",n.length]}),(0,Lx.jsx)("div",{className:"tour-progress-bar",children:(0,Lx.jsx)("div",{className:"tour-progress-fill",style:{width:"".concat((t+1)/n.length*100,"%")}})})]}),(0,Lx.jsxs)("div",{className:"tour-actions",children:[!f&&(0,Lx.jsx)("button",{className:"tour-btn tour-btn-secondary",onClick:a,children:"Pr\xe9c\xe9dent"}),(0,Lx.jsx)("button",{className:"tour-btn tour-btn-secondary",onClick:p,children:"Passer"}),m?(0,Lx.jsx)("button",{className:"tour-btn tour-btn-primary",onClick:()=>{document.querySelectorAll(".tour-highlight").forEach(e=>{e.classList.remove("tour-highlight")}),o()},children:"Terminer"}):(0,Lx.jsx)("button",{className:"tour-btn tour-btn-primary",onClick:()=>{h.action&&h.action(),i()},children:"Suivant"})]})]})]})]})]})}function IQ(){const{startTour:e,isActive:t}=_Q();return t?null:(0,Lx.jsxs)("button",{className:"tour-start-button",onClick:e,title:"D\xe9marrer le tour guid\xe9",children:[(0,Lx.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Lx.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",fill:"currentColor"})}),(0,Lx.jsx)("span",{children:"Tour guid\xe9"})]})}const PQ=function(){return(0,Lx.jsx)(kQ,{children:(0,Lx.jsx)(TQ,{children:(0,Lx.jsxs)("div",{className:"App",children:[(0,Lx.jsx)(xQ,{}),(0,Lx.jsx)("div",{className:"app-layout",children:(0,Lx.jsx)("main",{className:"main-content",children:(0,Lx.jsxs)(xe,{children:[(0,Lx.jsx)(ve,{path:"/",element:(0,Lx.jsx)(Xx,{})}),(0,Lx.jsx)(ve,{path:"/analytics",element:(0,Lx.jsx)(UK,{})}),(0,Lx.jsx)(ve,{path:"/budget",element:(0,Lx.jsx)(fG,{})}),(0,Lx.jsx)(ve,{path:"/campaigns",element:(0,Lx.jsx)(FG,{})}),(0,Lx.jsx)(ve,{path:"/calendar",element:(0,Lx.jsx)(_G,{})}),(0,Lx.jsx)(ve,{path:"/quotes",element:(0,Lx.jsx)(eY,{})}),(0,Lx.jsx)(ve,{path:"/homestaging",element:(0,Lx.jsx)(uY,{})}),(0,Lx.jsx)(ve,{path:"/media",element:(0,Lx.jsx)(yY,{})}),(0,Lx.jsx)(ve,{path:"/social",element:(0,Lx.jsx)(MY,{})}),(0,Lx.jsx)(ve,{path:"/projets",element:(0,Lx.jsx)(XY,{})}),(0,Lx.jsx)(ve,{path:"/projects/:id",element:(0,Lx.jsx)(nQ,{})}),(0,Lx.jsx)(ve,{path:"/units/:id",element:(0,Lx.jsx)(lQ,{})}),(0,Lx.jsx)(ve,{path:"/gestion",element:(0,Lx.jsx)(HY,{})}),(0,Lx.jsx)(ve,{path:"/settings",element:(0,Lx.jsx)(VY,{})}),(0,Lx.jsx)(ve,{path:"/supports",element:(0,Lx.jsx)(HG,{})}),(0,Lx.jsx)(ve,{path:"/globaltrade",element:(0,Lx.jsx)(JG,{})})]})})}),(0,Lx.jsx)(CQ,{}),(0,Lx.jsx)(wQ,{}),(0,Lx.jsx)(AQ,{}),(0,Lx.jsx)(IQ,{})]})})})};a.createRoot(document.getElementById("root")).render((0,Lx.jsx)(r.StrictMode,{children:(0,Lx.jsx)(Ce,{children:(0,Lx.jsx)(PQ,{})})}))})()})();
//# sourceMappingURL=main.7827309b.js.map